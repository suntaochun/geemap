
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="A Python package for interactive mapping with Google Earth Engine">
      
      
        <meta name="author" content="Qiusheng Wu">
      
      
        <link rel="canonical" href="https://geemap.org/common/">
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-8.5.10">
    
    
      
        <title>common module - geemap</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.975780f9.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.2505c338.min.css">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Google+Sans:300,300i,400,400i,700,700i%7CRegular:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Google Sans";--md-code-font:"Regular"}</style>
      
    
    
      <link rel="stylesheet" href="../css/timeago.css">
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  


  <script id="__analytics">function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-H322CB6ZEC"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","G-H322CB6ZEC",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-H322CB6ZEC",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script>

  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent="">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#common-module" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="geemap" class="md-header__button md-logo" aria-label="geemap" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            geemap
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              common module
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent=""  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
            </label>
          
        
          
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/giswqs/geemap" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="geemap" class="md-nav__button md-logo" aria-label="geemap" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    geemap
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/giswqs/geemap" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="https://book.geemap.org" class="md-nav__link">
        Book
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../installation/" class="md-nav__link">
        Installation
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../get-started/" class="md-nav__link">
        Get Started
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../usage/" class="md-nav__link">
        Usage
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../cheatsheet/" class="md-nav__link">
        Cheat Sheet
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../tutorials/" class="md-nav__link">
        Tutorials
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="https://courses.geemap.org" class="md-nav__link">
        Courses
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../contributing/" class="md-nav__link">
        Contributing
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../citations/" class="md-nav__link">
        Citations
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../faq/" class="md-nav__link">
        FAQ
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../changelog/" class="md-nav__link">
        Changelog
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="https://streamlit.geemap.org" class="md-nav__link">
        Streamlit Web App
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="https://blog.gishub.org" class="md-nav__link">
        Blog
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="https://youtube.com/@giswqs" class="md-nav__link">
        YouTube Channel
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="https://github.com/giswqs/geemap/issues" class="md-nav__link">
        Report Issues
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_17" type="checkbox" id="__nav_17" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_17">
          API Reference
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="API Reference" data-md-level="1">
        <label class="md-nav__title" for="__nav_17">
          <span class="md-nav__icon md-icon"></span>
          API Reference
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../basemaps/" class="md-nav__link">
        basemaps module
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cartoee/" class="md-nav__link">
        cartoee module
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../chart/" class="md-nav__link">
        chart module
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../colormaps/" class="md-nav__link">
        colormaps module
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          common module
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        common module
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#geemap.common" class="md-nav__link">
    geemap.common
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.PlanetaryComputerEndpoint" class="md-nav__link">
    PlanetaryComputerEndpoint
  </a>
  
    <nav class="md-nav" aria-label="PlanetaryComputerEndpoint">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#geemap.common.PlanetaryComputerEndpoint.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.TitilerEndpoint" class="md-nav__link">
    TitilerEndpoint
  </a>
  
    <nav class="md-nav" aria-label="TitilerEndpoint">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#geemap.common.TitilerEndpoint.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.add_crs" class="md-nav__link">
    add_crs()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.adjust_longitude" class="md-nav__link">
    adjust_longitude()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.annual_NAIP" class="md-nav__link">
    annual_NAIP()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.api_docs" class="md-nav__link">
    api_docs()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.arc_active_map" class="md-nav__link">
    arc_active_map()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.arc_active_view" class="md-nav__link">
    arc_active_view()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.arc_add_layer" class="md-nav__link">
    arc_add_layer()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.arc_zoom_to_extent" class="md-nav__link">
    arc_zoom_to_extent()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.array_mean" class="md-nav__link">
    array_mean()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.array_sum" class="md-nav__link">
    array_sum()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.bands_to_image_collection" class="md-nav__link">
    bands_to_image_collection()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.bbox_coords" class="md-nav__link">
    bbox_coords()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.bbox_to_gdf" class="md-nav__link">
    bbox_to_gdf()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.bbox_to_geojson" class="md-nav__link">
    bbox_to_geojson()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.blend" class="md-nav__link">
    blend()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.build_api_tree" class="md-nav__link">
    build_api_tree()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.build_repo_tree" class="md-nav__link">
    build_repo_tree()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.check_cmap" class="md-nav__link">
    check_cmap()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.check_color" class="md-nav__link">
    check_color()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.check_dir" class="md-nav__link">
    check_dir()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.check_file_path" class="md-nav__link">
    check_file_path()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.check_git_install" class="md-nav__link">
    check_git_install()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.check_install" class="md-nav__link">
    check_install()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.check_titiler_endpoint" class="md-nav__link">
    check_titiler_endpoint()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.classify" class="md-nav__link">
    classify()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.clip_image" class="md-nav__link">
    clip_image()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.clone_github_repo" class="md-nav__link">
    clone_github_repo()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.clone_google_repo" class="md-nav__link">
    clone_google_repo()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.clone_repo" class="md-nav__link">
    clone_repo()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.cog_bands" class="md-nav__link">
    cog_bands()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.cog_bounds" class="md-nav__link">
    cog_bounds()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.cog_center" class="md-nav__link">
    cog_center()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.cog_info" class="md-nav__link">
    cog_info()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.cog_mosaic" class="md-nav__link">
    cog_mosaic()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.cog_mosaic_from_file" class="md-nav__link">
    cog_mosaic_from_file()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.cog_pixel_value" class="md-nav__link">
    cog_pixel_value()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.cog_stats" class="md-nav__link">
    cog_stats()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.cog_tile" class="md-nav__link">
    cog_tile()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.cog_validate" class="md-nav__link">
    cog_validate()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.column_stats" class="md-nav__link">
    column_stats()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.connect_postgis" class="md-nav__link">
    connect_postgis()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.convert_lidar" class="md-nav__link">
    convert_lidar()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.coords_to_geojson" class="md-nav__link">
    coords_to_geojson()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.copy_credentials_to_colab" class="md-nav__link">
    copy_credentials_to_colab()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.copy_credentials_to_drive" class="md-nav__link">
    copy_credentials_to_drive()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.create_code_cell" class="md-nav__link">
    create_code_cell()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.create_colorbar" class="md-nav__link">
    create_colorbar()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.create_contours" class="md-nav__link">
    create_contours()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.create_download_button" class="md-nav__link">
    create_download_button()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.create_download_link" class="md-nav__link">
    create_download_link()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.create_legend" class="md-nav__link">
    create_legend()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.create_nlcd_qml" class="md-nav__link">
    create_nlcd_qml()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.credentials_in_colab" class="md-nav__link">
    credentials_in_colab()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.credentials_in_drive" class="md-nav__link">
    credentials_in_drive()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.csv_points_to_shp" class="md-nav__link">
    csv_points_to_shp()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.csv_to_df" class="md-nav__link">
    csv_to_df()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.csv_to_ee" class="md-nav__link">
    csv_to_ee()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.csv_to_gdf" class="md-nav__link">
    csv_to_gdf()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.csv_to_geojson" class="md-nav__link">
    csv_to_geojson()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.csv_to_shp" class="md-nav__link">
    csv_to_shp()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.csv_to_vector" class="md-nav__link">
    csv_to_vector()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.date_sequence" class="md-nav__link">
    date_sequence()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.delete_shp" class="md-nav__link">
    delete_shp()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.df_to_ee" class="md-nav__link">
    df_to_ee()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.df_to_geojson" class="md-nav__link">
    df_to_geojson()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.dict_to_csv" class="md-nav__link">
    dict_to_csv()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.display_html" class="md-nav__link">
    display_html()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.download_ee_image" class="md-nav__link">
    download_ee_image()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.download_ee_image_collection" class="md-nav__link">
    download_ee_image_collection()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.download_ee_image_tiles" class="md-nav__link">
    download_ee_image_tiles()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.download_ee_video" class="md-nav__link">
    download_ee_video()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.download_file" class="md-nav__link">
    download_file()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.download_folder" class="md-nav__link">
    download_folder()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.download_from_gdrive" class="md-nav__link">
    download_from_gdrive()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.download_from_url" class="md-nav__link">
    download_from_url()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.download_ned" class="md-nav__link">
    download_ned()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.dynamic_world" class="md-nav__link">
    dynamic_world()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.dynamic_world_s2" class="md-nav__link">
    dynamic_world_s2()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.edit_download_html" class="md-nav__link">
    edit_download_html()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.ee_api_to_csv" class="md-nav__link">
    ee_api_to_csv()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.ee_data_html" class="md-nav__link">
    ee_data_html()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.ee_data_thumbnail" class="md-nav__link">
    ee_data_thumbnail()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.ee_export_geojson" class="md-nav__link">
    ee_export_geojson()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.ee_export_image" class="md-nav__link">
    ee_export_image()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.ee_export_image_collection" class="md-nav__link">
    ee_export_image_collection()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.ee_export_image_collection_to_asset" class="md-nav__link">
    ee_export_image_collection_to_asset()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.ee_export_image_collection_to_cloud_storage" class="md-nav__link">
    ee_export_image_collection_to_cloud_storage()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.ee_export_image_collection_to_drive" class="md-nav__link">
    ee_export_image_collection_to_drive()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.ee_export_image_to_asset" class="md-nav__link">
    ee_export_image_to_asset()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.ee_export_image_to_cloud_storage" class="md-nav__link">
    ee_export_image_to_cloud_storage()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.ee_export_image_to_drive" class="md-nav__link">
    ee_export_image_to_drive()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.ee_export_map_to_cloud_storage" class="md-nav__link">
    ee_export_map_to_cloud_storage()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.ee_export_vector" class="md-nav__link">
    ee_export_vector()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.ee_export_vector_to_asset" class="md-nav__link">
    ee_export_vector_to_asset()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.ee_export_vector_to_cloud_storage" class="md-nav__link">
    ee_export_vector_to_cloud_storage()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.ee_export_vector_to_drive" class="md-nav__link">
    ee_export_vector_to_drive()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.ee_export_vector_to_feature_view" class="md-nav__link">
    ee_export_vector_to_feature_view()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.ee_export_video_to_cloud_storage" class="md-nav__link">
    ee_export_video_to_cloud_storage()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.ee_export_video_to_dirve" class="md-nav__link">
    ee_export_video_to_dirve()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.ee_function_tree" class="md-nav__link">
    ee_function_tree()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.ee_initialize" class="md-nav__link">
    ee_initialize()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.ee_join_table" class="md-nav__link">
    ee_join_table()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.ee_num_round" class="md-nav__link">
    ee_num_round()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.ee_search" class="md-nav__link">
    ee_search()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.ee_to_csv" class="md-nav__link">
    ee_to_csv()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.ee_to_df" class="md-nav__link">
    ee_to_df()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.ee_to_gdf" class="md-nav__link">
    ee_to_gdf()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.ee_to_geojson" class="md-nav__link">
    ee_to_geojson()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.ee_to_geopandas" class="md-nav__link">
    ee_to_geopandas()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.ee_to_numpy" class="md-nav__link">
    ee_to_numpy()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.ee_to_pandas" class="md-nav__link">
    ee_to_pandas()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.ee_to_shp" class="md-nav__link">
    ee_to_shp()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.ee_user_id" class="md-nav__link">
    ee_user_id()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.ee_vector_style" class="md-nav__link">
    ee_vector_style()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.explode" class="md-nav__link">
    explode()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.extract_pixel_values" class="md-nav__link">
    extract_pixel_values()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.extract_transect" class="md-nav__link">
    extract_transect()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.extract_values_to_points" class="md-nav__link">
    extract_values_to_points()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.file_browser" class="md-nav__link">
    file_browser()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.filter_HUC08" class="md-nav__link">
    filter_HUC08()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.filter_HUC10" class="md-nav__link">
    filter_HUC10()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.filter_NWI" class="md-nav__link">
    filter_NWI()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.filter_polygons" class="md-nav__link">
    filter_polygons()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.find_HUC08" class="md-nav__link">
    find_HUC08()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.find_HUC10" class="md-nav__link">
    find_HUC10()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.find_NAIP" class="md-nav__link">
    find_NAIP()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.find_NWI" class="md-nav__link">
    find_NWI()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.find_landsat_by_path_row" class="md-nav__link">
    find_landsat_by_path_row()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.fishnet" class="md-nav__link">
    fishnet()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.gdf_bounds" class="md-nav__link">
    gdf_bounds()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.gdf_centroid" class="md-nav__link">
    gdf_centroid()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.gdf_geom_type" class="md-nav__link">
    gdf_geom_type()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.gdf_to_df" class="md-nav__link">
    gdf_to_df()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.gdf_to_ee" class="md-nav__link">
    gdf_to_ee()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.gdf_to_geojson" class="md-nav__link">
    gdf_to_geojson()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.geocode" class="md-nav__link">
    geocode()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.geojson_to_df" class="md-nav__link">
    geojson_to_df()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.geojson_to_ee" class="md-nav__link">
    geojson_to_ee()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.geometry_type" class="md-nav__link">
    geometry_type()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.geopandas_to_ee" class="md-nav__link">
    geopandas_to_ee()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.get_all_NAIP" class="md-nav__link">
    get_all_NAIP()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.get_annual_NAIP" class="md-nav__link">
    get_annual_NAIP()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.get_api_key" class="md-nav__link">
    get_api_key()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.get_bounds" class="md-nav__link">
    get_bounds()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.get_census_dict" class="md-nav__link">
    get_census_dict()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.get_center" class="md-nav__link">
    get_center()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.get_current_latlon" class="md-nav__link">
    get_current_latlon()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.get_direct_url" class="md-nav__link">
    get_direct_url()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.get_image_collection_thumbnails" class="md-nav__link">
    get_image_collection_thumbnails()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.get_image_thumbnail" class="md-nav__link">
    get_image_thumbnail()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.get_info" class="md-nav__link">
    get_info()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.get_local_tile_layer" class="md-nav__link">
    get_local_tile_layer()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.get_palettable" class="md-nav__link">
    get_palettable()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.get_palette_colors" class="md-nav__link">
    get_palette_colors()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.get_wms_layers" class="md-nav__link">
    get_wms_layers()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.github_raw_url" class="md-nav__link">
    github_raw_url()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.has_transparency" class="md-nav__link">
    has_transparency()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.hex_to_rgb" class="md-nav__link">
    hex_to_rgb()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.html_to_streamlit" class="md-nav__link">
    html_to_streamlit()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.image_area" class="md-nav__link">
    image_area()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.image_area_by_group" class="md-nav__link">
    image_area_by_group()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.image_band_names" class="md-nav__link">
    image_band_names()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.image_cell_size" class="md-nav__link">
    image_cell_size()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.image_convolution" class="md-nav__link">
    image_convolution()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.image_count" class="md-nav__link">
    image_count()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.image_date" class="md-nav__link">
    image_date()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.image_dates" class="md-nav__link">
    image_dates()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.image_histogram" class="md-nav__link">
    image_histogram()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.image_max_value" class="md-nav__link">
    image_max_value()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.image_mean_value" class="md-nav__link">
    image_mean_value()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.image_min_value" class="md-nav__link">
    image_min_value()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.image_props" class="md-nav__link">
    image_props()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.image_reclassify" class="md-nav__link">
    image_reclassify()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.image_scale" class="md-nav__link">
    image_scale()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.image_smoothing" class="md-nav__link">
    image_smoothing()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.image_stats" class="md-nav__link">
    image_stats()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.image_stats_by_zone" class="md-nav__link">
    image_stats_by_zone()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.image_std_value" class="md-nav__link">
    image_std_value()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.image_sum_value" class="md-nav__link">
    image_sum_value()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.image_to_cog" class="md-nav__link">
    image_to_cog()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.image_to_numpy" class="md-nav__link">
    image_to_numpy()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.image_value_list" class="md-nav__link">
    image_value_list()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.in_colab_shell" class="md-nav__link">
    in_colab_shell()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.install_from_github" class="md-nav__link">
    install_from_github()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.is_arcpy" class="md-nav__link">
    is_arcpy()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.is_drive_mounted" class="md-nav__link">
    is_drive_mounted()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.is_latlon_valid" class="md-nav__link">
    is_latlon_valid()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.is_tool" class="md-nav__link">
    is_tool()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.jrc_hist_monthly_history" class="md-nav__link">
    jrc_hist_monthly_history()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.kml_to_ee" class="md-nav__link">
    kml_to_ee()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.kml_to_geojson" class="md-nav__link">
    kml_to_geojson()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.kml_to_shp" class="md-nav__link">
    kml_to_shp()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.kmz_to_ee" class="md-nav__link">
    kmz_to_ee()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.latitude_grid" class="md-nav__link">
    latitude_grid()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.latlon_from_text" class="md-nav__link">
    latlon_from_text()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.latlon_grid" class="md-nav__link">
    latlon_grid()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.legend_from_ee" class="md-nav__link">
    legend_from_ee()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.list_vars" class="md-nav__link">
    list_vars()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.load_GeoTIFF" class="md-nav__link">
    load_GeoTIFF()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.load_GeoTIFFs" class="md-nav__link">
    load_GeoTIFFs()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.local_tile_bands" class="md-nav__link">
    local_tile_bands()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.local_tile_pixel_value" class="md-nav__link">
    local_tile_pixel_value()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.local_tile_vmin_vmax" class="md-nav__link">
    local_tile_vmin_vmax()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.longitude_grid" class="md-nav__link">
    longitude_grid()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.minimum_bounding_box" class="md-nav__link">
    minimum_bounding_box()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.mosaic" class="md-nav__link">
    mosaic()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.netcdf_tile_layer" class="md-nav__link">
    netcdf_tile_layer()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.netcdf_to_ee" class="md-nav__link">
    netcdf_to_ee()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.netcdf_to_tif" class="md-nav__link">
    netcdf_to_tif()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.num_round" class="md-nav__link">
    num_round()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.numpy_to_cog" class="md-nav__link">
    numpy_to_cog()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.numpy_to_ee" class="md-nav__link">
    numpy_to_ee()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.nwi_add_color" class="md-nav__link">
    nwi_add_color()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.open_github" class="md-nav__link">
    open_github()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.open_image_from_url" class="md-nav__link">
    open_image_from_url()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.open_youtube" class="md-nav__link">
    open_youtube()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.osm_to_ee" class="md-nav__link">
    osm_to_ee()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.osm_to_gdf" class="md-nav__link">
    osm_to_gdf()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.osm_to_geojson" class="md-nav__link">
    osm_to_geojson()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.osm_to_geopandas" class="md-nav__link">
    osm_to_geopandas()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.pandas_to_ee" class="md-nav__link">
    pandas_to_ee()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.planet_biannual_tiles_tropical" class="md-nav__link">
    planet_biannual_tiles_tropical()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.planet_biannual_tropical" class="md-nav__link">
    planet_biannual_tropical()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.planet_by_month" class="md-nav__link">
    planet_by_month()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.planet_by_quarter" class="md-nav__link">
    planet_by_quarter()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.planet_catalog" class="md-nav__link">
    planet_catalog()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.planet_catalog_tropical" class="md-nav__link">
    planet_catalog_tropical()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.planet_monthly" class="md-nav__link">
    planet_monthly()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.planet_monthly_tiles" class="md-nav__link">
    planet_monthly_tiles()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.planet_monthly_tiles_tropical" class="md-nav__link">
    planet_monthly_tiles_tropical()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.planet_monthly_tropical" class="md-nav__link">
    planet_monthly_tropical()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.planet_quarterly" class="md-nav__link">
    planet_quarterly()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.planet_quarterly_tiles" class="md-nav__link">
    planet_quarterly_tiles()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.planet_tile_by_month" class="md-nav__link">
    planet_tile_by_month()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.planet_tile_by_quarter" class="md-nav__link">
    planet_tile_by_quarter()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.planet_tiles" class="md-nav__link">
    planet_tiles()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.planet_tiles_tropical" class="md-nav__link">
    planet_tiles_tropical()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.plot_raster" class="md-nav__link">
    plot_raster()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.plot_raster_3d" class="md-nav__link">
    plot_raster_3d()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.png_to_gif" class="md-nav__link">
    png_to_gif()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.points_from_xy" class="md-nav__link">
    points_from_xy()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.postgis_to_ee" class="md-nav__link">
    postgis_to_ee()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.random_sampling" class="md-nav__link">
    random_sampling()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.random_string" class="md-nav__link">
    random_string()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.read_api_csv" class="md-nav__link">
    read_api_csv()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.read_file_from_url" class="md-nav__link">
    read_file_from_url()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.read_lidar" class="md-nav__link">
    read_lidar()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.read_netcdf" class="md-nav__link">
    read_netcdf()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.read_postgis" class="md-nav__link">
    read_postgis()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.remove_geometry" class="md-nav__link">
    remove_geometry()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.rename_bands" class="md-nav__link">
    rename_bands()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.reproject" class="md-nav__link">
    reproject()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.requireJS" class="md-nav__link">
    requireJS()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.rgb_to_hex" class="md-nav__link">
    rgb_to_hex()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.save_colorbar" class="md-nav__link">
    save_colorbar()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.screen_capture" class="md-nav__link">
    screen_capture()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.search_api_tree" class="md-nav__link">
    search_api_tree()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.search_ee_data" class="md-nav__link">
    search_ee_data()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.search_qms" class="md-nav__link">
    search_qms()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.search_xyz_services" class="md-nav__link">
    search_xyz_services()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.set_api_key" class="md-nav__link">
    set_api_key()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.set_proxy" class="md-nav__link">
    set_proxy()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.setupJS" class="md-nav__link">
    setupJS()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.show_html" class="md-nav__link">
    show_html()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.show_image" class="md-nav__link">
    show_image()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.show_youtube" class="md-nav__link">
    show_youtube()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.shp_to_ee" class="md-nav__link">
    shp_to_ee()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.shp_to_gdf" class="md-nav__link">
    shp_to_gdf()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.shp_to_geojson" class="md-nav__link">
    shp_to_geojson()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.shp_to_geopandas" class="md-nav__link">
    shp_to_geopandas()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.stac_assets" class="md-nav__link">
    stac_assets()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.stac_bands" class="md-nav__link">
    stac_bands()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.stac_bounds" class="md-nav__link">
    stac_bounds()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.stac_center" class="md-nav__link">
    stac_center()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.stac_info" class="md-nav__link">
    stac_info()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.stac_info_geojson" class="md-nav__link">
    stac_info_geojson()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.stac_pixel_value" class="md-nav__link">
    stac_pixel_value()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.stac_stats" class="md-nav__link">
    stac_stats()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.stac_tile" class="md-nav__link">
    stac_tile()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.str_to_num" class="md-nav__link">
    str_to_num()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.summarize_by_group" class="md-nav__link">
    summarize_by_group()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.summary_stats" class="md-nav__link">
    summary_stats()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.system_fonts" class="md-nav__link">
    system_fonts()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.temp_file_path" class="md-nav__link">
    temp_file_path()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.to_hex_colors" class="md-nav__link">
    to_hex_colors()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.update_package" class="md-nav__link">
    update_package()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.upload_to_imgur" class="md-nav__link">
    upload_to_imgur()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.use_mkdocs" class="md-nav__link">
    use_mkdocs()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.vec_area" class="md-nav__link">
    vec_area()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.vec_area_ha" class="md-nav__link">
    vec_area_ha()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.vec_area_km2" class="md-nav__link">
    vec_area_km2()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.vec_area_mi2" class="md-nav__link">
    vec_area_mi2()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.vector_centroids" class="md-nav__link">
    vector_centroids()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.vector_styling" class="md-nav__link">
    vector_styling()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.vector_to_ee" class="md-nav__link">
    vector_to_ee()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.vector_to_geojson" class="md-nav__link">
    vector_to_geojson()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.view_lidar" class="md-nav__link">
    view_lidar()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.vis_to_qml" class="md-nav__link">
    vis_to_qml()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.write_lidar" class="md-nav__link">
    write_lidar()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.xy_to_points" class="md-nav__link">
    xy_to_points()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.zonal_statistics" class="md-nav__link">
    zonal_statistics()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.zonal_statistics_by_group" class="md-nav__link">
    zonal_statistics_by_group()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.zonal_stats" class="md-nav__link">
    zonal_stats()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.zonal_stats_by_group" class="md-nav__link">
    zonal_stats_by_group()
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../conversion/" class="md-nav__link">
        conversion module
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../datasets/" class="md-nav__link">
        datasets module
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../deck/" class="md-nav__link">
        deck module
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../examples/" class="md-nav__link">
        examples module
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../foliumap/" class="md-nav__link">
        foliumap module
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../geemap/" class="md-nav__link">
        geemap module
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../heremap/" class="md-nav__link">
        heremap module
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../kepler/" class="md-nav__link">
        kepler module
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../legends/" class="md-nav__link">
        legends module
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ml/" class="md-nav__link">
        ml module
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../osm/" class="md-nav__link">
        osm module
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../plot/" class="md-nav__link">
        plot module
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../plotlymap/" class="md-nav__link">
        plotlymap module
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../timelapse/" class="md-nav__link">
        timelapse module
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../toolbar/" class="md-nav__link">
        toolbar module
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_18" type="checkbox" id="__nav_18" >
      
      
      
      
        <label class="md-nav__link" for="__nav_18">
          Workshops
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Workshops" data-md-level="1">
        <label class="md-nav__title" for="__nav_18">
          <span class="md-nav__icon md-icon"></span>
          Workshops
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../workshops/GeoPython_2021/" class="md-nav__link">
        GeoPython 2021
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../workshops/GEE_Workshop_2021/" class="md-nav__link">
        GEE Workshop 2021
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../workshops/SRM_Workshop_2022/" class="md-nav__link">
        SRM Workshop 2022
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../workshops/Crop_Mapping_2022/" class="md-nav__link">
        Crop Mapping 2022
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../workshops/Japan_2022/" class="md-nav__link">
        Japan 2022
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../workshops/GEE_Workshop_2022_Part1/" class="md-nav__link">
        GEE Workshop 2022 Part1
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../workshops/GEE_Workshop_2022_Part2/" class="md-nav__link">
        GEE Workshop 2022 Part2
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_19" type="checkbox" id="__nav_19" >
      
      
      
      
        <label class="md-nav__link" for="__nav_19">
          Notebooks
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Notebooks" data-md-level="1">
        <label class="md-nav__title" for="__nav_19">
          <span class="md-nav__icon md-icon"></span>
          Notebooks
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/00_geemap_key_features/" class="md-nav__link">
        00 geemap key features
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/01_geemap_intro/" class="md-nav__link">
        01 geemap intro
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/02_using_basemaps/" class="md-nav__link">
        02 using basemaps
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/03_inspector_tool/" class="md-nav__link">
        03 inspector tool
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/04_split_panel_map/" class="md-nav__link">
        04 split panel map
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/05_drawing_tools/" class="md-nav__link">
        05 drawing tools
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/06_marker_cluster/" class="md-nav__link">
        06 marker cluster
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/07_geojson/" class="md-nav__link">
        07 geojson
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/08_ee_js_to_ipynb/" class="md-nav__link">
        08 ee js to ipynb
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/09_plotting/" class="md-nav__link">
        09 plotting
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/10_shapefiles/" class="md-nav__link">
        10 shapefiles
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/11_export_image/" class="md-nav__link">
        11 export image
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/12_zonal_statistics/" class="md-nav__link">
        12 zonal statistics
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/13_zonal_statistics_by_group/" class="md-nav__link">
        13 zonal statistics by group
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/14_legends/" class="md-nav__link">
        14 legends
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/15_convert_js_to_py/" class="md-nav__link">
        15 convert js to py
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/16_add_animated_text/" class="md-nav__link">
        16 add animated text
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/17_add_colorbar_to_gif/" class="md-nav__link">
        17 add colorbar to gif
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/18_create_landsat_timelapse/" class="md-nav__link">
        18 create landsat timelapse
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/19_search_places_and_datasets/" class="md-nav__link">
        19 search places and datasets
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/20_timeseries_inspector/" class="md-nav__link">
        20 timeseries inspector
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/21_export_map_to_html_png/" class="md-nav__link">
        21 export map to html png
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/22_import_scripts/" class="md-nav__link">
        22 import scripts
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/23_import_assets/" class="md-nav__link">
        23 import assets
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/24_publish_maps/" class="md-nav__link">
        24 publish maps
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/25_load_rasters/" class="md-nav__link">
        25 load rasters
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/26_heroku/" class="md-nav__link">
        26 heroku
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/27_timelapse_app/" class="md-nav__link">
        27 timelapse app
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/28_voila/" class="md-nav__link">
        28 voila
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/29_pydeck/" class="md-nav__link">
        29 pydeck
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/30_image_props_stats/" class="md-nav__link">
        30 image props stats
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/31_unsupervised_classification/" class="md-nav__link">
        31 unsupervised classification
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/32_supervised_classification/" class="md-nav__link">
        32 supervised classification
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/33_accuracy_assessment/" class="md-nav__link">
        33 accuracy assessment
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/34_extract_values/" class="md-nav__link">
        34 extract values
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/35_geemap_colab/" class="md-nav__link">
        35 geemap colab
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/36_quality_mosaic/" class="md-nav__link">
        36 quality mosaic
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/37_pydeck_3d/" class="md-nav__link">
        37 pydeck 3d
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/38_cloud_geotiff/" class="md-nav__link">
        38 cloud geotiff
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/39_timelapse/" class="md-nav__link">
        39 timelapse
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/40_ipywidgets/" class="md-nav__link">
        40 ipywidgets
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/41_water_app/" class="md-nav__link">
        41 water app
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/42_upload_data/" class="md-nav__link">
        42 upload data
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/43_extract_values_to_points/" class="md-nav__link">
        43 extract values to points
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/44_cog_stac/" class="md-nav__link">
        44 cog stac
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/45_cog_mosaic/" class="md-nav__link">
        45 cog mosaic
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/46_local_rf_training/" class="md-nav__link">
        46 local rf training
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/47_image_thumbnails/" class="md-nav__link">
        47 image thumbnails
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/48_folium_legend/" class="md-nav__link">
        48 folium legend
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/49_colorbar/" class="md-nav__link">
        49 colorbar
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/50_cartoee_quickstart/" class="md-nav__link">
        50 cartoee quickstart
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/51_cartoee_projections/" class="md-nav__link">
        51 cartoee projections
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/52_cartoee_gif/" class="md-nav__link">
        52 cartoee gif
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/53_layer_vis/" class="md-nav__link">
        53 layer vis
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/54_vector_vis/" class="md-nav__link">
        54 vector vis
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/55_raster_vis/" class="md-nav__link">
        55 raster vis
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/56_local_data/" class="md-nav__link">
        56 local data
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/57_cartoee_blend/" class="md-nav__link">
        57 cartoee blend
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/58_add_vector/" class="md-nav__link">
        58 add vector
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/59_whitebox/" class="md-nav__link">
        59 whitebox
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/60_colormaps/" class="md-nav__link">
        60 colormaps
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/61_cartoee_scalebar/" class="md-nav__link">
        61 cartoee scalebar
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/62_time_slider/" class="md-nav__link">
        62 time slider
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/63_charts/" class="md-nav__link">
        63 charts
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/64_data_catalog/" class="md-nav__link">
        64 data catalog
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/65_vector_styling/" class="md-nav__link">
        65 vector styling
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/66_cartoee_legend/" class="md-nav__link">
        66 cartoee legend
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/67_training_samples/" class="md-nav__link">
        67 training samples
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/68_netcdf_to_ee/" class="md-nav__link">
        68 netcdf to ee
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/69_cartoee_vector/" class="md-nav__link">
        69 cartoee vector
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/70_linked_maps/" class="md-nav__link">
        70 linked maps
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/71_timelapse/" class="md-nav__link">
        71 timelapse
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/72_time_slider_gui/" class="md-nav__link">
        72 time slider gui
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/73_transect/" class="md-nav__link">
        73 transect
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/74_csv_to_points/" class="md-nav__link">
        74 csv to points
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/75_sankee/" class="md-nav__link">
        75 sankee
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/76_osm_to_ee/" class="md-nav__link">
        76 osm to ee
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/77_planet_imagery/" class="md-nav__link">
        77 planet imagery
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/78_ts_inspector/" class="md-nav__link">
        78 ts inspector
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/79_chart_histogram/" class="md-nav__link">
        79 chart histogram
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/80_point_layer/" class="md-nav__link">
        80 point layer
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/81_goes_timelapse/" class="md-nav__link">
        81 goes timelapse
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/82_contours/" class="md-nav__link">
        82 contours
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/83_local_tile/" class="md-nav__link">
        83 local tile
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/84_openstreetmap/" class="md-nav__link">
        84 openstreetmap
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/85_postgis/" class="md-nav__link">
        85 postgis
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/86_image_overlay/" class="md-nav__link">
        86 image overlay
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/87_add_points_from_xy/" class="md-nav__link">
        87 add points from xy
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/88_circle_markers/" class="md-nav__link">
        88 circle markers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/89_add_labels/" class="md-nav__link">
        89 add labels
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/90_naip_timelapse/" class="md-nav__link">
        90 naip timelapse
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/91_planetary_computer/" class="md-nav__link">
        91 planetary computer
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/92_plotly/" class="md-nav__link">
        92 plotly
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/93_cog_inspector/" class="md-nav__link">
        93 cog inspector
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/94_heremap/" class="md-nav__link">
        94 heremap
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/95_create_cog/" class="md-nav__link">
        95 create cog
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/96_image_chips/" class="md-nav__link">
        96 image chips
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/97_join_table/" class="md-nav__link">
        97 join table
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/98_timelapse_fading/" class="md-nav__link">
        98 timelapse fading
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/99_landsat_9/" class="md-nav__link">
        99 landsat 9
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/100_numpy_to_cog/" class="md-nav__link">
        100 numpy to cog
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/101_lidar/" class="md-nav__link">
        101 lidar
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/102_blend_hillshade/" class="md-nav__link">
        102 blend hillshade
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/103_split_control/" class="md-nav__link">
        103 split control
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/104_clip_image/" class="md-nav__link">
        104 clip image
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/105_netcdf/" class="md-nav__link">
        105 netcdf
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/106_kepler_gl/" class="md-nav__link">
        106 kepler gl
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/107_pydeck/" class="md-nav__link">
        107 pydeck
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/108_image_zonal_stats/" class="md-nav__link">
        108 image zonal stats
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/109_coordinate_grids/" class="md-nav__link">
        109 coordinate grids
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/110_choropleth/" class="md-nav__link">
        110 choropleth
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/111_image_count/" class="md-nav__link">
        111 image count
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/112_cartoee_basemap_X/" class="md-nav__link">
        112 cartoee basemap X
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/113_image_area/" class="md-nav__link">
        113 image area
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/114_dynamic_world/" class="md-nav__link">
        114 dynamic world
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/115_land_cover/" class="md-nav__link">
        115 land cover
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/116_land_cover_timeseries/" class="md-nav__link">
        116 land cover timeseries
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/117_fishnet/" class="md-nav__link">
        117 fishnet
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/118_download_image/" class="md-nav__link">
        118 download image
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/119_plot_raster/" class="md-nav__link">
        119 plot raster
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/120_javascript/" class="md-nav__link">
        120 javascript
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/121_vector_style/" class="md-nav__link">
        121 vector style
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/122_lidar/" class="md-nav__link">
        122 lidar
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/123_sentinel1_timelapse/" class="md-nav__link">
        123 sentinel1 timelapse
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/124_more_datasets/" class="md-nav__link">
        124 more datasets
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/125_example_code/" class="md-nav__link">
        125 example code
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/126_inspector/" class="md-nav__link">
        126 inspector
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/127_create_legend/" class="md-nav__link">
        127 create legend
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/128_add_widget/" class="md-nav__link">
        128 add widget
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/129_vector_to_gif/" class="md-nav__link">
        129 vector to gif
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/130_print_objects/" class="md-nav__link">
        130 print objects
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/131_arcgis/" class="md-nav__link">
        131 arcgis
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#geemap.common" class="md-nav__link">
    geemap.common
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.PlanetaryComputerEndpoint" class="md-nav__link">
    PlanetaryComputerEndpoint
  </a>
  
    <nav class="md-nav" aria-label="PlanetaryComputerEndpoint">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#geemap.common.PlanetaryComputerEndpoint.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.TitilerEndpoint" class="md-nav__link">
    TitilerEndpoint
  </a>
  
    <nav class="md-nav" aria-label="TitilerEndpoint">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#geemap.common.TitilerEndpoint.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.add_crs" class="md-nav__link">
    add_crs()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.adjust_longitude" class="md-nav__link">
    adjust_longitude()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.annual_NAIP" class="md-nav__link">
    annual_NAIP()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.api_docs" class="md-nav__link">
    api_docs()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.arc_active_map" class="md-nav__link">
    arc_active_map()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.arc_active_view" class="md-nav__link">
    arc_active_view()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.arc_add_layer" class="md-nav__link">
    arc_add_layer()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.arc_zoom_to_extent" class="md-nav__link">
    arc_zoom_to_extent()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.array_mean" class="md-nav__link">
    array_mean()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.array_sum" class="md-nav__link">
    array_sum()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.bands_to_image_collection" class="md-nav__link">
    bands_to_image_collection()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.bbox_coords" class="md-nav__link">
    bbox_coords()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.bbox_to_gdf" class="md-nav__link">
    bbox_to_gdf()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.bbox_to_geojson" class="md-nav__link">
    bbox_to_geojson()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.blend" class="md-nav__link">
    blend()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.build_api_tree" class="md-nav__link">
    build_api_tree()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.build_repo_tree" class="md-nav__link">
    build_repo_tree()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.check_cmap" class="md-nav__link">
    check_cmap()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.check_color" class="md-nav__link">
    check_color()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.check_dir" class="md-nav__link">
    check_dir()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.check_file_path" class="md-nav__link">
    check_file_path()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.check_git_install" class="md-nav__link">
    check_git_install()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.check_install" class="md-nav__link">
    check_install()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.check_titiler_endpoint" class="md-nav__link">
    check_titiler_endpoint()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.classify" class="md-nav__link">
    classify()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.clip_image" class="md-nav__link">
    clip_image()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.clone_github_repo" class="md-nav__link">
    clone_github_repo()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.clone_google_repo" class="md-nav__link">
    clone_google_repo()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.clone_repo" class="md-nav__link">
    clone_repo()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.cog_bands" class="md-nav__link">
    cog_bands()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.cog_bounds" class="md-nav__link">
    cog_bounds()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.cog_center" class="md-nav__link">
    cog_center()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.cog_info" class="md-nav__link">
    cog_info()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.cog_mosaic" class="md-nav__link">
    cog_mosaic()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.cog_mosaic_from_file" class="md-nav__link">
    cog_mosaic_from_file()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.cog_pixel_value" class="md-nav__link">
    cog_pixel_value()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.cog_stats" class="md-nav__link">
    cog_stats()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.cog_tile" class="md-nav__link">
    cog_tile()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.cog_validate" class="md-nav__link">
    cog_validate()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.column_stats" class="md-nav__link">
    column_stats()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.connect_postgis" class="md-nav__link">
    connect_postgis()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.convert_lidar" class="md-nav__link">
    convert_lidar()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.coords_to_geojson" class="md-nav__link">
    coords_to_geojson()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.copy_credentials_to_colab" class="md-nav__link">
    copy_credentials_to_colab()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.copy_credentials_to_drive" class="md-nav__link">
    copy_credentials_to_drive()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.create_code_cell" class="md-nav__link">
    create_code_cell()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.create_colorbar" class="md-nav__link">
    create_colorbar()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.create_contours" class="md-nav__link">
    create_contours()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.create_download_button" class="md-nav__link">
    create_download_button()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.create_download_link" class="md-nav__link">
    create_download_link()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.create_legend" class="md-nav__link">
    create_legend()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.create_nlcd_qml" class="md-nav__link">
    create_nlcd_qml()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.credentials_in_colab" class="md-nav__link">
    credentials_in_colab()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.credentials_in_drive" class="md-nav__link">
    credentials_in_drive()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.csv_points_to_shp" class="md-nav__link">
    csv_points_to_shp()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.csv_to_df" class="md-nav__link">
    csv_to_df()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.csv_to_ee" class="md-nav__link">
    csv_to_ee()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.csv_to_gdf" class="md-nav__link">
    csv_to_gdf()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.csv_to_geojson" class="md-nav__link">
    csv_to_geojson()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.csv_to_shp" class="md-nav__link">
    csv_to_shp()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.csv_to_vector" class="md-nav__link">
    csv_to_vector()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.date_sequence" class="md-nav__link">
    date_sequence()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.delete_shp" class="md-nav__link">
    delete_shp()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.df_to_ee" class="md-nav__link">
    df_to_ee()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.df_to_geojson" class="md-nav__link">
    df_to_geojson()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.dict_to_csv" class="md-nav__link">
    dict_to_csv()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.display_html" class="md-nav__link">
    display_html()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.download_ee_image" class="md-nav__link">
    download_ee_image()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.download_ee_image_collection" class="md-nav__link">
    download_ee_image_collection()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.download_ee_image_tiles" class="md-nav__link">
    download_ee_image_tiles()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.download_ee_video" class="md-nav__link">
    download_ee_video()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.download_file" class="md-nav__link">
    download_file()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.download_folder" class="md-nav__link">
    download_folder()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.download_from_gdrive" class="md-nav__link">
    download_from_gdrive()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.download_from_url" class="md-nav__link">
    download_from_url()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.download_ned" class="md-nav__link">
    download_ned()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.dynamic_world" class="md-nav__link">
    dynamic_world()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.dynamic_world_s2" class="md-nav__link">
    dynamic_world_s2()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.edit_download_html" class="md-nav__link">
    edit_download_html()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.ee_api_to_csv" class="md-nav__link">
    ee_api_to_csv()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.ee_data_html" class="md-nav__link">
    ee_data_html()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.ee_data_thumbnail" class="md-nav__link">
    ee_data_thumbnail()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.ee_export_geojson" class="md-nav__link">
    ee_export_geojson()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.ee_export_image" class="md-nav__link">
    ee_export_image()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.ee_export_image_collection" class="md-nav__link">
    ee_export_image_collection()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.ee_export_image_collection_to_asset" class="md-nav__link">
    ee_export_image_collection_to_asset()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.ee_export_image_collection_to_cloud_storage" class="md-nav__link">
    ee_export_image_collection_to_cloud_storage()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.ee_export_image_collection_to_drive" class="md-nav__link">
    ee_export_image_collection_to_drive()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.ee_export_image_to_asset" class="md-nav__link">
    ee_export_image_to_asset()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.ee_export_image_to_cloud_storage" class="md-nav__link">
    ee_export_image_to_cloud_storage()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.ee_export_image_to_drive" class="md-nav__link">
    ee_export_image_to_drive()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.ee_export_map_to_cloud_storage" class="md-nav__link">
    ee_export_map_to_cloud_storage()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.ee_export_vector" class="md-nav__link">
    ee_export_vector()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.ee_export_vector_to_asset" class="md-nav__link">
    ee_export_vector_to_asset()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.ee_export_vector_to_cloud_storage" class="md-nav__link">
    ee_export_vector_to_cloud_storage()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.ee_export_vector_to_drive" class="md-nav__link">
    ee_export_vector_to_drive()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.ee_export_vector_to_feature_view" class="md-nav__link">
    ee_export_vector_to_feature_view()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.ee_export_video_to_cloud_storage" class="md-nav__link">
    ee_export_video_to_cloud_storage()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.ee_export_video_to_dirve" class="md-nav__link">
    ee_export_video_to_dirve()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.ee_function_tree" class="md-nav__link">
    ee_function_tree()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.ee_initialize" class="md-nav__link">
    ee_initialize()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.ee_join_table" class="md-nav__link">
    ee_join_table()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.ee_num_round" class="md-nav__link">
    ee_num_round()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.ee_search" class="md-nav__link">
    ee_search()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.ee_to_csv" class="md-nav__link">
    ee_to_csv()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.ee_to_df" class="md-nav__link">
    ee_to_df()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.ee_to_gdf" class="md-nav__link">
    ee_to_gdf()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.ee_to_geojson" class="md-nav__link">
    ee_to_geojson()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.ee_to_geopandas" class="md-nav__link">
    ee_to_geopandas()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.ee_to_numpy" class="md-nav__link">
    ee_to_numpy()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.ee_to_pandas" class="md-nav__link">
    ee_to_pandas()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.ee_to_shp" class="md-nav__link">
    ee_to_shp()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.ee_user_id" class="md-nav__link">
    ee_user_id()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.ee_vector_style" class="md-nav__link">
    ee_vector_style()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.explode" class="md-nav__link">
    explode()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.extract_pixel_values" class="md-nav__link">
    extract_pixel_values()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.extract_transect" class="md-nav__link">
    extract_transect()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.extract_values_to_points" class="md-nav__link">
    extract_values_to_points()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.file_browser" class="md-nav__link">
    file_browser()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.filter_HUC08" class="md-nav__link">
    filter_HUC08()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.filter_HUC10" class="md-nav__link">
    filter_HUC10()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.filter_NWI" class="md-nav__link">
    filter_NWI()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.filter_polygons" class="md-nav__link">
    filter_polygons()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.find_HUC08" class="md-nav__link">
    find_HUC08()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.find_HUC10" class="md-nav__link">
    find_HUC10()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.find_NAIP" class="md-nav__link">
    find_NAIP()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.find_NWI" class="md-nav__link">
    find_NWI()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.find_landsat_by_path_row" class="md-nav__link">
    find_landsat_by_path_row()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.fishnet" class="md-nav__link">
    fishnet()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.gdf_bounds" class="md-nav__link">
    gdf_bounds()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.gdf_centroid" class="md-nav__link">
    gdf_centroid()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.gdf_geom_type" class="md-nav__link">
    gdf_geom_type()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.gdf_to_df" class="md-nav__link">
    gdf_to_df()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.gdf_to_ee" class="md-nav__link">
    gdf_to_ee()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.gdf_to_geojson" class="md-nav__link">
    gdf_to_geojson()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.geocode" class="md-nav__link">
    geocode()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.geojson_to_df" class="md-nav__link">
    geojson_to_df()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.geojson_to_ee" class="md-nav__link">
    geojson_to_ee()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.geometry_type" class="md-nav__link">
    geometry_type()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.geopandas_to_ee" class="md-nav__link">
    geopandas_to_ee()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.get_all_NAIP" class="md-nav__link">
    get_all_NAIP()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.get_annual_NAIP" class="md-nav__link">
    get_annual_NAIP()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.get_api_key" class="md-nav__link">
    get_api_key()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.get_bounds" class="md-nav__link">
    get_bounds()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.get_census_dict" class="md-nav__link">
    get_census_dict()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.get_center" class="md-nav__link">
    get_center()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.get_current_latlon" class="md-nav__link">
    get_current_latlon()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.get_direct_url" class="md-nav__link">
    get_direct_url()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.get_image_collection_thumbnails" class="md-nav__link">
    get_image_collection_thumbnails()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.get_image_thumbnail" class="md-nav__link">
    get_image_thumbnail()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.get_info" class="md-nav__link">
    get_info()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.get_local_tile_layer" class="md-nav__link">
    get_local_tile_layer()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.get_palettable" class="md-nav__link">
    get_palettable()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.get_palette_colors" class="md-nav__link">
    get_palette_colors()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.get_wms_layers" class="md-nav__link">
    get_wms_layers()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.github_raw_url" class="md-nav__link">
    github_raw_url()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.has_transparency" class="md-nav__link">
    has_transparency()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.hex_to_rgb" class="md-nav__link">
    hex_to_rgb()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.html_to_streamlit" class="md-nav__link">
    html_to_streamlit()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.image_area" class="md-nav__link">
    image_area()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.image_area_by_group" class="md-nav__link">
    image_area_by_group()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.image_band_names" class="md-nav__link">
    image_band_names()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.image_cell_size" class="md-nav__link">
    image_cell_size()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.image_convolution" class="md-nav__link">
    image_convolution()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.image_count" class="md-nav__link">
    image_count()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.image_date" class="md-nav__link">
    image_date()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.image_dates" class="md-nav__link">
    image_dates()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.image_histogram" class="md-nav__link">
    image_histogram()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.image_max_value" class="md-nav__link">
    image_max_value()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.image_mean_value" class="md-nav__link">
    image_mean_value()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.image_min_value" class="md-nav__link">
    image_min_value()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.image_props" class="md-nav__link">
    image_props()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.image_reclassify" class="md-nav__link">
    image_reclassify()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.image_scale" class="md-nav__link">
    image_scale()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.image_smoothing" class="md-nav__link">
    image_smoothing()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.image_stats" class="md-nav__link">
    image_stats()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.image_stats_by_zone" class="md-nav__link">
    image_stats_by_zone()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.image_std_value" class="md-nav__link">
    image_std_value()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.image_sum_value" class="md-nav__link">
    image_sum_value()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.image_to_cog" class="md-nav__link">
    image_to_cog()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.image_to_numpy" class="md-nav__link">
    image_to_numpy()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.image_value_list" class="md-nav__link">
    image_value_list()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.in_colab_shell" class="md-nav__link">
    in_colab_shell()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.install_from_github" class="md-nav__link">
    install_from_github()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.is_arcpy" class="md-nav__link">
    is_arcpy()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.is_drive_mounted" class="md-nav__link">
    is_drive_mounted()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.is_latlon_valid" class="md-nav__link">
    is_latlon_valid()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.is_tool" class="md-nav__link">
    is_tool()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.jrc_hist_monthly_history" class="md-nav__link">
    jrc_hist_monthly_history()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.kml_to_ee" class="md-nav__link">
    kml_to_ee()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.kml_to_geojson" class="md-nav__link">
    kml_to_geojson()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.kml_to_shp" class="md-nav__link">
    kml_to_shp()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.kmz_to_ee" class="md-nav__link">
    kmz_to_ee()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.latitude_grid" class="md-nav__link">
    latitude_grid()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.latlon_from_text" class="md-nav__link">
    latlon_from_text()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.latlon_grid" class="md-nav__link">
    latlon_grid()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.legend_from_ee" class="md-nav__link">
    legend_from_ee()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.list_vars" class="md-nav__link">
    list_vars()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.load_GeoTIFF" class="md-nav__link">
    load_GeoTIFF()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.load_GeoTIFFs" class="md-nav__link">
    load_GeoTIFFs()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.local_tile_bands" class="md-nav__link">
    local_tile_bands()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.local_tile_pixel_value" class="md-nav__link">
    local_tile_pixel_value()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.local_tile_vmin_vmax" class="md-nav__link">
    local_tile_vmin_vmax()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.longitude_grid" class="md-nav__link">
    longitude_grid()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.minimum_bounding_box" class="md-nav__link">
    minimum_bounding_box()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.mosaic" class="md-nav__link">
    mosaic()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.netcdf_tile_layer" class="md-nav__link">
    netcdf_tile_layer()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.netcdf_to_ee" class="md-nav__link">
    netcdf_to_ee()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.netcdf_to_tif" class="md-nav__link">
    netcdf_to_tif()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.num_round" class="md-nav__link">
    num_round()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.numpy_to_cog" class="md-nav__link">
    numpy_to_cog()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.numpy_to_ee" class="md-nav__link">
    numpy_to_ee()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.nwi_add_color" class="md-nav__link">
    nwi_add_color()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.open_github" class="md-nav__link">
    open_github()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.open_image_from_url" class="md-nav__link">
    open_image_from_url()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.open_youtube" class="md-nav__link">
    open_youtube()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.osm_to_ee" class="md-nav__link">
    osm_to_ee()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.osm_to_gdf" class="md-nav__link">
    osm_to_gdf()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.osm_to_geojson" class="md-nav__link">
    osm_to_geojson()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.osm_to_geopandas" class="md-nav__link">
    osm_to_geopandas()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.pandas_to_ee" class="md-nav__link">
    pandas_to_ee()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.planet_biannual_tiles_tropical" class="md-nav__link">
    planet_biannual_tiles_tropical()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.planet_biannual_tropical" class="md-nav__link">
    planet_biannual_tropical()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.planet_by_month" class="md-nav__link">
    planet_by_month()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.planet_by_quarter" class="md-nav__link">
    planet_by_quarter()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.planet_catalog" class="md-nav__link">
    planet_catalog()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.planet_catalog_tropical" class="md-nav__link">
    planet_catalog_tropical()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.planet_monthly" class="md-nav__link">
    planet_monthly()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.planet_monthly_tiles" class="md-nav__link">
    planet_monthly_tiles()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.planet_monthly_tiles_tropical" class="md-nav__link">
    planet_monthly_tiles_tropical()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.planet_monthly_tropical" class="md-nav__link">
    planet_monthly_tropical()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.planet_quarterly" class="md-nav__link">
    planet_quarterly()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.planet_quarterly_tiles" class="md-nav__link">
    planet_quarterly_tiles()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.planet_tile_by_month" class="md-nav__link">
    planet_tile_by_month()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.planet_tile_by_quarter" class="md-nav__link">
    planet_tile_by_quarter()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.planet_tiles" class="md-nav__link">
    planet_tiles()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.planet_tiles_tropical" class="md-nav__link">
    planet_tiles_tropical()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.plot_raster" class="md-nav__link">
    plot_raster()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.plot_raster_3d" class="md-nav__link">
    plot_raster_3d()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.png_to_gif" class="md-nav__link">
    png_to_gif()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.points_from_xy" class="md-nav__link">
    points_from_xy()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.postgis_to_ee" class="md-nav__link">
    postgis_to_ee()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.random_sampling" class="md-nav__link">
    random_sampling()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.random_string" class="md-nav__link">
    random_string()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.read_api_csv" class="md-nav__link">
    read_api_csv()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.read_file_from_url" class="md-nav__link">
    read_file_from_url()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.read_lidar" class="md-nav__link">
    read_lidar()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.read_netcdf" class="md-nav__link">
    read_netcdf()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.read_postgis" class="md-nav__link">
    read_postgis()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.remove_geometry" class="md-nav__link">
    remove_geometry()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.rename_bands" class="md-nav__link">
    rename_bands()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.reproject" class="md-nav__link">
    reproject()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.requireJS" class="md-nav__link">
    requireJS()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.rgb_to_hex" class="md-nav__link">
    rgb_to_hex()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.save_colorbar" class="md-nav__link">
    save_colorbar()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.screen_capture" class="md-nav__link">
    screen_capture()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.search_api_tree" class="md-nav__link">
    search_api_tree()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.search_ee_data" class="md-nav__link">
    search_ee_data()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.search_qms" class="md-nav__link">
    search_qms()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.search_xyz_services" class="md-nav__link">
    search_xyz_services()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.set_api_key" class="md-nav__link">
    set_api_key()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.set_proxy" class="md-nav__link">
    set_proxy()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.setupJS" class="md-nav__link">
    setupJS()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.show_html" class="md-nav__link">
    show_html()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.show_image" class="md-nav__link">
    show_image()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.show_youtube" class="md-nav__link">
    show_youtube()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.shp_to_ee" class="md-nav__link">
    shp_to_ee()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.shp_to_gdf" class="md-nav__link">
    shp_to_gdf()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.shp_to_geojson" class="md-nav__link">
    shp_to_geojson()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.shp_to_geopandas" class="md-nav__link">
    shp_to_geopandas()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.stac_assets" class="md-nav__link">
    stac_assets()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.stac_bands" class="md-nav__link">
    stac_bands()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.stac_bounds" class="md-nav__link">
    stac_bounds()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.stac_center" class="md-nav__link">
    stac_center()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.stac_info" class="md-nav__link">
    stac_info()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.stac_info_geojson" class="md-nav__link">
    stac_info_geojson()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.stac_pixel_value" class="md-nav__link">
    stac_pixel_value()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.stac_stats" class="md-nav__link">
    stac_stats()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.stac_tile" class="md-nav__link">
    stac_tile()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.str_to_num" class="md-nav__link">
    str_to_num()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.summarize_by_group" class="md-nav__link">
    summarize_by_group()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.summary_stats" class="md-nav__link">
    summary_stats()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.system_fonts" class="md-nav__link">
    system_fonts()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.temp_file_path" class="md-nav__link">
    temp_file_path()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.to_hex_colors" class="md-nav__link">
    to_hex_colors()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.update_package" class="md-nav__link">
    update_package()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.upload_to_imgur" class="md-nav__link">
    upload_to_imgur()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.use_mkdocs" class="md-nav__link">
    use_mkdocs()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.vec_area" class="md-nav__link">
    vec_area()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.vec_area_ha" class="md-nav__link">
    vec_area_ha()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.vec_area_km2" class="md-nav__link">
    vec_area_km2()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.vec_area_mi2" class="md-nav__link">
    vec_area_mi2()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.vector_centroids" class="md-nav__link">
    vector_centroids()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.vector_styling" class="md-nav__link">
    vector_styling()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.vector_to_ee" class="md-nav__link">
    vector_to_ee()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.vector_to_geojson" class="md-nav__link">
    vector_to_geojson()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.view_lidar" class="md-nav__link">
    view_lidar()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.vis_to_qml" class="md-nav__link">
    vis_to_qml()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.write_lidar" class="md-nav__link">
    write_lidar()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.xy_to_points" class="md-nav__link">
    xy_to_points()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.zonal_statistics" class="md-nav__link">
    zonal_statistics()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.zonal_statistics_by_group" class="md-nav__link">
    zonal_statistics_by_group()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.zonal_stats" class="md-nav__link">
    zonal_stats()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.common.zonal_stats_by_group" class="md-nav__link">
    zonal_stats_by_group()
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                



                  

  <a href="https://github.com/giswqs/geemap/edit/master/docs/common.md" title="Edit this page" class="md-content__button md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>


<h1 id="common-module">common module<a class="headerlink" href="#common-module" title="Permanent link">&para;</a></h1>


  <div class="doc doc-object doc-module">

<a id="geemap.common"></a>
    <div class="doc doc-contents first">

      <p>This module contains some common functions for both folium and ipyleaflet to interact with the Earth Engine Python API.</p>



  <div class="doc doc-children">







  <div class="doc doc-object doc-class">



<h2 id="geemap.common.PlanetaryComputerEndpoint" class="doc doc-heading">
        <code>
PlanetaryComputerEndpoint            (<a class="autorefs autorefs-internal" title="geemap.common.TitilerEndpoint" href="#geemap.common.TitilerEndpoint">TitilerEndpoint</a>)
        </code>



<a href="#geemap.common.PlanetaryComputerEndpoint" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>This class contains the methods for the Microsoft Planetary Computer endpoint.</p>

        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">PlanetaryComputerEndpoint</span><span class="p">(</span><span class="n">TitilerEndpoint</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;This class contains the methods for the Microsoft Planetary Computer endpoint.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">endpoint</span><span class="o">=</span><span class="s2">&quot;https://planetarycomputer.microsoft.com/api/data/v1&quot;</span><span class="p">,</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;item&quot;</span><span class="p">,</span>
        <span class="n">TileMatrixSetId</span><span class="o">=</span><span class="s2">&quot;WebMercatorQuad&quot;</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Initialize the PlanetaryComputerEndpoint object.</span>

<span class="sd">        Args:</span>
<span class="sd">            endpoint (str, optional): The endpoint of the titiler server. Defaults to &quot;https://planetarycomputer.microsoft.com/api/data/v1&quot;.</span>
<span class="sd">            name (str, optional): The name to be used in the file path. Defaults to &quot;item&quot;.</span>
<span class="sd">            TileMatrixSetId (str, optional): The TileMatrixSetId to be used in the file path. Defaults to &quot;WebMercatorQuad&quot;.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">endpoint</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">TileMatrixSetId</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">url_for_stac_collection</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">endpoint</span><span class="si">}</span><span class="s2">/collection/</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">TileMatrixSetId</span><span class="si">}</span><span class="s2">/tilejson.json&quot;</span>

    <span class="k">def</span> <span class="nf">url_for_collection_assets</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">endpoint</span><span class="si">}</span><span class="s2">/collection/assets&quot;</span>

    <span class="k">def</span> <span class="nf">url_for_collection_bounds</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">endpoint</span><span class="si">}</span><span class="s2">/collection/bounds&quot;</span>

    <span class="k">def</span> <span class="nf">url_for_collection_info</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">endpoint</span><span class="si">}</span><span class="s2">/collection/info&quot;</span>

    <span class="k">def</span> <span class="nf">url_for_collection_info_geojson</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">endpoint</span><span class="si">}</span><span class="s2">/collection/info.geojson&quot;</span>

    <span class="k">def</span> <span class="nf">url_for_collection_pixel_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lon</span><span class="p">,</span> <span class="n">lat</span><span class="p">):</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">endpoint</span><span class="si">}</span><span class="s2">/collection/point/</span><span class="si">{</span><span class="n">lon</span><span class="si">}</span><span class="s2">,</span><span class="si">{</span><span class="n">lat</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="k">def</span> <span class="nf">url_for_collection_wmts</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">endpoint</span><span class="si">}</span><span class="s2">/collection/</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">TileMatrixSetId</span><span class="si">}</span><span class="s2">/WMTSCapabilities.xml&quot;</span>

    <span class="k">def</span> <span class="nf">url_for_collection_lat_lon_assets</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lng</span><span class="p">,</span> <span class="n">lat</span><span class="p">):</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">endpoint</span><span class="si">}</span><span class="s2">/collection/</span><span class="si">{</span><span class="n">lng</span><span class="si">}</span><span class="s2">,</span><span class="si">{</span><span class="n">lat</span><span class="si">}</span><span class="s2">/assets&quot;</span>

    <span class="k">def</span> <span class="nf">url_for_collection_bbox_assets</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">minx</span><span class="p">,</span> <span class="n">miny</span><span class="p">,</span> <span class="n">maxx</span><span class="p">,</span> <span class="n">maxy</span><span class="p">):</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">endpoint</span><span class="si">}</span><span class="s2">/collection/</span><span class="si">{</span><span class="n">minx</span><span class="si">}</span><span class="s2">,</span><span class="si">{</span><span class="n">miny</span><span class="si">}</span><span class="s2">,</span><span class="si">{</span><span class="n">maxx</span><span class="si">}</span><span class="s2">,</span><span class="si">{</span><span class="n">maxy</span><span class="si">}</span><span class="s2">/assets&quot;</span>

    <span class="k">def</span> <span class="nf">url_for_stac_mosaic</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">searchid</span><span class="p">):</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">endpoint</span><span class="si">}</span><span class="s2">/mosaic/</span><span class="si">{</span><span class="n">searchid</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">TileMatrixSetId</span><span class="si">}</span><span class="s2">/tilejson.json&quot;</span>

    <span class="k">def</span> <span class="nf">url_for_mosaic_info</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">searchid</span><span class="p">):</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">endpoint</span><span class="si">}</span><span class="s2">/mosaic/</span><span class="si">{</span><span class="n">searchid</span><span class="si">}</span><span class="s2">/info&quot;</span>

    <span class="k">def</span> <span class="nf">url_for_mosaic_lat_lon_assets</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">searchid</span><span class="p">,</span> <span class="n">lon</span><span class="p">,</span> <span class="n">lat</span><span class="p">):</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">endpoint</span><span class="si">}</span><span class="s2">/mosaic/</span><span class="si">{</span><span class="n">searchid</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">lon</span><span class="si">}</span><span class="s2">,</span><span class="si">{</span><span class="n">lat</span><span class="si">}</span><span class="s2">/assets&quot;</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">









  <div class="doc doc-object doc-method">



<h3 id="geemap.common.PlanetaryComputerEndpoint.__init__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">endpoint</span><span class="o">=</span><span class="s1">&#39;https://planetarycomputer.microsoft.com/api/data/v1&#39;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;item&#39;</span><span class="p">,</span> <span class="n">TileMatrixSetId</span><span class="o">=</span><span class="s1">&#39;WebMercatorQuad&#39;</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#geemap.common.PlanetaryComputerEndpoint.__init__" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Initialize the PlanetaryComputerEndpoint object.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>endpoint</code></td>
        <td><code>str</code></td>
        <td><p>The endpoint of the titiler server. Defaults to "https://planetarycomputer.microsoft.com/api/data/v1".</p></td>
        <td><code>&#39;https://planetarycomputer.microsoft.com/api/data/v1&#39;</code></td>
      </tr>
      <tr>
        <td><code>name</code></td>
        <td><code>str</code></td>
        <td><p>The name to be used in the file path. Defaults to "item".</p></td>
        <td><code>&#39;item&#39;</code></td>
      </tr>
      <tr>
        <td><code>TileMatrixSetId</code></td>
        <td><code>str</code></td>
        <td><p>The TileMatrixSetId to be used in the file path. Defaults to "WebMercatorQuad".</p></td>
        <td><code>&#39;WebMercatorQuad&#39;</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">endpoint</span><span class="o">=</span><span class="s2">&quot;https://planetarycomputer.microsoft.com/api/data/v1&quot;</span><span class="p">,</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;item&quot;</span><span class="p">,</span>
    <span class="n">TileMatrixSetId</span><span class="o">=</span><span class="s2">&quot;WebMercatorQuad&quot;</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Initialize the PlanetaryComputerEndpoint object.</span>

<span class="sd">    Args:</span>
<span class="sd">        endpoint (str, optional): The endpoint of the titiler server. Defaults to &quot;https://planetarycomputer.microsoft.com/api/data/v1&quot;.</span>
<span class="sd">        name (str, optional): The name to be used in the file path. Defaults to &quot;item&quot;.</span>
<span class="sd">        TileMatrixSetId (str, optional): The TileMatrixSetId to be used in the file path. Defaults to &quot;WebMercatorQuad&quot;.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">endpoint</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">TileMatrixSetId</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>

















  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h2 id="geemap.common.TitilerEndpoint" class="doc doc-heading">
        <code>
TitilerEndpoint        </code>



<a href="#geemap.common.TitilerEndpoint" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>This class contains the methods for the titiler endpoint.</p>

        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">TitilerEndpoint</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;This class contains the methods for the titiler endpoint.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">endpoint</span><span class="o">=</span><span class="s2">&quot;https://titiler.xyz&quot;</span><span class="p">,</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;stac&quot;</span><span class="p">,</span>
        <span class="n">TileMatrixSetId</span><span class="o">=</span><span class="s2">&quot;WebMercatorQuad&quot;</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Initialize the TitilerEndpoint object.</span>

<span class="sd">        Args:</span>
<span class="sd">            endpoint (str, optional): The endpoint of the titiler server. Defaults to &quot;https://titiler.xyz&quot;.</span>
<span class="sd">            name (str, optional): The name to be used in the file path. Defaults to &quot;stac&quot;.</span>
<span class="sd">            TileMatrixSetId (str, optional): The TileMatrixSetId to be used in the file path. Defaults to &quot;WebMercatorQuad&quot;.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">endpoint</span> <span class="o">=</span> <span class="n">endpoint</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">TileMatrixSetId</span> <span class="o">=</span> <span class="n">TileMatrixSetId</span>

    <span class="k">def</span> <span class="nf">url_for_stac_item</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">endpoint</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">TileMatrixSetId</span><span class="si">}</span><span class="s2">/tilejson.json&quot;</span>

    <span class="k">def</span> <span class="nf">url_for_stac_assets</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">endpoint</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">/assets&quot;</span>

    <span class="k">def</span> <span class="nf">url_for_stac_bounds</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">endpoint</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">/bounds&quot;</span>

    <span class="k">def</span> <span class="nf">url_for_stac_info</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">endpoint</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">/info&quot;</span>

    <span class="k">def</span> <span class="nf">url_for_stac_info_geojson</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">endpoint</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">/info.geojson&quot;</span>

    <span class="k">def</span> <span class="nf">url_for_stac_statistics</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">endpoint</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">/statistics&quot;</span>

    <span class="k">def</span> <span class="nf">url_for_stac_pixel_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lon</span><span class="p">,</span> <span class="n">lat</span><span class="p">):</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">endpoint</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">/point/</span><span class="si">{</span><span class="n">lon</span><span class="si">}</span><span class="s2">,</span><span class="si">{</span><span class="n">lat</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="k">def</span> <span class="nf">url_for_stac_wmts</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">endpoint</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">TileMatrixSetId</span><span class="si">}</span><span class="s2">/WMTSCapabilities.xml&quot;</span>
        <span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">









  <div class="doc doc-object doc-method">



<h3 id="geemap.common.TitilerEndpoint.__init__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">endpoint</span><span class="o">=</span><span class="s1">&#39;https://titiler.xyz&#39;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;stac&#39;</span><span class="p">,</span> <span class="n">TileMatrixSetId</span><span class="o">=</span><span class="s1">&#39;WebMercatorQuad&#39;</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#geemap.common.TitilerEndpoint.__init__" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Initialize the TitilerEndpoint object.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>endpoint</code></td>
        <td><code>str</code></td>
        <td><p>The endpoint of the titiler server. Defaults to "https://titiler.xyz".</p></td>
        <td><code>&#39;https://titiler.xyz&#39;</code></td>
      </tr>
      <tr>
        <td><code>name</code></td>
        <td><code>str</code></td>
        <td><p>The name to be used in the file path. Defaults to "stac".</p></td>
        <td><code>&#39;stac&#39;</code></td>
      </tr>
      <tr>
        <td><code>TileMatrixSetId</code></td>
        <td><code>str</code></td>
        <td><p>The TileMatrixSetId to be used in the file path. Defaults to "WebMercatorQuad".</p></td>
        <td><code>&#39;WebMercatorQuad&#39;</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">endpoint</span><span class="o">=</span><span class="s2">&quot;https://titiler.xyz&quot;</span><span class="p">,</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;stac&quot;</span><span class="p">,</span>
    <span class="n">TileMatrixSetId</span><span class="o">=</span><span class="s2">&quot;WebMercatorQuad&quot;</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Initialize the TitilerEndpoint object.</span>

<span class="sd">    Args:</span>
<span class="sd">        endpoint (str, optional): The endpoint of the titiler server. Defaults to &quot;https://titiler.xyz&quot;.</span>
<span class="sd">        name (str, optional): The name to be used in the file path. Defaults to &quot;stac&quot;.</span>
<span class="sd">        TileMatrixSetId (str, optional): The TileMatrixSetId to be used in the file path. Defaults to &quot;WebMercatorQuad&quot;.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">endpoint</span> <span class="o">=</span> <span class="n">endpoint</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">TileMatrixSetId</span> <span class="o">=</span> <span class="n">TileMatrixSetId</span>
</code></pre></div>
        </details>
    </div>

  </div>













  </div>

    </div>

  </div>




  <div class="doc doc-object doc-function">



<h2 id="geemap.common.add_crs" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_crs</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">epsg</span><span class="p">)</span></code>


<a href="#geemap.common.add_crs" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Add a CRS to a raster dataset.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>filename</code></td>
        <td><code>str</code></td>
        <td><p>The filename of the raster dataset.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>epsg</code></td>
        <td><code>int | str</code></td>
        <td><p>The EPSG code of the CRS.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_crs</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">epsg</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Add a CRS to a raster dataset.</span>

<span class="sd">    Args:</span>
<span class="sd">        filename (str): The filename of the raster dataset.</span>
<span class="sd">        epsg (int | str): The EPSG code of the CRS.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="kn">import</span> <span class="nn">rasterio</span>
    <span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ImportError</span><span class="p">(</span>
            <span class="s2">&quot;rasterio is required for adding a CRS to a raster. Please install it using &#39;pip install rasterio&#39;.&quot;</span>
        <span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;filename must exist.&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">epsg</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
        <span class="n">epsg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;EPSG:</span><span class="si">{</span><span class="n">epsg</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">epsg</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">epsg</span> <span class="o">=</span> <span class="s2">&quot;EPSG:&quot;</span> <span class="o">+</span> <span class="n">epsg</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;epsg must be an integer or string.&quot;</span><span class="p">)</span>

    <span class="n">crs</span> <span class="o">=</span> <span class="n">rasterio</span><span class="o">.</span><span class="n">crs</span><span class="o">.</span><span class="n">CRS</span><span class="p">({</span><span class="s2">&quot;init&quot;</span><span class="p">:</span> <span class="n">epsg</span><span class="p">})</span>
    <span class="k">with</span> <span class="n">rasterio</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;r+&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">src</span><span class="p">:</span>
        <span class="n">src</span><span class="o">.</span><span class="n">crs</span> <span class="o">=</span> <span class="n">crs</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.adjust_longitude" class="doc doc-heading">
<code class="highlight language-python"><span class="n">adjust_longitude</span><span class="p">(</span><span class="n">in_fc</span><span class="p">)</span></code>


<a href="#geemap.common.adjust_longitude" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Adjusts longitude if it is less than -180 or greater than 180.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>in_fc</code></td>
        <td><code>dict</code></td>
        <td><p>The input dictionary containing coordinates.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>dict</code></td>
      <td><p>A dictionary containing the converted longitudes</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">adjust_longitude</span><span class="p">(</span><span class="n">in_fc</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Adjusts longitude if it is less than -180 or greater than 180.</span>

<span class="sd">    Args:</span>
<span class="sd">        in_fc (dict): The input dictionary containing coordinates.</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict: A dictionary containing the converted longitudes</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>

        <span class="n">keys</span> <span class="o">=</span> <span class="n">in_fc</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>

        <span class="k">if</span> <span class="s2">&quot;geometry&quot;</span> <span class="ow">in</span> <span class="n">keys</span><span class="p">:</span>

            <span class="n">coordinates</span> <span class="o">=</span> <span class="n">in_fc</span><span class="p">[</span><span class="s2">&quot;geometry&quot;</span><span class="p">][</span><span class="s2">&quot;coordinates&quot;</span><span class="p">]</span>

            <span class="k">if</span> <span class="n">in_fc</span><span class="p">[</span><span class="s2">&quot;geometry&quot;</span><span class="p">][</span><span class="s2">&quot;type&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;Point&quot;</span><span class="p">:</span>
                <span class="n">longitude</span> <span class="o">=</span> <span class="n">coordinates</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">longitude</span> <span class="o">&lt;</span> <span class="o">-</span><span class="mi">180</span><span class="p">:</span>
                    <span class="n">longitude</span> <span class="o">=</span> <span class="mi">360</span> <span class="o">+</span> <span class="n">longitude</span>
                <span class="k">elif</span> <span class="n">longitude</span> <span class="o">&gt;</span> <span class="mi">180</span><span class="p">:</span>
                    <span class="n">longitude</span> <span class="o">=</span> <span class="n">longitude</span> <span class="o">-</span> <span class="mi">360</span>
                <span class="n">in_fc</span><span class="p">[</span><span class="s2">&quot;geometry&quot;</span><span class="p">][</span><span class="s2">&quot;coordinates&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">longitude</span>

            <span class="k">elif</span> <span class="n">in_fc</span><span class="p">[</span><span class="s2">&quot;geometry&quot;</span><span class="p">][</span><span class="s2">&quot;type&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;Polygon&quot;</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">index1</span><span class="p">,</span> <span class="n">item</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">coordinates</span><span class="p">):</span>
                    <span class="k">for</span> <span class="n">index2</span><span class="p">,</span> <span class="n">element</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">item</span><span class="p">):</span>
                        <span class="n">longitude</span> <span class="o">=</span> <span class="n">element</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                        <span class="k">if</span> <span class="n">longitude</span> <span class="o">&lt;</span> <span class="o">-</span><span class="mi">180</span><span class="p">:</span>
                            <span class="n">longitude</span> <span class="o">=</span> <span class="mi">360</span> <span class="o">+</span> <span class="n">longitude</span>
                        <span class="k">elif</span> <span class="n">longitude</span> <span class="o">&gt;</span> <span class="mi">180</span><span class="p">:</span>
                            <span class="n">longitude</span> <span class="o">=</span> <span class="n">longitude</span> <span class="o">-</span> <span class="mi">360</span>
                        <span class="n">in_fc</span><span class="p">[</span><span class="s2">&quot;geometry&quot;</span><span class="p">][</span><span class="s2">&quot;coordinates&quot;</span><span class="p">][</span><span class="n">index1</span><span class="p">][</span><span class="n">index2</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">longitude</span>

            <span class="k">elif</span> <span class="n">in_fc</span><span class="p">[</span><span class="s2">&quot;geometry&quot;</span><span class="p">][</span><span class="s2">&quot;type&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;LineString&quot;</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">element</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">coordinates</span><span class="p">):</span>
                    <span class="n">longitude</span> <span class="o">=</span> <span class="n">element</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                    <span class="k">if</span> <span class="n">longitude</span> <span class="o">&lt;</span> <span class="o">-</span><span class="mi">180</span><span class="p">:</span>
                        <span class="n">longitude</span> <span class="o">=</span> <span class="mi">360</span> <span class="o">+</span> <span class="n">longitude</span>
                    <span class="k">elif</span> <span class="n">longitude</span> <span class="o">&gt;</span> <span class="mi">180</span><span class="p">:</span>
                        <span class="n">longitude</span> <span class="o">=</span> <span class="n">longitude</span> <span class="o">-</span> <span class="mi">360</span>
                    <span class="n">in_fc</span><span class="p">[</span><span class="s2">&quot;geometry&quot;</span><span class="p">][</span><span class="s2">&quot;coordinates&quot;</span><span class="p">][</span><span class="n">index</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">longitude</span>

        <span class="k">elif</span> <span class="s2">&quot;type&quot;</span> <span class="ow">in</span> <span class="n">keys</span><span class="p">:</span>

            <span class="n">coordinates</span> <span class="o">=</span> <span class="n">in_fc</span><span class="p">[</span><span class="s2">&quot;coordinates&quot;</span><span class="p">]</span>

            <span class="k">if</span> <span class="n">in_fc</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;Point&quot;</span><span class="p">:</span>
                <span class="n">longitude</span> <span class="o">=</span> <span class="n">coordinates</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">longitude</span> <span class="o">&lt;</span> <span class="o">-</span><span class="mi">180</span><span class="p">:</span>
                    <span class="n">longitude</span> <span class="o">=</span> <span class="mi">360</span> <span class="o">+</span> <span class="n">longitude</span>
                <span class="k">elif</span> <span class="n">longitude</span> <span class="o">&gt;</span> <span class="mi">180</span><span class="p">:</span>
                    <span class="n">longitude</span> <span class="o">=</span> <span class="n">longitude</span> <span class="o">-</span> <span class="mi">360</span>
                <span class="n">in_fc</span><span class="p">[</span><span class="s2">&quot;coordinates&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">longitude</span>

            <span class="k">elif</span> <span class="n">in_fc</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;Polygon&quot;</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">index1</span><span class="p">,</span> <span class="n">item</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">coordinates</span><span class="p">):</span>
                    <span class="k">for</span> <span class="n">index2</span><span class="p">,</span> <span class="n">element</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">item</span><span class="p">):</span>
                        <span class="n">longitude</span> <span class="o">=</span> <span class="n">element</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                        <span class="k">if</span> <span class="n">longitude</span> <span class="o">&lt;</span> <span class="o">-</span><span class="mi">180</span><span class="p">:</span>
                            <span class="n">longitude</span> <span class="o">=</span> <span class="mi">360</span> <span class="o">+</span> <span class="n">longitude</span>
                        <span class="k">elif</span> <span class="n">longitude</span> <span class="o">&gt;</span> <span class="mi">180</span><span class="p">:</span>
                            <span class="n">longitude</span> <span class="o">=</span> <span class="n">longitude</span> <span class="o">-</span> <span class="mi">360</span>
                        <span class="n">in_fc</span><span class="p">[</span><span class="s2">&quot;coordinates&quot;</span><span class="p">][</span><span class="n">index1</span><span class="p">][</span><span class="n">index2</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">longitude</span>

            <span class="k">elif</span> <span class="n">in_fc</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;LineString&quot;</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">element</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">coordinates</span><span class="p">):</span>
                    <span class="n">longitude</span> <span class="o">=</span> <span class="n">element</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                    <span class="k">if</span> <span class="n">longitude</span> <span class="o">&lt;</span> <span class="o">-</span><span class="mi">180</span><span class="p">:</span>
                        <span class="n">longitude</span> <span class="o">=</span> <span class="mi">360</span> <span class="o">+</span> <span class="n">longitude</span>
                    <span class="k">elif</span> <span class="n">longitude</span> <span class="o">&gt;</span> <span class="mi">180</span><span class="p">:</span>
                        <span class="n">longitude</span> <span class="o">=</span> <span class="n">longitude</span> <span class="o">-</span> <span class="mi">360</span>
                    <span class="n">in_fc</span><span class="p">[</span><span class="s2">&quot;coordinates&quot;</span><span class="p">][</span><span class="n">index</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">longitude</span>

        <span class="k">return</span> <span class="n">in_fc</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.annual_NAIP" class="doc doc-heading">
<code class="highlight language-python"><span class="n">annual_NAIP</span><span class="p">(</span><span class="n">year</span><span class="p">,</span> <span class="n">region</span><span class="p">)</span></code>


<a href="#geemap.common.annual_NAIP" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Create an NAIP mosaic of a specified year for a specified region.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>year</code></td>
        <td><code>int</code></td>
        <td><p>The specified year to create the mosaic for.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>region</code></td>
        <td><code>object</code></td>
        <td><p>ee.Geometry</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>object</code></td>
      <td><p>ee.Image</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">annual_NAIP</span><span class="p">(</span><span class="n">year</span><span class="p">,</span> <span class="n">region</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Create an NAIP mosaic of a specified year for a specified region.</span>

<span class="sd">    Args:</span>
<span class="sd">        year (int): The specified year to create the mosaic for.</span>
<span class="sd">        region (object): ee.Geometry</span>

<span class="sd">    Returns:</span>
<span class="sd">        object: ee.Image</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">start_date</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Date</span><span class="o">.</span><span class="n">fromYMD</span><span class="p">(</span><span class="n">year</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
    <span class="n">end_date</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Date</span><span class="o">.</span><span class="n">fromYMD</span><span class="p">(</span><span class="n">year</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">31</span><span class="p">)</span>
    <span class="n">collection</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">(</span><span class="s2">&quot;USDA/NAIP/DOQQ&quot;</span><span class="p">)</span>
        <span class="o">.</span><span class="n">filterDate</span><span class="p">(</span><span class="n">start_date</span><span class="p">,</span> <span class="n">end_date</span><span class="p">)</span>
        <span class="o">.</span><span class="n">filterBounds</span><span class="p">(</span><span class="n">region</span><span class="p">)</span>
    <span class="p">)</span>

    <span class="n">time_start</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Date</span><span class="p">(</span>
        <span class="n">ee</span><span class="o">.</span><span class="n">List</span><span class="p">(</span><span class="n">collection</span><span class="o">.</span><span class="n">aggregate_array</span><span class="p">(</span><span class="s2">&quot;system:time_start&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="n">time_end</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Date</span><span class="p">(</span>
        <span class="n">ee</span><span class="o">.</span><span class="n">List</span><span class="p">(</span><span class="n">collection</span><span class="o">.</span><span class="n">aggregate_array</span><span class="p">(</span><span class="s2">&quot;system:time_end&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="n">image</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">(</span><span class="n">collection</span><span class="o">.</span><span class="n">mosaic</span><span class="p">()</span><span class="o">.</span><span class="n">clip</span><span class="p">(</span><span class="n">region</span><span class="p">))</span>
    <span class="n">NDWI</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">(</span><span class="n">image</span><span class="p">)</span><span class="o">.</span><span class="n">normalizedDifference</span><span class="p">([</span><span class="s2">&quot;G&quot;</span><span class="p">,</span> <span class="s2">&quot;N&quot;</span><span class="p">])</span><span class="o">.</span><span class="n">select</span><span class="p">([</span><span class="s2">&quot;nd&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;ndwi&quot;</span><span class="p">])</span>
    <span class="n">NDVI</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">(</span><span class="n">image</span><span class="p">)</span><span class="o">.</span><span class="n">normalizedDifference</span><span class="p">([</span><span class="s2">&quot;N&quot;</span><span class="p">,</span> <span class="s2">&quot;R&quot;</span><span class="p">])</span><span class="o">.</span><span class="n">select</span><span class="p">([</span><span class="s2">&quot;nd&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;ndvi&quot;</span><span class="p">])</span>
    <span class="n">image</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">addBands</span><span class="p">(</span><span class="n">NDWI</span><span class="p">)</span>
    <span class="n">image</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">addBands</span><span class="p">(</span><span class="n">NDVI</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">image</span><span class="o">.</span><span class="n">set</span><span class="p">({</span><span class="s2">&quot;system:time_start&quot;</span><span class="p">:</span> <span class="n">time_start</span><span class="p">,</span> <span class="s2">&quot;system:time_end&quot;</span><span class="p">:</span> <span class="n">time_end</span><span class="p">})</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.api_docs" class="doc doc-heading">
<code class="highlight language-python"><span class="n">api_docs</span><span class="p">()</span></code>


<a href="#geemap.common.api_docs" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Open a browser and navigate to the geemap API documentation.</p>

        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">api_docs</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Open a browser and navigate to the geemap API documentation.&quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">webbrowser</span>

    <span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;https://geemap.org/geemap&quot;</span>
    <span class="n">webbrowser</span><span class="o">.</span><span class="n">open_new_tab</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.arc_active_map" class="doc doc-heading">
<code class="highlight language-python"><span class="n">arc_active_map</span><span class="p">()</span></code>


<a href="#geemap.common.arc_active_map" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Get the active map in ArcGIS Pro.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>arcpy.Map</code></td>
      <td><p>The active map in ArcGIS Pro.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">arc_active_map</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Get the active map in ArcGIS Pro.</span>

<span class="sd">    Returns:</span>
<span class="sd">        arcpy.Map: The active map in ArcGIS Pro.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">is_arcpy</span><span class="p">():</span>
        <span class="kn">import</span> <span class="nn">arcpy</span>

        <span class="n">aprx</span> <span class="o">=</span> <span class="n">arcpy</span><span class="o">.</span><span class="n">mp</span><span class="o">.</span><span class="n">ArcGISProject</span><span class="p">(</span><span class="s2">&quot;CURRENT&quot;</span><span class="p">)</span>
        <span class="n">m</span> <span class="o">=</span> <span class="n">aprx</span><span class="o">.</span><span class="n">activeMap</span>
        <span class="k">return</span> <span class="n">m</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">None</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.arc_active_view" class="doc doc-heading">
<code class="highlight language-python"><span class="n">arc_active_view</span><span class="p">()</span></code>


<a href="#geemap.common.arc_active_view" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Get the active view in ArcGIS Pro.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>arcpy.MapView</code></td>
      <td><p>The active view in ArcGIS Pro.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">arc_active_view</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Get the active view in ArcGIS Pro.</span>

<span class="sd">    Returns:</span>
<span class="sd">        arcpy.MapView: The active view in ArcGIS Pro.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">is_arcpy</span><span class="p">():</span>
        <span class="kn">import</span> <span class="nn">arcpy</span>

        <span class="n">aprx</span> <span class="o">=</span> <span class="n">arcpy</span><span class="o">.</span><span class="n">mp</span><span class="o">.</span><span class="n">ArcGISProject</span><span class="p">(</span><span class="s2">&quot;CURRENT&quot;</span><span class="p">)</span>
        <span class="n">view</span> <span class="o">=</span> <span class="n">aprx</span><span class="o">.</span><span class="n">activeView</span>
        <span class="k">return</span> <span class="n">view</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">None</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.arc_add_layer" class="doc doc-heading">
<code class="highlight language-python"><span class="n">arc_add_layer</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">shown</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">opacity</span><span class="o">=</span><span class="mf">1.0</span><span class="p">)</span></code>


<a href="#geemap.common.arc_add_layer" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Add a layer to the active map in ArcGIS Pro.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>url</code></td>
        <td><code>str</code></td>
        <td><p>The URL of the tile layer to add.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>name</code></td>
        <td><code>str</code></td>
        <td><p>The name of the layer. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>shown</code></td>
        <td><code>bool</code></td>
        <td><p>Whether the layer is shown. Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
      <tr>
        <td><code>opacity</code></td>
        <td><code>float</code></td>
        <td><p>The opacity of the layer. Defaults to 1.0.</p></td>
        <td><code>1.0</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">arc_add_layer</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">shown</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">opacity</span><span class="o">=</span><span class="mf">1.0</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Add a layer to the active map in ArcGIS Pro.</span>

<span class="sd">    Args:</span>
<span class="sd">        url (str): The URL of the tile layer to add.</span>
<span class="sd">        name (str, optional): The name of the layer. Defaults to None.</span>
<span class="sd">        shown (bool, optional): Whether the layer is shown. Defaults to True.</span>
<span class="sd">        opacity (float, optional): The opacity of the layer. Defaults to 1.0.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">is_arcpy</span><span class="p">():</span>
        <span class="n">m</span> <span class="o">=</span> <span class="n">arc_active_map</span><span class="p">()</span>
        <span class="n">m</span><span class="o">.</span><span class="n">addDataFromPath</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">layers</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">listLayers</span><span class="p">(</span><span class="s1">&#39;Tiled service layer&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">layers</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">layer</span> <span class="o">=</span> <span class="n">layers</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">layer</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
                <span class="n">layer</span><span class="o">.</span><span class="n">visible</span> <span class="o">=</span> <span class="n">shown</span>
                <span class="n">layer</span><span class="o">.</span><span class="n">transparency</span> <span class="o">=</span> <span class="mi">100</span> <span class="o">-</span> <span class="p">(</span><span class="n">opacity</span> <span class="o">*</span> <span class="mi">100</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.arc_zoom_to_extent" class="doc doc-heading">
<code class="highlight language-python"><span class="n">arc_zoom_to_extent</span><span class="p">(</span><span class="n">xmin</span><span class="p">,</span> <span class="n">ymin</span><span class="p">,</span> <span class="n">xmax</span><span class="p">,</span> <span class="n">ymax</span><span class="p">)</span></code>


<a href="#geemap.common.arc_zoom_to_extent" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Zoom to an extent in ArcGIS Pro.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>xmin</code></td>
        <td><code>float</code></td>
        <td><p>The minimum x value of the extent.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>ymin</code></td>
        <td><code>float</code></td>
        <td><p>The minimum y value of the extent.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>xmax</code></td>
        <td><code>float</code></td>
        <td><p>The maximum x value of the extent.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>ymax</code></td>
        <td><code>float</code></td>
        <td><p>The maximum y value of the extent.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">arc_zoom_to_extent</span><span class="p">(</span><span class="n">xmin</span><span class="p">,</span> <span class="n">ymin</span><span class="p">,</span> <span class="n">xmax</span><span class="p">,</span> <span class="n">ymax</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Zoom to an extent in ArcGIS Pro.</span>

<span class="sd">    Args:</span>
<span class="sd">        xmin (float): The minimum x value of the extent.</span>
<span class="sd">        ymin (float): The minimum y value of the extent.</span>
<span class="sd">        xmax (float): The maximum x value of the extent.</span>
<span class="sd">        ymax (float): The maximum y value of the extent.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">is_arcpy</span><span class="p">():</span>
        <span class="kn">import</span> <span class="nn">arcpy</span>

        <span class="n">view</span> <span class="o">=</span> <span class="n">arc_active_view</span><span class="p">()</span>
        <span class="n">view</span><span class="o">.</span><span class="n">camera</span><span class="o">.</span><span class="n">setExtent</span><span class="p">(</span>
            <span class="n">arcpy</span><span class="o">.</span><span class="n">Extent</span><span class="p">(</span>
                <span class="n">xmin</span><span class="p">,</span> <span class="n">ymin</span><span class="p">,</span> <span class="n">xmax</span><span class="p">,</span> <span class="n">ymax</span><span class="p">,</span> <span class="n">spatial_reference</span><span class="o">=</span><span class="n">arcpy</span><span class="o">.</span><span class="n">SpatialReference</span><span class="p">(</span><span class="mi">4326</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="p">)</span>

        <span class="c1"># if isinstance(zoom, int):</span>
        <span class="c1">#     scale = 156543.04 * math.cos(0) / math.pow(2, zoom)</span>
        <span class="c1">#     view.camera.scale = scale  # Not working properly</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.array_mean" class="doc doc-heading">
<code class="highlight language-python"><span class="n">array_mean</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span></code>


<a href="#geemap.common.array_mean" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Calculates the mean of an array along the given axis.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>arr</code></td>
        <td><code>object</code></td>
        <td><p>Array to calculate mean.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>object</code></td>
      <td><p>ee.Number</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">array_mean</span><span class="p">(</span><span class="n">arr</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Calculates the mean of an array along the given axis.</span>

<span class="sd">    Args:</span>
<span class="sd">        arr (object): Array to calculate mean.</span>

<span class="sd">    Returns:</span>
<span class="sd">        object: ee.Number</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">total</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Array</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span><span class="o">.</span><span class="n">accum</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">([</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
    <span class="n">size</span> <span class="o">=</span> <span class="n">arr</span><span class="o">.</span><span class="n">length</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">ee</span><span class="o">.</span><span class="n">Number</span><span class="p">(</span><span class="n">total</span><span class="o">.</span><span class="n">divide</span><span class="p">(</span><span class="n">size</span><span class="p">))</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.array_sum" class="doc doc-heading">
<code class="highlight language-python"><span class="n">array_sum</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span></code>


<a href="#geemap.common.array_sum" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Accumulates elements of an array along the given axis.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>arr</code></td>
        <td><code>object</code></td>
        <td><p>Array to accumulate.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>object</code></td>
      <td><p>ee.Number</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">array_sum</span><span class="p">(</span><span class="n">arr</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Accumulates elements of an array along the given axis.</span>

<span class="sd">    Args:</span>
<span class="sd">        arr (object): Array to accumulate.</span>

<span class="sd">    Returns:</span>
<span class="sd">        object: ee.Number</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">ee</span><span class="o">.</span><span class="n">Array</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span><span class="o">.</span><span class="n">accum</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">([</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.bands_to_image_collection" class="doc doc-heading">
<code class="highlight language-python"><span class="n">bands_to_image_collection</span><span class="p">(</span><span class="n">img</span><span class="p">)</span></code>


<a href="#geemap.common.bands_to_image_collection" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Converts all bands in an image to an image collection.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>img</code></td>
        <td><code>object</code></td>
        <td><p>The image to convert.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>object</code></td>
      <td><p>ee.ImageCollection</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">bands_to_image_collection</span><span class="p">(</span><span class="n">img</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Converts all bands in an image to an image collection.</span>

<span class="sd">    Args:</span>
<span class="sd">        img (object): The image to convert.</span>

<span class="sd">    Returns:</span>
<span class="sd">        object: ee.ImageCollection</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">collection</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">(</span><span class="n">img</span><span class="o">.</span><span class="n">bandNames</span><span class="p">()</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">b</span><span class="p">:</span> <span class="n">img</span><span class="o">.</span><span class="n">select</span><span class="p">([</span><span class="n">b</span><span class="p">])))</span>
    <span class="k">return</span> <span class="n">collection</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.bbox_coords" class="doc doc-heading">
<code class="highlight language-python"><span class="n">bbox_coords</span><span class="p">(</span><span class="n">geometry</span><span class="p">,</span> <span class="n">decimals</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span></code>


<a href="#geemap.common.bbox_coords" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Get the bounding box coordinates of a geometry.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>geometry</code></td>
        <td><code>ee.Geometry | ee.FeatureCollection</code></td>
        <td><p>The input geometry.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>decimals</code></td>
        <td><code>int</code></td>
        <td><p>The number of decimals to round to. Defaults to 4.</p></td>
        <td><code>4</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>list</code></td>
      <td><p>The bounding box coordinates in the form [west, south, east, north].</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">bbox_coords</span><span class="p">(</span><span class="n">geometry</span><span class="p">,</span> <span class="n">decimals</span><span class="o">=</span><span class="mi">4</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get the bounding box coordinates of a geometry.</span>

<span class="sd">    Args:</span>
<span class="sd">        geometry (ee.Geometry | ee.FeatureCollection): The input geometry.</span>
<span class="sd">        decimals (int, optional): The number of decimals to round to. Defaults to 4.</span>

<span class="sd">    Returns:</span>
<span class="sd">        list: The bounding box coordinates in the form [west, south, east, north].</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">geometry</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">):</span>
        <span class="n">geometry</span> <span class="o">=</span> <span class="n">geometry</span><span class="o">.</span><span class="n">geometry</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">geometry</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">geometry</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Geometry</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;geometry must be an ee.Geometry.&quot;</span><span class="p">)</span>

        <span class="n">coords</span> <span class="o">=</span> <span class="n">geometry</span><span class="o">.</span><span class="n">bounds</span><span class="p">()</span><span class="o">.</span><span class="n">coordinates</span><span class="p">()</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">coords</span><span class="p">]</span>
        <span class="n">y</span> <span class="o">=</span> <span class="p">[</span><span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">coords</span><span class="p">]</span>
        <span class="n">west</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="n">decimals</span><span class="p">)</span>
        <span class="n">east</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="n">decimals</span><span class="p">)</span>
        <span class="n">south</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="n">y</span><span class="p">),</span> <span class="n">decimals</span><span class="p">)</span>
        <span class="n">north</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="n">y</span><span class="p">),</span> <span class="n">decimals</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">west</span><span class="p">,</span> <span class="n">south</span><span class="p">,</span> <span class="n">east</span><span class="p">,</span> <span class="n">north</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">None</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.bbox_to_gdf" class="doc doc-heading">
<code class="highlight language-python"><span class="n">bbox_to_gdf</span><span class="p">(</span><span class="n">bbox</span><span class="p">,</span> <span class="n">crs</span><span class="o">=</span><span class="s1">&#39;EPSG:4326&#39;</span><span class="p">)</span></code>


<a href="#geemap.common.bbox_to_gdf" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Converts a bounding box to a GeoDataFrame.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>bbox</code></td>
        <td><code>tuple</code></td>
        <td><p>A bounding box in the form of a tuple (minx, miny, maxx, maxy).</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>crs</code></td>
        <td><code>str</code></td>
        <td><p>The coordinate reference system of the bounding box to convert to. Defaults to "EPSG:4326".</p></td>
        <td><code>&#39;EPSG:4326&#39;</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>geopandas.GeoDataFrame</code></td>
      <td><p>A GeoDataFrame containing the bounding box.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">bbox_to_gdf</span><span class="p">(</span><span class="n">bbox</span><span class="p">,</span> <span class="n">crs</span><span class="o">=</span><span class="s2">&quot;EPSG:4326&quot;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Converts a bounding box to a GeoDataFrame.</span>

<span class="sd">    Args:</span>
<span class="sd">        bbox (tuple): A bounding box in the form of a tuple (minx, miny, maxx, maxy).</span>
<span class="sd">        crs (str, optional): The coordinate reference system of the bounding box to convert to. Defaults to &quot;EPSG:4326&quot;.</span>

<span class="sd">    Returns:</span>
<span class="sd">        geopandas.GeoDataFrame: A GeoDataFrame containing the bounding box.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">check_package</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;geopandas&quot;</span><span class="p">,</span> <span class="n">URL</span><span class="o">=</span><span class="s2">&quot;https://geopandas.org&quot;</span><span class="p">)</span>
    <span class="kn">from</span> <span class="nn">shapely.geometry</span> <span class="kn">import</span> <span class="n">box</span>
    <span class="kn">import</span> <span class="nn">geopandas</span> <span class="k">as</span> <span class="nn">gpd</span>

    <span class="n">minx</span><span class="p">,</span> <span class="n">miny</span><span class="p">,</span> <span class="n">maxx</span><span class="p">,</span> <span class="n">maxy</span> <span class="o">=</span> <span class="n">bbox</span>
    <span class="n">geometry</span> <span class="o">=</span> <span class="n">box</span><span class="p">(</span><span class="n">minx</span><span class="p">,</span> <span class="n">miny</span><span class="p">,</span> <span class="n">maxx</span><span class="p">,</span> <span class="n">maxy</span><span class="p">)</span>
    <span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;geometry&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">geometry</span><span class="p">]}</span>
    <span class="n">gdf</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">GeoDataFrame</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">crs</span><span class="o">=</span><span class="s2">&quot;EPSG:4326&quot;</span><span class="p">)</span>
    <span class="n">gdf</span><span class="o">.</span><span class="n">to_crs</span><span class="p">(</span><span class="n">crs</span><span class="o">=</span><span class="n">crs</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">gdf</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.bbox_to_geojson" class="doc doc-heading">
<code class="highlight language-python"><span class="n">bbox_to_geojson</span><span class="p">(</span><span class="n">bounds</span><span class="p">)</span></code>


<a href="#geemap.common.bbox_to_geojson" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Convert coordinates of a bounding box to a geojson.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>bounds</code></td>
        <td><code>list</code></td>
        <td><p>A list of coordinates representing [left, bottom, right, top].</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>dict</code></td>
      <td><p>A geojson feature.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">bbox_to_geojson</span><span class="p">(</span><span class="n">bounds</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Convert coordinates of a bounding box to a geojson.</span>

<span class="sd">    Args:</span>
<span class="sd">        bounds (list): A list of coordinates representing [left, bottom, right, top].</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict: A geojson feature.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="s2">&quot;geometry&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;Polygon&quot;</span><span class="p">,</span>
            <span class="s2">&quot;coordinates&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">[</span>
                    <span class="p">[</span><span class="n">bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">3</span><span class="p">]],</span>
                    <span class="p">[</span><span class="n">bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">]],</span>
                    <span class="p">[</span><span class="n">bounds</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">]],</span>
                    <span class="p">[</span><span class="n">bounds</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">3</span><span class="p">]],</span>
                    <span class="p">[</span><span class="n">bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">3</span><span class="p">]],</span>
                <span class="p">]</span>
            <span class="p">],</span>
        <span class="p">},</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;Feature&quot;</span><span class="p">,</span>
    <span class="p">}</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.blend" class="doc doc-heading">
<code class="highlight language-python"><span class="n">blend</span><span class="p">(</span><span class="n">top_layer</span><span class="p">,</span> <span class="n">bottom_layer</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">top_vis</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">bottom_vis</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">hillshade</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">expression</span><span class="o">=</span><span class="s1">&#39;a*b&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.common.blend" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Create a blended image that is a combination of two images, e.g., DEM and hillshade. This function was inspired by Jesse Anderson. See https://github.com/jessjaco/gee-blend.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>top_layer</code></td>
        <td><code>ee.Image</code></td>
        <td><p>The top layer image, e.g., ee.Image("CGIAR/SRTM90_V4")</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>bottom_layer</code></td>
        <td><code>ee.Image</code></td>
        <td><p>The bottom layer image. If not specified, it will use the top layer image.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>top_vis</code></td>
        <td><code>dict</code></td>
        <td><p>The top layer image vis parameters as a dictionary. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>bottom_vis</code></td>
        <td><code>dict</code></td>
        <td><p>The bottom layer image vis parameters as a dictionary. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>hillshade</code></td>
        <td><code>bool</code></td>
        <td><p>Flag to use hillshade. Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
      <tr>
        <td><code>expression</code></td>
        <td><code>str</code></td>
        <td><p>The expression to use for the blend. Defaults to 'a*b'.</p></td>
        <td><code>&#39;a*b&#39;</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>ee.Image</code></td>
      <td><p>The blended image.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">blend</span><span class="p">(</span>
    <span class="n">top_layer</span><span class="p">,</span>
    <span class="n">bottom_layer</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">top_vis</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">bottom_vis</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">hillshade</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">expression</span><span class="o">=</span><span class="s2">&quot;a*b&quot;</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Create a blended image that is a combination of two images, e.g., DEM and hillshade. This function was inspired by Jesse Anderson. See https://github.com/jessjaco/gee-blend.</span>

<span class="sd">    Args:</span>
<span class="sd">        top_layer (ee.Image): The top layer image, e.g., ee.Image(&quot;CGIAR/SRTM90_V4&quot;)</span>
<span class="sd">        bottom_layer (ee.Image, optional): The bottom layer image. If not specified, it will use the top layer image.</span>
<span class="sd">        top_vis (dict, optional): The top layer image vis parameters as a dictionary. Defaults to None.</span>
<span class="sd">        bottom_vis (dict, optional): The bottom layer image vis parameters as a dictionary. Defaults to None.</span>
<span class="sd">        hillshade (bool, optional): Flag to use hillshade. Defaults to True.</span>
<span class="sd">        expression (str, optional): The expression to use for the blend. Defaults to &#39;a*b&#39;.</span>

<span class="sd">    Returns:</span>
<span class="sd">        ee.Image: The blended image.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span> <span class="nn">box</span> <span class="kn">import</span> <span class="n">Box</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">top_layer</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;top_layer must be an ee.Image.&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">bottom_layer</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">bottom_layer</span> <span class="o">=</span> <span class="n">top_layer</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">bottom_layer</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;bottom_layer must be an ee.Image.&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">top_vis</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">top_vis</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;top_vis must be a dictionary.&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="s2">&quot;palette&quot;</span> <span class="ow">in</span> <span class="n">top_vis</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">top_vis</span><span class="p">[</span><span class="s2">&quot;palette&quot;</span><span class="p">],</span> <span class="n">Box</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">top_vis</span><span class="p">[</span><span class="s2">&quot;palette&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">top_vis</span><span class="p">[</span><span class="s2">&quot;palette&quot;</span><span class="p">][</span><span class="s2">&quot;default&quot;</span><span class="p">]</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The provided palette is invalid.&quot;</span><span class="p">)</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">bottom_vis</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">bottom_vis</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;top_vis must be a dictionary.&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="s2">&quot;palette&quot;</span> <span class="ow">in</span> <span class="n">bottom_vis</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">bottom_vis</span><span class="p">[</span><span class="s2">&quot;palette&quot;</span><span class="p">],</span> <span class="n">Box</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">bottom_vis</span><span class="p">[</span><span class="s2">&quot;palette&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">bottom_vis</span><span class="p">[</span><span class="s2">&quot;palette&quot;</span><span class="p">][</span><span class="s2">&quot;default&quot;</span><span class="p">]</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The provided palette is invalid.&quot;</span><span class="p">)</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">top_vis</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">top_bands</span> <span class="o">=</span> <span class="n">top_layer</span><span class="o">.</span><span class="n">bandNames</span><span class="p">()</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()</span>
        <span class="n">top_vis</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;bands&quot;</span><span class="p">:</span> <span class="n">top_bands</span><span class="p">}</span>
        <span class="k">if</span> <span class="n">hillshade</span><span class="p">:</span>
            <span class="n">top_vis</span><span class="p">[</span><span class="s2">&quot;palette&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;006633&quot;</span><span class="p">,</span> <span class="s2">&quot;E5FFCC&quot;</span><span class="p">,</span> <span class="s2">&quot;662A00&quot;</span><span class="p">,</span> <span class="s2">&quot;D8D8D8&quot;</span><span class="p">,</span> <span class="s2">&quot;F5F5F5&quot;</span><span class="p">]</span>
            <span class="n">top_vis</span><span class="p">[</span><span class="s2">&quot;min&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">top_vis</span><span class="p">[</span><span class="s2">&quot;max&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">6000</span>

    <span class="k">if</span> <span class="n">bottom_vis</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">bottom_bands</span> <span class="o">=</span> <span class="n">bottom_layer</span><span class="o">.</span><span class="n">bandNames</span><span class="p">()</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()</span>
        <span class="n">bottom_vis</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;bands&quot;</span><span class="p">:</span> <span class="n">bottom_bands</span><span class="p">}</span>
        <span class="k">if</span> <span class="n">hillshade</span><span class="p">:</span>
            <span class="n">bottom_vis</span><span class="p">[</span><span class="s2">&quot;bands&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;hillshade&quot;</span><span class="p">]</span>

    <span class="n">top</span> <span class="o">=</span> <span class="n">top_layer</span><span class="o">.</span><span class="n">visualize</span><span class="p">(</span><span class="o">**</span><span class="n">top_vis</span><span class="p">)</span><span class="o">.</span><span class="n">divide</span><span class="p">(</span><span class="mi">255</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">hillshade</span><span class="p">:</span>
        <span class="n">bottom</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Terrain</span><span class="o">.</span><span class="n">hillshade</span><span class="p">(</span><span class="n">bottom_layer</span><span class="p">)</span><span class="o">.</span><span class="n">visualize</span><span class="p">(</span><span class="o">**</span><span class="n">bottom_vis</span><span class="p">)</span><span class="o">.</span><span class="n">divide</span><span class="p">(</span><span class="mi">255</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">bottom</span> <span class="o">=</span> <span class="n">bottom_layer</span><span class="o">.</span><span class="n">visualize</span><span class="p">(</span><span class="o">**</span><span class="n">bottom_vis</span><span class="p">)</span><span class="o">.</span><span class="n">divide</span><span class="p">(</span><span class="mi">255</span><span class="p">)</span>

    <span class="k">if</span> <span class="s2">&quot;a&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">expression</span> <span class="ow">or</span> <span class="p">(</span><span class="s2">&quot;b&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">expression</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;expression must contain &#39;a&#39; and &#39;b&#39;.&quot;</span><span class="p">)</span>

    <span class="n">result</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">()</span><span class="o">.</span><span class="n">expression</span><span class="p">(</span><span class="n">expression</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="n">top</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="n">bottom</span><span class="p">})</span>
    <span class="k">return</span> <span class="n">result</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.build_api_tree" class="doc doc-heading">
<code class="highlight language-python"><span class="n">build_api_tree</span><span class="p">(</span><span class="n">api_dict</span><span class="p">,</span> <span class="n">output_widget</span><span class="p">,</span> <span class="n">layout_width</span><span class="o">=</span><span class="s1">&#39;100%&#39;</span><span class="p">)</span></code>


<a href="#geemap.common.build_api_tree" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Builds an Earth Engine API tree view.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>api_dict</code></td>
        <td><code>dict</code></td>
        <td><p>The dictionary containing information about each Earth Engine API function.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>output_widget</code></td>
        <td><code>object</code></td>
        <td><p>An Output widget.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>layout_width</code></td>
        <td><code>str</code></td>
        <td><p>The percentage width of the widget. Defaults to '100%'.</p></td>
        <td><code>&#39;100%&#39;</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>tuple</code></td>
      <td><p>Returns a tuple containing two items: a tree Output widget and a tree dictionary.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">build_api_tree</span><span class="p">(</span><span class="n">api_dict</span><span class="p">,</span> <span class="n">output_widget</span><span class="p">,</span> <span class="n">layout_width</span><span class="o">=</span><span class="s2">&quot;100%&quot;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Builds an Earth Engine API tree view.</span>

<span class="sd">    Args:</span>
<span class="sd">        api_dict (dict): The dictionary containing information about each Earth Engine API function.</span>
<span class="sd">        output_widget (object): An Output widget.</span>
<span class="sd">        layout_width (str, optional): The percentage width of the widget. Defaults to &#39;100%&#39;.</span>

<span class="sd">    Returns:</span>
<span class="sd">        tuple: Returns a tuple containing two items: a tree Output widget and a tree dictionary.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s2">&quot;ignore&quot;</span><span class="p">)</span>

    <span class="n">tree</span> <span class="o">=</span> <span class="n">Tree</span><span class="p">()</span>
    <span class="n">tree_dict</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="n">names</span> <span class="o">=</span> <span class="n">api_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">handle_click</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">event</span><span class="p">[</span><span class="s2">&quot;new&quot;</span><span class="p">]:</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">event</span><span class="p">[</span><span class="s2">&quot;owner&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">name</span>
            <span class="n">values</span> <span class="o">=</span> <span class="n">api_dict</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>

            <span class="k">with</span> <span class="n">output_widget</span><span class="p">:</span>
                <span class="n">output_widget</span><span class="o">.</span><span class="n">clear_output</span><span class="p">()</span>
                <span class="n">html_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">HTML</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">values</span><span class="p">[</span><span class="s2">&quot;html&quot;</span><span class="p">])</span>
                <span class="n">display</span><span class="p">(</span><span class="n">html_widget</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">names</span><span class="p">:</span>
        <span class="n">func_list</span> <span class="o">=</span> <span class="n">ee_function_tree</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="n">first</span> <span class="o">=</span> <span class="n">func_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">first</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">tree_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">tree_dict</span><span class="p">[</span><span class="n">first</span><span class="p">]</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">first</span><span class="p">)</span>
            <span class="n">tree_dict</span><span class="p">[</span><span class="n">first</span><span class="p">]</span><span class="o">.</span><span class="n">opened</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="n">tree</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="n">tree_dict</span><span class="p">[</span><span class="n">first</span><span class="p">])</span>

        <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">func</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">func_list</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">index</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">func</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">tree_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                    <span class="n">node</span> <span class="o">=</span> <span class="n">tree_dict</span><span class="p">[</span><span class="n">func_list</span><span class="p">[</span><span class="n">index</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]]</span>
                    <span class="n">node</span><span class="o">.</span><span class="n">opened</span> <span class="o">=</span> <span class="kc">False</span>
                    <span class="n">tree_dict</span><span class="p">[</span><span class="n">func</span><span class="p">]</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
                    <span class="n">node</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="n">tree_dict</span><span class="p">[</span><span class="n">func</span><span class="p">])</span>

                    <span class="k">if</span> <span class="n">index</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">func_list</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span>
                        <span class="n">node</span> <span class="o">=</span> <span class="n">tree_dict</span><span class="p">[</span><span class="n">func_list</span><span class="p">[</span><span class="n">index</span><span class="p">]]</span>
                        <span class="n">node</span><span class="o">.</span><span class="n">icon</span> <span class="o">=</span> <span class="s2">&quot;file&quot;</span>
                        <span class="n">node</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">handle_click</span><span class="p">,</span> <span class="s2">&quot;selected&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">tree</span><span class="p">,</span> <span class="n">tree_dict</span>
</code></pre></div>
        </details>
    </div>

  </div>




  <div class="doc doc-object doc-function">



<h2 id="geemap.common.build_repo_tree" class="doc doc-heading">
<code class="highlight language-python"><span class="n">build_repo_tree</span><span class="p">(</span><span class="n">out_dir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;gee_repos&#39;</span><span class="p">)</span></code>


<a href="#geemap.common.build_repo_tree" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Builds a repo tree for GEE account.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>out_dir</code></td>
        <td><code>str</code></td>
        <td><p>The output directory for the repos. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>name</code></td>
        <td><code>str</code></td>
        <td><p>The output name for the repo directory. Defaults to 'gee_repos'.</p></td>
        <td><code>&#39;gee_repos&#39;</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>tuple</code></td>
      <td><p>Returns a tuple containing a tree widget, an output widget, and a tree dictionary containing nodes.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">build_repo_tree</span><span class="p">(</span><span class="n">out_dir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;gee_repos&quot;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Builds a repo tree for GEE account.</span>

<span class="sd">    Args:</span>
<span class="sd">        out_dir (str): The output directory for the repos. Defaults to None.</span>
<span class="sd">        name (str, optional): The output name for the repo directory. Defaults to &#39;gee_repos&#39;.</span>

<span class="sd">    Returns:</span>
<span class="sd">        tuple: Returns a tuple containing a tree widget, an output widget, and a tree dictionary containing nodes.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s2">&quot;ignore&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">out_dir</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">out_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="s2">&quot;~&quot;</span><span class="p">))</span>

    <span class="n">repo_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">out_dir</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">repo_dir</span><span class="p">):</span>
        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">repo_dir</span><span class="p">)</span>

    <span class="n">URLs</span> <span class="o">=</span> <span class="p">{</span>
        <span class="c1"># &#39;Owner&#39;: &#39;https://earthengine.googlesource.com/{ee_user_id()}/default&#39;,</span>
        <span class="s2">&quot;Writer&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="s2">&quot;Reader&quot;</span><span class="p">:</span> <span class="s2">&quot;https://github.com/giswqs/geemap&quot;</span><span class="p">,</span>
        <span class="s2">&quot;Examples&quot;</span><span class="p">:</span> <span class="s2">&quot;https://github.com/giswqs/earthengine-py-examples&quot;</span><span class="p">,</span>
        <span class="s2">&quot;Archive&quot;</span><span class="p">:</span> <span class="s2">&quot;https://earthengine.googlesource.com/EGU2017-EE101&quot;</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="n">user_id</span> <span class="o">=</span> <span class="n">ee_user_id</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">user_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">URLs</span><span class="p">[</span><span class="s2">&quot;Owner&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;https://earthengine.googlesource.com/</span><span class="si">{</span><span class="n">ee_user_id</span><span class="p">()</span><span class="si">}</span><span class="s2">/default&quot;</span>

    <span class="n">path_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Text</span><span class="p">(</span><span class="n">placeholder</span><span class="o">=</span><span class="s2">&quot;Enter the link to a Git repository here...&quot;</span><span class="p">)</span>
    <span class="n">path_widget</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="s2">&quot;475px&quot;</span>
    <span class="n">clone_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Clone&quot;</span><span class="p">,</span>
        <span class="n">button_style</span><span class="o">=</span><span class="s2">&quot;primary&quot;</span><span class="p">,</span>
        <span class="n">tooltip</span><span class="o">=</span><span class="s2">&quot;Clone the repository to folder.&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">info_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">HBox</span><span class="p">()</span>

    <span class="n">groups</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Owner&quot;</span><span class="p">,</span> <span class="s2">&quot;Writer&quot;</span><span class="p">,</span> <span class="s2">&quot;Reader&quot;</span><span class="p">,</span> <span class="s2">&quot;Examples&quot;</span><span class="p">,</span> <span class="s2">&quot;Archive&quot;</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">group</span> <span class="ow">in</span> <span class="n">groups</span><span class="p">:</span>
        <span class="n">group_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">repo_dir</span><span class="p">,</span> <span class="n">group</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">group_dir</span><span class="p">):</span>
            <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">group_dir</span><span class="p">)</span>

    <span class="n">example_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">repo_dir</span><span class="p">,</span> <span class="s2">&quot;Examples/earthengine-py-examples&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">example_dir</span><span class="p">):</span>
        <span class="n">clone_github_repo</span><span class="p">(</span><span class="n">URLs</span><span class="p">[</span><span class="s2">&quot;Examples&quot;</span><span class="p">],</span> <span class="n">out_dir</span><span class="o">=</span><span class="n">example_dir</span><span class="p">)</span>

    <span class="n">left_widget</span><span class="p">,</span> <span class="n">right_widget</span><span class="p">,</span> <span class="n">tree_dict</span> <span class="o">=</span> <span class="n">file_browser</span><span class="p">(</span>
        <span class="n">in_dir</span><span class="o">=</span><span class="n">repo_dir</span><span class="p">,</span>
        <span class="n">add_root_node</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">search_description</span><span class="o">=</span><span class="s2">&quot;Filter scripts...&quot;</span><span class="p">,</span>
        <span class="n">use_import</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">return_sep_widgets</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">info_widget</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">[</span><span class="n">right_widget</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">handle_folder_click</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">event</span><span class="p">[</span><span class="s2">&quot;new&quot;</span><span class="p">]:</span>
            <span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
            <span class="n">selected</span> <span class="o">=</span> <span class="n">event</span><span class="p">[</span><span class="s2">&quot;owner&quot;</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">selected</span><span class="o">.</span><span class="n">name</span> <span class="ow">in</span> <span class="n">URLs</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="n">url</span> <span class="o">=</span> <span class="n">URLs</span><span class="p">[</span><span class="n">selected</span><span class="o">.</span><span class="n">name</span><span class="p">]</span>

            <span class="n">path_widget</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">url</span>
            <span class="n">clone_widget</span><span class="o">.</span><span class="n">disabled</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="n">info_widget</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">[</span><span class="n">path_widget</span><span class="p">,</span> <span class="n">clone_widget</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">info_widget</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">[</span><span class="n">right_widget</span><span class="p">]</span>

    <span class="k">for</span> <span class="n">group</span> <span class="ow">in</span> <span class="n">groups</span><span class="p">:</span>
        <span class="n">dirname</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">repo_dir</span><span class="p">,</span> <span class="n">group</span><span class="p">)</span>
        <span class="n">node</span> <span class="o">=</span> <span class="n">tree_dict</span><span class="p">[</span><span class="n">dirname</span><span class="p">]</span>
        <span class="n">node</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">handle_folder_click</span><span class="p">,</span> <span class="s2">&quot;selected&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">handle_clone_click</span><span class="p">(</span><span class="n">b</span><span class="p">):</span>

        <span class="n">url</span> <span class="o">=</span> <span class="n">path_widget</span><span class="o">.</span><span class="n">value</span>
        <span class="n">default_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">repo_dir</span><span class="p">,</span> <span class="s2">&quot;Examples&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">url</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
            <span class="n">path_widget</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s2">&quot;Please enter a valid URL to the repository.&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">group</span> <span class="ow">in</span> <span class="n">groups</span><span class="p">:</span>
                <span class="n">key</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">repo_dir</span><span class="p">,</span> <span class="n">group</span><span class="p">)</span>
                <span class="n">node</span> <span class="o">=</span> <span class="n">tree_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">selected</span><span class="p">:</span>
                    <span class="n">default_dir</span> <span class="o">=</span> <span class="n">key</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">path_widget</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s2">&quot;Cloning...&quot;</span>
                <span class="n">clone_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">default_dir</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">url</span><span class="p">))</span>
                <span class="k">if</span> <span class="n">url</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;github.com&quot;</span><span class="p">)</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
                    <span class="n">clone_github_repo</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">out_dir</span><span class="o">=</span><span class="n">clone_dir</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">url</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;googlesource&quot;</span><span class="p">)</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
                    <span class="n">clone_google_repo</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">out_dir</span><span class="o">=</span><span class="n">clone_dir</span><span class="p">)</span>
                <span class="n">path_widget</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s2">&quot;Cloned to </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">clone_dir</span><span class="p">)</span>
                <span class="n">clone_widget</span><span class="o">.</span><span class="n">disabled</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="n">path_widget</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="s2">&quot;An error occurred when trying to clone the repository &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
                <span class="p">)</span>
                <span class="n">clone_widget</span><span class="o">.</span><span class="n">disabled</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="n">clone_widget</span><span class="o">.</span><span class="n">on_click</span><span class="p">(</span><span class="n">handle_clone_click</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">left_widget</span><span class="p">,</span> <span class="n">info_widget</span><span class="p">,</span> <span class="n">tree_dict</span>
</code></pre></div>
        </details>
    </div>

  </div>




  <div class="doc doc-object doc-function">



<h2 id="geemap.common.check_cmap" class="doc doc-heading">
<code class="highlight language-python"><span class="n">check_cmap</span><span class="p">(</span><span class="n">cmap</span><span class="p">)</span></code>


<a href="#geemap.common.check_cmap" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Check the colormap and return a list of colors.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>cmap</code></td>
        <td><code>str | list | Box</code></td>
        <td><p>The colormap to check.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>list</code></td>
      <td><p>A list of colors.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">check_cmap</span><span class="p">(</span><span class="n">cmap</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Check the colormap and return a list of colors.</span>

<span class="sd">    Args:</span>
<span class="sd">        cmap (str | list | Box): The colormap to check.</span>

<span class="sd">    Returns:</span>
<span class="sd">        list: A list of colors.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="kn">from</span> <span class="nn">box</span> <span class="kn">import</span> <span class="n">Box</span>
    <span class="kn">from</span> <span class="nn">.colormaps</span> <span class="kn">import</span> <span class="n">get_palette</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">cmap</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">palette</span> <span class="o">=</span> <span class="n">get_palette</span><span class="p">(</span><span class="n">cmap</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">palette</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
                <span class="n">palette</span> <span class="o">=</span> <span class="n">palette</span><span class="p">[</span><span class="s2">&quot;default&quot;</span><span class="p">]</span>
            <span class="k">return</span> <span class="n">palette</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">check_color</span><span class="p">(</span><span class="n">cmap</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">cmap</span><span class="si">}</span><span class="s2"> is not a valid colormap.&quot;</span><span class="p">)</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">cmap</span><span class="p">,</span> <span class="n">Box</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">cmap</span><span class="p">[</span><span class="s2">&quot;default&quot;</span><span class="p">])</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">cmap</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">cmap</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">cmap</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">cmap</span><span class="si">}</span><span class="s2"> is not a valid colormap.&quot;</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.check_color" class="doc doc-heading">
<code class="highlight language-python"><span class="n">check_color</span><span class="p">(</span><span class="n">in_color</span><span class="p">)</span></code>


<a href="#geemap.common.check_color" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Checks the input color and returns the corresponding hex color code.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>in_color</code></td>
        <td><code>str or tuple</code></td>
        <td><p>It can be a string (e.g., 'red', '#ffff00', 'ffff00', 'ff0') or RGB tuple (e.g., (255, 127, 0)).</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>str</code></td>
      <td><p>A hex color code.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">check_color</span><span class="p">(</span><span class="n">in_color</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Checks the input color and returns the corresponding hex color code.</span>

<span class="sd">    Args:</span>
<span class="sd">        in_color (str or tuple): It can be a string (e.g., &#39;red&#39;, &#39;#ffff00&#39;, &#39;ffff00&#39;, &#39;ff0&#39;) or RGB tuple (e.g., (255, 127, 0)).</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: A hex color code.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">colour</span>

    <span class="n">out_color</span> <span class="o">=</span> <span class="s2">&quot;#000000&quot;</span>  <span class="c1"># default black color</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">in_color</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">in_color</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>

        <span class="c1"># rescale color if necessary</span>
        <span class="k">if</span> <span class="nb">all</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">in_color</span><span class="p">):</span>
            <span class="n">in_color</span> <span class="o">=</span> <span class="p">[</span><span class="n">c</span> <span class="o">/</span> <span class="mf">255.0</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">in_color</span><span class="p">]</span>

        <span class="k">return</span> <span class="n">colour</span><span class="o">.</span><span class="n">Color</span><span class="p">(</span><span class="n">rgb</span><span class="o">=</span><span class="nb">tuple</span><span class="p">(</span><span class="n">in_color</span><span class="p">))</span><span class="o">.</span><span class="n">hex_l</span>

    <span class="k">else</span><span class="p">:</span>

        <span class="c1"># try to guess the color system</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">colour</span><span class="o">.</span><span class="n">Color</span><span class="p">(</span><span class="n">in_color</span><span class="p">)</span><span class="o">.</span><span class="n">hex_l</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">pass</span>

        <span class="c1"># try again by adding an extra # (GEE handle hex codes without #)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">colour</span><span class="o">.</span><span class="n">Color</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;#</span><span class="si">{</span><span class="n">in_color</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">hex_l</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;The provided color (</span><span class="si">{</span><span class="n">in_color</span><span class="si">}</span><span class="s2">) is invalid. Using the default black color.&quot;</span>
            <span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">out_color</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.check_dir" class="doc doc-heading">
<code class="highlight language-python"><span class="n">check_dir</span><span class="p">(</span><span class="n">dir_path</span><span class="p">,</span> <span class="n">make_dirs</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>


<a href="#geemap.common.check_dir" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Checks if a directory exists and creates it if it does not.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>dir_path</code></td>
        <td><code>[str</code></td>
        <td><p>The path to the directory.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>make_dirs</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to create the directory if it does not exist. Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>FileNotFoundError</code></td>
        <td><p>If the directory could not be found.</p></td>
      </tr>
      <tr>
        <td><code>TypeError</code></td>
        <td><p>If the input directory path is not a string.</p></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>str</code></td>
      <td><p>The path to the directory.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">check_dir</span><span class="p">(</span><span class="n">dir_path</span><span class="p">,</span> <span class="n">make_dirs</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Checks if a directory exists and creates it if it does not.</span>

<span class="sd">    Args:</span>
<span class="sd">        dir_path ([str): The path to the directory.</span>
<span class="sd">        make_dirs (bool, optional): Whether to create the directory if it does not exist. Defaults to True.</span>

<span class="sd">    Raises:</span>
<span class="sd">        FileNotFoundError: If the directory could not be found.</span>
<span class="sd">        TypeError: If the input directory path is not a string.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: The path to the directory.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">dir_path</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">dir_path</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;~&quot;</span><span class="p">):</span>
            <span class="n">dir_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="n">dir_path</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">dir_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">dir_path</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">dir_path</span><span class="p">)</span> <span class="ow">and</span> <span class="n">make_dirs</span><span class="p">:</span>
            <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">dir_path</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">dir_path</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">dir_path</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span><span class="s2">&quot;The provided directory could not be found.&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;The provided directory path must be a string.&quot;</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.check_file_path" class="doc doc-heading">
<code class="highlight language-python"><span class="n">check_file_path</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="n">make_dirs</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>


<a href="#geemap.common.check_file_path" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Gets the absolute file path.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>file_path</code></td>
        <td><code>[str</code></td>
        <td><p>The path to the file.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>make_dirs</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to create the directory if it does not exist. Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>FileNotFoundError</code></td>
        <td><p>If the directory could not be found.</p></td>
      </tr>
      <tr>
        <td><code>TypeError</code></td>
        <td><p>If the input directory path is not a string.</p></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>str</code></td>
      <td><p>The absolute path to the file.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">check_file_path</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="n">make_dirs</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Gets the absolute file path.</span>

<span class="sd">    Args:</span>
<span class="sd">        file_path ([str): The path to the file.</span>
<span class="sd">        make_dirs (bool, optional): Whether to create the directory if it does not exist. Defaults to True.</span>

<span class="sd">    Raises:</span>
<span class="sd">        FileNotFoundError: If the directory could not be found.</span>
<span class="sd">        TypeError: If the input directory path is not a string.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: The absolute path to the file.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">file_path</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;~&quot;</span><span class="p">):</span>
            <span class="n">file_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">file_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>

        <span class="n">file_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">file_dir</span><span class="p">)</span> <span class="ow">and</span> <span class="n">make_dirs</span><span class="p">:</span>
            <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">file_dir</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">file_path</span>

    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;The provided file path must be a string.&quot;</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.check_git_install" class="doc doc-heading">
<code class="highlight language-python"><span class="n">check_git_install</span><span class="p">()</span></code>


<a href="#geemap.common.check_git_install" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Checks if Git is installed.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>bool</code></td>
      <td><p>Returns True if Git is installed, otherwise returns False.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">check_git_install</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Checks if Git is installed.</span>

<span class="sd">    Returns:</span>
<span class="sd">        bool: Returns True if Git is installed, otherwise returns False.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">webbrowser</span>

    <span class="n">cmd</span> <span class="o">=</span> <span class="s2">&quot;git --version&quot;</span>
    <span class="n">output</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">popen</span><span class="p">(</span><span class="n">cmd</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>

    <span class="k">if</span> <span class="s2">&quot;git version&quot;</span> <span class="ow">in</span> <span class="n">output</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">True</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;https://git-scm.com/downloads&quot;</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Git is not installed. Please download Git from </span><span class="si">{</span><span class="n">url</span><span class="si">}</span><span class="s2"> and install it.&quot;</span><span class="p">)</span>
        <span class="n">webbrowser</span><span class="o">.</span><span class="n">open_new_tab</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">False</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.check_install" class="doc doc-heading">
<code class="highlight language-python"><span class="n">check_install</span><span class="p">(</span><span class="n">package</span><span class="p">)</span></code>


<a href="#geemap.common.check_install" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Checks whether a package is installed. If not, it will install the package.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>package</code></td>
        <td><code>str</code></td>
        <td><p>The name of the package to check.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">check_install</span><span class="p">(</span><span class="n">package</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Checks whether a package is installed. If not, it will install the package.</span>

<span class="sd">    Args:</span>
<span class="sd">        package (str): The name of the package to check.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">subprocess</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="nb">__import__</span><span class="p">(</span><span class="n">package</span><span class="p">)</span>
        <span class="c1"># print(&#39;{} is already installed.&#39;.format(package))</span>
    <span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">package</span><span class="si">}</span><span class="s2"> is not installed. Installing ...&quot;</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">subprocess</span><span class="o">.</span><span class="n">check_call</span><span class="p">([</span><span class="s2">&quot;python&quot;</span><span class="p">,</span> <span class="s2">&quot;-m&quot;</span><span class="p">,</span> <span class="s2">&quot;pip&quot;</span><span class="p">,</span> <span class="s2">&quot;install&quot;</span><span class="p">,</span> <span class="n">package</span><span class="p">])</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to install </span><span class="si">{</span><span class="n">package</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">package</span><span class="si">}</span><span class="s2"> has been installed successfully.&quot;</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>




  <div class="doc doc-object doc-function">



<h2 id="geemap.common.check_titiler_endpoint" class="doc doc-heading">
<code class="highlight language-python"><span class="n">check_titiler_endpoint</span><span class="p">(</span><span class="n">titiler_endpoint</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


<a href="#geemap.common.check_titiler_endpoint" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Returns the default titiler endpoint.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>object</code></td>
      <td><p>A titiler endpoint.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">check_titiler_endpoint</span><span class="p">(</span><span class="n">titiler_endpoint</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Returns the default titiler endpoint.</span>

<span class="sd">    Returns:</span>
<span class="sd">        object: A titiler endpoint.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">titiler_endpoint</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;TITILER_ENDPOINT&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">titiler_endpoint</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;TITILER_ENDPOINT&quot;</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">titiler_endpoint</span> <span class="o">==</span> <span class="s2">&quot;planetary-computer&quot;</span><span class="p">:</span>
                <span class="n">titiler_endpoint</span> <span class="o">=</span> <span class="n">PlanetaryComputerEndpoint</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">titiler_endpoint</span> <span class="o">=</span> <span class="s2">&quot;https://titiler.xyz&quot;</span>
    <span class="k">elif</span> <span class="n">titiler_endpoint</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;planetary-computer&quot;</span><span class="p">,</span> <span class="s2">&quot;pc&quot;</span><span class="p">]:</span>
        <span class="n">titiler_endpoint</span> <span class="o">=</span> <span class="n">PlanetaryComputerEndpoint</span><span class="p">()</span>

    <span class="k">return</span> <span class="n">titiler_endpoint</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.classify" class="doc doc-heading">
<code class="highlight language-python"><span class="n">classify</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">column</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">colors</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">labels</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">scheme</span><span class="o">=</span><span class="s1">&#39;Quantiles&#39;</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">legend_kwds</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">classification_kwds</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


<a href="#geemap.common.classify" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Classify a dataframe column using a variety of classification schemes.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>data</code></td>
        <td><code>str | pd.DataFrame | gpd.GeoDataFrame</code></td>
        <td><p>The data to classify. It can be a filepath to a vector dataset, a pandas dataframe, or a geopandas geodataframe.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>column</code></td>
        <td><code>str</code></td>
        <td><p>The column to classify.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>cmap</code></td>
        <td><code>str</code></td>
        <td><p>The name of a colormap recognized by matplotlib. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>colors</code></td>
        <td><code>list</code></td>
        <td><p>A list of colors to use for the classification. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>labels</code></td>
        <td><code>list</code></td>
        <td><p>A list of labels to use for the legend. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>scheme</code></td>
        <td><code>str</code></td>
        <td><p>Name of a choropleth classification scheme (requires mapclassify).
Name of a choropleth classification scheme (requires mapclassify).
A mapclassify.MapClassifier object will be used
under the hood. Supported are all schemes provided by mapclassify (e.g.
'BoxPlot', 'EqualInterval', 'FisherJenks', 'FisherJenksSampled',
'HeadTailBreaks', 'JenksCaspall', 'JenksCaspallForced',
'JenksCaspallSampled', 'MaxP', 'MaximumBreaks',
'NaturalBreaks', 'Quantiles', 'Percentiles', 'StdMean',
'UserDefined'). Arguments can be passed in classification_kwds.</p></td>
        <td><code>&#39;Quantiles&#39;</code></td>
      </tr>
      <tr>
        <td><code>k</code></td>
        <td><code>int</code></td>
        <td><p>Number of classes (ignored if scheme is None or if column is categorical). Default to 5.</p></td>
        <td><code>5</code></td>
      </tr>
      <tr>
        <td><code>legend_kwds</code></td>
        <td><code>dict</code></td>
        <td><p>Keyword arguments to pass to :func:<code>matplotlib.pyplot.legend</code> or <code>matplotlib.pyplot.colorbar</code>. Defaults to None.
Keyword arguments to pass to :func:<code>matplotlib.pyplot.legend</code> or
Additional accepted keywords when <code>scheme</code> is specified:
fmt : string
    A formatting specification for the bin edges of the classes in the
    legend. For example, to have no decimals: <code>{"fmt": "{:.0f}"}</code>.
labels : list-like
    A list of legend labels to override the auto-generated labblels.
    Needs to have the same number of elements as the number of
    classes (<code>k</code>).
interval : boolean (default False)
    An option to control brackets from mapclassify legend.
    If True, open/closed interval brackets are shown in the legend.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>classification_kwds</code></td>
        <td><code>dict</code></td>
        <td><p>Keyword arguments to pass to mapclassify. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>pd.DataFrame, dict</code></td>
      <td><p>A pandas dataframe with the classification applied and a legend dictionary.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">classify</span><span class="p">(</span>
    <span class="n">data</span><span class="p">,</span>
    <span class="n">column</span><span class="p">,</span>
    <span class="n">cmap</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">colors</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">labels</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">scheme</span><span class="o">=</span><span class="s2">&quot;Quantiles&quot;</span><span class="p">,</span>
    <span class="n">k</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
    <span class="n">legend_kwds</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">classification_kwds</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Classify a dataframe column using a variety of classification schemes.</span>

<span class="sd">    Args:</span>
<span class="sd">        data (str | pd.DataFrame | gpd.GeoDataFrame): The data to classify. It can be a filepath to a vector dataset, a pandas dataframe, or a geopandas geodataframe.</span>
<span class="sd">        column (str): The column to classify.</span>
<span class="sd">        cmap (str, optional): The name of a colormap recognized by matplotlib. Defaults to None.</span>
<span class="sd">        colors (list, optional): A list of colors to use for the classification. Defaults to None.</span>
<span class="sd">        labels (list, optional): A list of labels to use for the legend. Defaults to None.</span>
<span class="sd">        scheme (str, optional): Name of a choropleth classification scheme (requires mapclassify).</span>
<span class="sd">            Name of a choropleth classification scheme (requires mapclassify).</span>
<span class="sd">            A mapclassify.MapClassifier object will be used</span>
<span class="sd">            under the hood. Supported are all schemes provided by mapclassify (e.g.</span>
<span class="sd">            &#39;BoxPlot&#39;, &#39;EqualInterval&#39;, &#39;FisherJenks&#39;, &#39;FisherJenksSampled&#39;,</span>
<span class="sd">            &#39;HeadTailBreaks&#39;, &#39;JenksCaspall&#39;, &#39;JenksCaspallForced&#39;,</span>
<span class="sd">            &#39;JenksCaspallSampled&#39;, &#39;MaxP&#39;, &#39;MaximumBreaks&#39;,</span>
<span class="sd">            &#39;NaturalBreaks&#39;, &#39;Quantiles&#39;, &#39;Percentiles&#39;, &#39;StdMean&#39;,</span>
<span class="sd">            &#39;UserDefined&#39;). Arguments can be passed in classification_kwds.</span>
<span class="sd">        k (int, optional): Number of classes (ignored if scheme is None or if column is categorical). Default to 5.</span>
<span class="sd">        legend_kwds (dict, optional): Keyword arguments to pass to :func:`matplotlib.pyplot.legend` or `matplotlib.pyplot.colorbar`. Defaults to None.</span>
<span class="sd">            Keyword arguments to pass to :func:`matplotlib.pyplot.legend` or</span>
<span class="sd">            Additional accepted keywords when `scheme` is specified:</span>
<span class="sd">            fmt : string</span>
<span class="sd">                A formatting specification for the bin edges of the classes in the</span>
<span class="sd">                legend. For example, to have no decimals: ``{&quot;fmt&quot;: &quot;{:.0f}&quot;}``.</span>
<span class="sd">            labels : list-like</span>
<span class="sd">                A list of legend labels to override the auto-generated labblels.</span>
<span class="sd">                Needs to have the same number of elements as the number of</span>
<span class="sd">                classes (`k`).</span>
<span class="sd">            interval : boolean (default False)</span>
<span class="sd">                An option to control brackets from mapclassify legend.</span>
<span class="sd">                If True, open/closed interval brackets are shown in the legend.</span>
<span class="sd">        classification_kwds (dict, optional): Keyword arguments to pass to mapclassify. Defaults to None.</span>

<span class="sd">    Returns:</span>
<span class="sd">        pd.DataFrame, dict: A pandas dataframe with the classification applied and a legend dictionary.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
    <span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
    <span class="kn">import</span> <span class="nn">geopandas</span> <span class="k">as</span> <span class="nn">gpd</span>
    <span class="kn">import</span> <span class="nn">matplotlib</span> <span class="k">as</span> <span class="nn">mpl</span>
    <span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="kn">import</span> <span class="nn">mapclassify</span>
    <span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ImportError</span><span class="p">(</span>
            <span class="s1">&#39;mapclassify is required for this function. Install with &quot;pip install mapclassify&quot;.&#39;</span>
        <span class="p">)</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">gpd</span><span class="o">.</span><span class="n">GeoDataFrame</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">):</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">data</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">df</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
                <span class="s2">&quot;Data must be a GeoDataFrame or a path to a file that can be read by geopandas.read_file().&quot;</span>
            <span class="p">)</span>

    <span class="k">if</span> <span class="n">df</span><span class="o">.</span><span class="n">empty</span><span class="p">:</span>
        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
            <span class="s2">&quot;The GeoDataFrame you are attempting to plot is &quot;</span>
            <span class="s2">&quot;empty. Nothing has been displayed.&quot;</span><span class="p">,</span>
            <span class="ne">UserWarning</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">return</span>

    <span class="n">columns</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">column</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">columns</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">column</span><span class="si">}</span><span class="s2"> is not a column in the GeoDataFrame. It must be one of </span><span class="si">{</span><span class="n">columns</span><span class="si">}</span><span class="s2">.&quot;</span>
        <span class="p">)</span>

    <span class="c1"># Convert categorical data to numeric</span>
    <span class="n">init_column</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">value_list</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">issubdtype</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">column</span><span class="p">]</span><span class="o">.</span><span class="n">dtype</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">object0</span><span class="p">):</span>
        <span class="n">value_list</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">column</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
        <span class="n">value_list</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="n">df</span><span class="p">[</span><span class="s2">&quot;category&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">column</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">value_list</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">value_list</span><span class="p">)))</span>
        <span class="n">init_column</span> <span class="o">=</span> <span class="n">column</span>
        <span class="n">column</span> <span class="o">=</span> <span class="s2">&quot;category&quot;</span>
        <span class="n">k</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">value_list</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">legend_kwds</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">legend_kwds</span> <span class="o">=</span> <span class="n">legend_kwds</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

    <span class="c1"># To accept pd.Series and np.arrays as column</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">column</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">)):</span>
        <span class="k">if</span> <span class="n">column</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="n">df</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;The dataframe and given column have different number of rows.&quot;</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">values</span> <span class="o">=</span> <span class="n">column</span>

            <span class="c1"># Make sure index of a Series matches index of df</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">):</span>
                <span class="n">values</span> <span class="o">=</span> <span class="n">values</span><span class="o">.</span><span class="n">reindex</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">values</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">column</span><span class="p">]</span>

    <span class="n">values</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">column</span><span class="p">]</span>
    <span class="n">nan_idx</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">isna</span><span class="p">(</span><span class="n">values</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="s2">&quot;bool&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">cmap</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">cmap</span> <span class="o">=</span> <span class="s2">&quot;Blues&quot;</span>
    <span class="n">cmap</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">cm</span><span class="o">.</span><span class="n">get_cmap</span><span class="p">(</span><span class="n">cmap</span><span class="p">,</span> <span class="n">k</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">colors</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">colors</span> <span class="o">=</span> <span class="p">[</span><span class="n">mpl</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">rgb2hex</span><span class="p">(</span><span class="n">cmap</span><span class="p">(</span><span class="n">i</span><span class="p">))[</span><span class="mi">1</span><span class="p">:]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">cmap</span><span class="o">.</span><span class="n">N</span><span class="p">)]</span>
        <span class="n">colors</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;#&quot;</span> <span class="o">+</span> <span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">colors</span><span class="p">]</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">colors</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
        <span class="n">colors</span> <span class="o">=</span> <span class="p">[</span><span class="n">check_color</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">colors</span><span class="p">]</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">colors</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">colors</span> <span class="o">=</span> <span class="p">[</span><span class="n">check_color</span><span class="p">(</span><span class="n">colors</span><span class="p">)]</span> <span class="o">*</span> <span class="n">k</span>

    <span class="n">allowed_schemes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s2">&quot;BoxPlot&quot;</span><span class="p">,</span>
        <span class="s2">&quot;EqualInterval&quot;</span><span class="p">,</span>
        <span class="s2">&quot;FisherJenks&quot;</span><span class="p">,</span>
        <span class="s2">&quot;FisherJenksSampled&quot;</span><span class="p">,</span>
        <span class="s2">&quot;HeadTailBreaks&quot;</span><span class="p">,</span>
        <span class="s2">&quot;JenksCaspall&quot;</span><span class="p">,</span>
        <span class="s2">&quot;JenksCaspallForced&quot;</span><span class="p">,</span>
        <span class="s2">&quot;JenksCaspallSampled&quot;</span><span class="p">,</span>
        <span class="s2">&quot;MaxP&quot;</span><span class="p">,</span>
        <span class="s2">&quot;MaximumBreaks&quot;</span><span class="p">,</span>
        <span class="s2">&quot;NaturalBreaks&quot;</span><span class="p">,</span>
        <span class="s2">&quot;Quantiles&quot;</span><span class="p">,</span>
        <span class="s2">&quot;Percentiles&quot;</span><span class="p">,</span>
        <span class="s2">&quot;StdMean&quot;</span><span class="p">,</span>
        <span class="s2">&quot;UserDefined&quot;</span><span class="p">,</span>
    <span class="p">]</span>

    <span class="k">if</span> <span class="n">scheme</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="n">s</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">allowed_schemes</span><span class="p">]:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">scheme</span><span class="si">}</span><span class="s2"> is not a valid scheme. It must be one of </span><span class="si">{</span><span class="n">allowed_schemes</span><span class="si">}</span><span class="s2">.&quot;</span>
        <span class="p">)</span>

    <span class="k">if</span> <span class="n">classification_kwds</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">classification_kwds</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="s2">&quot;k&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">classification_kwds</span><span class="p">:</span>
        <span class="n">classification_kwds</span><span class="p">[</span><span class="s2">&quot;k&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">k</span>

    <span class="n">binning</span> <span class="o">=</span> <span class="n">mapclassify</span><span class="o">.</span><span class="n">classify</span><span class="p">(</span>
        <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">values</span><span class="p">[</span><span class="o">~</span><span class="n">nan_idx</span><span class="p">]),</span> <span class="n">scheme</span><span class="p">,</span> <span class="o">**</span><span class="n">classification_kwds</span>
    <span class="p">)</span>
    <span class="n">df</span><span class="p">[</span><span class="s2">&quot;category&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">binning</span><span class="o">.</span><span class="n">yb</span>
    <span class="n">df</span><span class="p">[</span><span class="s2">&quot;color&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">colors</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;category&quot;</span><span class="p">]]</span>

    <span class="k">if</span> <span class="n">legend_kwds</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">legend_kwds</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">if</span> <span class="s2">&quot;interval&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">legend_kwds</span><span class="p">:</span>
        <span class="n">legend_kwds</span><span class="p">[</span><span class="s2">&quot;interval&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">if</span> <span class="s2">&quot;fmt&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">legend_kwds</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">issubdtype</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">column</span><span class="p">]</span><span class="o">.</span><span class="n">dtype</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">floating</span><span class="p">):</span>
            <span class="n">legend_kwds</span><span class="p">[</span><span class="s2">&quot;fmt&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{:.2f}</span><span class="s2">&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">legend_kwds</span><span class="p">[</span><span class="s2">&quot;fmt&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{:.0f}</span><span class="s2">&quot;</span>

    <span class="k">if</span> <span class="n">labels</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1"># set categorical to True for creating the legend</span>
        <span class="k">if</span> <span class="n">legend_kwds</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="s2">&quot;labels&quot;</span> <span class="ow">in</span> <span class="n">legend_kwds</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">legend_kwds</span><span class="p">[</span><span class="s2">&quot;labels&quot;</span><span class="p">])</span> <span class="o">!=</span> <span class="n">binning</span><span class="o">.</span><span class="n">k</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="s2">&quot;Number of labels must match number of bins, &quot;</span>
                    <span class="s2">&quot;received </span><span class="si">{}</span><span class="s2"> labels for </span><span class="si">{}</span><span class="s2"> bins&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                        <span class="nb">len</span><span class="p">(</span><span class="n">legend_kwds</span><span class="p">[</span><span class="s2">&quot;labels&quot;</span><span class="p">]),</span> <span class="n">binning</span><span class="o">.</span><span class="n">k</span>
                    <span class="p">)</span>
                <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">labels</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">legend_kwds</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;labels&quot;</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># fmt = &quot;{:.2f}&quot;</span>
            <span class="k">if</span> <span class="n">legend_kwds</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="s2">&quot;fmt&quot;</span> <span class="ow">in</span> <span class="n">legend_kwds</span><span class="p">:</span>
                <span class="n">fmt</span> <span class="o">=</span> <span class="n">legend_kwds</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;fmt&quot;</span><span class="p">)</span>

            <span class="n">labels</span> <span class="o">=</span> <span class="n">binning</span><span class="o">.</span><span class="n">get_legend_classes</span><span class="p">(</span><span class="n">fmt</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">legend_kwds</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">show_interval</span> <span class="o">=</span> <span class="n">legend_kwds</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;interval&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">show_interval</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">show_interval</span><span class="p">:</span>
                <span class="n">labels</span> <span class="o">=</span> <span class="p">[</span><span class="n">c</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">labels</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">init_column</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">labels</span> <span class="o">=</span> <span class="n">value_list</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">labels</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">labels</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">colors</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The number of labels must match the number of colors.&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;labels must be a list or None.&quot;</span><span class="p">)</span>

    <span class="n">legend_dict</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">labels</span><span class="p">,</span> <span class="n">colors</span><span class="p">))</span>
    <span class="n">df</span><span class="p">[</span><span class="s2">&quot;category&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;category&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="n">df</span><span class="p">,</span> <span class="n">legend_dict</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.clip_image" class="doc doc-heading">
<code class="highlight language-python"><span class="n">clip_image</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">mask</span><span class="p">,</span> <span class="n">output</span><span class="p">)</span></code>


<a href="#geemap.common.clip_image" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Clip an image by mask.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>image</code></td>
        <td><code>str</code></td>
        <td><p>Path to the image file in GeoTIFF format.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>mask</code></td>
        <td><code>str | list | dict</code></td>
        <td><p>The mask used to extract the image. It can be a path to vector datasets (e.g., GeoJSON, Shapefile), a list of coordinates, or m.user_roi.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>output</code></td>
        <td><code>str</code></td>
        <td><p>Path to the output file.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>ImportError</code></td>
        <td><p>If the fiona or rasterio package is not installed.</p></td>
      </tr>
      <tr>
        <td><code>FileNotFoundError</code></td>
        <td><p>If the image is not found.</p></td>
      </tr>
      <tr>
        <td><code>ValueError</code></td>
        <td><p>If the mask is not a valid GeoJSON or raster file.</p></td>
      </tr>
      <tr>
        <td><code>FileNotFoundError</code></td>
        <td><p>If the mask file is not found.</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">clip_image</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">mask</span><span class="p">,</span> <span class="n">output</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Clip an image by mask.</span>

<span class="sd">    Args:</span>
<span class="sd">        image (str): Path to the image file in GeoTIFF format.</span>
<span class="sd">        mask (str | list | dict): The mask used to extract the image. It can be a path to vector datasets (e.g., GeoJSON, Shapefile), a list of coordinates, or m.user_roi.</span>
<span class="sd">        output (str): Path to the output file.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ImportError: If the fiona or rasterio package is not installed.</span>
<span class="sd">        FileNotFoundError: If the image is not found.</span>
<span class="sd">        ValueError: If the mask is not a valid GeoJSON or raster file.</span>
<span class="sd">        FileNotFoundError: If the mask file is not found.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="kn">import</span> <span class="nn">fiona</span>
        <span class="kn">import</span> <span class="nn">rasterio</span>
        <span class="kn">import</span> <span class="nn">rasterio.mask</span>
    <span class="k">except</span> <span class="ne">ImportError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ImportError</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">image</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">image</span><span class="si">}</span><span class="s2"> does not exist.&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">output</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.tif&quot;</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Output must be a tif file.&quot;</span><span class="p">)</span>

    <span class="n">output</span> <span class="o">=</span> <span class="n">check_file_path</span><span class="p">(</span><span class="n">output</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">mask</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Geometry</span><span class="p">):</span>
        <span class="n">mask</span> <span class="o">=</span> <span class="n">mask</span><span class="o">.</span><span class="n">coordinates</span><span class="p">()</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">mask</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">mask</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;http&quot;</span><span class="p">):</span>
            <span class="n">mask</span> <span class="o">=</span> <span class="n">download_file</span><span class="p">(</span><span class="n">mask</span><span class="p">,</span> <span class="n">output</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">mask</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">mask</span><span class="si">}</span><span class="s2"> does not exist.&quot;</span><span class="p">)</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">mask</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">mask</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">mask</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="n">geojson</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;FeatureCollection&quot;</span><span class="p">,</span>
                <span class="s2">&quot;features&quot;</span><span class="p">:</span> <span class="p">[</span>
                    <span class="p">{</span>
                        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;Feature&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{},</span>
                        <span class="s2">&quot;geometry&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;Polygon&quot;</span><span class="p">,</span> <span class="s2">&quot;coordinates&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">mask</span><span class="p">]},</span>
                    <span class="p">}</span>
                <span class="p">],</span>
            <span class="p">}</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">geojson</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;FeatureCollection&quot;</span><span class="p">,</span>
                <span class="s2">&quot;features&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">mask</span><span class="p">],</span>
            <span class="p">}</span>
        <span class="n">mask</span> <span class="o">=</span> <span class="n">temp_file_path</span><span class="p">(</span><span class="s2">&quot;.geojson&quot;</span><span class="p">)</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">mask</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">geojson</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>

    <span class="k">with</span> <span class="n">fiona</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">mask</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">shapefile</span><span class="p">:</span>
        <span class="n">shapes</span> <span class="o">=</span> <span class="p">[</span><span class="n">feature</span><span class="p">[</span><span class="s2">&quot;geometry&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">feature</span> <span class="ow">in</span> <span class="n">shapefile</span><span class="p">]</span>

    <span class="k">with</span> <span class="n">rasterio</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">image</span><span class="p">)</span> <span class="k">as</span> <span class="n">src</span><span class="p">:</span>
        <span class="n">out_image</span><span class="p">,</span> <span class="n">out_transform</span> <span class="o">=</span> <span class="n">rasterio</span><span class="o">.</span><span class="n">mask</span><span class="o">.</span><span class="n">mask</span><span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="n">shapes</span><span class="p">,</span> <span class="n">crop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">out_meta</span> <span class="o">=</span> <span class="n">src</span><span class="o">.</span><span class="n">meta</span>

    <span class="n">out_meta</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
        <span class="p">{</span>
            <span class="s2">&quot;driver&quot;</span><span class="p">:</span> <span class="s2">&quot;GTiff&quot;</span><span class="p">,</span>
            <span class="s2">&quot;height&quot;</span><span class="p">:</span> <span class="n">out_image</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
            <span class="s2">&quot;width&quot;</span><span class="p">:</span> <span class="n">out_image</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span>
            <span class="s2">&quot;transform&quot;</span><span class="p">:</span> <span class="n">out_transform</span><span class="p">,</span>
        <span class="p">}</span>
    <span class="p">)</span>

    <span class="k">with</span> <span class="n">rasterio</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">output</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">out_meta</span><span class="p">)</span> <span class="k">as</span> <span class="n">dest</span><span class="p">:</span>
        <span class="n">dest</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">out_image</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.clone_github_repo" class="doc doc-heading">
<code class="highlight language-python"><span class="n">clone_github_repo</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">out_dir</span><span class="p">)</span></code>


<a href="#geemap.common.clone_github_repo" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Clones a GitHub repository.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>url</code></td>
        <td><code>str</code></td>
        <td><p>The link to the GitHub repository</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>out_dir</code></td>
        <td><code>str</code></td>
        <td><p>The output directory for the cloned repository.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">clone_github_repo</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">out_dir</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Clones a GitHub repository.</span>

<span class="sd">    Args:</span>
<span class="sd">        url (str): The link to the GitHub repository</span>
<span class="sd">        out_dir (str): The output directory for the cloned repository.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">repo_name</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
    <span class="c1"># url_zip = os.path.join(url, &#39;archive/master.zip&#39;)</span>
    <span class="n">url_zip</span> <span class="o">=</span> <span class="n">url</span> <span class="o">+</span> <span class="s2">&quot;/archive/master.zip&quot;</span>

    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">out_dir</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span>
            <span class="s2">&quot;The specified output directory already exists. Please choose a new directory.&quot;</span>
        <span class="p">)</span>
        <span class="k">return</span>

    <span class="n">parent_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">out_dir</span><span class="p">)</span>
    <span class="n">out_file_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">parent_dir</span><span class="p">,</span> <span class="n">repo_name</span> <span class="o">+</span> <span class="s2">&quot;.zip&quot;</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">urllib</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">urlretrieve</span><span class="p">(</span><span class="n">url_zip</span><span class="p">,</span> <span class="n">out_file_path</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The provided URL is invalid. Please double check the URL.&quot;</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">with</span> <span class="n">zipfile</span><span class="o">.</span><span class="n">ZipFile</span><span class="p">(</span><span class="n">out_file_path</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">zip_ref</span><span class="p">:</span>
        <span class="n">zip_ref</span><span class="o">.</span><span class="n">extractall</span><span class="p">(</span><span class="n">parent_dir</span><span class="p">)</span>

    <span class="n">src</span> <span class="o">=</span> <span class="n">out_file_path</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;.zip&quot;</span><span class="p">,</span> <span class="s2">&quot;-master&quot;</span><span class="p">)</span>
    <span class="n">os</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="n">out_dir</span><span class="p">)</span>
    <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">out_file_path</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.clone_google_repo" class="doc doc-heading">
<code class="highlight language-python"><span class="n">clone_google_repo</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">out_dir</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


<a href="#geemap.common.clone_google_repo" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Clones an Earth Engine repository from https://earthengine.googlesource.com, such as https://earthengine.googlesource.com/users/google/datasets</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>url</code></td>
        <td><code>str</code></td>
        <td><p>The link to the Earth Engine repository</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>out_dir</code></td>
        <td><code>str</code></td>
        <td><p>The output directory for the cloned repository. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">clone_google_repo</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">out_dir</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Clones an Earth Engine repository from https://earthengine.googlesource.com, such as https://earthengine.googlesource.com/users/google/datasets</span>

<span class="sd">    Args:</span>
<span class="sd">        url (str): The link to the Earth Engine repository</span>
<span class="sd">        out_dir (str, optional): The output directory for the cloned repository. Defaults to None.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">repo_name</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">out_dir</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">out_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">(),</span> <span class="n">repo_name</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">out_dir</span><span class="p">)):</span>
        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">out_dir</span><span class="p">))</span>

    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">out_dir</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span>
            <span class="s2">&quot;The specified output directory already exists. Please choose a new directory.&quot;</span>
        <span class="p">)</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="n">check_git_install</span><span class="p">():</span>

        <span class="n">cmd</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;git clone &quot;</span><span class="si">{</span><span class="n">url</span><span class="si">}</span><span class="s1">&quot; &quot;</span><span class="si">{</span><span class="n">out_dir</span><span class="si">}</span><span class="s1">&quot;&#39;</span>
        <span class="n">os</span><span class="o">.</span><span class="n">popen</span><span class="p">(</span><span class="n">cmd</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.clone_repo" class="doc doc-heading">
<code class="highlight language-python"><span class="n">clone_repo</span><span class="p">(</span><span class="n">out_dir</span><span class="o">=</span><span class="s1">&#39;.&#39;</span><span class="p">,</span> <span class="n">unzip</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>


<a href="#geemap.common.clone_repo" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Clones the geemap GitHub repository.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>out_dir</code></td>
        <td><code>str</code></td>
        <td><p>Output folder for the repo. Defaults to '.'.</p></td>
        <td><code>&#39;.&#39;</code></td>
      </tr>
      <tr>
        <td><code>unzip</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to unzip the repository. Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">clone_repo</span><span class="p">(</span><span class="n">out_dir</span><span class="o">=</span><span class="s2">&quot;.&quot;</span><span class="p">,</span> <span class="n">unzip</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Clones the geemap GitHub repository.</span>

<span class="sd">    Args:</span>
<span class="sd">        out_dir (str, optional): Output folder for the repo. Defaults to &#39;.&#39;.</span>
<span class="sd">        unzip (bool, optional): Whether to unzip the repository. Defaults to True.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;https://github.com/giswqs/geemap/archive/master.zip&quot;</span>
    <span class="n">filename</span> <span class="o">=</span> <span class="s2">&quot;geemap-master.zip&quot;</span>
    <span class="n">download_from_url</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">out_file_name</span><span class="o">=</span><span class="n">filename</span><span class="p">,</span> <span class="n">out_dir</span><span class="o">=</span><span class="n">out_dir</span><span class="p">,</span> <span class="n">unzip</span><span class="o">=</span><span class="n">unzip</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.cog_bands" class="doc doc-heading">
<code class="highlight language-python"><span class="n">cog_bands</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">titiler_endpoint</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">300</span><span class="p">)</span></code>


<a href="#geemap.common.cog_bands" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Get band names of a Cloud Optimized GeoTIFF (COG).</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>url</code></td>
        <td><code>str</code></td>
        <td><p>HTTP URL to a COG, e.g., https://opendata.digitalglobe.com/events/mauritius-oil-spill/post-event/2020-08-12/105001001F1B5B00/105001001F1B5B00.tif</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>titiler_endpoint</code></td>
        <td><code>str</code></td>
        <td><p>Titiler endpoint. Defaults to "https://titiler.xyz".</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>timeout</code></td>
        <td><code>int</code></td>
        <td><p>Timeout in seconds. Defaults to 300.</p></td>
        <td><code>300</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>list</code></td>
      <td><p>A list of band names</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">cog_bands</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">titiler_endpoint</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">300</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get band names of a Cloud Optimized GeoTIFF (COG).</span>

<span class="sd">    Args:</span>
<span class="sd">        url (str): HTTP URL to a COG, e.g., https://opendata.digitalglobe.com/events/mauritius-oil-spill/post-event/2020-08-12/105001001F1B5B00/105001001F1B5B00.tif</span>
<span class="sd">        titiler_endpoint (str, optional): Titiler endpoint. Defaults to &quot;https://titiler.xyz&quot;.</span>
<span class="sd">        timeout (int, optional): Timeout in seconds. Defaults to 300.</span>

<span class="sd">    Returns:</span>
<span class="sd">        list: A list of band names</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">titiler_endpoint</span> <span class="o">=</span> <span class="n">check_titiler_endpoint</span><span class="p">(</span><span class="n">titiler_endpoint</span><span class="p">)</span>
    <span class="n">url</span> <span class="o">=</span> <span class="n">get_direct_url</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
    <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
        <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">titiler_endpoint</span><span class="si">}</span><span class="s2">/cog/info&quot;</span><span class="p">,</span>
        <span class="n">params</span><span class="o">=</span><span class="p">{</span>
            <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="n">url</span><span class="p">,</span>
        <span class="p">},</span>
        <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span>
    <span class="p">)</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>

    <span class="n">bands</span> <span class="o">=</span> <span class="p">[</span><span class="n">b</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">r</span><span class="p">[</span><span class="s2">&quot;band_descriptions&quot;</span><span class="p">]]</span>
    <span class="k">return</span> <span class="n">bands</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.cog_bounds" class="doc doc-heading">
<code class="highlight language-python"><span class="n">cog_bounds</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">titiler_endpoint</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">300</span><span class="p">)</span></code>


<a href="#geemap.common.cog_bounds" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Get the bounding box of a Cloud Optimized GeoTIFF (COG).</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>url</code></td>
        <td><code>str</code></td>
        <td><p>HTTP URL to a COG, e.g., https://opendata.digitalglobe.com/events/mauritius-oil-spill/post-event/2020-08-12/105001001F1B5B00/105001001F1B5B00.tif</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>titiler_endpoint</code></td>
        <td><code>str</code></td>
        <td><p>Titiler endpoint. Defaults to "https://titiler.xyz".</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>timeout</code></td>
        <td><code>int</code></td>
        <td><p>Timeout in seconds. Defaults to 300.</p></td>
        <td><code>300</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>list</code></td>
      <td><p>A list of values representing [left, bottom, right, top]</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">cog_bounds</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">titiler_endpoint</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">300</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get the bounding box of a Cloud Optimized GeoTIFF (COG).</span>

<span class="sd">    Args:</span>
<span class="sd">        url (str): HTTP URL to a COG, e.g., https://opendata.digitalglobe.com/events/mauritius-oil-spill/post-event/2020-08-12/105001001F1B5B00/105001001F1B5B00.tif</span>
<span class="sd">        titiler_endpoint (str, optional): Titiler endpoint. Defaults to &quot;https://titiler.xyz&quot;.</span>
<span class="sd">        timeout (int, optional): Timeout in seconds. Defaults to 300.</span>

<span class="sd">    Returns:</span>
<span class="sd">        list: A list of values representing [left, bottom, right, top]</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">titiler_endpoint</span> <span class="o">=</span> <span class="n">check_titiler_endpoint</span><span class="p">(</span><span class="n">titiler_endpoint</span><span class="p">)</span>
    <span class="n">url</span> <span class="o">=</span> <span class="n">get_direct_url</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>

    <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
        <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">titiler_endpoint</span><span class="si">}</span><span class="s2">/cog/bounds&quot;</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="n">url</span><span class="p">},</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span>
    <span class="p">)</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>

    <span class="k">if</span> <span class="s2">&quot;bounds&quot;</span> <span class="ow">in</span> <span class="n">r</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="n">bounds</span> <span class="o">=</span> <span class="n">r</span><span class="p">[</span><span class="s2">&quot;bounds&quot;</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">bounds</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">return</span> <span class="n">bounds</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.cog_center" class="doc doc-heading">
<code class="highlight language-python"><span class="n">cog_center</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">titiler_endpoint</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


<a href="#geemap.common.cog_center" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Get the centroid of a Cloud Optimized GeoTIFF (COG).</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>url</code></td>
        <td><code>str</code></td>
        <td><p>HTTP URL to a COG, e.g., https://opendata.digitalglobe.com/events/mauritius-oil-spill/post-event/2020-08-12/105001001F1B5B00/105001001F1B5B00.tif</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>titiler_endpoint</code></td>
        <td><code>str</code></td>
        <td><p>Titiler endpoint. Defaults to "https://titiler.xyz".</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>tuple</code></td>
      <td><p>A tuple representing (longitude, latitude)</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">cog_center</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">titiler_endpoint</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get the centroid of a Cloud Optimized GeoTIFF (COG).</span>

<span class="sd">    Args:</span>
<span class="sd">        url (str): HTTP URL to a COG, e.g., https://opendata.digitalglobe.com/events/mauritius-oil-spill/post-event/2020-08-12/105001001F1B5B00/105001001F1B5B00.tif</span>
<span class="sd">        titiler_endpoint (str, optional): Titiler endpoint. Defaults to &quot;https://titiler.xyz&quot;.</span>

<span class="sd">    Returns:</span>
<span class="sd">        tuple: A tuple representing (longitude, latitude)</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">titiler_endpoint</span> <span class="o">=</span> <span class="n">check_titiler_endpoint</span><span class="p">(</span><span class="n">titiler_endpoint</span><span class="p">)</span>
    <span class="n">url</span> <span class="o">=</span> <span class="n">get_direct_url</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
    <span class="n">bounds</span> <span class="o">=</span> <span class="n">cog_bounds</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">titiler_endpoint</span><span class="p">)</span>
    <span class="n">center</span> <span class="o">=</span> <span class="p">((</span><span class="n">bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="p">(</span><span class="n">bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>  <span class="c1"># (lat, lon)</span>
    <span class="k">return</span> <span class="n">center</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.cog_info" class="doc doc-heading">
<code class="highlight language-python"><span class="n">cog_info</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">titiler_endpoint</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">return_geojson</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">300</span><span class="p">)</span></code>


<a href="#geemap.common.cog_info" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Get band statistics of a Cloud Optimized GeoTIFF (COG).</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>url</code></td>
        <td><code>str</code></td>
        <td><p>HTTP URL to a COG, e.g., https://opendata.digitalglobe.com/events/mauritius-oil-spill/post-event/2020-08-12/105001001F1B5B00/105001001F1B5B00.tif</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>titiler_endpoint</code></td>
        <td><code>str</code></td>
        <td><p>Titiler endpoint. Defaults to "https://titiler.xyz".</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>timeout</code></td>
        <td><code>int</code></td>
        <td><p>Timeout in seconds. Defaults to 300.</p></td>
        <td><code>300</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>list</code></td>
      <td><p>A dictionary of band info.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">cog_info</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">titiler_endpoint</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">return_geojson</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">300</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get band statistics of a Cloud Optimized GeoTIFF (COG).</span>

<span class="sd">    Args:</span>
<span class="sd">        url (str): HTTP URL to a COG, e.g., https://opendata.digitalglobe.com/events/mauritius-oil-spill/post-event/2020-08-12/105001001F1B5B00/105001001F1B5B00.tif</span>
<span class="sd">        titiler_endpoint (str, optional): Titiler endpoint. Defaults to &quot;https://titiler.xyz&quot;.</span>
<span class="sd">        timeout (int, optional): Timeout in seconds. Defaults to 300.</span>

<span class="sd">    Returns:</span>
<span class="sd">        list: A dictionary of band info.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">titiler_endpoint</span> <span class="o">=</span> <span class="n">check_titiler_endpoint</span><span class="p">(</span><span class="n">titiler_endpoint</span><span class="p">)</span>
    <span class="n">url</span> <span class="o">=</span> <span class="n">get_direct_url</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
    <span class="n">info</span> <span class="o">=</span> <span class="s2">&quot;info&quot;</span>
    <span class="k">if</span> <span class="n">return_geojson</span><span class="p">:</span>
        <span class="n">info</span> <span class="o">=</span> <span class="s2">&quot;info.geojson&quot;</span>

    <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
        <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">titiler_endpoint</span><span class="si">}</span><span class="s2">/cog/</span><span class="si">{</span><span class="n">info</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
        <span class="n">params</span><span class="o">=</span><span class="p">{</span>
            <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="n">url</span><span class="p">,</span>
        <span class="p">},</span>
        <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span>
    <span class="p">)</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>

    <span class="k">return</span> <span class="n">r</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.cog_mosaic" class="doc doc-heading">
<code class="highlight language-python"><span class="n">cog_mosaic</span><span class="p">(</span><span class="n">links</span><span class="p">,</span> <span class="n">titiler_endpoint</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">username</span><span class="o">=</span><span class="s1">&#39;anonymous&#39;</span><span class="p">,</span> <span class="n">layername</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">overwrite</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.common.cog_mosaic" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Creates a COG mosaic from a list of COG URLs.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>links</code></td>
        <td><code>list</code></td>
        <td><p>A list containing COG HTTP URLs.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>titiler_endpoint</code></td>
        <td><code>str</code></td>
        <td><p>Titiler endpoint. Defaults to "https://titiler.xyz".</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>username</code></td>
        <td><code>str</code></td>
        <td><p>User name for the titiler endpoint. Defaults to "anonymous".</p></td>
        <td><code>&#39;anonymous&#39;</code></td>
      </tr>
      <tr>
        <td><code>layername</code></td>
        <td><code>[type]</code></td>
        <td><p>Layer name to use. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>overwrite</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to overwrite the layer name if existing. Defaults to False.</p></td>
        <td><code>False</code></td>
      </tr>
      <tr>
        <td><code>verbose</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to print out descriptive information. Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
      <tr>
        <td><code>timeout</code></td>
        <td><code>int</code></td>
        <td><p>Timeout in seconds. Defaults to 300.</p></td>
        <td><code>300</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>Exception</code></td>
        <td><p>If the COG mosaic fails to create.</p></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>str</code></td>
      <td><p>The tile URL for the COG mosaic.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">cog_mosaic</span><span class="p">(</span>
    <span class="n">links</span><span class="p">,</span>
    <span class="n">titiler_endpoint</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">username</span><span class="o">=</span><span class="s2">&quot;anonymous&quot;</span><span class="p">,</span>
    <span class="n">layername</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">overwrite</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">timeout</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Creates a COG mosaic from a list of COG URLs.</span>

<span class="sd">    Args:</span>
<span class="sd">        links (list): A list containing COG HTTP URLs.</span>
<span class="sd">        titiler_endpoint (str, optional): Titiler endpoint. Defaults to &quot;https://titiler.xyz&quot;.</span>
<span class="sd">        username (str, optional): User name for the titiler endpoint. Defaults to &quot;anonymous&quot;.</span>
<span class="sd">        layername ([type], optional): Layer name to use. Defaults to None.</span>
<span class="sd">        overwrite (bool, optional): Whether to overwrite the layer name if existing. Defaults to False.</span>
<span class="sd">        verbose (bool, optional): Whether to print out descriptive information. Defaults to True.</span>
<span class="sd">        timeout (int, optional): Timeout in seconds. Defaults to 300.</span>

<span class="sd">    Raises:</span>
<span class="sd">        Exception: If the COG mosaic fails to create.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: The tile URL for the COG mosaic.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">titiler_endpoint</span> <span class="o">=</span> <span class="n">check_titiler_endpoint</span><span class="p">(</span><span class="n">titiler_endpoint</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">layername</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">layername</span> <span class="o">=</span> <span class="s2">&quot;layer_&quot;</span> <span class="o">+</span> <span class="n">random_string</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">verbose</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Creating COG masaic ...&quot;</span><span class="p">)</span>

        <span class="c1"># Create token</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">titiler_endpoint</span><span class="si">}</span><span class="s2">/tokens/create&quot;</span><span class="p">,</span>
            <span class="n">json</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;username&quot;</span><span class="p">:</span> <span class="n">username</span><span class="p">,</span> <span class="s2">&quot;scope&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;mosaic:read&quot;</span><span class="p">,</span> <span class="s2">&quot;mosaic:create&quot;</span><span class="p">]},</span>
        <span class="p">)</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
        <span class="n">token</span> <span class="o">=</span> <span class="n">r</span><span class="p">[</span><span class="s2">&quot;token&quot;</span><span class="p">]</span>

        <span class="c1"># Create mosaic</span>
        <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">titiler_endpoint</span><span class="si">}</span><span class="s2">/mosaicjson/create&quot;</span><span class="p">,</span>
            <span class="n">json</span><span class="o">=</span><span class="p">{</span>
                <span class="s2">&quot;username&quot;</span><span class="p">:</span> <span class="n">username</span><span class="p">,</span>
                <span class="s2">&quot;layername&quot;</span><span class="p">:</span> <span class="n">layername</span><span class="p">,</span>
                <span class="s2">&quot;files&quot;</span><span class="p">:</span> <span class="n">links</span><span class="p">,</span>
                <span class="c1"># &quot;overwrite&quot;: overwrite</span>
            <span class="p">},</span>
            <span class="n">params</span><span class="o">=</span><span class="p">{</span>
                <span class="s2">&quot;access_token&quot;</span><span class="p">:</span> <span class="n">token</span><span class="p">,</span>
            <span class="p">},</span>
        <span class="p">)</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>

        <span class="n">r2</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">titiler_endpoint</span><span class="si">}</span><span class="s2">/mosaicjson/</span><span class="si">{</span><span class="n">username</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">layername</span><span class="si">}</span><span class="s2">/tilejson.json&quot;</span><span class="p">,</span>
            <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span>
        <span class="p">)</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">r2</span><span class="p">[</span><span class="s2">&quot;tiles&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.cog_mosaic_from_file" class="doc doc-heading">
<code class="highlight language-python"><span class="n">cog_mosaic_from_file</span><span class="p">(</span><span class="n">filepath</span><span class="p">,</span> <span class="n">skip_rows</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">titiler_endpoint</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">username</span><span class="o">=</span><span class="s1">&#39;anonymous&#39;</span><span class="p">,</span> <span class="n">layername</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">overwrite</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.common.cog_mosaic_from_file" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Creates a COG mosaic from a csv/txt file stored locally for through HTTP URL.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>filepath</code></td>
        <td><code>str</code></td>
        <td><p>Local path or HTTP URL to the csv/txt file containing COG URLs.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>skip_rows</code></td>
        <td><code>int</code></td>
        <td><p>The number of rows to skip in the file. Defaults to 0.</p></td>
        <td><code>0</code></td>
      </tr>
      <tr>
        <td><code>titiler_endpoint</code></td>
        <td><code>str</code></td>
        <td><p>Titiler endpoint. Defaults to "https://titiler.xyz".</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>username</code></td>
        <td><code>str</code></td>
        <td><p>User name for the titiler endpoint. Defaults to "anonymous".</p></td>
        <td><code>&#39;anonymous&#39;</code></td>
      </tr>
      <tr>
        <td><code>layername</code></td>
        <td><code>[type]</code></td>
        <td><p>Layer name to use. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>overwrite</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to overwrite the layer name if existing. Defaults to False.</p></td>
        <td><code>False</code></td>
      </tr>
      <tr>
        <td><code>verbose</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to print out descriptive information. Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>str</code></td>
      <td><p>The tile URL for the COG mosaic.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">cog_mosaic_from_file</span><span class="p">(</span>
    <span class="n">filepath</span><span class="p">,</span>
    <span class="n">skip_rows</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
    <span class="n">titiler_endpoint</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">username</span><span class="o">=</span><span class="s2">&quot;anonymous&quot;</span><span class="p">,</span>
    <span class="n">layername</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">overwrite</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Creates a COG mosaic from a csv/txt file stored locally for through HTTP URL.</span>

<span class="sd">    Args:</span>
<span class="sd">        filepath (str): Local path or HTTP URL to the csv/txt file containing COG URLs.</span>
<span class="sd">        skip_rows (int, optional): The number of rows to skip in the file. Defaults to 0.</span>
<span class="sd">        titiler_endpoint (str, optional): Titiler endpoint. Defaults to &quot;https://titiler.xyz&quot;.</span>
<span class="sd">        username (str, optional): User name for the titiler endpoint. Defaults to &quot;anonymous&quot;.</span>
<span class="sd">        layername ([type], optional): Layer name to use. Defaults to None.</span>
<span class="sd">        overwrite (bool, optional): Whether to overwrite the layer name if existing. Defaults to False.</span>
<span class="sd">        verbose (bool, optional): Whether to print out descriptive information. Defaults to True.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: The tile URL for the COG mosaic.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">urllib</span>

    <span class="n">titiler_endpoint</span> <span class="o">=</span> <span class="n">check_titiler_endpoint</span><span class="p">(</span><span class="n">titiler_endpoint</span><span class="p">)</span>
    <span class="n">links</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="n">filepath</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;http&quot;</span><span class="p">):</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">urllib</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">urlopen</span><span class="p">(</span><span class="n">filepath</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
            <span class="n">links</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>

    <span class="k">else</span><span class="p">:</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filepath</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">links</span> <span class="o">=</span> <span class="p">[</span><span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">f</span><span class="o">.</span><span class="n">readlines</span><span class="p">()]</span>

    <span class="n">links</span> <span class="o">=</span> <span class="n">links</span><span class="p">[</span><span class="n">skip_rows</span><span class="p">:]</span>
    <span class="c1"># print(links)</span>
    <span class="n">mosaic</span> <span class="o">=</span> <span class="n">cog_mosaic</span><span class="p">(</span>
        <span class="n">links</span><span class="p">,</span> <span class="n">titiler_endpoint</span><span class="p">,</span> <span class="n">username</span><span class="p">,</span> <span class="n">layername</span><span class="p">,</span> <span class="n">overwrite</span><span class="p">,</span> <span class="n">verbose</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">mosaic</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.cog_pixel_value" class="doc doc-heading">
<code class="highlight language-python"><span class="n">cog_pixel_value</span><span class="p">(</span><span class="n">lon</span><span class="p">,</span> <span class="n">lat</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">bidx</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">titiler_endpoint</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.common.cog_pixel_value" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Get pixel value from COG.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>lon</code></td>
        <td><code>float</code></td>
        <td><p>Longitude of the pixel.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>lat</code></td>
        <td><code>float</code></td>
        <td><p>Latitude of the pixel.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>url</code></td>
        <td><code>str</code></td>
        <td><p>HTTP URL to a COG, e.g., 'https://opendata.digitalglobe.com/events/california-fire-2020/pre-event/2018-02-16/pine-gulch-fire20/1030010076004E00.tif'</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>bidx</code></td>
        <td><code>str</code></td>
        <td><p>Dataset band indexes (e.g bidx=1, bidx=1&amp;bidx=2&amp;bidx=3). Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>titiler_endpoint</code></td>
        <td><code>str</code></td>
        <td><p>Titiler endpoint, e.g., "https://titiler.xyz", "planetary-computer", "pc". Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>timeout</code></td>
        <td><code>int</code></td>
        <td><p>Timeout in seconds. Defaults to 300.</p></td>
        <td><code>300</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>list</code></td>
      <td><p>A dictionary of band info.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">cog_pixel_value</span><span class="p">(</span>
    <span class="n">lon</span><span class="p">,</span>
    <span class="n">lat</span><span class="p">,</span>
    <span class="n">url</span><span class="p">,</span>
    <span class="n">bidx</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">titiler_endpoint</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">timeout</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get pixel value from COG.</span>

<span class="sd">    Args:</span>
<span class="sd">        lon (float): Longitude of the pixel.</span>
<span class="sd">        lat (float): Latitude of the pixel.</span>
<span class="sd">        url (str): HTTP URL to a COG, e.g., &#39;https://opendata.digitalglobe.com/events/california-fire-2020/pre-event/2018-02-16/pine-gulch-fire20/1030010076004E00.tif&#39;</span>
<span class="sd">        bidx (str, optional): Dataset band indexes (e.g bidx=1, bidx=1&amp;bidx=2&amp;bidx=3). Defaults to None.</span>
<span class="sd">        titiler_endpoint (str, optional): Titiler endpoint, e.g., &quot;https://titiler.xyz&quot;, &quot;planetary-computer&quot;, &quot;pc&quot;. Defaults to None.</span>
<span class="sd">        timeout (int, optional): Timeout in seconds. Defaults to 300.</span>

<span class="sd">    Returns:</span>
<span class="sd">        list: A dictionary of band info.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">titiler_endpoint</span> <span class="o">=</span> <span class="n">check_titiler_endpoint</span><span class="p">(</span><span class="n">titiler_endpoint</span><span class="p">)</span>
    <span class="n">url</span> <span class="o">=</span> <span class="n">get_direct_url</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
    <span class="n">titiler_endpoint</span> <span class="o">=</span> <span class="n">check_titiler_endpoint</span><span class="p">(</span><span class="n">titiler_endpoint</span><span class="p">)</span>
    <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;url&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">url</span>
    <span class="k">if</span> <span class="n">bidx</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;bidx&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">bidx</span>

    <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
        <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">titiler_endpoint</span><span class="si">}</span><span class="s2">/cog/point/</span><span class="si">{</span><span class="n">lon</span><span class="si">}</span><span class="s2">,</span><span class="si">{</span><span class="n">lat</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">kwargs</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span>
    <span class="p">)</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
    <span class="n">bands</span> <span class="o">=</span> <span class="n">cog_bands</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">titiler_endpoint</span><span class="p">)</span>
    <span class="c1"># if isinstance(titiler_endpoint, str):</span>
    <span class="c1">#     r = requests.get(f&quot;{titiler_endpoint}/cog/point/{lon},{lat}&quot;, params=kwargs).json()</span>
    <span class="c1"># else:</span>
    <span class="c1">#     r = requests.get(</span>
    <span class="c1">#         titiler_endpoint.url_for_stac_pixel_value(lon, lat), params=kwargs</span>
    <span class="c1">#     ).json()</span>

    <span class="k">if</span> <span class="s2">&quot;detail&quot;</span> <span class="ow">in</span> <span class="n">r</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">r</span><span class="p">[</span><span class="s2">&quot;detail&quot;</span><span class="p">])</span>
        <span class="k">return</span> <span class="kc">None</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">values</span> <span class="o">=</span> <span class="n">r</span><span class="p">[</span><span class="s2">&quot;values&quot;</span><span class="p">]</span>
        <span class="n">result</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">bands</span><span class="p">,</span> <span class="n">values</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">result</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.cog_stats" class="doc doc-heading">
<code class="highlight language-python"><span class="n">cog_stats</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">titiler_endpoint</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">300</span><span class="p">)</span></code>


<a href="#geemap.common.cog_stats" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Get band statistics of a Cloud Optimized GeoTIFF (COG).</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>url</code></td>
        <td><code>str</code></td>
        <td><p>HTTP URL to a COG, e.g., https://opendata.digitalglobe.com/events/mauritius-oil-spill/post-event/2020-08-12/105001001F1B5B00/105001001F1B5B00.tif</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>titiler_endpoint</code></td>
        <td><code>str</code></td>
        <td><p>Titiler endpoint. Defaults to "https://titiler.xyz".</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>timeout</code></td>
        <td><code>int</code></td>
        <td><p>Timeout in seconds. Defaults to 300.</p></td>
        <td><code>300</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>list</code></td>
      <td><p>A dictionary of band statistics.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">cog_stats</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">titiler_endpoint</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">300</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get band statistics of a Cloud Optimized GeoTIFF (COG).</span>

<span class="sd">    Args:</span>
<span class="sd">        url (str): HTTP URL to a COG, e.g., https://opendata.digitalglobe.com/events/mauritius-oil-spill/post-event/2020-08-12/105001001F1B5B00/105001001F1B5B00.tif</span>
<span class="sd">        titiler_endpoint (str, optional): Titiler endpoint. Defaults to &quot;https://titiler.xyz&quot;.</span>
<span class="sd">        timeout (int, optional): Timeout in seconds. Defaults to 300.</span>

<span class="sd">    Returns:</span>
<span class="sd">        list: A dictionary of band statistics.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">titiler_endpoint</span> <span class="o">=</span> <span class="n">check_titiler_endpoint</span><span class="p">(</span><span class="n">titiler_endpoint</span><span class="p">)</span>
    <span class="n">url</span> <span class="o">=</span> <span class="n">get_direct_url</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
    <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
        <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">titiler_endpoint</span><span class="si">}</span><span class="s2">/cog/statistics&quot;</span><span class="p">,</span>
        <span class="n">params</span><span class="o">=</span><span class="p">{</span>
            <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="n">url</span><span class="p">,</span>
        <span class="p">},</span>
        <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span>
    <span class="p">)</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>

    <span class="k">return</span> <span class="n">r</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.cog_tile" class="doc doc-heading">
<code class="highlight language-python"><span class="n">cog_tile</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">bands</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">titiler_endpoint</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="n">proxies</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.common.cog_tile" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Get a tile layer from a Cloud Optimized GeoTIFF (COG).
    Source code adapted from https://developmentseed.org/titiler/examples/notebooks/Working_with_CloudOptimizedGeoTIFF_simple/</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>url</code></td>
        <td><code>str</code></td>
        <td><p>HTTP URL to a COG, e.g., https://opendata.digitalglobe.com/events/mauritius-oil-spill/post-event/2020-08-12/105001001F1B5B00/105001001F1B5B00.tif</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>titiler_endpoint</code></td>
        <td><code>str</code></td>
        <td><p>Titiler endpoint. Defaults to "https://titiler.xyz".</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>timeout</code></td>
        <td><code>int</code></td>
        <td><p>Timeout in seconds. Defaults to 300.</p></td>
        <td><code>300</code></td>
      </tr>
      <tr>
        <td><code>proxies</code></td>
        <td><code>dict</code></td>
        <td><p>Proxies to use. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>tuple</code></td>
      <td><p>Returns the COG Tile layer URL and bounds.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">cog_tile</span><span class="p">(</span>
    <span class="n">url</span><span class="p">,</span>
    <span class="n">bands</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">titiler_endpoint</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">timeout</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span>
    <span class="n">proxies</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get a tile layer from a Cloud Optimized GeoTIFF (COG).</span>
<span class="sd">        Source code adapted from https://developmentseed.org/titiler/examples/notebooks/Working_with_CloudOptimizedGeoTIFF_simple/</span>

<span class="sd">    Args:</span>
<span class="sd">        url (str): HTTP URL to a COG, e.g., https://opendata.digitalglobe.com/events/mauritius-oil-spill/post-event/2020-08-12/105001001F1B5B00/105001001F1B5B00.tif</span>
<span class="sd">        titiler_endpoint (str, optional): Titiler endpoint. Defaults to &quot;https://titiler.xyz&quot;.</span>
<span class="sd">        timeout (int, optional): Timeout in seconds. Defaults to 300.</span>
<span class="sd">        proxies (dict, optional): Proxies to use. Defaults to None.</span>

<span class="sd">    Returns:</span>
<span class="sd">        tuple: Returns the COG Tile layer URL and bounds.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">titiler_endpoint</span> <span class="o">=</span> <span class="n">check_titiler_endpoint</span><span class="p">(</span><span class="n">titiler_endpoint</span><span class="p">)</span>
    <span class="n">url</span> <span class="o">=</span> <span class="n">get_direct_url</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>

    <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;url&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">url</span>

    <span class="n">band_names</span> <span class="o">=</span> <span class="n">cog_bands</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">titiler_endpoint</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">bands</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="s2">&quot;bidx&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">band_names</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">3</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;bidx&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
    <span class="k">elif</span> <span class="n">bands</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="s2">&quot;bidx&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">all</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">bands</span><span class="p">):</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;bidx&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">bands</span>
        <span class="k">elif</span> <span class="nb">all</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">bands</span><span class="p">):</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;bidx&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">band_names</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">bands</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Bands must be a list of integers or strings.&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="s2">&quot;palette&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;colormap_name&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;palette&quot;</span><span class="p">]</span>
        <span class="k">del</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;palette&quot;</span><span class="p">]</span>

    <span class="k">if</span> <span class="s2">&quot;rescale&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
        <span class="n">stats</span> <span class="o">=</span> <span class="n">cog_stats</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">titiler_endpoint</span><span class="p">)</span>
        <span class="n">percentile_2</span> <span class="o">=</span> <span class="nb">min</span><span class="p">([</span><span class="n">stats</span><span class="p">[</span><span class="n">s</span><span class="p">][</span><span class="s2">&quot;percentile_2&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">stats</span><span class="p">])</span>
        <span class="n">percentile_98</span> <span class="o">=</span> <span class="nb">max</span><span class="p">([</span><span class="n">stats</span><span class="p">[</span><span class="n">s</span><span class="p">][</span><span class="s2">&quot;percentile_98&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">stats</span><span class="p">])</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;rescale&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">percentile_2</span><span class="si">}</span><span class="s2">,</span><span class="si">{</span><span class="n">percentile_98</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="n">TileMatrixSetId</span> <span class="o">=</span> <span class="s2">&quot;WebMercatorQuad&quot;</span>
    <span class="k">if</span> <span class="s2">&quot;TileMatrixSetId&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="n">TileMatrixSetId</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;TileMatrixSetId&quot;</span><span class="p">]</span>
        <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;TileMatrixSetId&quot;</span><span class="p">)</span>

    <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
        <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">titiler_endpoint</span><span class="si">}</span><span class="s2">/cog/</span><span class="si">{</span><span class="n">TileMatrixSetId</span><span class="si">}</span><span class="s2">/tilejson.json&quot;</span><span class="p">,</span>
        <span class="n">params</span><span class="o">=</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span>
        <span class="n">proxies</span><span class="o">=</span><span class="n">proxies</span><span class="p">,</span>
    <span class="p">)</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>

    <span class="k">return</span> <span class="n">r</span><span class="p">[</span><span class="s2">&quot;tiles&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.cog_validate" class="doc doc-heading">
<code class="highlight language-python"><span class="n">cog_validate</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>


<a href="#geemap.common.cog_validate" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Validate Cloud Optimized Geotiff.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>source</code></td>
        <td><code>str</code></td>
        <td><p>A dataset path or URL. Will be opened in "r" mode.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>verbose</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to print the output of the validation. Defaults to False.</p></td>
        <td><code>False</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>ImportError</code></td>
        <td><p>If the rio-cogeo package is not installed.</p></td>
      </tr>
      <tr>
        <td><code>FileNotFoundError</code></td>
        <td><p>If the provided file could not be found.</p></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>tuple</code></td>
      <td><p>A tuple containing the validation results (True is src_path is a valid COG, List of validation errors, and a list of validation warnings).</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">cog_validate</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Validate Cloud Optimized Geotiff.</span>

<span class="sd">    Args:</span>
<span class="sd">        source (str): A dataset path or URL. Will be opened in &quot;r&quot; mode.</span>
<span class="sd">        verbose (bool, optional): Whether to print the output of the validation. Defaults to False.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ImportError: If the rio-cogeo package is not installed.</span>
<span class="sd">        FileNotFoundError: If the provided file could not be found.</span>

<span class="sd">    Returns:</span>
<span class="sd">        tuple: A tuple containing the validation results (True is src_path is a valid COG, List of validation errors, and a list of validation warnings).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="kn">from</span> <span class="nn">rio_cogeo.cogeo</span> <span class="kn">import</span> <span class="n">cog_validate</span><span class="p">,</span> <span class="n">cog_info</span>
    <span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ImportError</span><span class="p">(</span>
            <span class="s2">&quot;The rio-cogeo package is not installed. Please install it with `pip install rio-cogeo` or `conda install rio-cogeo -c conda-forge`.&quot;</span>
        <span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">source</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;http&quot;</span><span class="p">):</span>
        <span class="n">source</span> <span class="o">=</span> <span class="n">check_file_path</span><span class="p">(</span><span class="n">source</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">source</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span><span class="s2">&quot;The provided input file could not be found.&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">verbose</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">cog_info</span><span class="p">(</span><span class="n">source</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">cog_validate</span><span class="p">(</span><span class="n">source</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.column_stats" class="doc doc-heading">
<code class="highlight language-python"><span class="n">column_stats</span><span class="p">(</span><span class="n">collection</span><span class="p">,</span> <span class="n">column</span><span class="p">,</span> <span class="n">stats_type</span><span class="p">)</span></code>


<a href="#geemap.common.column_stats" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Aggregates over a given property of the objects in a collection, calculating the sum, min, max, mean,
sample standard deviation, sample variance, total standard deviation and total variance of the selected property.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>collection</code></td>
        <td><code>FeatureCollection</code></td>
        <td><p>The input feature collection to calculate statistics.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>column</code></td>
        <td><code>str</code></td>
        <td><p>The name of the column to calculate statistics.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>stats_type</code></td>
        <td><code>str</code></td>
        <td><p>The type of statistics to calculate.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>dict</code></td>
      <td><p>The dictionary containing information about the requested statistics.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">column_stats</span><span class="p">(</span><span class="n">collection</span><span class="p">,</span> <span class="n">column</span><span class="p">,</span> <span class="n">stats_type</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Aggregates over a given property of the objects in a collection, calculating the sum, min, max, mean,</span>
<span class="sd">    sample standard deviation, sample variance, total standard deviation and total variance of the selected property.</span>

<span class="sd">    Args:</span>
<span class="sd">        collection (FeatureCollection): The input feature collection to calculate statistics.</span>
<span class="sd">        column (str): The name of the column to calculate statistics.</span>
<span class="sd">        stats_type (str): The type of statistics to calculate.</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict: The dictionary containing information about the requested statistics.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">stats_type</span> <span class="o">=</span> <span class="n">stats_type</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
    <span class="n">allowed_stats</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;min&quot;</span><span class="p">,</span> <span class="s2">&quot;max&quot;</span><span class="p">,</span> <span class="s2">&quot;mean&quot;</span><span class="p">,</span> <span class="s2">&quot;median&quot;</span><span class="p">,</span> <span class="s2">&quot;sum&quot;</span><span class="p">,</span> <span class="s2">&quot;stdDev&quot;</span><span class="p">,</span> <span class="s2">&quot;variance&quot;</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">stats_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">allowed_stats</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span>
            <span class="s2">&quot;The stats type must be one of the following: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="s2">&quot;,&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">allowed_stats</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="k">return</span>

    <span class="n">stats_dict</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;min&quot;</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span>
        <span class="s2">&quot;max&quot;</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">max</span><span class="p">(),</span>
        <span class="s2">&quot;mean&quot;</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">mean</span><span class="p">(),</span>
        <span class="s2">&quot;median&quot;</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">median</span><span class="p">(),</span>
        <span class="s2">&quot;sum&quot;</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">sum</span><span class="p">(),</span>
        <span class="s2">&quot;stdDev&quot;</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">stdDev</span><span class="p">(),</span>
        <span class="s2">&quot;variance&quot;</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">variance</span><span class="p">(),</span>
    <span class="p">}</span>

    <span class="n">selectors</span> <span class="o">=</span> <span class="p">[</span><span class="n">column</span><span class="p">]</span>
    <span class="n">stats</span> <span class="o">=</span> <span class="n">collection</span><span class="o">.</span><span class="n">reduceColumns</span><span class="p">(</span>
        <span class="o">**</span><span class="p">{</span><span class="s2">&quot;selectors&quot;</span><span class="p">:</span> <span class="n">selectors</span><span class="p">,</span> <span class="s2">&quot;reducer&quot;</span><span class="p">:</span> <span class="n">stats_dict</span><span class="p">[</span><span class="n">stats_type</span><span class="p">]}</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="n">stats</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.connect_postgis" class="doc doc-heading">
<code class="highlight language-python"><span class="n">connect_postgis</span><span class="p">(</span><span class="n">database</span><span class="p">,</span> <span class="n">host</span><span class="o">=</span><span class="s1">&#39;localhost&#39;</span><span class="p">,</span> <span class="n">user</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">5432</span><span class="p">,</span> <span class="n">use_env_var</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>


<a href="#geemap.common.connect_postgis" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Connects to a PostGIS database.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>database</code></td>
        <td><code>str</code></td>
        <td><p>Name of the database</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>host</code></td>
        <td><code>str</code></td>
        <td><p>Hosting server for the database. Defaults to "localhost".</p></td>
        <td><code>&#39;localhost&#39;</code></td>
      </tr>
      <tr>
        <td><code>user</code></td>
        <td><code>str</code></td>
        <td><p>User name to access the database. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>password</code></td>
        <td><code>str</code></td>
        <td><p>Password to access the database. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>port</code></td>
        <td><code>int</code></td>
        <td><p>Port number to connect to at the server host. Defaults to 5432.</p></td>
        <td><code>5432</code></td>
      </tr>
      <tr>
        <td><code>use_env_var</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to use environment variables. It set to True, user and password are treated as an environment variables with default values user="SQL_USER" and password="SQL_PASSWORD". Defaults to False.</p></td>
        <td><code>False</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>ValueError</code></td>
        <td><p>If user is not specified.</p></td>
      </tr>
      <tr>
        <td><code>ValueError</code></td>
        <td><p>If password is not specified.</p></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>[type]</code></td>
      <td><p>[description]</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">connect_postgis</span><span class="p">(</span>
    <span class="n">database</span><span class="p">,</span> <span class="n">host</span><span class="o">=</span><span class="s2">&quot;localhost&quot;</span><span class="p">,</span> <span class="n">user</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">5432</span><span class="p">,</span> <span class="n">use_env_var</span><span class="o">=</span><span class="kc">False</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Connects to a PostGIS database.</span>

<span class="sd">    Args:</span>
<span class="sd">        database (str): Name of the database</span>
<span class="sd">        host (str, optional): Hosting server for the database. Defaults to &quot;localhost&quot;.</span>
<span class="sd">        user (str, optional): User name to access the database. Defaults to None.</span>
<span class="sd">        password (str, optional): Password to access the database. Defaults to None.</span>
<span class="sd">        port (int, optional): Port number to connect to at the server host. Defaults to 5432.</span>
<span class="sd">        use_env_var (bool, optional): Whether to use environment variables. It set to True, user and password are treated as an environment variables with default values user=&quot;SQL_USER&quot; and password=&quot;SQL_PASSWORD&quot;. Defaults to False.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If user is not specified.</span>
<span class="sd">        ValueError: If password is not specified.</span>

<span class="sd">    Returns:</span>
<span class="sd">        [type]: [description]</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">check_package</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;geopandas&quot;</span><span class="p">,</span> <span class="n">URL</span><span class="o">=</span><span class="s2">&quot;https://geopandas.org&quot;</span><span class="p">)</span>
    <span class="n">check_package</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;sqlalchemy&quot;</span><span class="p">,</span>
        <span class="n">URL</span><span class="o">=</span><span class="s2">&quot;https://docs.sqlalchemy.org/en/14/intro.html#installation&quot;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">create_engine</span>

    <span class="k">if</span> <span class="n">use_env_var</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">user</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">user</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">user</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;SQL_USER&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">password</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">password</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="n">password</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">password</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;SQL_PASSWORD&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">user</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;user is not specified.&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">password</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;password is not specified.&quot;</span><span class="p">)</span>

    <span class="n">connection_string</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;postgresql://</span><span class="si">{</span><span class="n">user</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">password</span><span class="si">}</span><span class="s2">@</span><span class="si">{</span><span class="n">host</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">port</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">database</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="n">connection_string</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">engine</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.convert_lidar" class="doc doc-heading">
<code class="highlight language-python"><span class="n">convert_lidar</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">destination</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">point_format_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">file_version</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.common.convert_lidar" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Converts a Las from one point format to another Automatically upgrades the file version if source file version
    is not compatible with the new point_format_id</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>source</code></td>
        <td><code>str | laspy.lasdatas.base.LasBase</code></td>
        <td><p>The source data to be converted.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>destination</code></td>
        <td><code>str</code></td>
        <td><p>The destination file path. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>point_format_id</code></td>
        <td><code>int</code></td>
        <td><p>The new point format id (the default is None, which won't change the source format id).</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>file_version</code></td>
        <td><code>str</code></td>
        <td><p>The new file version. None by default which means that the file_version may be upgraded
for compatibility with the new point_format. The file version will not be downgraded.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>aspy.lasdatas.base.LasBase</code></td>
      <td><p>The converted LasData object.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">convert_lidar</span><span class="p">(</span>
    <span class="n">source</span><span class="p">,</span> <span class="n">destination</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">point_format_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">file_version</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Converts a Las from one point format to another Automatically upgrades the file version if source file version</span>
<span class="sd">        is not compatible with the new point_format_id</span>

<span class="sd">    Args:</span>
<span class="sd">        source (str | laspy.lasdatas.base.LasBase): The source data to be converted.</span>
<span class="sd">        destination (str, optional): The destination file path. Defaults to None.</span>
<span class="sd">        point_format_id (int, optional): The new point format id (the default is None, which won&#39;t change the source format id).</span>
<span class="sd">        file_version (str, optional): The new file version. None by default which means that the file_version may be upgraded</span>
<span class="sd">            for compatibility with the new point_format. The file version will not be downgraded.</span>

<span class="sd">    Returns:</span>
<span class="sd">        aspy.lasdatas.base.LasBase: The converted LasData object.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="kn">import</span> <span class="nn">laspy</span>
    <span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span>
            <span class="s2">&quot;The laspy package is required for this function. Use `pip install laspy[lazrs,laszip]` to install it.&quot;</span>
        <span class="p">)</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">source</span> <span class="o">=</span> <span class="n">read_lidar</span><span class="p">(</span><span class="n">source</span><span class="p">)</span>

    <span class="n">las</span> <span class="o">=</span> <span class="n">laspy</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span>
        <span class="n">source</span><span class="p">,</span> <span class="n">point_format_id</span><span class="o">=</span><span class="n">point_format_id</span><span class="p">,</span> <span class="n">file_version</span><span class="o">=</span><span class="n">file_version</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">destination</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">las</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">destination</span> <span class="o">=</span> <span class="n">check_file_path</span><span class="p">(</span><span class="n">destination</span><span class="p">)</span>
        <span class="n">write_lidar</span><span class="p">(</span><span class="n">las</span><span class="p">,</span> <span class="n">destination</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">destination</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.coords_to_geojson" class="doc doc-heading">
<code class="highlight language-python"><span class="n">coords_to_geojson</span><span class="p">(</span><span class="n">coords</span><span class="p">)</span></code>


<a href="#geemap.common.coords_to_geojson" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Convert a list of bbox coordinates representing [left, bottom, right, top] to geojson FeatureCollection.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>coords</code></td>
        <td><code>list</code></td>
        <td><p>A list of bbox coordinates representing [left, bottom, right, top].</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>dict</code></td>
      <td><p>A geojson FeatureCollection.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">coords_to_geojson</span><span class="p">(</span><span class="n">coords</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Convert a list of bbox coordinates representing [left, bottom, right, top] to geojson FeatureCollection.</span>

<span class="sd">    Args:</span>
<span class="sd">        coords (list): A list of bbox coordinates representing [left, bottom, right, top].</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict: A geojson FeatureCollection.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">features</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">bbox</span> <span class="ow">in</span> <span class="n">coords</span><span class="p">:</span>
        <span class="n">features</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bbox_to_geojson</span><span class="p">(</span><span class="n">bbox</span><span class="p">))</span>
    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;FeatureCollection&quot;</span><span class="p">,</span> <span class="s2">&quot;features&quot;</span><span class="p">:</span> <span class="n">features</span><span class="p">}</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.copy_credentials_to_colab" class="doc doc-heading">
<code class="highlight language-python"><span class="n">copy_credentials_to_colab</span><span class="p">()</span></code>


<a href="#geemap.common.copy_credentials_to_colab" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Copies ee credentials from Google Drive to Google Colab.</p>

        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">copy_credentials_to_colab</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Copies ee credentials from Google Drive to Google Colab.&quot;&quot;&quot;</span>
    <span class="n">src</span> <span class="o">=</span> <span class="s2">&quot;/content/drive/My Drive/.config/earthengine/credentials&quot;</span>
    <span class="n">dst</span> <span class="o">=</span> <span class="s2">&quot;/root/.config/earthengine/credentials&quot;</span>

    <span class="n">wd</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">dst</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">wd</span><span class="p">):</span>
        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">wd</span><span class="p">)</span>

    <span class="n">shutil</span><span class="o">.</span><span class="n">copyfile</span><span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="n">dst</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.copy_credentials_to_drive" class="doc doc-heading">
<code class="highlight language-python"><span class="n">copy_credentials_to_drive</span><span class="p">()</span></code>


<a href="#geemap.common.copy_credentials_to_drive" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Copies ee credentials from Google Colab to Google Drive.</p>

        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">copy_credentials_to_drive</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Copies ee credentials from Google Colab to Google Drive.&quot;&quot;&quot;</span>
    <span class="n">src</span> <span class="o">=</span> <span class="s2">&quot;/root/.config/earthengine/credentials&quot;</span>
    <span class="n">dst</span> <span class="o">=</span> <span class="s2">&quot;/content/drive/My Drive/.config/earthengine/credentials&quot;</span>

    <span class="n">wd</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">dst</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">wd</span><span class="p">):</span>
        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">wd</span><span class="p">)</span>

    <span class="n">shutil</span><span class="o">.</span><span class="n">copyfile</span><span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="n">dst</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.create_code_cell" class="doc doc-heading">
<code class="highlight language-python"><span class="n">create_code_cell</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">where</span><span class="o">=</span><span class="s1">&#39;below&#39;</span><span class="p">)</span></code>


<a href="#geemap.common.create_code_cell" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Creates a code cell in the IPython Notebook.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>code</code></td>
        <td><code>str</code></td>
        <td><p>Code to fill the new code cell with. Defaults to ''.</p></td>
        <td><code>&#39;&#39;</code></td>
      </tr>
      <tr>
        <td><code>where</code></td>
        <td><code>str</code></td>
        <td><p>Where to add the new code cell. It can be one of the following: above, below, at_bottom. Defaults to 'below'.</p></td>
        <td><code>&#39;below&#39;</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">create_code_cell</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">where</span><span class="o">=</span><span class="s2">&quot;below&quot;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Creates a code cell in the IPython Notebook.</span>

<span class="sd">    Args:</span>
<span class="sd">        code (str, optional): Code to fill the new code cell with. Defaults to &#39;&#39;.</span>
<span class="sd">        where (str, optional): Where to add the new code cell. It can be one of the following: above, below, at_bottom. Defaults to &#39;below&#39;.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="kn">import</span> <span class="nn">base64</span>

    <span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">Javascript</span><span class="p">,</span> <span class="n">display</span>

    <span class="n">encoded_code</span> <span class="o">=</span> <span class="p">(</span><span class="n">base64</span><span class="o">.</span><span class="n">b64encode</span><span class="p">(</span><span class="nb">str</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">code</span><span class="p">)))</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span>
    <span class="n">display</span><span class="p">(</span>
        <span class="n">Javascript</span><span class="p">(</span>
            <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        var code = IPython.notebook.insert_cell_{0}(&#39;code&#39;);</span>
<span class="sd">        code.set_text(atob(&quot;{1}&quot;));</span>
<span class="sd">    &quot;&quot;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="n">where</span><span class="p">,</span> <span class="n">encoded_code</span>
            <span class="p">)</span>
        <span class="p">)</span>
    <span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.create_colorbar" class="doc doc-heading">
<code class="highlight language-python"><span class="n">create_colorbar</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="mi">150</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">palette</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;blue&#39;</span><span class="p">,</span> <span class="s1">&#39;green&#39;</span><span class="p">,</span> <span class="s1">&#39;red&#39;</span><span class="p">],</span> <span class="n">add_ticks</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">add_labels</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">labels</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">vertical</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">out_file</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">font_type</span><span class="o">=</span><span class="s1">&#39;arial.ttf&#39;</span><span class="p">,</span> <span class="n">font_size</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span> <span class="n">font_color</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">,</span> <span class="n">add_outline</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">outline_color</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">)</span></code>


<a href="#geemap.common.create_colorbar" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Creates a colorbar based on the provided palette.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>width</code></td>
        <td><code>int</code></td>
        <td><p>Width of the colorbar in pixels. Defaults to 150.</p></td>
        <td><code>150</code></td>
      </tr>
      <tr>
        <td><code>height</code></td>
        <td><code>int</code></td>
        <td><p>Height of the colorbar in pixels. Defaults to 30.</p></td>
        <td><code>30</code></td>
      </tr>
      <tr>
        <td><code>palette</code></td>
        <td><code>list</code></td>
        <td><p>Palette for the colorbar. Each color can be provided as a string (e.g., 'red'), a hex string (e.g., '#ff0000'), or an RGB tuple (255, 0, 255). Defaults to ['blue', 'green', 'red'].</p></td>
        <td><code>[&#39;blue&#39;, &#39;green&#39;, &#39;red&#39;]</code></td>
      </tr>
      <tr>
        <td><code>add_ticks</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to add tick markers to the colorbar. Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
      <tr>
        <td><code>add_labels</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to add labels to the colorbar. Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
      <tr>
        <td><code>labels</code></td>
        <td><code>list</code></td>
        <td><p>A list of labels to add to the colorbar. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>vertical</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to rotate the colorbar vertically. Defaults to False.</p></td>
        <td><code>False</code></td>
      </tr>
      <tr>
        <td><code>out_file</code></td>
        <td><code>str</code></td>
        <td><p>File path to the output colorbar in png format. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>font_type</code></td>
        <td><code>str</code></td>
        <td><p>Font type to use for labels. Defaults to 'arial.ttf'.</p></td>
        <td><code>&#39;arial.ttf&#39;</code></td>
      </tr>
      <tr>
        <td><code>font_size</code></td>
        <td><code>int</code></td>
        <td><p>Font size to use for labels. Defaults to 12.</p></td>
        <td><code>12</code></td>
      </tr>
      <tr>
        <td><code>font_color</code></td>
        <td><code>str</code></td>
        <td><p>Font color to use for labels. Defaults to 'black'.</p></td>
        <td><code>&#39;black&#39;</code></td>
      </tr>
      <tr>
        <td><code>add_outline</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to add an outline to the colorbar. Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
      <tr>
        <td><code>outline_color</code></td>
        <td><code>str</code></td>
        <td><p>Color for the outline of the colorbar. Defaults to 'black'.</p></td>
        <td><code>&#39;black&#39;</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>str</code></td>
      <td><p>File path of the output colorbar in png format.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">create_colorbar</span><span class="p">(</span>
    <span class="n">width</span><span class="o">=</span><span class="mi">150</span><span class="p">,</span>
    <span class="n">height</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span>
    <span class="n">palette</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;blue&quot;</span><span class="p">,</span> <span class="s2">&quot;green&quot;</span><span class="p">,</span> <span class="s2">&quot;red&quot;</span><span class="p">],</span>
    <span class="n">add_ticks</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">add_labels</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">labels</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">vertical</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">out_file</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">font_type</span><span class="o">=</span><span class="s2">&quot;arial.ttf&quot;</span><span class="p">,</span>
    <span class="n">font_size</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span>
    <span class="n">font_color</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">,</span>
    <span class="n">add_outline</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">outline_color</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Creates a colorbar based on the provided palette.</span>

<span class="sd">    Args:</span>
<span class="sd">        width (int, optional): Width of the colorbar in pixels. Defaults to 150.</span>
<span class="sd">        height (int, optional): Height of the colorbar in pixels. Defaults to 30.</span>
<span class="sd">        palette (list, optional): Palette for the colorbar. Each color can be provided as a string (e.g., &#39;red&#39;), a hex string (e.g., &#39;#ff0000&#39;), or an RGB tuple (255, 0, 255). Defaults to [&#39;blue&#39;, &#39;green&#39;, &#39;red&#39;].</span>
<span class="sd">        add_ticks (bool, optional): Whether to add tick markers to the colorbar. Defaults to True.</span>
<span class="sd">        add_labels (bool, optional): Whether to add labels to the colorbar. Defaults to True.</span>
<span class="sd">        labels (list, optional): A list of labels to add to the colorbar. Defaults to None.</span>
<span class="sd">        vertical (bool, optional): Whether to rotate the colorbar vertically. Defaults to False.</span>
<span class="sd">        out_file (str, optional): File path to the output colorbar in png format. Defaults to None.</span>
<span class="sd">        font_type (str, optional): Font type to use for labels. Defaults to &#39;arial.ttf&#39;.</span>
<span class="sd">        font_size (int, optional): Font size to use for labels. Defaults to 12.</span>
<span class="sd">        font_color (str, optional): Font color to use for labels. Defaults to &#39;black&#39;.</span>
<span class="sd">        add_outline (bool, optional): Whether to add an outline to the colorbar. Defaults to True.</span>
<span class="sd">        outline_color (str, optional): Color for the outline of the colorbar. Defaults to &#39;black&#39;.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: File path of the output colorbar in png format.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">decimal</span>

    <span class="c1"># import io</span>
    <span class="kn">import</span> <span class="nn">pkg_resources</span>
    <span class="kn">from</span> <span class="nn">colour</span> <span class="kn">import</span> <span class="n">Color</span>
    <span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">Image</span><span class="p">,</span> <span class="n">ImageDraw</span><span class="p">,</span> <span class="n">ImageFont</span>

    <span class="n">warnings</span><span class="o">.</span><span class="n">simplefilter</span><span class="p">(</span><span class="s2">&quot;ignore&quot;</span><span class="p">)</span>
    <span class="n">pkg_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">pkg_resources</span><span class="o">.</span><span class="n">resource_filename</span><span class="p">(</span><span class="s2">&quot;geemap&quot;</span><span class="p">,</span> <span class="s2">&quot;geemap.py&quot;</span><span class="p">))</span>

    <span class="k">if</span> <span class="n">out_file</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">filename</span> <span class="o">=</span> <span class="s2">&quot;colorbar_&quot;</span> <span class="o">+</span> <span class="n">random_string</span><span class="p">()</span> <span class="o">+</span> <span class="s2">&quot;.png&quot;</span>
        <span class="n">out_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="s2">&quot;~&quot;</span><span class="p">),</span> <span class="s2">&quot;Downloads&quot;</span><span class="p">)</span>
        <span class="n">out_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">out_dir</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>
    <span class="k">elif</span> <span class="ow">not</span> <span class="n">out_file</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.png&quot;</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The output file must end with .png&quot;</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">out_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">out_file</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">out_file</span><span class="p">)):</span>
        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">out_file</span><span class="p">))</span>

    <span class="n">im</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;RGBA&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">))</span>
    <span class="n">ld</span> <span class="o">=</span> <span class="n">im</span><span class="o">.</span><span class="n">load</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">float_range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">stop</span><span class="p">,</span> <span class="n">step</span><span class="p">):</span>
        <span class="k">while</span> <span class="n">start</span> <span class="o">&lt;</span> <span class="n">stop</span><span class="p">:</span>
            <span class="k">yield</span> <span class="nb">float</span><span class="p">(</span><span class="n">start</span><span class="p">)</span>
            <span class="n">start</span> <span class="o">+=</span> <span class="n">decimal</span><span class="o">.</span><span class="n">Decimal</span><span class="p">(</span><span class="n">step</span><span class="p">)</span>

    <span class="n">n_colors</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">palette</span><span class="p">)</span>
    <span class="n">decimal_places</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="n">rgb_colors</span> <span class="o">=</span> <span class="p">[</span><span class="n">Color</span><span class="p">(</span><span class="n">check_color</span><span class="p">(</span><span class="n">c</span><span class="p">))</span><span class="o">.</span><span class="n">rgb</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">palette</span><span class="p">]</span>
    <span class="n">keys</span> <span class="o">=</span> <span class="p">[</span>
        <span class="nb">round</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">decimal_places</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">float_range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">1.0001</span><span class="p">,</span> <span class="mf">1.0</span> <span class="o">/</span> <span class="p">(</span><span class="n">n_colors</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)))</span>
    <span class="p">]</span>

    <span class="n">heatmap</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">item</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">keys</span><span class="p">):</span>
        <span class="n">pair</span> <span class="o">=</span> <span class="p">[</span><span class="n">item</span><span class="p">,</span> <span class="n">rgb_colors</span><span class="p">[</span><span class="n">index</span><span class="p">]]</span>
        <span class="n">heatmap</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pair</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">gaussian</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">d</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">a</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="p">((</span><span class="n">x</span> <span class="o">-</span> <span class="n">b</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">c</span><span class="o">**</span><span class="mi">2</span><span class="p">))</span> <span class="o">+</span> <span class="n">d</span>

    <span class="k">def</span> <span class="nf">pixel</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="nb">map</span><span class="o">=</span><span class="p">[],</span> <span class="n">spread</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
        <span class="n">width</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">width</span><span class="p">)</span>
        <span class="n">r</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span>
            <span class="p">[</span>
                <span class="n">gaussian</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">width</span><span class="p">,</span> <span class="n">width</span> <span class="o">/</span> <span class="p">(</span><span class="n">spread</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="nb">map</span><span class="p">)))</span>
                <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="nb">map</span>
            <span class="p">]</span>
        <span class="p">)</span>
        <span class="n">g</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span>
            <span class="p">[</span>
                <span class="n">gaussian</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span> <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">width</span><span class="p">,</span> <span class="n">width</span> <span class="o">/</span> <span class="p">(</span><span class="n">spread</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="nb">map</span><span class="p">)))</span>
                <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="nb">map</span>
            <span class="p">]</span>
        <span class="p">)</span>
        <span class="n">b</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span>
            <span class="p">[</span>
                <span class="n">gaussian</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">2</span><span class="p">],</span> <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">width</span><span class="p">,</span> <span class="n">width</span> <span class="o">/</span> <span class="p">(</span><span class="n">spread</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="nb">map</span><span class="p">)))</span>
                <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="nb">map</span>
            <span class="p">]</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="nb">min</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">r</span><span class="p">),</span> <span class="nb">min</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">g</span><span class="p">),</span> <span class="nb">min</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">im</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
        <span class="n">r</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">pixel</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="n">width</span><span class="p">,</span> <span class="nb">map</span><span class="o">=</span><span class="n">heatmap</span><span class="p">)</span>
        <span class="n">r</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="mi">256</span> <span class="o">*</span> <span class="n">v</span><span class="p">)</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">b</span><span class="p">)]</span>
        <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">im</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">1</span><span class="p">]):</span>
            <span class="n">ld</span><span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">r</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">b</span>

    <span class="k">if</span> <span class="n">add_outline</span><span class="p">:</span>
        <span class="n">draw</span> <span class="o">=</span> <span class="n">ImageDraw</span><span class="o">.</span><span class="n">Draw</span><span class="p">(</span><span class="n">im</span><span class="p">)</span>
        <span class="n">draw</span><span class="o">.</span><span class="n">rectangle</span><span class="p">(</span>
            <span class="p">[(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="n">width</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">height</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)],</span> <span class="n">outline</span><span class="o">=</span><span class="n">check_color</span><span class="p">(</span><span class="n">outline_color</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="k">del</span> <span class="n">draw</span>

    <span class="k">if</span> <span class="n">add_ticks</span><span class="p">:</span>
        <span class="n">tick_length</span> <span class="o">=</span> <span class="n">height</span> <span class="o">*</span> <span class="mf">0.1</span>
        <span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="n">key</span> <span class="o">*</span> <span class="n">width</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">keys</span><span class="p">]</span>
        <span class="n">y_top</span> <span class="o">=</span> <span class="n">height</span> <span class="o">-</span> <span class="n">tick_length</span>
        <span class="n">y_bottom</span> <span class="o">=</span> <span class="n">height</span>
        <span class="n">draw</span> <span class="o">=</span> <span class="n">ImageDraw</span><span class="o">.</span><span class="n">Draw</span><span class="p">(</span><span class="n">im</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">x</span><span class="p">:</span>
            <span class="n">shape</span> <span class="o">=</span> <span class="p">[(</span><span class="n">i</span><span class="p">,</span> <span class="n">y_top</span><span class="p">),</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">y_bottom</span><span class="p">)]</span>
            <span class="n">draw</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">shape</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="k">del</span> <span class="n">draw</span>

    <span class="k">if</span> <span class="n">vertical</span><span class="p">:</span>
        <span class="n">im</span> <span class="o">=</span> <span class="n">im</span><span class="o">.</span><span class="n">transpose</span><span class="p">(</span><span class="n">Image</span><span class="o">.</span><span class="n">ROTATE_90</span><span class="p">)</span>

    <span class="n">width</span><span class="p">,</span> <span class="n">height</span> <span class="o">=</span> <span class="n">im</span><span class="o">.</span><span class="n">size</span>

    <span class="k">if</span> <span class="n">labels</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">labels</span> <span class="o">=</span> <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">c</span><span class="p">)</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">keys</span><span class="p">]</span>
    <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">labels</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">lowerbound</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">labels</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="n">upperbound</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">labels</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
            <span class="n">step</span> <span class="o">=</span> <span class="p">(</span><span class="n">upperbound</span> <span class="o">-</span> <span class="n">lowerbound</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">palette</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
            <span class="n">labels</span> <span class="o">=</span> <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">lowerbound</span> <span class="o">+</span> <span class="n">c</span> <span class="o">*</span> <span class="n">step</span><span class="p">)</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">palette</span><span class="p">))]</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The labels are invalid.&quot;</span><span class="p">)</span>
            <span class="k">return</span>
    <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">labels</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">palette</span><span class="p">):</span>
        <span class="n">labels</span> <span class="o">=</span> <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">c</span><span class="p">)</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">labels</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The labels must have the same length as the palette.&quot;</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="n">add_labels</span><span class="p">:</span>

        <span class="n">default_font</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">pkg_dir</span><span class="p">,</span> <span class="s2">&quot;data/fonts/arial.ttf&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">font_type</span> <span class="o">==</span> <span class="s2">&quot;arial.ttf&quot;</span><span class="p">:</span>
            <span class="n">font</span> <span class="o">=</span> <span class="n">ImageFont</span><span class="o">.</span><span class="n">truetype</span><span class="p">(</span><span class="n">default_font</span><span class="p">,</span> <span class="n">font_size</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">font_list</span> <span class="o">=</span> <span class="n">system_fonts</span><span class="p">(</span><span class="n">show_full_path</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                <span class="n">font_names</span> <span class="o">=</span> <span class="p">[</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">f</span><span class="p">)</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">font_list</span><span class="p">]</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">font_type</span> <span class="ow">in</span> <span class="n">font_list</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">font_type</span> <span class="ow">in</span> <span class="n">font_names</span><span class="p">):</span>
                    <span class="n">font</span> <span class="o">=</span> <span class="n">ImageFont</span><span class="o">.</span><span class="n">truetype</span><span class="p">(</span><span class="n">font_type</span><span class="p">,</span> <span class="n">font_size</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span>
                        <span class="s2">&quot;The specified font type could not be found on your system. Using the default font instead.&quot;</span>
                    <span class="p">)</span>
                    <span class="n">font</span> <span class="o">=</span> <span class="n">ImageFont</span><span class="o">.</span><span class="n">truetype</span><span class="p">(</span><span class="n">default_font</span><span class="p">,</span> <span class="n">font_size</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
                <span class="n">font</span> <span class="o">=</span> <span class="n">ImageFont</span><span class="o">.</span><span class="n">truetype</span><span class="p">(</span><span class="n">default_font</span><span class="p">,</span> <span class="n">font_size</span><span class="p">)</span>

        <span class="n">font_color</span> <span class="o">=</span> <span class="n">check_color</span><span class="p">(</span><span class="n">font_color</span><span class="p">)</span>

        <span class="n">draw</span> <span class="o">=</span> <span class="n">ImageDraw</span><span class="o">.</span><span class="n">Draw</span><span class="p">(</span><span class="n">im</span><span class="p">)</span>
        <span class="n">w</span><span class="p">,</span> <span class="n">h</span> <span class="o">=</span> <span class="n">draw</span><span class="o">.</span><span class="n">textsize</span><span class="p">(</span><span class="n">labels</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">font</span><span class="o">=</span><span class="n">font</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">label</span> <span class="ow">in</span> <span class="n">labels</span><span class="p">:</span>
            <span class="n">w_tmp</span><span class="p">,</span> <span class="n">h_tmp</span> <span class="o">=</span> <span class="n">draw</span><span class="o">.</span><span class="n">textsize</span><span class="p">(</span><span class="n">label</span><span class="p">,</span> <span class="n">font</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">w_tmp</span> <span class="o">&gt;</span> <span class="n">w</span><span class="p">:</span>
                <span class="n">w</span> <span class="o">=</span> <span class="n">w_tmp</span>
            <span class="k">if</span> <span class="n">h_tmp</span> <span class="o">&gt;</span> <span class="n">h</span><span class="p">:</span>
                <span class="n">h</span> <span class="o">=</span> <span class="n">h_tmp</span>

        <span class="n">W</span><span class="p">,</span> <span class="n">H</span> <span class="o">=</span> <span class="n">width</span> <span class="o">+</span> <span class="n">w</span> <span class="o">*</span> <span class="mi">2</span><span class="p">,</span> <span class="n">height</span> <span class="o">+</span> <span class="n">h</span> <span class="o">*</span> <span class="mi">2</span>
        <span class="n">background</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;RGBA&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">W</span><span class="p">,</span> <span class="n">H</span><span class="p">))</span>
        <span class="n">draw</span> <span class="o">=</span> <span class="n">ImageDraw</span><span class="o">.</span><span class="n">Draw</span><span class="p">(</span><span class="n">background</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">vertical</span><span class="p">:</span>
            <span class="n">xy</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">h</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">xy</span> <span class="o">=</span> <span class="p">(</span><span class="n">w</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">background</span><span class="o">.</span><span class="n">paste</span><span class="p">(</span><span class="n">im</span><span class="p">,</span> <span class="n">xy</span><span class="p">,</span> <span class="n">im</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">label</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">labels</span><span class="p">):</span>

            <span class="n">w_tmp</span><span class="p">,</span> <span class="n">h_tmp</span> <span class="o">=</span> <span class="n">draw</span><span class="o">.</span><span class="n">textsize</span><span class="p">(</span><span class="n">label</span><span class="p">,</span> <span class="n">font</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">vertical</span><span class="p">:</span>
                <span class="n">spacing</span> <span class="o">=</span> <span class="mi">5</span>
                <span class="n">x</span> <span class="o">=</span> <span class="n">width</span> <span class="o">+</span> <span class="n">spacing</span>
                <span class="n">y</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">height</span> <span class="o">+</span> <span class="n">h</span> <span class="o">-</span> <span class="n">keys</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">*</span> <span class="n">height</span> <span class="o">-</span> <span class="n">h_tmp</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
                <span class="n">draw</span><span class="o">.</span><span class="n">text</span><span class="p">((</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">),</span> <span class="n">label</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="n">font</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="n">font_color</span><span class="p">)</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="n">x</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">keys</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">*</span> <span class="n">width</span> <span class="o">+</span> <span class="n">w</span> <span class="o">-</span> <span class="n">w_tmp</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
                <span class="n">spacing</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">h</span> <span class="o">*</span> <span class="mf">0.05</span><span class="p">)</span>
                <span class="n">y</span> <span class="o">=</span> <span class="n">height</span> <span class="o">+</span> <span class="n">spacing</span>
                <span class="n">draw</span><span class="o">.</span><span class="n">text</span><span class="p">((</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">),</span> <span class="n">label</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="n">font</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="n">font_color</span><span class="p">)</span>

        <span class="n">im</span> <span class="o">=</span> <span class="n">background</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

    <span class="n">im</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">out_file</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">out_file</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.create_contours" class="doc doc-heading">
<code class="highlight language-python"><span class="n">create_contours</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">min_value</span><span class="p">,</span> <span class="n">max_value</span><span class="p">,</span> <span class="n">interval</span><span class="p">,</span> <span class="n">kernel</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">region</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


<a href="#geemap.common.create_contours" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Creates contours from an image. Code adapted from https://mygeoblog.com/2017/01/28/contour-lines-in-gee. Credits to MyGeoBlog.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>image</code></td>
        <td><code>ee.Image</code></td>
        <td><p>An image to create contours.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>min_value</code></td>
        <td><code>float</code></td>
        <td><p>The minimum value of contours.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>max_value</code></td>
        <td><code>float</code></td>
        <td><p>The maximum value of contours.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>interval</code></td>
        <td><code>float</code></td>
        <td><p>The interval between contours.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>kernel</code></td>
        <td><code>ee.Kernel</code></td>
        <td><p>The kernel to use for smoothing image. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>region</code></td>
        <td><code>ee.Geometry | ee.FeatureCollection</code></td>
        <td><p>The region of interest. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>values</code></td>
        <td><code>list</code></td>
        <td><p>A list of values to create contours for. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>TypeError</code></td>
        <td><p>The image must be an ee.Image.</p></td>
      </tr>
      <tr>
        <td><code>TypeError</code></td>
        <td><p>The region must be an ee.Geometry or ee.FeatureCollection.</p></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>ee.Image</code></td>
      <td><p>The image containing contours.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">create_contours</span><span class="p">(</span>
    <span class="n">image</span><span class="p">,</span> <span class="n">min_value</span><span class="p">,</span> <span class="n">max_value</span><span class="p">,</span> <span class="n">interval</span><span class="p">,</span> <span class="n">kernel</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">region</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="kc">None</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Creates contours from an image. Code adapted from https://mygeoblog.com/2017/01/28/contour-lines-in-gee. Credits to MyGeoBlog.</span>

<span class="sd">    Args:</span>
<span class="sd">        image (ee.Image): An image to create contours.</span>
<span class="sd">        min_value (float): The minimum value of contours.</span>
<span class="sd">        max_value (float): The maximum value of contours.</span>
<span class="sd">        interval (float):  The interval between contours.</span>
<span class="sd">        kernel (ee.Kernel, optional): The kernel to use for smoothing image. Defaults to None.</span>
<span class="sd">        region (ee.Geometry | ee.FeatureCollection, optional): The region of interest. Defaults to None.</span>
<span class="sd">        values (list, optional): A list of values to create contours for. Defaults to None.</span>

<span class="sd">    Raises:</span>
<span class="sd">        TypeError: The image must be an ee.Image.</span>
<span class="sd">        TypeError: The region must be an ee.Geometry or ee.FeatureCollection.</span>

<span class="sd">    Returns:</span>
<span class="sd">        ee.Image: The image containing contours.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;The image must be an ee.Image.&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">region</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">region</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">region</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Geometry</span><span class="p">):</span>
            <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>

            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
                <span class="s2">&quot;The region must be an ee.Geometry or ee.FeatureCollection.&quot;</span>
            <span class="p">)</span>

    <span class="k">if</span> <span class="n">kernel</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">kernel</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Kernel</span><span class="o">.</span><span class="n">gaussian</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
        <span class="n">values</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">List</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">List</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="k">if</span> <span class="n">values</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">values</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">List</span><span class="o">.</span><span class="n">sequence</span><span class="p">(</span><span class="n">min_value</span><span class="p">,</span> <span class="n">max_value</span><span class="p">,</span> <span class="n">interval</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">contouring</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
        <span class="n">mycountour</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">image</span><span class="o">.</span><span class="n">convolve</span><span class="p">(</span><span class="n">kernel</span><span class="p">)</span>
            <span class="o">.</span><span class="n">subtract</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="o">.</span><span class="n">constant</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>
            <span class="o">.</span><span class="n">zeroCrossing</span><span class="p">()</span>
            <span class="o">.</span><span class="n">multiply</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="o">.</span><span class="n">constant</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="o">.</span><span class="n">toFloat</span><span class="p">())</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">mycountour</span><span class="o">.</span><span class="n">mask</span><span class="p">(</span><span class="n">mycountour</span><span class="p">)</span>

    <span class="n">contours</span> <span class="o">=</span> <span class="n">values</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">contouring</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">region</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">region</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">(</span><span class="n">contours</span><span class="p">)</span><span class="o">.</span><span class="n">mosaic</span><span class="p">()</span><span class="o">.</span><span class="n">clipToCollection</span><span class="p">(</span><span class="n">region</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">region</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Geometry</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">(</span><span class="n">contours</span><span class="p">)</span><span class="o">.</span><span class="n">mosaic</span><span class="p">()</span><span class="o">.</span><span class="n">clip</span><span class="p">(</span><span class="n">region</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">(</span><span class="n">contours</span><span class="p">)</span><span class="o">.</span><span class="n">mosaic</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.create_download_button" class="doc doc-heading">
<code class="highlight language-python"><span class="n">create_download_button</span><span class="p">(</span><span class="n">label</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">file_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">mime</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">on_click</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.common.create_download_button" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Streamlit function to create a download button.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>label</code></td>
        <td><code>str</code></td>
        <td><p>A short label explaining to the user what this button is for..</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>data</code></td>
        <td><code>str | list</code></td>
        <td><p>The contents of the file to be downloaded. See example below for caching techniques to avoid recomputing this data unnecessarily.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>file_name</code></td>
        <td><code>str</code></td>
        <td><p>An optional string to use as the name of the file to be downloaded, such as 'my_file.csv'. If not specified, the name will be automatically generated. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>mime</code></td>
        <td><code>str</code></td>
        <td><p>The MIME type of the data. If None, defaults to "text/plain" (if data is of type str or is a textual file) or "application/octet-stream" (if data is of type bytes or is a binary file). Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>key</code></td>
        <td><code>str</code></td>
        <td><p>An optional string or integer to use as the unique key for the widget. If this is omitted, a key will be generated for the widget based on its content. Multiple widgets of the same type may not share the same key. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>help</code></td>
        <td><code>str</code></td>
        <td><p>An optional tooltip that gets displayed when the button is hovered over. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>on_click</code></td>
        <td><code>str</code></td>
        <td><p>An optional callback invoked when this button is clicked. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>args</code></td>
        <td><code>list</code></td>
        <td><p>An optional tuple of args to pass to the callback. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>kwargs</code></td>
        <td><code>dict</code></td>
        <td><p>An optional tuple of args to pass to the callback.</p></td>
        <td><code>{}</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">create_download_button</span><span class="p">(</span>
    <span class="n">label</span><span class="p">,</span>
    <span class="n">data</span><span class="p">,</span>
    <span class="n">file_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">mime</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">key</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">help</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">on_click</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">args</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Streamlit function to create a download button.</span>

<span class="sd">    Args:</span>
<span class="sd">        label (str): A short label explaining to the user what this button is for..</span>
<span class="sd">        data (str | list): The contents of the file to be downloaded. See example below for caching techniques to avoid recomputing this data unnecessarily.</span>
<span class="sd">        file_name (str, optional): An optional string to use as the name of the file to be downloaded, such as &#39;my_file.csv&#39;. If not specified, the name will be automatically generated. Defaults to None.</span>
<span class="sd">        mime (str, optional): The MIME type of the data. If None, defaults to &quot;text/plain&quot; (if data is of type str or is a textual file) or &quot;application/octet-stream&quot; (if data is of type bytes or is a binary file). Defaults to None.</span>
<span class="sd">        key (str, optional): An optional string or integer to use as the unique key for the widget. If this is omitted, a key will be generated for the widget based on its content. Multiple widgets of the same type may not share the same key. Defaults to None.</span>
<span class="sd">        help (str, optional): An optional tooltip that gets displayed when the button is hovered over. Defaults to None.</span>
<span class="sd">        on_click (str, optional): An optional callback invoked when this button is clicked. Defaults to None.</span>
<span class="sd">        args (list, optional): An optional tuple of args to pass to the callback. Defaults to None.</span>
<span class="sd">        kwargs (dict, optional): An optional tuple of args to pass to the callback.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="kn">import</span> <span class="nn">streamlit</span> <span class="k">as</span> <span class="nn">st</span>
        <span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>

            <span class="k">if</span> <span class="n">file_name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">file_name</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

            <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.csv&quot;</span><span class="p">):</span>
                <span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="o">.</span><span class="n">to_csv</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">mime</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">mime</span> <span class="o">=</span> <span class="s2">&quot;text/csv&quot;</span>
                <span class="k">return</span> <span class="n">st</span><span class="o">.</span><span class="n">download_button</span><span class="p">(</span>
                    <span class="n">label</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">file_name</span><span class="p">,</span> <span class="n">mime</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">help</span><span class="p">,</span> <span class="n">on_click</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
                <span class="p">)</span>
            <span class="k">elif</span> <span class="p">(</span>
                <span class="n">data</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.gif&quot;</span><span class="p">)</span> <span class="ow">or</span> <span class="n">data</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.png&quot;</span><span class="p">)</span> <span class="ow">or</span> <span class="n">data</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.jpg&quot;</span><span class="p">)</span>
            <span class="p">):</span>
                <span class="k">if</span> <span class="n">mime</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">mime</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;image/</span><span class="si">{</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">data</span><span class="p">)[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">:]</span><span class="si">}</span><span class="s2">&quot;</span>

                <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s2">&quot;rb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">st</span><span class="o">.</span><span class="n">download_button</span><span class="p">(</span>
                        <span class="n">label</span><span class="p">,</span>
                        <span class="n">file</span><span class="p">,</span>
                        <span class="n">file_name</span><span class="p">,</span>
                        <span class="n">mime</span><span class="p">,</span>
                        <span class="n">key</span><span class="p">,</span>
                        <span class="n">help</span><span class="p">,</span>
                        <span class="n">on_click</span><span class="p">,</span>
                        <span class="n">args</span><span class="p">,</span>
                        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
                    <span class="p">)</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">st</span><span class="o">.</span><span class="n">download_button</span><span class="p">(</span>
                    <span class="n">label</span><span class="p">,</span>
                    <span class="n">label</span><span class="p">,</span>
                    <span class="n">data</span><span class="p">,</span>
                    <span class="n">file_name</span><span class="p">,</span>
                    <span class="n">mime</span><span class="p">,</span>
                    <span class="n">key</span><span class="p">,</span>
                    <span class="n">help</span><span class="p">,</span>
                    <span class="n">on_click</span><span class="p">,</span>
                    <span class="n">args</span><span class="p">,</span>
                    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
                <span class="p">)</span>

    <span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Streamlit is not installed. Please run &#39;pip install streamlit&#39;.&quot;</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.create_download_link" class="doc doc-heading">
<code class="highlight language-python"><span class="n">create_download_link</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Click here to download: &#39;</span><span class="p">)</span></code>


<a href="#geemap.common.create_download_link" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Downloads a file from voila. Adopted from https://github.com/voila-dashboards/voila/issues/578</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>filename</code></td>
        <td><code>str</code></td>
        <td><p>The file path to the file to download</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>title</code></td>
        <td><code>str</code></td>
        <td><p>str. Defaults to "Click here to download: ".</p></td>
        <td><code>&#39;Click here to download: &#39;</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>str</code></td>
      <td><p>HTML download URL.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">create_download_link</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Click here to download: &quot;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Downloads a file from voila. Adopted from https://github.com/voila-dashboards/voila/issues/578</span>

<span class="sd">    Args:</span>
<span class="sd">        filename (str): The file path to the file to download</span>
<span class="sd">        title (str, optional): str. Defaults to &quot;Click here to download: &quot;.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: HTML download URL.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">base64</span>

    <span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">HTML</span>

    <span class="n">data</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s2">&quot;rb&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
    <span class="n">b64</span> <span class="o">=</span> <span class="n">base64</span><span class="o">.</span><span class="n">b64encode</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="n">b64</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span>
    <span class="n">basename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
    <span class="n">html</span> <span class="o">=</span> <span class="s1">&#39;&lt;a download=&quot;</span><span class="si">{filename}</span><span class="s1">&quot; href=&quot;data:text/csv;base64,</span><span class="si">{payload}</span><span class="s1">&quot; style=&quot;color:#0000FF;&quot; target=&quot;_blank&quot;&gt;</span><span class="si">{title}</span><span class="s1">&lt;/a&gt;&#39;</span>
    <span class="n">html</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">payload</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="n">title</span> <span class="o">+</span> <span class="sa">f</span><span class="s2">&quot; </span><span class="si">{</span><span class="n">basename</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="n">basename</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">HTML</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.create_legend" class="doc doc-heading">
<code class="highlight language-python"><span class="n">create_legend</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;Legend&#39;</span><span class="p">,</span> <span class="n">labels</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">colors</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">legend_dict</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">builtin_legend</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">opacity</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s1">&#39;bottomright&#39;</span><span class="p">,</span> <span class="n">draggable</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">output</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="p">{})</span></code>


<a href="#geemap.common.create_legend" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Create a legend in HTML format. Reference: https://bit.ly/3oV6vnH</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>title</code></td>
        <td><code>str</code></td>
        <td><p>Title of the legend. Defaults to 'Legend'. Defaults to "Legend".</p></td>
        <td><code>&#39;Legend&#39;</code></td>
      </tr>
      <tr>
        <td><code>colors</code></td>
        <td><code>list</code></td>
        <td><p>A list of legend colors. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>labels</code></td>
        <td><code>list</code></td>
        <td><p>A list of legend labels. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>legend_dict</code></td>
        <td><code>dict</code></td>
        <td><p>A dictionary containing legend items as keys and color as values.
If provided, legend_keys and legend_colors will be ignored. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>builtin_legend</code></td>
        <td><code>str</code></td>
        <td><p>Name of the builtin legend to add to the map. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>opacity</code></td>
        <td><code>float</code></td>
        <td><p>The opacity of the legend. Defaults to 1.0.</p></td>
        <td><code>1.0</code></td>
      </tr>
      <tr>
        <td><code>position</code></td>
        <td><code>str</code></td>
        <td><p>The position of the legend, can be one of the following:
"topleft", "topright", "bottomleft", "bottomright". Defaults to "bottomright".</p></td>
        <td><code>&#39;bottomright&#39;</code></td>
      </tr>
      <tr>
        <td><code>draggable</code></td>
        <td><code>bool</code></td>
        <td><p>If True, the legend can be dragged to a new position. Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
      <tr>
        <td><code>output</code></td>
        <td><code>str</code></td>
        <td><p>The output file path (*.html) to save the legend. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>style</code></td>
        <td></td>
        <td><p>Additional keyword arguments to style the legend, such as position, bottom, right, z-index,
border, background-color, border-radius, padding, font-size, etc. The default style is:
style = {
    'position': 'fixed',
    'z-index': '9999',
    'border': '2px solid grey',
    'background-color': 'rgba(255, 255, 255, 0.8)',
    'border-radius': '5px',
    'padding': '10px',
    'font-size': '14px',
    'bottom': '20px',
    'right': '5px'
}</p></td>
        <td><code>{}</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>str</code></td>
      <td><p>The HTML code of the legend.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">create_legend</span><span class="p">(</span>
    <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Legend&quot;</span><span class="p">,</span>
    <span class="n">labels</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">colors</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">legend_dict</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">builtin_legend</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">opacity</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
    <span class="n">position</span><span class="o">=</span><span class="s2">&quot;bottomright&quot;</span><span class="p">,</span>
    <span class="n">draggable</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">output</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">style</span><span class="o">=</span><span class="p">{},</span>
<span class="p">):</span>

    <span class="sd">&quot;&quot;&quot;Create a legend in HTML format. Reference: https://bit.ly/3oV6vnH</span>

<span class="sd">    Args:</span>
<span class="sd">        title (str, optional): Title of the legend. Defaults to &#39;Legend&#39;. Defaults to &quot;Legend&quot;.</span>
<span class="sd">        colors (list, optional): A list of legend colors. Defaults to None.</span>
<span class="sd">        labels (list, optional): A list of legend labels. Defaults to None.</span>
<span class="sd">        legend_dict (dict, optional): A dictionary containing legend items as keys and color as values.</span>
<span class="sd">            If provided, legend_keys and legend_colors will be ignored. Defaults to None.</span>
<span class="sd">        builtin_legend (str, optional): Name of the builtin legend to add to the map. Defaults to None.</span>
<span class="sd">        opacity (float, optional): The opacity of the legend. Defaults to 1.0.</span>
<span class="sd">        position (str, optional): The position of the legend, can be one of the following:</span>
<span class="sd">            &quot;topleft&quot;, &quot;topright&quot;, &quot;bottomleft&quot;, &quot;bottomright&quot;. Defaults to &quot;bottomright&quot;.</span>
<span class="sd">        draggable (bool, optional): If True, the legend can be dragged to a new position. Defaults to True.</span>
<span class="sd">        output (str, optional): The output file path (*.html) to save the legend. Defaults to None.</span>
<span class="sd">        style: Additional keyword arguments to style the legend, such as position, bottom, right, z-index,</span>
<span class="sd">            border, background-color, border-radius, padding, font-size, etc. The default style is:</span>
<span class="sd">            style = {</span>
<span class="sd">                &#39;position&#39;: &#39;fixed&#39;,</span>
<span class="sd">                &#39;z-index&#39;: &#39;9999&#39;,</span>
<span class="sd">                &#39;border&#39;: &#39;2px solid grey&#39;,</span>
<span class="sd">                &#39;background-color&#39;: &#39;rgba(255, 255, 255, 0.8)&#39;,</span>
<span class="sd">                &#39;border-radius&#39;: &#39;5px&#39;,</span>
<span class="sd">                &#39;padding&#39;: &#39;10px&#39;,</span>
<span class="sd">                &#39;font-size&#39;: &#39;14px&#39;,</span>
<span class="sd">                &#39;bottom&#39;: &#39;20px&#39;,</span>
<span class="sd">                &#39;right&#39;: &#39;5px&#39;</span>
<span class="sd">            }</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: The HTML code of the legend.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="kn">import</span> <span class="nn">pkg_resources</span>
    <span class="kn">from</span> <span class="nn">.legends</span> <span class="kn">import</span> <span class="n">builtin_legends</span>

    <span class="n">pkg_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">pkg_resources</span><span class="o">.</span><span class="n">resource_filename</span><span class="p">(</span><span class="s2">&quot;geemap&quot;</span><span class="p">,</span> <span class="s2">&quot;geemap.py&quot;</span><span class="p">))</span>
    <span class="n">legend_template</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">pkg_dir</span><span class="p">,</span> <span class="s2">&quot;data/template/legend_style.html&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">draggable</span><span class="p">:</span>
        <span class="n">legend_template</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">pkg_dir</span><span class="p">,</span> <span class="s2">&quot;data/template/legend.txt&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">legend_template</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span><span class="s2">&quot;The legend template does not exist.&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">labels</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">labels</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The legend keys must be a list.&quot;</span><span class="p">)</span>
            <span class="k">return</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">labels</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;One&quot;</span><span class="p">,</span> <span class="s2">&quot;Two&quot;</span><span class="p">,</span> <span class="s2">&quot;Three&quot;</span><span class="p">,</span> <span class="s2">&quot;Four&quot;</span><span class="p">,</span> <span class="s2">&quot;etc&quot;</span><span class="p">]</span>

    <span class="k">if</span> <span class="n">colors</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">colors</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The legend colors must be a list.&quot;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="k">elif</span> <span class="nb">all</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">colors</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">colors</span> <span class="o">=</span> <span class="p">[</span><span class="n">rgb_to_hex</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">colors</span><span class="p">]</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">all</span><span class="p">((</span><span class="n">item</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;#&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">item</span><span class="p">)</span> <span class="o">==</span> <span class="mi">7</span><span class="p">)</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">colors</span><span class="p">):</span>
            <span class="k">pass</span>
        <span class="k">elif</span> <span class="nb">all</span><span class="p">((</span><span class="nb">len</span><span class="p">(</span><span class="n">item</span><span class="p">)</span> <span class="o">==</span> <span class="mi">6</span><span class="p">)</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">colors</span><span class="p">):</span>
            <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The legend colors must be a list of tuples.&quot;</span><span class="p">)</span>
            <span class="k">return</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">colors</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">&quot;#8DD3C7&quot;</span><span class="p">,</span>
            <span class="s2">&quot;#FFFFB3&quot;</span><span class="p">,</span>
            <span class="s2">&quot;#BEBADA&quot;</span><span class="p">,</span>
            <span class="s2">&quot;#FB8072&quot;</span><span class="p">,</span>
            <span class="s2">&quot;#80B1D3&quot;</span><span class="p">,</span>
        <span class="p">]</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">labels</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">colors</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The legend keys and values must be the same length.&quot;</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="n">allowed_builtin_legends</span> <span class="o">=</span> <span class="n">builtin_legends</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">builtin_legend</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">builtin_legend</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">allowed_builtin_legends</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span>
                <span class="s2">&quot;The builtin legend must be one of the following: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                    <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">allowed_builtin_legends</span><span class="p">)</span>
                <span class="p">)</span>
            <span class="p">)</span>
            <span class="k">return</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">legend_dict</span> <span class="o">=</span> <span class="n">builtin_legends</span><span class="p">[</span><span class="n">builtin_legend</span><span class="p">]</span>
            <span class="n">labels</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">legend_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
            <span class="n">colors</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">legend_dict</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>

    <span class="k">if</span> <span class="n">legend_dict</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">legend_dict</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The legend dict must be a dictionary.&quot;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">labels</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">legend_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
            <span class="n">colors</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">legend_dict</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
            <span class="k">if</span> <span class="nb">all</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">colors</span><span class="p">):</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">colors</span> <span class="o">=</span> <span class="p">[</span><span class="n">rgb_to_hex</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">colors</span><span class="p">]</span>
                <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

    <span class="n">allowed_positions</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s2">&quot;topleft&quot;</span><span class="p">,</span>
        <span class="s2">&quot;topright&quot;</span><span class="p">,</span>
        <span class="s2">&quot;bottomleft&quot;</span><span class="p">,</span>
        <span class="s2">&quot;bottomright&quot;</span><span class="p">,</span>
    <span class="p">]</span>
    <span class="k">if</span> <span class="n">position</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">allowed_positions</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="s2">&quot;The position must be one of the following: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">allowed_positions</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="p">)</span>

    <span class="k">if</span> <span class="n">position</span> <span class="o">==</span> <span class="s2">&quot;bottomright&quot;</span><span class="p">:</span>
        <span class="k">if</span> <span class="s2">&quot;bottom&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">style</span><span class="p">:</span>
            <span class="n">style</span><span class="p">[</span><span class="s2">&quot;bottom&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;20px&quot;</span>
        <span class="k">if</span> <span class="s2">&quot;right&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">style</span><span class="p">:</span>
            <span class="n">style</span><span class="p">[</span><span class="s2">&quot;right&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;5px&quot;</span>
        <span class="k">if</span> <span class="s2">&quot;left&quot;</span> <span class="ow">in</span> <span class="n">style</span><span class="p">:</span>
            <span class="k">del</span> <span class="n">style</span><span class="p">[</span><span class="s2">&quot;left&quot;</span><span class="p">]</span>
        <span class="k">if</span> <span class="s2">&quot;top&quot;</span> <span class="ow">in</span> <span class="n">style</span><span class="p">:</span>
            <span class="k">del</span> <span class="n">style</span><span class="p">[</span><span class="s2">&quot;top&quot;</span><span class="p">]</span>
    <span class="k">elif</span> <span class="n">position</span> <span class="o">==</span> <span class="s2">&quot;bottomleft&quot;</span><span class="p">:</span>
        <span class="k">if</span> <span class="s2">&quot;bottom&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">style</span><span class="p">:</span>
            <span class="n">style</span><span class="p">[</span><span class="s2">&quot;bottom&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;5px&quot;</span>
        <span class="k">if</span> <span class="s2">&quot;left&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">style</span><span class="p">:</span>
            <span class="n">style</span><span class="p">[</span><span class="s2">&quot;left&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;5px&quot;</span>
        <span class="k">if</span> <span class="s2">&quot;right&quot;</span> <span class="ow">in</span> <span class="n">style</span><span class="p">:</span>
            <span class="k">del</span> <span class="n">style</span><span class="p">[</span><span class="s2">&quot;right&quot;</span><span class="p">]</span>
        <span class="k">if</span> <span class="s2">&quot;top&quot;</span> <span class="ow">in</span> <span class="n">style</span><span class="p">:</span>
            <span class="k">del</span> <span class="n">style</span><span class="p">[</span><span class="s2">&quot;top&quot;</span><span class="p">]</span>
    <span class="k">elif</span> <span class="n">position</span> <span class="o">==</span> <span class="s2">&quot;topright&quot;</span><span class="p">:</span>
        <span class="k">if</span> <span class="s2">&quot;top&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">style</span><span class="p">:</span>
            <span class="n">style</span><span class="p">[</span><span class="s2">&quot;top&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;5px&quot;</span>
        <span class="k">if</span> <span class="s2">&quot;right&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">style</span><span class="p">:</span>
            <span class="n">style</span><span class="p">[</span><span class="s2">&quot;right&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;5px&quot;</span>
        <span class="k">if</span> <span class="s2">&quot;left&quot;</span> <span class="ow">in</span> <span class="n">style</span><span class="p">:</span>
            <span class="k">del</span> <span class="n">style</span><span class="p">[</span><span class="s2">&quot;left&quot;</span><span class="p">]</span>
        <span class="k">if</span> <span class="s2">&quot;bottom&quot;</span> <span class="ow">in</span> <span class="n">style</span><span class="p">:</span>
            <span class="k">del</span> <span class="n">style</span><span class="p">[</span><span class="s2">&quot;bottom&quot;</span><span class="p">]</span>
    <span class="k">elif</span> <span class="n">position</span> <span class="o">==</span> <span class="s2">&quot;topleft&quot;</span><span class="p">:</span>
        <span class="k">if</span> <span class="s2">&quot;top&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">style</span><span class="p">:</span>
            <span class="n">style</span><span class="p">[</span><span class="s2">&quot;top&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;5px&quot;</span>
        <span class="k">if</span> <span class="s2">&quot;left&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">style</span><span class="p">:</span>
            <span class="n">style</span><span class="p">[</span><span class="s2">&quot;left&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;5px&quot;</span>
        <span class="k">if</span> <span class="s2">&quot;right&quot;</span> <span class="ow">in</span> <span class="n">style</span><span class="p">:</span>
            <span class="k">del</span> <span class="n">style</span><span class="p">[</span><span class="s2">&quot;right&quot;</span><span class="p">]</span>
        <span class="k">if</span> <span class="s2">&quot;bottom&quot;</span> <span class="ow">in</span> <span class="n">style</span><span class="p">:</span>
            <span class="k">del</span> <span class="n">style</span><span class="p">[</span><span class="s2">&quot;bottom&quot;</span><span class="p">]</span>

    <span class="k">if</span> <span class="s2">&quot;position&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">style</span><span class="p">:</span>
        <span class="n">style</span><span class="p">[</span><span class="s2">&quot;position&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;fixed&quot;</span>
    <span class="k">if</span> <span class="s2">&quot;z-index&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">style</span><span class="p">:</span>
        <span class="n">style</span><span class="p">[</span><span class="s2">&quot;z-index&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;9999&quot;</span>
    <span class="k">if</span> <span class="s2">&quot;background-color&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">style</span><span class="p">:</span>
        <span class="n">style</span><span class="p">[</span><span class="s2">&quot;background-color&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;rgba(255, 255, 255, 0.8)&quot;</span>
    <span class="k">if</span> <span class="s2">&quot;padding&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">style</span><span class="p">:</span>
        <span class="n">style</span><span class="p">[</span><span class="s2">&quot;padding&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;10px&quot;</span>
    <span class="k">if</span> <span class="s2">&quot;border-radius&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">style</span><span class="p">:</span>
        <span class="n">style</span><span class="p">[</span><span class="s2">&quot;border-radius&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;5px&quot;</span>
    <span class="k">if</span> <span class="s2">&quot;font-size&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">style</span><span class="p">:</span>
        <span class="n">style</span><span class="p">[</span><span class="s2">&quot;font-size&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;14px&quot;</span>

    <span class="n">content</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">legend_template</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">lines</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">readlines</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">draggable</span><span class="p">:</span>

        <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">line</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">lines</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">index</span> <span class="o">&lt;</span> <span class="mi">36</span><span class="p">:</span>
                <span class="n">content</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">index</span> <span class="o">==</span> <span class="mi">36</span><span class="p">:</span>
                <span class="n">line</span> <span class="o">=</span> <span class="n">lines</span><span class="p">[</span><span class="n">index</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;Legend&quot;</span><span class="p">,</span> <span class="n">title</span><span class="p">)</span>
                <span class="n">content</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">index</span> <span class="o">&lt;</span> <span class="mi">39</span><span class="p">:</span>
                <span class="n">content</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">index</span> <span class="o">==</span> <span class="mi">39</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">color</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">colors</span><span class="p">):</span>
                    <span class="n">item</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;    &lt;li&gt;&lt;span style=&#39;background:</span><span class="si">{</span><span class="n">check_color</span><span class="p">(</span><span class="n">color</span><span class="p">)</span><span class="si">}</span><span class="s2">;opacity:</span><span class="si">{</span><span class="n">opacity</span><span class="si">}</span><span class="s2">;&#39;&gt;&lt;/span&gt;</span><span class="si">{</span><span class="n">labels</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="si">}</span><span class="s2">&lt;/li&gt;</span><span class="se">\n</span><span class="s2">&quot;</span>
                    <span class="n">content</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">index</span> <span class="o">&gt;</span> <span class="mi">41</span><span class="p">:</span>
                <span class="n">content</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
        <span class="n">content</span> <span class="o">=</span> <span class="n">content</span><span class="p">[</span><span class="mi">3</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

    <span class="k">else</span><span class="p">:</span>

        <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">line</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">lines</span><span class="p">):</span>

            <span class="k">if</span> <span class="n">index</span> <span class="o">&lt;</span> <span class="mi">8</span><span class="p">:</span>
                <span class="n">content</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">index</span> <span class="o">==</span> <span class="mi">8</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">style</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                    <span class="n">content</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                        <span class="s2">&quot;              </span><span class="si">{}</span><span class="s2">: </span><span class="si">{}</span><span class="s2">;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">key</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">,</span> <span class="s2">&quot;-&quot;</span><span class="p">),</span> <span class="n">value</span><span class="p">)</span>
                    <span class="p">)</span>
            <span class="k">elif</span> <span class="n">index</span> <span class="o">&lt;</span> <span class="mi">17</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="k">elif</span> <span class="n">index</span> <span class="o">&lt;</span> <span class="mi">19</span><span class="p">:</span>
                <span class="n">content</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">index</span> <span class="o">==</span> <span class="mi">19</span><span class="p">:</span>
                <span class="n">content</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;Legend&quot;</span><span class="p">,</span> <span class="n">title</span><span class="p">))</span>
            <span class="k">elif</span> <span class="n">index</span> <span class="o">&lt;</span> <span class="mi">22</span><span class="p">:</span>
                <span class="n">content</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">index</span> <span class="o">==</span> <span class="mi">22</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">key</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">labels</span><span class="p">):</span>
                    <span class="n">color</span> <span class="o">=</span> <span class="n">colors</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">color</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;#&quot;</span><span class="p">):</span>
                        <span class="n">color</span> <span class="o">=</span> <span class="s2">&quot;#&quot;</span> <span class="o">+</span> <span class="n">color</span>
                    <span class="n">item</span> <span class="o">=</span> <span class="s2">&quot;                    &lt;li&gt;&lt;span style=&#39;background:</span><span class="si">{}</span><span class="s2">;opacity:</span><span class="si">{}</span><span class="s2">;&#39;&gt;&lt;/span&gt;</span><span class="si">{}</span><span class="s2">&lt;/li&gt;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                        <span class="n">color</span><span class="p">,</span> <span class="n">opacity</span><span class="p">,</span> <span class="n">key</span>
                    <span class="p">)</span>
                    <span class="n">content</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">index</span> <span class="o">&lt;</span> <span class="mi">33</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">content</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>

    <span class="n">legend_text</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">content</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">output</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">output</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">legend_text</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">legend_text</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.create_nlcd_qml" class="doc doc-heading">
<code class="highlight language-python"><span class="n">create_nlcd_qml</span><span class="p">(</span><span class="n">out_qml</span><span class="p">)</span></code>


<a href="#geemap.common.create_nlcd_qml" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Create a QGIS Layer Style (.qml) for NLCD data</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>out_qml</code></td>
        <td><code>str</code></td>
        <td><p>File path to the output qml.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">create_nlcd_qml</span><span class="p">(</span><span class="n">out_qml</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Create a QGIS Layer Style (.qml) for NLCD data</span>

<span class="sd">    Args:</span>
<span class="sd">        out_qml (str): File path to the output qml.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">pkg_resources</span>

    <span class="n">pkg_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">pkg_resources</span><span class="o">.</span><span class="n">resource_filename</span><span class="p">(</span><span class="s2">&quot;geemap&quot;</span><span class="p">,</span> <span class="s2">&quot;geemap.py&quot;</span><span class="p">))</span>
    <span class="n">data_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">pkg_dir</span><span class="p">,</span> <span class="s2">&quot;data&quot;</span><span class="p">)</span>
    <span class="n">template_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">data_dir</span><span class="p">,</span> <span class="s2">&quot;template&quot;</span><span class="p">)</span>
    <span class="n">qml_template</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">template_dir</span><span class="p">,</span> <span class="s2">&quot;NLCD.qml&quot;</span><span class="p">)</span>

    <span class="n">out_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">out_qml</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">out_dir</span><span class="p">):</span>
        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">out_dir</span><span class="p">)</span>

    <span class="n">shutil</span><span class="o">.</span><span class="n">copyfile</span><span class="p">(</span><span class="n">qml_template</span><span class="p">,</span> <span class="n">out_qml</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.credentials_in_colab" class="doc doc-heading">
<code class="highlight language-python"><span class="n">credentials_in_colab</span><span class="p">()</span></code>


<a href="#geemap.common.credentials_in_colab" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Checks if the ee credentials file exists in Google Colab.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>bool</code></td>
      <td><p>Returns True if Google Drive is mounted, False otherwise.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">credentials_in_colab</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Checks if the ee credentials file exists in Google Colab.</span>

<span class="sd">    Returns:</span>
<span class="sd">        bool: Returns True if Google Drive is mounted, False otherwise.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">credentials_path</span> <span class="o">=</span> <span class="s2">&quot;/root/.config/earthengine/credentials&quot;</span>
    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">credentials_path</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">True</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.credentials_in_drive" class="doc doc-heading">
<code class="highlight language-python"><span class="n">credentials_in_drive</span><span class="p">()</span></code>


<a href="#geemap.common.credentials_in_drive" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Checks if the ee credentials file exists in Google Drive.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>bool</code></td>
      <td><p>Returns True if Google Drive is mounted, False otherwise.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">credentials_in_drive</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Checks if the ee credentials file exists in Google Drive.</span>

<span class="sd">    Returns:</span>
<span class="sd">        bool: Returns True if Google Drive is mounted, False otherwise.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">credentials_path</span> <span class="o">=</span> <span class="s2">&quot;/content/drive/My Drive/.config/earthengine/credentials&quot;</span>
    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">credentials_path</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">True</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.csv_points_to_shp" class="doc doc-heading">
<code class="highlight language-python"><span class="n">csv_points_to_shp</span><span class="p">(</span><span class="n">in_csv</span><span class="p">,</span> <span class="n">out_shp</span><span class="p">,</span> <span class="n">latitude</span><span class="o">=</span><span class="s1">&#39;latitude&#39;</span><span class="p">,</span> <span class="n">longitude</span><span class="o">=</span><span class="s1">&#39;longitude&#39;</span><span class="p">)</span></code>


<a href="#geemap.common.csv_points_to_shp" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Converts a csv file containing points (latitude, longitude) into a shapefile.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>in_csv</code></td>
        <td><code>str</code></td>
        <td><p>File path or HTTP URL to the input csv file. For example, https://raw.githubusercontent.com/giswqs/data/main/world/world_cities.csv</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>out_shp</code></td>
        <td><code>str</code></td>
        <td><p>File path to the output shapefile.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>latitude</code></td>
        <td><code>str</code></td>
        <td><p>Column name for the latitude column. Defaults to 'latitude'.</p></td>
        <td><code>&#39;latitude&#39;</code></td>
      </tr>
      <tr>
        <td><code>longitude</code></td>
        <td><code>str</code></td>
        <td><p>Column name for the longitude column. Defaults to 'longitude'.</p></td>
        <td><code>&#39;longitude&#39;</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">csv_points_to_shp</span><span class="p">(</span><span class="n">in_csv</span><span class="p">,</span> <span class="n">out_shp</span><span class="p">,</span> <span class="n">latitude</span><span class="o">=</span><span class="s2">&quot;latitude&quot;</span><span class="p">,</span> <span class="n">longitude</span><span class="o">=</span><span class="s2">&quot;longitude&quot;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Converts a csv file containing points (latitude, longitude) into a shapefile.</span>

<span class="sd">    Args:</span>
<span class="sd">        in_csv (str): File path or HTTP URL to the input csv file. For example, https://raw.githubusercontent.com/giswqs/data/main/world/world_cities.csv</span>
<span class="sd">        out_shp (str): File path to the output shapefile.</span>
<span class="sd">        latitude (str, optional): Column name for the latitude column. Defaults to &#39;latitude&#39;.</span>
<span class="sd">        longitude (str, optional): Column name for the longitude column. Defaults to &#39;longitude&#39;.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">whitebox</span>

    <span class="k">if</span> <span class="n">in_csv</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;http&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">in_csv</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.csv&quot;</span><span class="p">):</span>
        <span class="n">out_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="s2">&quot;~&quot;</span><span class="p">),</span> <span class="s2">&quot;Downloads&quot;</span><span class="p">)</span>
        <span class="n">out_name</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">in_csv</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">out_dir</span><span class="p">):</span>
            <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">out_dir</span><span class="p">)</span>
        <span class="n">download_from_url</span><span class="p">(</span><span class="n">in_csv</span><span class="p">,</span> <span class="n">out_dir</span><span class="o">=</span><span class="n">out_dir</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">in_csv</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">out_dir</span><span class="p">,</span> <span class="n">out_name</span><span class="p">)</span>

    <span class="n">wbt</span> <span class="o">=</span> <span class="n">whitebox</span><span class="o">.</span><span class="n">WhiteboxTools</span><span class="p">()</span>
    <span class="n">in_csv</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">in_csv</span><span class="p">)</span>
    <span class="n">out_shp</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">out_shp</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">in_csv</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;The provided csv file does not exist.&quot;</span><span class="p">)</span>

    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">in_csv</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">csv_file</span><span class="p">:</span>
        <span class="n">reader</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">DictReader</span><span class="p">(</span><span class="n">csv_file</span><span class="p">)</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">fieldnames</span>
        <span class="n">xfield</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">longitude</span><span class="p">)</span>
        <span class="n">yfield</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">latitude</span><span class="p">)</span>

    <span class="n">wbt</span><span class="o">.</span><span class="n">csv_points_to_vector</span><span class="p">(</span><span class="n">in_csv</span><span class="p">,</span> <span class="n">out_shp</span><span class="p">,</span> <span class="n">xfield</span><span class="o">=</span><span class="n">xfield</span><span class="p">,</span> <span class="n">yfield</span><span class="o">=</span><span class="n">yfield</span><span class="p">,</span> <span class="n">epsg</span><span class="o">=</span><span class="mi">4326</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.csv_to_df" class="doc doc-heading">
<code class="highlight language-python"><span class="n">csv_to_df</span><span class="p">(</span><span class="n">in_csv</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.common.csv_to_df" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Converts a CSV file to pandas dataframe.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>in_csv</code></td>
        <td><code>str</code></td>
        <td><p>File path to the input CSV.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>pd.DataFrame</code></td>
      <td><p>pandas DataFrame</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">csv_to_df</span><span class="p">(</span><span class="n">in_csv</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Converts a CSV file to pandas dataframe.</span>

<span class="sd">    Args:</span>
<span class="sd">        in_csv (str): File path to the input CSV.</span>

<span class="sd">    Returns:</span>
<span class="sd">        pd.DataFrame: pandas DataFrame</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

    <span class="n">in_csv</span> <span class="o">=</span> <span class="n">github_raw_url</span><span class="p">(</span><span class="n">in_csv</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">in_csv</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.csv_to_ee" class="doc doc-heading">
<code class="highlight language-python"><span class="n">csv_to_ee</span><span class="p">(</span><span class="n">in_csv</span><span class="p">,</span> <span class="n">latitude</span><span class="o">=</span><span class="s1">&#39;latitude&#39;</span><span class="p">,</span> <span class="n">longitude</span><span class="o">=</span><span class="s1">&#39;longitude&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">,</span> <span class="n">geodesic</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>


<a href="#geemap.common.csv_to_ee" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Creates points for a CSV file and exports data as a GeoJSON.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>in_csv</code></td>
        <td><code>str</code></td>
        <td><p>The file path to the input CSV file.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>latitude</code></td>
        <td><code>str</code></td>
        <td><p>The name of the column containing latitude coordinates. Defaults to "latitude".</p></td>
        <td><code>&#39;latitude&#39;</code></td>
      </tr>
      <tr>
        <td><code>longitude</code></td>
        <td><code>str</code></td>
        <td><p>The name of the column containing longitude coordinates. Defaults to "longitude".</p></td>
        <td><code>&#39;longitude&#39;</code></td>
      </tr>
      <tr>
        <td><code>encoding</code></td>
        <td><code>str</code></td>
        <td><p>The encoding of characters. Defaults to "utf-8".</p></td>
        <td><code>&#39;utf-8&#39;</code></td>
      </tr>
      <tr>
        <td><code>geodesic</code></td>
        <td><code>bool</code></td>
        <td><p>Whether line segments should be interpreted as spherical geodesics. If false, indicates that line segments should be interpreted as planar lines in the specified CRS. If absent, defaults to true if the CRS is geographic (including the default EPSG:4326), or to false if the CRS is projected.</p></td>
        <td><code>True</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>ee_object</code></td>
      <td><p>An ee.Geometry object</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">csv_to_ee</span><span class="p">(</span>
    <span class="n">in_csv</span><span class="p">,</span> <span class="n">latitude</span><span class="o">=</span><span class="s2">&quot;latitude&quot;</span><span class="p">,</span> <span class="n">longitude</span><span class="o">=</span><span class="s2">&quot;longitude&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">,</span> <span class="n">geodesic</span><span class="o">=</span><span class="kc">True</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Creates points for a CSV file and exports data as a GeoJSON.</span>

<span class="sd">    Args:</span>
<span class="sd">        in_csv (str): The file path to the input CSV file.</span>
<span class="sd">        latitude (str, optional): The name of the column containing latitude coordinates. Defaults to &quot;latitude&quot;.</span>
<span class="sd">        longitude (str, optional): The name of the column containing longitude coordinates. Defaults to &quot;longitude&quot;.</span>
<span class="sd">        encoding (str, optional): The encoding of characters. Defaults to &quot;utf-8&quot;.</span>
<span class="sd">        geodesic (bool, optional): Whether line segments should be interpreted as spherical geodesics. If false, indicates that line segments should be interpreted as planar lines in the specified CRS. If absent, defaults to true if the CRS is geographic (including the default EPSG:4326), or to false if the CRS is projected.</span>

<span class="sd">    Returns:</span>
<span class="sd">        ee_object: An ee.Geometry object</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">geojson</span> <span class="o">=</span> <span class="n">csv_to_geojson</span><span class="p">(</span>
        <span class="n">in_csv</span><span class="p">,</span> <span class="n">latitude</span><span class="o">=</span><span class="n">latitude</span><span class="p">,</span> <span class="n">longitude</span><span class="o">=</span><span class="n">longitude</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="n">encoding</span>
    <span class="p">)</span>
    <span class="n">fc</span> <span class="o">=</span> <span class="n">geojson_to_ee</span><span class="p">(</span><span class="n">geojson</span><span class="p">,</span> <span class="n">geodesic</span><span class="o">=</span><span class="n">geodesic</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">fc</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.csv_to_gdf" class="doc doc-heading">
<code class="highlight language-python"><span class="n">csv_to_gdf</span><span class="p">(</span><span class="n">in_csv</span><span class="p">,</span> <span class="n">latitude</span><span class="o">=</span><span class="s1">&#39;latitude&#39;</span><span class="p">,</span> <span class="n">longitude</span><span class="o">=</span><span class="s1">&#39;longitude&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span></code>


<a href="#geemap.common.csv_to_gdf" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Creates points for a CSV file and converts them to a GeoDataFrame.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>in_csv</code></td>
        <td><code>str</code></td>
        <td><p>The file path to the input CSV file.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>latitude</code></td>
        <td><code>str</code></td>
        <td><p>The name of the column containing latitude coordinates. Defaults to "latitude".</p></td>
        <td><code>&#39;latitude&#39;</code></td>
      </tr>
      <tr>
        <td><code>longitude</code></td>
        <td><code>str</code></td>
        <td><p>The name of the column containing longitude coordinates. Defaults to "longitude".</p></td>
        <td><code>&#39;longitude&#39;</code></td>
      </tr>
      <tr>
        <td><code>encoding</code></td>
        <td><code>str</code></td>
        <td><p>The encoding of characters. Defaults to "utf-8".</p></td>
        <td><code>&#39;utf-8&#39;</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>object</code></td>
      <td><p>GeoDataFrame.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">csv_to_gdf</span><span class="p">(</span><span class="n">in_csv</span><span class="p">,</span> <span class="n">latitude</span><span class="o">=</span><span class="s2">&quot;latitude&quot;</span><span class="p">,</span> <span class="n">longitude</span><span class="o">=</span><span class="s2">&quot;longitude&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Creates points for a CSV file and converts them to a GeoDataFrame.</span>

<span class="sd">    Args:</span>
<span class="sd">        in_csv (str): The file path to the input CSV file.</span>
<span class="sd">        latitude (str, optional): The name of the column containing latitude coordinates. Defaults to &quot;latitude&quot;.</span>
<span class="sd">        longitude (str, optional): The name of the column containing longitude coordinates. Defaults to &quot;longitude&quot;.</span>
<span class="sd">        encoding (str, optional): The encoding of characters. Defaults to &quot;utf-8&quot;.</span>

<span class="sd">    Returns:</span>
<span class="sd">        object: GeoDataFrame.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">check_package</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;geopandas&quot;</span><span class="p">,</span> <span class="n">URL</span><span class="o">=</span><span class="s2">&quot;https://geopandas.org&quot;</span><span class="p">)</span>

    <span class="kn">import</span> <span class="nn">geopandas</span> <span class="k">as</span> <span class="nn">gpd</span>

    <span class="n">out_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span>

    <span class="n">out_geojson</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">out_dir</span><span class="p">,</span> <span class="n">random_string</span><span class="p">()</span> <span class="o">+</span> <span class="s2">&quot;.geojson&quot;</span><span class="p">)</span>
    <span class="n">csv_to_geojson</span><span class="p">(</span><span class="n">in_csv</span><span class="p">,</span> <span class="n">out_geojson</span><span class="p">,</span> <span class="n">latitude</span><span class="p">,</span> <span class="n">longitude</span><span class="p">,</span> <span class="n">encoding</span><span class="p">)</span>

    <span class="n">gdf</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">out_geojson</span><span class="p">)</span>
    <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">out_geojson</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">gdf</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.csv_to_geojson" class="doc doc-heading">
<code class="highlight language-python"><span class="n">csv_to_geojson</span><span class="p">(</span><span class="n">in_csv</span><span class="p">,</span> <span class="n">out_geojson</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">latitude</span><span class="o">=</span><span class="s1">&#39;latitude&#39;</span><span class="p">,</span> <span class="n">longitude</span><span class="o">=</span><span class="s1">&#39;longitude&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span></code>


<a href="#geemap.common.csv_to_geojson" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Creates points for a CSV file and exports data as a GeoJSON.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>in_csv</code></td>
        <td><code>str</code></td>
        <td><p>The file path to the input CSV file.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>out_geojson</code></td>
        <td><code>str</code></td>
        <td><p>The file path to the exported GeoJSON. Default to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>latitude</code></td>
        <td><code>str</code></td>
        <td><p>The name of the column containing latitude coordinates. Defaults to "latitude".</p></td>
        <td><code>&#39;latitude&#39;</code></td>
      </tr>
      <tr>
        <td><code>longitude</code></td>
        <td><code>str</code></td>
        <td><p>The name of the column containing longitude coordinates. Defaults to "longitude".</p></td>
        <td><code>&#39;longitude&#39;</code></td>
      </tr>
      <tr>
        <td><code>encoding</code></td>
        <td><code>str</code></td>
        <td><p>The encoding of characters. Defaults to "utf-8".</p></td>
        <td><code>&#39;utf-8&#39;</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">csv_to_geojson</span><span class="p">(</span>
    <span class="n">in_csv</span><span class="p">,</span>
    <span class="n">out_geojson</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">latitude</span><span class="o">=</span><span class="s2">&quot;latitude&quot;</span><span class="p">,</span>
    <span class="n">longitude</span><span class="o">=</span><span class="s2">&quot;longitude&quot;</span><span class="p">,</span>
    <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Creates points for a CSV file and exports data as a GeoJSON.</span>

<span class="sd">    Args:</span>
<span class="sd">        in_csv (str): The file path to the input CSV file.</span>
<span class="sd">        out_geojson (str): The file path to the exported GeoJSON. Default to None.</span>
<span class="sd">        latitude (str, optional): The name of the column containing latitude coordinates. Defaults to &quot;latitude&quot;.</span>
<span class="sd">        longitude (str, optional): The name of the column containing longitude coordinates. Defaults to &quot;longitude&quot;.</span>
<span class="sd">        encoding (str, optional): The encoding of characters. Defaults to &quot;utf-8&quot;.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

    <span class="n">in_csv</span> <span class="o">=</span> <span class="n">github_raw_url</span><span class="p">(</span><span class="n">in_csv</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">out_geojson</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">out_geojson</span> <span class="o">=</span> <span class="n">check_file_path</span><span class="p">(</span><span class="n">out_geojson</span><span class="p">)</span>

    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">in_csv</span><span class="p">)</span>
    <span class="n">geojson</span> <span class="o">=</span> <span class="n">df_to_geojson</span><span class="p">(</span>
        <span class="n">df</span><span class="p">,</span> <span class="n">latitude</span><span class="o">=</span><span class="n">latitude</span><span class="p">,</span> <span class="n">longitude</span><span class="o">=</span><span class="n">longitude</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="n">encoding</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">out_geojson</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">geojson</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">out_geojson</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="n">encoding</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">geojson</span><span class="p">))</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.csv_to_shp" class="doc doc-heading">
<code class="highlight language-python"><span class="n">csv_to_shp</span><span class="p">(</span><span class="n">in_csv</span><span class="p">,</span> <span class="n">out_shp</span><span class="p">,</span> <span class="n">latitude</span><span class="o">=</span><span class="s1">&#39;latitude&#39;</span><span class="p">,</span> <span class="n">longitude</span><span class="o">=</span><span class="s1">&#39;longitude&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span></code>


<a href="#geemap.common.csv_to_shp" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Converts a csv file with latlon info to a point shapefile.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>in_csv</code></td>
        <td><code>str</code></td>
        <td><p>The input csv file containing longitude and latitude columns.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>out_shp</code></td>
        <td><code>str</code></td>
        <td><p>The file path to the output shapefile.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>latitude</code></td>
        <td><code>str</code></td>
        <td><p>The column name of the latitude column. Defaults to 'latitude'.</p></td>
        <td><code>&#39;latitude&#39;</code></td>
      </tr>
      <tr>
        <td><code>longitude</code></td>
        <td><code>str</code></td>
        <td><p>The column name of the longitude column. Defaults to 'longitude'.</p></td>
        <td><code>&#39;longitude&#39;</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">csv_to_shp</span><span class="p">(</span>
    <span class="n">in_csv</span><span class="p">,</span> <span class="n">out_shp</span><span class="p">,</span> <span class="n">latitude</span><span class="o">=</span><span class="s2">&quot;latitude&quot;</span><span class="p">,</span> <span class="n">longitude</span><span class="o">=</span><span class="s2">&quot;longitude&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Converts a csv file with latlon info to a point shapefile.</span>

<span class="sd">    Args:</span>
<span class="sd">        in_csv (str): The input csv file containing longitude and latitude columns.</span>
<span class="sd">        out_shp (str): The file path to the output shapefile.</span>
<span class="sd">        latitude (str, optional): The column name of the latitude column. Defaults to &#39;latitude&#39;.</span>
<span class="sd">        longitude (str, optional): The column name of the longitude column. Defaults to &#39;longitude&#39;.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">shapefile</span> <span class="k">as</span> <span class="nn">shp</span>

    <span class="k">if</span> <span class="n">in_csv</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;http&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">in_csv</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.csv&quot;</span><span class="p">):</span>
        <span class="n">in_csv</span> <span class="o">=</span> <span class="n">github_raw_url</span><span class="p">(</span><span class="n">in_csv</span><span class="p">)</span>
        <span class="n">in_csv</span> <span class="o">=</span> <span class="n">download_file</span><span class="p">(</span><span class="n">in_csv</span><span class="p">,</span> <span class="n">quiet</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">overwrite</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">points</span> <span class="o">=</span> <span class="n">shp</span><span class="o">.</span><span class="n">Writer</span><span class="p">(</span><span class="n">out_shp</span><span class="p">,</span> <span class="n">shapeType</span><span class="o">=</span><span class="n">shp</span><span class="o">.</span><span class="n">POINT</span><span class="p">)</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">in_csv</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="n">encoding</span><span class="p">)</span> <span class="k">as</span> <span class="n">csvfile</span><span class="p">:</span>
            <span class="n">csvreader</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">DictReader</span><span class="p">(</span><span class="n">csvfile</span><span class="p">)</span>
            <span class="n">header</span> <span class="o">=</span> <span class="n">csvreader</span><span class="o">.</span><span class="n">fieldnames</span>
            <span class="p">[</span><span class="n">points</span><span class="o">.</span><span class="n">field</span><span class="p">(</span><span class="n">field</span><span class="p">)</span> <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">header</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">csvreader</span><span class="p">:</span>
                <span class="n">points</span><span class="o">.</span><span class="n">point</span><span class="p">((</span><span class="nb">float</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="n">longitude</span><span class="p">])),</span> <span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="n">latitude</span><span class="p">])))</span>
                <span class="n">points</span><span class="o">.</span><span class="n">record</span><span class="p">(</span><span class="o">*</span><span class="nb">tuple</span><span class="p">([</span><span class="n">row</span><span class="p">[</span><span class="n">f</span><span class="p">]</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">header</span><span class="p">]))</span>

        <span class="n">out_prj</span> <span class="o">=</span> <span class="n">out_shp</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;.shp&quot;</span><span class="p">,</span> <span class="s2">&quot;.prj&quot;</span><span class="p">)</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">out_prj</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">prj_str</span> <span class="o">=</span> <span class="s1">&#39;GEOGCS[&quot;GCS_WGS_1984&quot;,DATUM[&quot;D_WGS_1984&quot;,SPHEROID[&quot;WGS_1984&quot;,6378137,298.257223563]],PRIMEM[&quot;Greenwich&quot;,0],UNIT[&quot;Degree&quot;,0.0174532925199433]] &#39;</span>
            <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">prj_str</span><span class="p">)</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.csv_to_vector" class="doc doc-heading">
<code class="highlight language-python"><span class="n">csv_to_vector</span><span class="p">(</span><span class="n">in_csv</span><span class="p">,</span> <span class="n">output</span><span class="p">,</span> <span class="n">latitude</span><span class="o">=</span><span class="s1">&#39;latitude&#39;</span><span class="p">,</span> <span class="n">longitude</span><span class="o">=</span><span class="s1">&#39;longitude&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.common.csv_to_vector" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Creates points for a CSV file and converts them to a vector dataset.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>in_csv</code></td>
        <td><code>str</code></td>
        <td><p>The file path to the input CSV file.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>output</code></td>
        <td><code>str</code></td>
        <td><p>The file path to the output vector dataset.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>latitude</code></td>
        <td><code>str</code></td>
        <td><p>The name of the column containing latitude coordinates. Defaults to "latitude".</p></td>
        <td><code>&#39;latitude&#39;</code></td>
      </tr>
      <tr>
        <td><code>longitude</code></td>
        <td><code>str</code></td>
        <td><p>The name of the column containing longitude coordinates. Defaults to "longitude".</p></td>
        <td><code>&#39;longitude&#39;</code></td>
      </tr>
      <tr>
        <td><code>encoding</code></td>
        <td><code>str</code></td>
        <td><p>The encoding of characters. Defaults to "utf-8".</p></td>
        <td><code>&#39;utf-8&#39;</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">csv_to_vector</span><span class="p">(</span>
    <span class="n">in_csv</span><span class="p">,</span>
    <span class="n">output</span><span class="p">,</span>
    <span class="n">latitude</span><span class="o">=</span><span class="s2">&quot;latitude&quot;</span><span class="p">,</span>
    <span class="n">longitude</span><span class="o">=</span><span class="s2">&quot;longitude&quot;</span><span class="p">,</span>
    <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Creates points for a CSV file and converts them to a vector dataset.</span>

<span class="sd">    Args:</span>
<span class="sd">        in_csv (str): The file path to the input CSV file.</span>
<span class="sd">        output (str): The file path to the output vector dataset.</span>
<span class="sd">        latitude (str, optional): The name of the column containing latitude coordinates. Defaults to &quot;latitude&quot;.</span>
<span class="sd">        longitude (str, optional): The name of the column containing longitude coordinates. Defaults to &quot;longitude&quot;.</span>
<span class="sd">        encoding (str, optional): The encoding of characters. Defaults to &quot;utf-8&quot;.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">gdf</span> <span class="o">=</span> <span class="n">csv_to_gdf</span><span class="p">(</span><span class="n">in_csv</span><span class="p">,</span> <span class="n">latitude</span><span class="p">,</span> <span class="n">longitude</span><span class="p">,</span> <span class="n">encoding</span><span class="p">)</span>
    <span class="n">gdf</span><span class="o">.</span><span class="n">to_file</span><span class="p">(</span><span class="n">output</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.date_sequence" class="doc doc-heading">
<code class="highlight language-python"><span class="n">date_sequence</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">,</span> <span class="n">unit</span><span class="p">,</span> <span class="n">date_format</span><span class="o">=</span><span class="s1">&#39;YYYY-MM-dd&#39;</span><span class="p">)</span></code>


<a href="#geemap.common.date_sequence" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Creates a date sequence.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>start</code></td>
        <td><code>str</code></td>
        <td><p>The start date, e.g., '2000-01-01'.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>end</code></td>
        <td><code>str</code></td>
        <td><p>The end date, e.g., '2000-12-31'.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>unit</code></td>
        <td><code>str</code></td>
        <td><p>One of 'year', 'quarter', 'month' 'week', 'day', 'hour', 'minute', or 'second'.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>date_format</code></td>
        <td><code>str</code></td>
        <td><p>A pattern, as described at http://joda-time.sourceforge.net/apidocs/org/joda/time/format/DateTimeFormat.html. Defaults to 'YYYY-MM-dd'.</p></td>
        <td><code>&#39;YYYY-MM-dd&#39;</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>ee.List</code></td>
      <td><p>A list of date sequence.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">date_sequence</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">,</span> <span class="n">unit</span><span class="p">,</span> <span class="n">date_format</span><span class="o">=</span><span class="s2">&quot;YYYY-MM-dd&quot;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Creates a date sequence.</span>

<span class="sd">    Args:</span>
<span class="sd">        start (str): The start date, e.g., &#39;2000-01-01&#39;.</span>
<span class="sd">        end (str): The end date, e.g., &#39;2000-12-31&#39;.</span>
<span class="sd">        unit (str): One of &#39;year&#39;, &#39;quarter&#39;, &#39;month&#39; &#39;week&#39;, &#39;day&#39;, &#39;hour&#39;, &#39;minute&#39;, or &#39;second&#39;.</span>
<span class="sd">        date_format (str, optional): A pattern, as described at http://joda-time.sourceforge.net/apidocs/org/joda/time/format/DateTimeFormat.html. Defaults to &#39;YYYY-MM-dd&#39;.</span>

<span class="sd">    Returns:</span>
<span class="sd">        ee.List: A list of date sequence.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">get_quarter</span><span class="p">(</span><span class="n">d</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">((</span><span class="nb">int</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="mi">5</span><span class="p">:</span><span class="mi">7</span><span class="p">])</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">//</span> <span class="mi">3</span> <span class="o">*</span> <span class="mi">3</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">zfill</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_monday</span><span class="p">(</span><span class="n">d</span><span class="p">):</span>
        <span class="n">date_obj</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">start_of_week</span> <span class="o">=</span> <span class="n">date_obj</span> <span class="o">-</span> <span class="n">datetime</span><span class="o">.</span><span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="n">date_obj</span><span class="o">.</span><span class="n">weekday</span><span class="p">())</span>
        <span class="k">return</span> <span class="n">start_of_week</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">unit</span> <span class="o">==</span> <span class="s2">&quot;year&quot;</span><span class="p">:</span>
        <span class="n">start</span> <span class="o">=</span> <span class="n">start</span><span class="p">[:</span><span class="mi">4</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;-01-01&quot;</span>
    <span class="k">elif</span> <span class="n">unit</span> <span class="o">==</span> <span class="s2">&quot;month&quot;</span><span class="p">:</span>
        <span class="n">start</span> <span class="o">=</span> <span class="n">start</span><span class="p">[:</span><span class="mi">7</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;-01&quot;</span>
    <span class="k">elif</span> <span class="n">unit</span> <span class="o">==</span> <span class="s2">&quot;quarter&quot;</span><span class="p">:</span>
        <span class="n">start</span> <span class="o">=</span> <span class="n">start</span><span class="p">[:</span><span class="mi">5</span><span class="p">]</span> <span class="o">+</span> <span class="n">get_quarter</span><span class="p">(</span><span class="n">start</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;-01&quot;</span>
    <span class="k">elif</span> <span class="n">unit</span> <span class="o">==</span> <span class="s2">&quot;week&quot;</span><span class="p">:</span>
        <span class="n">start</span> <span class="o">=</span> <span class="n">get_monday</span><span class="p">(</span><span class="n">start</span><span class="p">)</span>

    <span class="n">start_date</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Date</span><span class="p">(</span><span class="n">start</span><span class="p">)</span>
    <span class="n">end_date</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Date</span><span class="p">(</span><span class="n">end</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">unit</span> <span class="o">!=</span> <span class="s2">&quot;quarter&quot;</span><span class="p">:</span>
        <span class="n">count</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Number</span><span class="p">(</span><span class="n">end_date</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span><span class="n">start_date</span><span class="p">,</span> <span class="n">unit</span><span class="p">))</span><span class="o">.</span><span class="n">toInt</span><span class="p">()</span>
        <span class="n">num_seq</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">List</span><span class="o">.</span><span class="n">sequence</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">count</span><span class="p">)</span>
        <span class="n">date_seq</span> <span class="o">=</span> <span class="n">num_seq</span><span class="o">.</span><span class="n">map</span><span class="p">(</span>
            <span class="k">lambda</span> <span class="n">d</span><span class="p">:</span> <span class="n">start_date</span><span class="o">.</span><span class="n">advance</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">unit</span><span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">date_format</span><span class="p">)</span>
        <span class="p">)</span>

    <span class="k">else</span><span class="p">:</span>
        <span class="n">unit</span> <span class="o">=</span> <span class="s2">&quot;month&quot;</span>
        <span class="n">count</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Number</span><span class="p">(</span><span class="n">end_date</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span><span class="n">start_date</span><span class="p">,</span> <span class="n">unit</span><span class="p">))</span><span class="o">.</span><span class="n">divide</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">toInt</span><span class="p">()</span>
        <span class="n">num_seq</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">List</span><span class="o">.</span><span class="n">sequence</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">count</span><span class="o">.</span><span class="n">multiply</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span> <span class="mi">3</span><span class="p">)</span>
        <span class="n">date_seq</span> <span class="o">=</span> <span class="n">num_seq</span><span class="o">.</span><span class="n">map</span><span class="p">(</span>
            <span class="k">lambda</span> <span class="n">d</span><span class="p">:</span> <span class="n">start_date</span><span class="o">.</span><span class="n">advance</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">unit</span><span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">date_format</span><span class="p">)</span>
        <span class="p">)</span>

    <span class="k">return</span> <span class="n">date_seq</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.delete_shp" class="doc doc-heading">
<code class="highlight language-python"><span class="n">delete_shp</span><span class="p">(</span><span class="n">in_shp</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>


<a href="#geemap.common.delete_shp" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Deletes a shapefile.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>in_shp</code></td>
        <td><code>str</code></td>
        <td><p>The input shapefile to delete.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>verbose</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to print out descriptive text. Defaults to False.</p></td>
        <td><code>False</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">delete_shp</span><span class="p">(</span><span class="n">in_shp</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Deletes a shapefile.</span>

<span class="sd">    Args:</span>
<span class="sd">        in_shp (str): The input shapefile to delete.</span>
<span class="sd">        verbose (bool, optional): Whether to print out descriptive text. Defaults to False.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>

    <span class="n">in_shp</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">in_shp</span><span class="p">)</span>
    <span class="n">in_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">in_shp</span><span class="p">)</span>
    <span class="n">basename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">in_shp</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;.shp&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>

    <span class="n">files</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">in_dir</span><span class="p">)</span><span class="o">.</span><span class="n">rglob</span><span class="p">(</span><span class="n">basename</span> <span class="o">+</span> <span class="s2">&quot;.*&quot;</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
        <span class="n">filepath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">in_dir</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">file</span><span class="p">))</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">filepath</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">verbose</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Deleted </span><span class="si">{</span><span class="n">filepath</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">verbose</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.df_to_ee" class="doc doc-heading">
<code class="highlight language-python"><span class="n">df_to_ee</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">latitude</span><span class="o">=</span><span class="s1">&#39;latitude&#39;</span><span class="p">,</span> <span class="n">longitude</span><span class="o">=</span><span class="s1">&#39;longitude&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.common.df_to_ee" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Converts a pandas DataFrame to ee.FeatureCollection.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>df</code></td>
        <td><code>pandas.DataFrame</code></td>
        <td><p>An input pandas.DataFrame.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>latitude</code></td>
        <td><code>str</code></td>
        <td><p>Column name for the latitude column. Defaults to 'latitude'.</p></td>
        <td><code>&#39;latitude&#39;</code></td>
      </tr>
      <tr>
        <td><code>longitude</code></td>
        <td><code>str</code></td>
        <td><p>Column name for the longitude column. Defaults to 'longitude'.</p></td>
        <td><code>&#39;longitude&#39;</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>TypeError</code></td>
        <td><p>The input data type must be pandas.DataFrame.</p></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>ee.FeatureCollection</code></td>
      <td><p>The ee.FeatureCollection converted from the input pandas DataFrame.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">df_to_ee</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">latitude</span><span class="o">=</span><span class="s2">&quot;latitude&quot;</span><span class="p">,</span> <span class="n">longitude</span><span class="o">=</span><span class="s2">&quot;longitude&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Converts a pandas DataFrame to ee.FeatureCollection.</span>

<span class="sd">    Args:</span>
<span class="sd">        df (pandas.DataFrame): An input pandas.DataFrame.</span>
<span class="sd">        latitude (str, optional): Column name for the latitude column. Defaults to &#39;latitude&#39;.</span>
<span class="sd">        longitude (str, optional): Column name for the longitude column. Defaults to &#39;longitude&#39;.</span>

<span class="sd">    Raises:</span>
<span class="sd">        TypeError: The input data type must be pandas.DataFrame.</span>

<span class="sd">    Returns:</span>
<span class="sd">        ee.FeatureCollection: The ee.FeatureCollection converted from the input pandas DataFrame.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;The input data type must be pandas.DataFrame.&quot;</span><span class="p">)</span>

    <span class="n">geojson</span> <span class="o">=</span> <span class="n">df_to_geojson</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">latitude</span><span class="o">=</span><span class="n">latitude</span><span class="p">,</span> <span class="n">longitude</span><span class="o">=</span><span class="n">longitude</span><span class="p">)</span>
    <span class="n">fc</span> <span class="o">=</span> <span class="n">geojson_to_ee</span><span class="p">(</span><span class="n">geojson</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">fc</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.df_to_geojson" class="doc doc-heading">
<code class="highlight language-python"><span class="n">df_to_geojson</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">out_geojson</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">latitude</span><span class="o">=</span><span class="s1">&#39;latitude&#39;</span><span class="p">,</span> <span class="n">longitude</span><span class="o">=</span><span class="s1">&#39;longitude&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span></code>


<a href="#geemap.common.df_to_geojson" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Creates points for a Pandas DataFrame and exports data as a GeoJSON.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>df</code></td>
        <td><code>pandas.DataFrame</code></td>
        <td><p>The input Pandas DataFrame.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>out_geojson</code></td>
        <td><code>str</code></td>
        <td><p>The file path to the exported GeoJSON. Default to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>latitude</code></td>
        <td><code>str</code></td>
        <td><p>The name of the column containing latitude coordinates. Defaults to "latitude".</p></td>
        <td><code>&#39;latitude&#39;</code></td>
      </tr>
      <tr>
        <td><code>longitude</code></td>
        <td><code>str</code></td>
        <td><p>The name of the column containing longitude coordinates. Defaults to "longitude".</p></td>
        <td><code>&#39;longitude&#39;</code></td>
      </tr>
      <tr>
        <td><code>encoding</code></td>
        <td><code>str</code></td>
        <td><p>The encoding of characters. Defaults to "utf-8".</p></td>
        <td><code>&#39;utf-8&#39;</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">df_to_geojson</span><span class="p">(</span>
    <span class="n">df</span><span class="p">,</span>
    <span class="n">out_geojson</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">latitude</span><span class="o">=</span><span class="s2">&quot;latitude&quot;</span><span class="p">,</span>
    <span class="n">longitude</span><span class="o">=</span><span class="s2">&quot;longitude&quot;</span><span class="p">,</span>
    <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Creates points for a Pandas DataFrame and exports data as a GeoJSON.</span>

<span class="sd">    Args:</span>
<span class="sd">        df (pandas.DataFrame): The input Pandas DataFrame.</span>
<span class="sd">        out_geojson (str): The file path to the exported GeoJSON. Default to None.</span>
<span class="sd">        latitude (str, optional): The name of the column containing latitude coordinates. Defaults to &quot;latitude&quot;.</span>
<span class="sd">        longitude (str, optional): The name of the column containing longitude coordinates. Defaults to &quot;longitude&quot;.</span>
<span class="sd">        encoding (str, optional): The encoding of characters. Defaults to &quot;utf-8&quot;.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="kn">from</span> <span class="nn">geojson</span> <span class="kn">import</span> <span class="n">Feature</span><span class="p">,</span> <span class="n">FeatureCollection</span><span class="p">,</span> <span class="n">Point</span>

    <span class="k">if</span> <span class="n">out_geojson</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">out_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">out_geojson</span><span class="p">))</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">out_dir</span><span class="p">):</span>
            <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">out_dir</span><span class="p">)</span>

    <span class="n">features</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span>
        <span class="k">lambda</span> <span class="n">row</span><span class="p">:</span> <span class="n">Feature</span><span class="p">(</span>
            <span class="n">geometry</span><span class="o">=</span><span class="n">Point</span><span class="p">((</span><span class="nb">float</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="n">longitude</span><span class="p">]),</span> <span class="nb">float</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="n">latitude</span><span class="p">]))),</span>
            <span class="n">properties</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">row</span><span class="p">),</span>
        <span class="p">),</span>
        <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
    <span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>

    <span class="n">geojson</span> <span class="o">=</span> <span class="n">FeatureCollection</span><span class="p">(</span><span class="n">features</span><span class="o">=</span><span class="n">features</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">out_geojson</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">geojson</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">out_geojson</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="n">encoding</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">geojson</span><span class="p">))</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.dict_to_csv" class="doc doc-heading">
<code class="highlight language-python"><span class="n">dict_to_csv</span><span class="p">(</span><span class="n">data_dict</span><span class="p">,</span> <span class="n">out_csv</span><span class="p">,</span> <span class="n">by_row</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="n">proxies</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


<a href="#geemap.common.dict_to_csv" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Downloads an ee.Dictionary as a CSV file.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>data_dict</code></td>
        <td><code>ee.Dictionary</code></td>
        <td><p>The input ee.Dictionary.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>out_csv</code></td>
        <td><code>str</code></td>
        <td><p>The output file path to the CSV file.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>by_row</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to use by row or by column. Defaults to False.</p></td>
        <td><code>False</code></td>
      </tr>
      <tr>
        <td><code>timeout</code></td>
        <td><code>int</code></td>
        <td><p>Timeout in seconds. Defaults to 300 seconds.</p></td>
        <td><code>300</code></td>
      </tr>
      <tr>
        <td><code>proxies</code></td>
        <td><code>dict</code></td>
        <td><p>Proxy settings. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">dict_to_csv</span><span class="p">(</span><span class="n">data_dict</span><span class="p">,</span> <span class="n">out_csv</span><span class="p">,</span> <span class="n">by_row</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="n">proxies</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Downloads an ee.Dictionary as a CSV file.</span>

<span class="sd">    Args:</span>
<span class="sd">        data_dict (ee.Dictionary): The input ee.Dictionary.</span>
<span class="sd">        out_csv (str): The output file path to the CSV file.</span>
<span class="sd">        by_row (bool, optional): Whether to use by row or by column. Defaults to False.</span>
<span class="sd">        timeout (int, optional): Timeout in seconds. Defaults to 300 seconds.</span>
<span class="sd">        proxies (dict, optional): Proxy settings. Defaults to None.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">out_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">out_csv</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">out_dir</span><span class="p">):</span>
        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">out_dir</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">by_row</span><span class="p">:</span>
        <span class="n">csv_feature</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Feature</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">data_dict</span><span class="p">)</span>
        <span class="n">csv_feat_col</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">([</span><span class="n">csv_feature</span><span class="p">])</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">keys</span> <span class="o">=</span> <span class="n">data_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">keys</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">k</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Dictionary</span><span class="p">({</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="n">data_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">k</span><span class="p">)}))</span>
        <span class="n">csv_feature</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">f</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Feature</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">f</span><span class="p">))</span>
        <span class="n">csv_feat_col</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">(</span><span class="n">csv_feature</span><span class="p">)</span>

    <span class="n">ee_export_vector</span><span class="p">(</span><span class="n">csv_feat_col</span><span class="p">,</span> <span class="n">out_csv</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span> <span class="n">proxies</span><span class="o">=</span><span class="n">proxies</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.display_html" class="doc doc-heading">
<code class="highlight language-python"><span class="n">display_html</span><span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">950</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">600</span><span class="p">)</span></code>


<a href="#geemap.common.display_html" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Display an HTML file in a Jupyter Notebook.</p>
<p>Args
    src (str): File path to HTML file.
    width (int, optional): Width of the map. Defaults to 950.
    height (int, optional): Height of the map. Defaults to 600.</p>

        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">display_html</span><span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">950</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">600</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Display an HTML file in a Jupyter Notebook.</span>

<span class="sd">    Args</span>
<span class="sd">        src (str): File path to HTML file.</span>
<span class="sd">        width (int, optional): Width of the map. Defaults to 950.</span>
<span class="sd">        height (int, optional): Height of the map. Defaults to 600.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">src</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">src</span><span class="si">}</span><span class="s2"> is not a valid file path.&quot;</span><span class="p">)</span>
    <span class="n">display</span><span class="p">(</span><span class="n">IFrame</span><span class="p">(</span><span class="n">src</span><span class="o">=</span><span class="n">src</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="n">height</span><span class="p">))</span>
</code></pre></div>
        </details>
    </div>

  </div>




  <div class="doc doc-object doc-function">



<h2 id="geemap.common.download_ee_image" class="doc doc-heading">
<code class="highlight language-python"><span class="n">download_ee_image</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">region</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">crs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">crs_transform</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">resampling</span><span class="o">=</span><span class="s1">&#39;near&#39;</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">overwrite</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">num_threads</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">max_tile_size</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">max_tile_dim</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">shape</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">scale_offset</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">unmask_value</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.common.download_ee_image" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Download an Earth Engine Image as a GeoTIFF. Images larger than the `Earth Engine size limit are split and downloaded as
    separate tiles, then re-assembled into a single GeoTIFF. See https://github.com/dugalh/geedim/blob/main/geedim/download.py#L574</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>image</code></td>
        <td><code>ee.Image</code></td>
        <td><p>The image to be downloaded.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>filename</code></td>
        <td><code>str</code></td>
        <td><p>Name of the destination file.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>region</code></td>
        <td><code>ee.Geometry</code></td>
        <td><p>Region defined by geojson polygon in WGS84. Defaults to the entire image granule.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>crs</code></td>
        <td><code>str</code></td>
        <td><p>Reproject image(s) to this EPSG or WKT CRS.  Where image bands have different CRSs, all are
re-projected to this CRS. Defaults to the CRS of the minimum scale band.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>crs_transform</code></td>
        <td><code>list</code></td>
        <td><p>tuple of float, list of float, rio.Affine, optional
List of 6 numbers specifying an affine transform in the specified CRS.  In row-major order:
[xScale, xShearing, xTranslation, yShearing, yScale, yTranslation].  All bands are re-projected to
this transform.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>scale</code></td>
        <td><code>float</code></td>
        <td><p>Resample image(s) to this pixel scale (size) (m).  Where image bands have different scales,
all are resampled to this scale.  Defaults to the minimum scale of image bands.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>resampling</code></td>
        <td><code>ResamplingMethod</code></td>
        <td><p>Resampling method, can be 'near', 'bilinear', 'bicubic', or 'average'. Defaults to None.</p></td>
        <td><code>&#39;near&#39;</code></td>
      </tr>
      <tr>
        <td><code>dtype</code></td>
        <td><code>str</code></td>
        <td><p>Convert to this data type (<code>uint8</code>, <code>int8</code>, <code>uint16</code>, <code>int16</code>, <code>uint32</code>, <code>int32</code>, <code>float32</code>
or <code>float64</code>).  Defaults to auto select a minimum size type that can represent the range of pixel values.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>overwrite</code></td>
        <td><code>bool</code></td>
        <td><p>Overwrite the destination file if it exists. Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
      <tr>
        <td><code>num_threads</code></td>
        <td><code>int</code></td>
        <td><p>Number of tiles to download concurrently. Defaults to a sensible auto value.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>max_tile_size</code></td>
        <td></td>
        <td><p>int, optional
Maximum tile size (MB).  If None, defaults to the Earth Engine download size limit (32 MB).</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>max_tile_dim</code></td>
        <td></td>
        <td><p>int, optional
Maximum tile width/height (pixels).  If None, defaults to Earth Engine download limit (10000).</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>shape</code></td>
        <td></td>
        <td><p>tuple of int, optional
(height, width) dimensions to export (pixels).</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>scale_offset</code></td>
        <td></td>
        <td><p>bool, optional
Whether to apply any EE band scales and offsets to the image.</p></td>
        <td><code>False</code></td>
      </tr>
      <tr>
        <td><code>unmask_value</code></td>
        <td><code>float</code></td>
        <td><p>The value to use for pixels that are masked in the input image. If the exported image contains
zero values, you should set the unmask value to a  non-zero value so that the zero values are not treated as missing data. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">download_ee_image</span><span class="p">(</span>
    <span class="n">image</span><span class="p">,</span>
    <span class="n">filename</span><span class="p">,</span>
    <span class="n">region</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">crs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">crs_transform</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">resampling</span><span class="o">=</span><span class="s2">&quot;near&quot;</span><span class="p">,</span>
    <span class="n">dtype</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">overwrite</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">num_threads</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">max_tile_size</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">max_tile_dim</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">shape</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">scale_offset</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">unmask_value</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Download an Earth Engine Image as a GeoTIFF. Images larger than the `Earth Engine size limit are split and downloaded as</span>
<span class="sd">        separate tiles, then re-assembled into a single GeoTIFF. See https://github.com/dugalh/geedim/blob/main/geedim/download.py#L574</span>

<span class="sd">    Args:</span>
<span class="sd">        image (ee.Image): The image to be downloaded.</span>
<span class="sd">        filename (str): Name of the destination file.</span>
<span class="sd">        region (ee.Geometry, optional): Region defined by geojson polygon in WGS84. Defaults to the entire image granule.</span>
<span class="sd">        crs (str, optional): Reproject image(s) to this EPSG or WKT CRS.  Where image bands have different CRSs, all are</span>
<span class="sd">            re-projected to this CRS. Defaults to the CRS of the minimum scale band.</span>
<span class="sd">        crs_transform (list, optional): tuple of float, list of float, rio.Affine, optional</span>
<span class="sd">            List of 6 numbers specifying an affine transform in the specified CRS.  In row-major order:</span>
<span class="sd">            [xScale, xShearing, xTranslation, yShearing, yScale, yTranslation].  All bands are re-projected to</span>
<span class="sd">            this transform.</span>
<span class="sd">        scale (float, optional): Resample image(s) to this pixel scale (size) (m).  Where image bands have different scales,</span>
<span class="sd">            all are resampled to this scale.  Defaults to the minimum scale of image bands.</span>
<span class="sd">        resampling (ResamplingMethod, optional): Resampling method, can be &#39;near&#39;, &#39;bilinear&#39;, &#39;bicubic&#39;, or &#39;average&#39;. Defaults to None.</span>
<span class="sd">        dtype (str, optional): Convert to this data type (`uint8`, `int8`, `uint16`, `int16`, `uint32`, `int32`, `float32`</span>
<span class="sd">            or `float64`).  Defaults to auto select a minimum size type that can represent the range of pixel values.</span>
<span class="sd">        overwrite (bool, optional): Overwrite the destination file if it exists. Defaults to True.</span>
<span class="sd">        num_threads (int, optional): Number of tiles to download concurrently. Defaults to a sensible auto value.</span>
<span class="sd">        max_tile_size: int, optional</span>
<span class="sd">            Maximum tile size (MB).  If None, defaults to the Earth Engine download size limit (32 MB).</span>
<span class="sd">        max_tile_dim: int, optional</span>
<span class="sd">            Maximum tile width/height (pixels).  If None, defaults to Earth Engine download limit (10000).</span>
<span class="sd">        shape: tuple of int, optional</span>
<span class="sd">            (height, width) dimensions to export (pixels).</span>
<span class="sd">        scale_offset: bool, optional</span>
<span class="sd">            Whether to apply any EE band scales and offsets to the image.</span>
<span class="sd">        unmask_value (float, optional): The value to use for pixels that are masked in the input image. If the exported image contains</span>
<span class="sd">            zero values, you should set the unmask value to a  non-zero value so that the zero values are not treated as missing data. Defaults to None.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;USE_MKDOCS&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="kn">import</span> <span class="nn">geedim</span> <span class="k">as</span> <span class="nn">gd</span>
    <span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ImportError</span><span class="p">(</span>
            <span class="s2">&quot;Please install geedim using `pip install geedim` or `conda install -c conda-forge geedim`&quot;</span>
        <span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;image must be an ee.Image.&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">unmask_value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">image</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">selfMask</span><span class="p">()</span><span class="o">.</span><span class="n">unmask</span><span class="p">(</span><span class="n">unmask_value</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">region</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Geometry</span><span class="p">):</span>
            <span class="n">image</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">clip</span><span class="p">(</span><span class="n">region</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">region</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">):</span>
            <span class="n">image</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">clipToCollection</span><span class="p">(</span><span class="n">region</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">region</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;region&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">region</span>

    <span class="k">if</span> <span class="n">crs</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;crs&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">crs</span>

    <span class="k">if</span> <span class="n">crs_transform</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;crs_transform&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">crs_transform</span>

    <span class="k">if</span> <span class="n">scale</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;scale&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">scale</span>

    <span class="k">if</span> <span class="n">resampling</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;resampling&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">resampling</span>

    <span class="k">if</span> <span class="n">dtype</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;dtype&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">dtype</span>

    <span class="k">if</span> <span class="n">max_tile_size</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;max_tile_size&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">max_tile_size</span>

    <span class="k">if</span> <span class="n">max_tile_dim</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;max_tile_dim&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">max_tile_dim</span>

    <span class="k">if</span> <span class="n">shape</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;shape&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">shape</span>

    <span class="k">if</span> <span class="n">scale_offset</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;scale_offset&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">scale_offset</span>

    <span class="n">img</span> <span class="o">=</span> <span class="n">gd</span><span class="o">.</span><span class="n">download</span><span class="o">.</span><span class="n">BaseImage</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>
    <span class="n">img</span><span class="o">.</span><span class="n">download</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">overwrite</span><span class="o">=</span><span class="n">overwrite</span><span class="p">,</span> <span class="n">num_threads</span><span class="o">=</span><span class="n">num_threads</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.download_ee_image_collection" class="doc doc-heading">
<code class="highlight language-python"><span class="n">download_ee_image_collection</span><span class="p">(</span><span class="n">collection</span><span class="p">,</span> <span class="n">out_dir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">filenames</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">region</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">crs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">crs_transform</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">resampling</span><span class="o">=</span><span class="s1">&#39;near&#39;</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">overwrite</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">num_threads</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">max_tile_size</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">max_tile_dim</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">shape</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">scale_offset</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">unmask_value</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.common.download_ee_image_collection" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Download an Earth Engine ImageCollection as GeoTIFFs. Images larger than the `Earth Engine size limit are split and downloaded as
    separate tiles, then re-assembled into a single GeoTIFF. See https://github.com/dugalh/geedim/blob/main/geedim/download.py#L574</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>collection</code></td>
        <td><code>ee.ImageCollection</code></td>
        <td><p>The image collection to be downloaded.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>out_dir</code></td>
        <td><code>str</code></td>
        <td><p>The directory to save the downloaded images. Defaults to the current directory.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>filenames</code></td>
        <td><code>list</code></td>
        <td><p>A list of filenames to use for the downloaded images. Defaults to the image ID.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>region</code></td>
        <td><code>ee.Geometry</code></td>
        <td><p>Region defined by geojson polygon in WGS84. Defaults to the entire image granule.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>crs</code></td>
        <td><code>str</code></td>
        <td><p>Reproject image(s) to this EPSG or WKT CRS.  Where image bands have different CRSs, all are
re-projected to this CRS. Defaults to the CRS of the minimum scale band.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>crs_transform</code></td>
        <td><code>list</code></td>
        <td><p>tuple of float, list of float, rio.Affine, optional
List of 6 numbers specifying an affine transform in the specified CRS.  In row-major order:
[xScale, xShearing, xTranslation, yShearing, yScale, yTranslation].  All bands are re-projected to
this transform.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>scale</code></td>
        <td><code>float</code></td>
        <td><p>Resample image(s) to this pixel scale (size) (m).  Where image bands have different scales,
all are resampled to this scale.  Defaults to the minimum scale of image bands.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>resampling</code></td>
        <td><code>ResamplingMethod</code></td>
        <td><p>Resampling method, can be 'near', 'bilinear', 'bicubic', or 'average'. Defaults to None.</p></td>
        <td><code>&#39;near&#39;</code></td>
      </tr>
      <tr>
        <td><code>dtype</code></td>
        <td><code>str</code></td>
        <td><p>Convert to this data type (<code>uint8</code>, <code>int8</code>, <code>uint16</code>, <code>int16</code>, <code>uint32</code>, <code>int32</code>, <code>float32</code>
or <code>float64</code>).  Defaults to auto select a minimum size type that can represent the range of pixel values.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>overwrite</code></td>
        <td><code>bool</code></td>
        <td><p>Overwrite the destination file if it exists. Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
      <tr>
        <td><code>num_threads</code></td>
        <td><code>int</code></td>
        <td><p>Number of tiles to download concurrently. Defaults to a sensible auto value.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>max_tile_size</code></td>
        <td></td>
        <td><p>int, optional
Maximum tile size (MB).  If None, defaults to the Earth Engine download size limit (32 MB).</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>max_tile_dim</code></td>
        <td></td>
        <td><p>int, optional
Maximum tile width/height (pixels).  If None, defaults to Earth Engine download limit (10000).</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>shape</code></td>
        <td></td>
        <td><p>tuple of int, optional
(height, width) dimensions to export (pixels).</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>scale_offset</code></td>
        <td></td>
        <td><p>bool, optional
Whether to apply any EE band scales and offsets to the image.</p></td>
        <td><code>False</code></td>
      </tr>
      <tr>
        <td><code>unmask_value</code></td>
        <td><code>float</code></td>
        <td><p>The value to use for pixels that are masked in the input image. If the exported image contains zero values,
you should set the unmask value to a  non-zero value so that the zero values are not treated as missing data. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">download_ee_image_collection</span><span class="p">(</span>
    <span class="n">collection</span><span class="p">,</span>
    <span class="n">out_dir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">filenames</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">region</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">crs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">crs_transform</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">resampling</span><span class="o">=</span><span class="s2">&quot;near&quot;</span><span class="p">,</span>
    <span class="n">dtype</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">overwrite</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">num_threads</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">max_tile_size</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">max_tile_dim</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">shape</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">scale_offset</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">unmask_value</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Download an Earth Engine ImageCollection as GeoTIFFs. Images larger than the `Earth Engine size limit are split and downloaded as</span>
<span class="sd">        separate tiles, then re-assembled into a single GeoTIFF. See https://github.com/dugalh/geedim/blob/main/geedim/download.py#L574</span>

<span class="sd">    Args:</span>
<span class="sd">        collection (ee.ImageCollection): The image collection to be downloaded.</span>
<span class="sd">        out_dir (str, optional): The directory to save the downloaded images. Defaults to the current directory.</span>
<span class="sd">        filenames (list, optional): A list of filenames to use for the downloaded images. Defaults to the image ID.</span>
<span class="sd">        region (ee.Geometry, optional): Region defined by geojson polygon in WGS84. Defaults to the entire image granule.</span>
<span class="sd">        crs (str, optional): Reproject image(s) to this EPSG or WKT CRS.  Where image bands have different CRSs, all are</span>
<span class="sd">            re-projected to this CRS. Defaults to the CRS of the minimum scale band.</span>
<span class="sd">        crs_transform (list, optional): tuple of float, list of float, rio.Affine, optional</span>
<span class="sd">            List of 6 numbers specifying an affine transform in the specified CRS.  In row-major order:</span>
<span class="sd">            [xScale, xShearing, xTranslation, yShearing, yScale, yTranslation].  All bands are re-projected to</span>
<span class="sd">            this transform.</span>
<span class="sd">        scale (float, optional): Resample image(s) to this pixel scale (size) (m).  Where image bands have different scales,</span>
<span class="sd">            all are resampled to this scale.  Defaults to the minimum scale of image bands.</span>
<span class="sd">        resampling (ResamplingMethod, optional): Resampling method, can be &#39;near&#39;, &#39;bilinear&#39;, &#39;bicubic&#39;, or &#39;average&#39;. Defaults to None.</span>
<span class="sd">        dtype (str, optional): Convert to this data type (`uint8`, `int8`, `uint16`, `int16`, `uint32`, `int32`, `float32`</span>
<span class="sd">            or `float64`).  Defaults to auto select a minimum size type that can represent the range of pixel values.</span>
<span class="sd">        overwrite (bool, optional): Overwrite the destination file if it exists. Defaults to True.</span>
<span class="sd">        num_threads (int, optional): Number of tiles to download concurrently. Defaults to a sensible auto value.</span>
<span class="sd">        max_tile_size: int, optional</span>
<span class="sd">            Maximum tile size (MB).  If None, defaults to the Earth Engine download size limit (32 MB).</span>
<span class="sd">        max_tile_dim: int, optional</span>
<span class="sd">            Maximum tile width/height (pixels).  If None, defaults to Earth Engine download limit (10000).</span>
<span class="sd">        shape: tuple of int, optional</span>
<span class="sd">            (height, width) dimensions to export (pixels).</span>
<span class="sd">        scale_offset: bool, optional</span>
<span class="sd">            Whether to apply any EE band scales and offsets to the image.</span>
<span class="sd">        unmask_value (float, optional): The value to use for pixels that are masked in the input image. If the exported image contains zero values,</span>
<span class="sd">            you should set the unmask value to a  non-zero value so that the zero values are not treated as missing data. Defaults to None.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">collection</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;ee_object must be an ee.ImageCollection.&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">out_dir</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">out_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">out_dir</span><span class="p">):</span>
        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">out_dir</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>

        <span class="n">count</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">collection</span><span class="o">.</span><span class="n">size</span><span class="p">()</span><span class="o">.</span><span class="n">getInfo</span><span class="p">())</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Total number of images: </span><span class="si">{</span><span class="n">count</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">filenames</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">filenames</span><span class="p">)</span> <span class="o">!=</span> <span class="n">count</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;The number of filenames must match the number of image: </span><span class="si">{</span><span class="n">count</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>

        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">count</span><span class="p">):</span>
            <span class="n">image</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">(</span><span class="n">collection</span><span class="o">.</span><span class="n">toList</span><span class="p">(</span><span class="n">count</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">filenames</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">name</span> <span class="o">=</span> <span class="n">filenames</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">name</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.tif&quot;</span><span class="p">):</span>
                    <span class="n">name</span> <span class="o">=</span> <span class="n">name</span> <span class="o">+</span> <span class="s2">&quot;.tif&quot;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">name</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;system:index&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()</span> <span class="o">+</span> <span class="s2">&quot;.tif&quot;</span>
            <span class="n">filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">out_dir</span><span class="p">),</span> <span class="n">name</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Downloading </span><span class="si">{</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">count</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">download_ee_image</span><span class="p">(</span>
                <span class="n">image</span><span class="p">,</span>
                <span class="n">filename</span><span class="p">,</span>
                <span class="n">region</span><span class="p">,</span>
                <span class="n">crs</span><span class="p">,</span>
                <span class="n">crs_transform</span><span class="p">,</span>
                <span class="n">scale</span><span class="p">,</span>
                <span class="n">resampling</span><span class="p">,</span>
                <span class="n">dtype</span><span class="p">,</span>
                <span class="n">overwrite</span><span class="p">,</span>
                <span class="n">num_threads</span><span class="p">,</span>
                <span class="n">max_tile_size</span><span class="p">,</span>
                <span class="n">max_tile_dim</span><span class="p">,</span>
                <span class="n">shape</span><span class="p">,</span>
                <span class="n">scale_offset</span><span class="p">,</span>
                <span class="n">unmask_value</span><span class="p">,</span>
                <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
            <span class="p">)</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error downloading image collection: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.download_ee_image_tiles" class="doc doc-heading">
<code class="highlight language-python"><span class="n">download_ee_image_tiles</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">features</span><span class="p">,</span> <span class="n">out_dir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">prefix</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">crs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">crs_transform</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">resampling</span><span class="o">=</span><span class="s1">&#39;near&#39;</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">overwrite</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">num_threads</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">max_tile_size</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">max_tile_dim</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">shape</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">scale_offset</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">unmask_value</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.common.download_ee_image_tiles" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Download an Earth Engine Image as small tiles based on ee.FeatureCollection. Images larger than the `Earth Engine size limit are split and downloaded as
    separate tiles, then re-assembled into a single GeoTIFF. See https://github.com/dugalh/geedim/blob/main/geedim/download.py#L574</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>image</code></td>
        <td><code>ee.Image</code></td>
        <td><p>The image to be downloaded.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>features</code></td>
        <td><code>ee.FeatureCollection</code></td>
        <td><p>The features to loop through to download image.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>out_dir</code></td>
        <td><code>str</code></td>
        <td><p>The output directory. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>prefix</code></td>
        <td><code>str</code></td>
        <td><p>The prefix for the output file. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>crs</code></td>
        <td><code>str</code></td>
        <td><p>Reproject image(s) to this EPSG or WKT CRS.  Where image bands have different CRSs, all are
re-projected to this CRS. Defaults to the CRS of the minimum scale band.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>crs_transform</code></td>
        <td><code>list</code></td>
        <td><p>tuple of float, list of float, rio.Affine, optional
List of 6 numbers specifying an affine transform in the specified CRS.  In row-major order:
[xScale, xShearing, xTranslation, yShearing, yScale, yTranslation].  All bands are re-projected to
this transform.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>scale</code></td>
        <td><code>float</code></td>
        <td><p>Resample image(s) to this pixel scale (size) (m).  Where image bands have different scales,
all are resampled to this scale.  Defaults to the minimum scale of image bands.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>resampling</code></td>
        <td><code>ResamplingMethod</code></td>
        <td><p>Resampling method, can be 'near', 'bilinear', 'bicubic', or 'average'. Defaults to None.</p></td>
        <td><code>&#39;near&#39;</code></td>
      </tr>
      <tr>
        <td><code>dtype</code></td>
        <td><code>str</code></td>
        <td><p>Convert to this data type (<code>uint8</code>, <code>int8</code>, <code>uint16</code>, <code>int16</code>, <code>uint32</code>, <code>int32</code>, <code>float32</code>
or <code>float64</code>).  Defaults to auto select a minimum size type that can represent the range of pixel values.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>overwrite</code></td>
        <td><code>bool</code></td>
        <td><p>Overwrite the destination file if it exists. Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
      <tr>
        <td><code>num_threads</code></td>
        <td><code>int</code></td>
        <td><p>Number of tiles to download concurrently. Defaults to a sensible auto value.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>max_tile_size</code></td>
        <td></td>
        <td><p>int, optional
Maximum tile size (MB).  If None, defaults to the Earth Engine download size limit (32 MB).</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>max_tile_dim</code></td>
        <td></td>
        <td><p>int, optional
Maximum tile width/height (pixels).  If None, defaults to Earth Engine download limit (10000).</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>shape</code></td>
        <td></td>
        <td><p>tuple of int, optional
(height, width) dimensions to export (pixels).</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>scale_offset</code></td>
        <td></td>
        <td><p>bool, optional
Whether to apply any EE band scales and offsets to the image.</p></td>
        <td><code>False</code></td>
      </tr>
      <tr>
        <td><code>unmask_value</code></td>
        <td><code>float</code></td>
        <td><p>The value to use for pixels that are masked in the input image. If the exported image contains zero values,
you should set the unmask value to a  non-zero value so that the zero values are not treated as missing data. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">download_ee_image_tiles</span><span class="p">(</span>
    <span class="n">image</span><span class="p">,</span>
    <span class="n">features</span><span class="p">,</span>
    <span class="n">out_dir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">prefix</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">crs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">crs_transform</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">resampling</span><span class="o">=</span><span class="s2">&quot;near&quot;</span><span class="p">,</span>
    <span class="n">dtype</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">overwrite</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">num_threads</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">max_tile_size</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">max_tile_dim</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">shape</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">scale_offset</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">unmask_value</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">):</span>

    <span class="sd">&quot;&quot;&quot;Download an Earth Engine Image as small tiles based on ee.FeatureCollection. Images larger than the `Earth Engine size limit are split and downloaded as</span>
<span class="sd">        separate tiles, then re-assembled into a single GeoTIFF. See https://github.com/dugalh/geedim/blob/main/geedim/download.py#L574</span>

<span class="sd">    Args:</span>
<span class="sd">        image (ee.Image): The image to be downloaded.</span>
<span class="sd">        features (ee.FeatureCollection): The features to loop through to download image.</span>
<span class="sd">        out_dir (str, optional): The output directory. Defaults to None.</span>
<span class="sd">        prefix (str, optional): The prefix for the output file. Defaults to None.</span>
<span class="sd">        crs (str, optional): Reproject image(s) to this EPSG or WKT CRS.  Where image bands have different CRSs, all are</span>
<span class="sd">            re-projected to this CRS. Defaults to the CRS of the minimum scale band.</span>
<span class="sd">        crs_transform (list, optional): tuple of float, list of float, rio.Affine, optional</span>
<span class="sd">            List of 6 numbers specifying an affine transform in the specified CRS.  In row-major order:</span>
<span class="sd">            [xScale, xShearing, xTranslation, yShearing, yScale, yTranslation].  All bands are re-projected to</span>
<span class="sd">            this transform.</span>
<span class="sd">        scale (float, optional): Resample image(s) to this pixel scale (size) (m).  Where image bands have different scales,</span>
<span class="sd">            all are resampled to this scale.  Defaults to the minimum scale of image bands.</span>
<span class="sd">        resampling (ResamplingMethod, optional): Resampling method, can be &#39;near&#39;, &#39;bilinear&#39;, &#39;bicubic&#39;, or &#39;average&#39;. Defaults to None.</span>
<span class="sd">        dtype (str, optional): Convert to this data type (`uint8`, `int8`, `uint16`, `int16`, `uint32`, `int32`, `float32`</span>
<span class="sd">            or `float64`).  Defaults to auto select a minimum size type that can represent the range of pixel values.</span>
<span class="sd">        overwrite (bool, optional): Overwrite the destination file if it exists. Defaults to True.</span>
<span class="sd">        num_threads (int, optional): Number of tiles to download concurrently. Defaults to a sensible auto value.</span>
<span class="sd">        max_tile_size: int, optional</span>
<span class="sd">            Maximum tile size (MB).  If None, defaults to the Earth Engine download size limit (32 MB).</span>
<span class="sd">        max_tile_dim: int, optional</span>
<span class="sd">            Maximum tile width/height (pixels).  If None, defaults to Earth Engine download limit (10000).</span>
<span class="sd">        shape: tuple of int, optional</span>
<span class="sd">            (height, width) dimensions to export (pixels).</span>
<span class="sd">        scale_offset: bool, optional</span>
<span class="sd">            Whether to apply any EE band scales and offsets to the image.</span>
<span class="sd">        unmask_value (float, optional): The value to use for pixels that are masked in the input image. If the exported image contains zero values,</span>
<span class="sd">            you should set the unmask value to a  non-zero value so that the zero values are not treated as missing data. Defaults to None.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;USE_MKDOCS&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">features</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;features must be an ee.FeatureCollection.&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">out_dir</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">out_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">out_dir</span><span class="p">):</span>
        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">out_dir</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">prefix</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">prefix</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

    <span class="n">count</span> <span class="o">=</span> <span class="n">features</span><span class="o">.</span><span class="n">size</span><span class="p">()</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()</span>
    <span class="n">collection</span> <span class="o">=</span> <span class="n">features</span><span class="o">.</span><span class="n">toList</span><span class="p">(</span><span class="n">count</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">count</span><span class="p">):</span>
        <span class="n">region</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Feature</span><span class="p">(</span><span class="n">collection</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">i</span><span class="p">))</span><span class="o">.</span><span class="n">geometry</span><span class="p">()</span>
        <span class="n">filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
            <span class="n">out_dir</span><span class="p">,</span> <span class="s2">&quot;</span><span class="si">{}{}</span><span class="s2">.tif&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">prefix</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">zfill</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">count</span><span class="p">))))</span>
        <span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Downloading </span><span class="si">{</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">count</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">filename</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">download_ee_image</span><span class="p">(</span>
            <span class="n">image</span><span class="p">,</span>
            <span class="n">filename</span><span class="p">,</span>
            <span class="n">region</span><span class="p">,</span>
            <span class="n">crs</span><span class="p">,</span>
            <span class="n">crs_transform</span><span class="p">,</span>
            <span class="n">scale</span><span class="p">,</span>
            <span class="n">resampling</span><span class="p">,</span>
            <span class="n">dtype</span><span class="p">,</span>
            <span class="n">overwrite</span><span class="p">,</span>
            <span class="n">num_threads</span><span class="p">,</span>
            <span class="n">max_tile_size</span><span class="p">,</span>
            <span class="n">max_tile_dim</span><span class="p">,</span>
            <span class="n">shape</span><span class="p">,</span>
            <span class="n">scale_offset</span><span class="p">,</span>
            <span class="n">unmask_value</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.download_ee_video" class="doc doc-heading">
<code class="highlight language-python"><span class="n">download_ee_video</span><span class="p">(</span><span class="n">collection</span><span class="p">,</span> <span class="n">video_args</span><span class="p">,</span> <span class="n">out_gif</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="n">proxies</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


<a href="#geemap.common.download_ee_video" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Downloads a video thumbnail as a GIF image from Earth Engine.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>collection</code></td>
        <td><code>object</code></td>
        <td><p>An ee.ImageCollection.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>video_args</code></td>
        <td><code>object</code></td>
        <td><p>Parameters for expring the video thumbnail.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>out_gif</code></td>
        <td><code>str</code></td>
        <td><p>File path to the output GIF.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>timeout</code></td>
        <td><code>int</code></td>
        <td><p>The number of seconds the request will be timed out. Defaults to 300.</p></td>
        <td><code>300</code></td>
      </tr>
      <tr>
        <td><code>proxies</code></td>
        <td><code>dict</code></td>
        <td><p>A dictionary of proxy servers to use. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">download_ee_video</span><span class="p">(</span><span class="n">collection</span><span class="p">,</span> <span class="n">video_args</span><span class="p">,</span> <span class="n">out_gif</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="n">proxies</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Downloads a video thumbnail as a GIF image from Earth Engine.</span>

<span class="sd">    Args:</span>
<span class="sd">        collection (object): An ee.ImageCollection.</span>
<span class="sd">        video_args (object): Parameters for expring the video thumbnail.</span>
<span class="sd">        out_gif (str): File path to the output GIF.</span>
<span class="sd">        timeout (int, optional): The number of seconds the request will be timed out. Defaults to 300.</span>
<span class="sd">        proxies (dict, optional): A dictionary of proxy servers to use. Defaults to None.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">out_gif</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">out_gif</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">out_gif</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.gif&quot;</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The output file must have an extension of .gif.&quot;</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">out_gif</span><span class="p">)):</span>
        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">out_gif</span><span class="p">))</span>

    <span class="k">if</span> <span class="s2">&quot;region&quot;</span> <span class="ow">in</span> <span class="n">video_args</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="n">roi</span> <span class="o">=</span> <span class="n">video_args</span><span class="p">[</span><span class="s2">&quot;region&quot;</span><span class="p">]</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">roi</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Geometry</span><span class="p">):</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">roi</span> <span class="o">=</span> <span class="n">roi</span><span class="o">.</span><span class="n">geometry</span><span class="p">()</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Could not convert the provided roi to ee.Geometry&quot;</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
                <span class="k">return</span>

        <span class="n">video_args</span><span class="p">[</span><span class="s2">&quot;region&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">roi</span>
    <span class="k">if</span> <span class="s2">&quot;dimensions&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">video_args</span><span class="p">:</span>
        <span class="n">video_args</span><span class="p">[</span><span class="s2">&quot;dimensions&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">768</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Generating URL...&quot;</span><span class="p">)</span>
        <span class="n">url</span> <span class="o">=</span> <span class="n">collection</span><span class="o">.</span><span class="n">getVideoThumbURL</span><span class="p">(</span><span class="n">video_args</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Downloading GIF image from </span><span class="si">{</span><span class="n">url</span><span class="si">}</span><span class="se">\n</span><span class="s2">Please wait ...&quot;</span><span class="p">)</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">stream</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span> <span class="n">proxies</span><span class="o">=</span><span class="n">proxies</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">r</span><span class="o">.</span><span class="n">status_code</span> <span class="o">!=</span> <span class="mi">200</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;An error occurred while downloading.&quot;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">()[</span><span class="s2">&quot;error&quot;</span><span class="p">][</span><span class="s2">&quot;message&quot;</span><span class="p">])</span>
            <span class="k">return</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">out_gif</span><span class="p">,</span> <span class="s2">&quot;wb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fd</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="n">r</span><span class="o">.</span><span class="n">iter_content</span><span class="p">(</span><span class="n">chunk_size</span><span class="o">=</span><span class="mi">1024</span><span class="p">):</span>
                    <span class="n">fd</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">chunk</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;The GIF image has been saved to: </span><span class="si">{</span><span class="n">out_gif</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.download_file" class="doc doc-heading">
<code class="highlight language-python"><span class="n">download_file</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">output</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">quiet</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">proxy</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">speed</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">use_cookies</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">verify</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">fuzzy</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">resume</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">unzip</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">overwrite</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>


<a href="#geemap.common.download_file" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Download a file from URL, including Google Drive shared URL.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>url</code></td>
        <td><code>str</code></td>
        <td><p>Google Drive URL is also supported. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>output</code></td>
        <td><code>str</code></td>
        <td><p>Output filename. Default is basename of URL.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>quiet</code></td>
        <td><code>bool</code></td>
        <td><p>Suppress terminal output. Default is False.</p></td>
        <td><code>False</code></td>
      </tr>
      <tr>
        <td><code>proxy</code></td>
        <td><code>str</code></td>
        <td><p>Proxy. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>speed</code></td>
        <td><code>float</code></td>
        <td><p>Download byte size per second (e.g., 256KB/s = 256 * 1024). Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>use_cookies</code></td>
        <td><code>bool</code></td>
        <td><p>Flag to use cookies. Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
      <tr>
        <td><code>verify</code></td>
        <td><code>bool | str</code></td>
        <td><p>Either a bool, in which case it controls whether the server's TLS certificate is verified, or a string, in which case it must be a path to a CA bundle to use. Default is True.. Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
      <tr>
        <td><code>id</code></td>
        <td><code>str</code></td>
        <td><p>Google Drive's file ID. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>fuzzy</code></td>
        <td><code>bool</code></td>
        <td><p>Fuzzy extraction of Google Drive's file Id. Defaults to False.</p></td>
        <td><code>False</code></td>
      </tr>
      <tr>
        <td><code>resume</code></td>
        <td><code>bool</code></td>
        <td><p>Resume the download from existing tmp file if possible. Defaults to False.</p></td>
        <td><code>False</code></td>
      </tr>
      <tr>
        <td><code>unzip</code></td>
        <td><code>bool</code></td>
        <td><p>Unzip the file. Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
      <tr>
        <td><code>overwrite</code></td>
        <td><code>bool</code></td>
        <td><p>Overwrite the file if it already exists. Defaults to False.</p></td>
        <td><code>False</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>str</code></td>
      <td><p>The output file path.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">download_file</span><span class="p">(</span>
    <span class="n">url</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">output</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">quiet</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">proxy</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">speed</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">use_cookies</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">verify</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="nb">id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">fuzzy</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">resume</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">unzip</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">overwrite</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Download a file from URL, including Google Drive shared URL.</span>

<span class="sd">    Args:</span>
<span class="sd">        url (str, optional): Google Drive URL is also supported. Defaults to None.</span>
<span class="sd">        output (str, optional): Output filename. Default is basename of URL.</span>
<span class="sd">        quiet (bool, optional): Suppress terminal output. Default is False.</span>
<span class="sd">        proxy (str, optional): Proxy. Defaults to None.</span>
<span class="sd">        speed (float, optional): Download byte size per second (e.g., 256KB/s = 256 * 1024). Defaults to None.</span>
<span class="sd">        use_cookies (bool, optional): Flag to use cookies. Defaults to True.</span>
<span class="sd">        verify (bool | str, optional): Either a bool, in which case it controls whether the server&#39;s TLS certificate is verified, or a string, in which case it must be a path to a CA bundle to use. Default is True.. Defaults to True.</span>
<span class="sd">        id (str, optional): Google Drive&#39;s file ID. Defaults to None.</span>
<span class="sd">        fuzzy (bool, optional): Fuzzy extraction of Google Drive&#39;s file Id. Defaults to False.</span>
<span class="sd">        resume (bool, optional): Resume the download from existing tmp file if possible. Defaults to False.</span>
<span class="sd">        unzip (bool, optional): Unzip the file. Defaults to True.</span>
<span class="sd">        overwrite (bool, optional): Overwrite the file if it already exists. Defaults to False.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: The output file path.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="kn">import</span> <span class="nn">gdown</span>

    <span class="k">if</span> <span class="n">output</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="n">url</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;http&quot;</span><span class="p">):</span>
            <span class="n">output</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">output</span><span class="p">))</span> <span class="ow">and</span> <span class="p">(</span><span class="ow">not</span> <span class="n">overwrite</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">output</span><span class="si">}</span><span class="s2"> already exists. Skip downloading. Set overwrite=True to overwrite.&quot;</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">output</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">url</span> <span class="o">=</span> <span class="n">github_raw_url</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>

    <span class="k">if</span> <span class="s2">&quot;https://drive.google.com/file/d/&quot;</span> <span class="ow">in</span> <span class="n">url</span><span class="p">:</span>
        <span class="n">fuzzy</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="n">output</span> <span class="o">=</span> <span class="n">gdown</span><span class="o">.</span><span class="n">download</span><span class="p">(</span>
        <span class="n">url</span><span class="p">,</span> <span class="n">output</span><span class="p">,</span> <span class="n">quiet</span><span class="p">,</span> <span class="n">proxy</span><span class="p">,</span> <span class="n">speed</span><span class="p">,</span> <span class="n">use_cookies</span><span class="p">,</span> <span class="n">verify</span><span class="p">,</span> <span class="nb">id</span><span class="p">,</span> <span class="n">fuzzy</span><span class="p">,</span> <span class="n">resume</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">unzip</span> <span class="ow">and</span> <span class="n">output</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.zip&quot;</span><span class="p">):</span>

        <span class="k">with</span> <span class="n">zipfile</span><span class="o">.</span><span class="n">ZipFile</span><span class="p">(</span><span class="n">output</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">zip_ref</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">quiet</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Extracting files...&quot;</span><span class="p">)</span>
            <span class="n">zip_ref</span><span class="o">.</span><span class="n">extractall</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">output</span><span class="p">))</span>

    <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">output</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.download_folder" class="doc doc-heading">
<code class="highlight language-python"><span class="n">download_folder</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">output</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">quiet</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">proxy</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">speed</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">use_cookies</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">remaining_ok</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>


<a href="#geemap.common.download_folder" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Downloads the entire folder from URL.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>url</code></td>
        <td><code>str</code></td>
        <td><p>URL of the Google Drive folder. Must be of the format 'https://drive.google.com/drive/folders/{url}'. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>id</code></td>
        <td><code>str</code></td>
        <td><p>Google Drive's folder ID. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>output</code></td>
        <td><code>str</code></td>
        <td><p>String containing the path of the output folder. Defaults to current working directory.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>quiet</code></td>
        <td><code>bool</code></td>
        <td><p>Suppress terminal output. Defaults to False.</p></td>
        <td><code>False</code></td>
      </tr>
      <tr>
        <td><code>proxy</code></td>
        <td><code>str</code></td>
        <td><p>Proxy. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>speed</code></td>
        <td><code>float</code></td>
        <td><p>Download byte size per second (e.g., 256KB/s = 256 * 1024). Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>use_cookies</code></td>
        <td><code>bool</code></td>
        <td><p>Flag to use cookies. Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
      <tr>
        <td><code>resume</code></td>
        <td><code>bool</code></td>
        <td><p>Resume the download from existing tmp file if possible. Defaults to False.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>list</code></td>
      <td><p>List of files downloaded, or None if failed.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">download_folder</span><span class="p">(</span>
    <span class="n">url</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="nb">id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">output</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">quiet</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">proxy</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">speed</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">use_cookies</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">remaining_ok</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Downloads the entire folder from URL.</span>

<span class="sd">    Args:</span>
<span class="sd">        url (str, optional): URL of the Google Drive folder. Must be of the format &#39;https://drive.google.com/drive/folders/{url}&#39;. Defaults to None.</span>
<span class="sd">        id (str, optional): Google Drive&#39;s folder ID. Defaults to None.</span>
<span class="sd">        output (str, optional):  String containing the path of the output folder. Defaults to current working directory.</span>
<span class="sd">        quiet (bool, optional): Suppress terminal output. Defaults to False.</span>
<span class="sd">        proxy (str, optional): Proxy. Defaults to None.</span>
<span class="sd">        speed (float, optional): Download byte size per second (e.g., 256KB/s = 256 * 1024). Defaults to None.</span>
<span class="sd">        use_cookies (bool, optional): Flag to use cookies. Defaults to True.</span>
<span class="sd">        resume (bool, optional): Resume the download from existing tmp file if possible. Defaults to False.</span>

<span class="sd">    Returns:</span>
<span class="sd">        list: List of files downloaded, or None if failed.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">gdown</span>

    <span class="n">files</span> <span class="o">=</span> <span class="n">gdown</span><span class="o">.</span><span class="n">download_folder</span><span class="p">(</span>
        <span class="n">url</span><span class="p">,</span> <span class="nb">id</span><span class="p">,</span> <span class="n">output</span><span class="p">,</span> <span class="n">quiet</span><span class="p">,</span> <span class="n">proxy</span><span class="p">,</span> <span class="n">speed</span><span class="p">,</span> <span class="n">use_cookies</span><span class="p">,</span> <span class="n">remaining_ok</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">files</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.download_from_gdrive" class="doc doc-heading">
<code class="highlight language-python"><span class="n">download_from_gdrive</span><span class="p">(</span><span class="n">gfile_url</span><span class="p">,</span> <span class="n">file_name</span><span class="p">,</span> <span class="n">out_dir</span><span class="o">=</span><span class="s1">&#39;.&#39;</span><span class="p">,</span> <span class="n">unzip</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>


<a href="#geemap.common.download_from_gdrive" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Download a file shared via Google Drive
   (e.g., https://drive.google.com/file/d/18SUo_HcDGltuWYZs1s7PpOmOq_FvFn04/view?usp=sharing)</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>gfile_url</code></td>
        <td><code>str</code></td>
        <td><p>The Google Drive shared file URL</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>file_name</code></td>
        <td><code>str</code></td>
        <td><p>The output file name to use.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>out_dir</code></td>
        <td><code>str</code></td>
        <td><p>The output directory. Defaults to '.'.</p></td>
        <td><code>&#39;.&#39;</code></td>
      </tr>
      <tr>
        <td><code>unzip</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to unzip the output file if it is a zip file. Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
      <tr>
        <td><code>verbose</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to display or not the output of the function</p></td>
        <td><code>True</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">download_from_gdrive</span><span class="p">(</span><span class="n">gfile_url</span><span class="p">,</span> <span class="n">file_name</span><span class="p">,</span> <span class="n">out_dir</span><span class="o">=</span><span class="s2">&quot;.&quot;</span><span class="p">,</span> <span class="n">unzip</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Download a file shared via Google Drive</span>
<span class="sd">       (e.g., https://drive.google.com/file/d/18SUo_HcDGltuWYZs1s7PpOmOq_FvFn04/view?usp=sharing)</span>

<span class="sd">    Args:</span>
<span class="sd">        gfile_url (str): The Google Drive shared file URL</span>
<span class="sd">        file_name (str): The output file name to use.</span>
<span class="sd">        out_dir (str, optional): The output directory. Defaults to &#39;.&#39;.</span>
<span class="sd">        unzip (bool, optional): Whether to unzip the output file if it is a zip file. Defaults to True.</span>
<span class="sd">        verbose (bool, optional): Whether to display or not the output of the function</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="kn">from</span> <span class="nn">google_drive_downloader</span> <span class="kn">import</span> <span class="n">GoogleDriveDownloader</span> <span class="k">as</span> <span class="n">gdd</span>
    <span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
            <span class="s2">&quot;Please install the google_drive_downloader package using `pip install googledrivedownloader`&quot;</span>
        <span class="p">)</span>

    <span class="n">file_id</span> <span class="o">=</span> <span class="n">gfile_url</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)[</span><span class="mi">5</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">verbose</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Google Drive file id: </span><span class="si">{</span><span class="n">file_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="n">dest_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">out_dir</span><span class="p">,</span> <span class="n">file_name</span><span class="p">)</span>
    <span class="n">gdd</span><span class="o">.</span><span class="n">download_file_from_google_drive</span><span class="p">(</span><span class="n">file_id</span><span class="p">,</span> <span class="n">dest_path</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">unzip</span><span class="p">)</span>

    <span class="k">return</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.download_from_url" class="doc doc-heading">
<code class="highlight language-python"><span class="n">download_from_url</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">out_file_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">out_dir</span><span class="o">=</span><span class="s1">&#39;.&#39;</span><span class="p">,</span> <span class="n">unzip</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>


<a href="#geemap.common.download_from_url" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Download a file from a URL (e.g., https://github.com/giswqs/whitebox/raw/master/examples/testdata.zip)</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>url</code></td>
        <td><code>str</code></td>
        <td><p>The HTTP URL to download.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>out_file_name</code></td>
        <td><code>str</code></td>
        <td><p>The output file name to use. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>out_dir</code></td>
        <td><code>str</code></td>
        <td><p>The output directory to use. Defaults to '.'.</p></td>
        <td><code>&#39;.&#39;</code></td>
      </tr>
      <tr>
        <td><code>unzip</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to unzip the downloaded file if it is a zip file. Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
      <tr>
        <td><code>verbose</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to display or not the output of the function</p></td>
        <td><code>True</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">download_from_url</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">out_file_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">out_dir</span><span class="o">=</span><span class="s2">&quot;.&quot;</span><span class="p">,</span> <span class="n">unzip</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Download a file from a URL (e.g., https://github.com/giswqs/whitebox/raw/master/examples/testdata.zip)</span>

<span class="sd">    Args:</span>
<span class="sd">        url (str): The HTTP URL to download.</span>
<span class="sd">        out_file_name (str, optional): The output file name to use. Defaults to None.</span>
<span class="sd">        out_dir (str, optional): The output directory to use. Defaults to &#39;.&#39;.</span>
<span class="sd">        unzip (bool, optional): Whether to unzip the downloaded file if it is a zip file. Defaults to True.</span>
<span class="sd">        verbose (bool, optional): Whether to display or not the output of the function</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">in_file_name</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">out_file_name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">out_file_name</span> <span class="o">=</span> <span class="n">in_file_name</span>
    <span class="n">out_file_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">out_dir</span><span class="p">),</span> <span class="n">out_file_name</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">verbose</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Downloading </span><span class="si">{</span><span class="n">url</span><span class="si">}</span><span class="s2"> ...&quot;</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">urllib</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">urlretrieve</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">out_file_path</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;The URL is invalid. Please double check the URL.&quot;</span><span class="p">)</span>

    <span class="n">final_path</span> <span class="o">=</span> <span class="n">out_file_path</span>

    <span class="k">if</span> <span class="n">unzip</span><span class="p">:</span>
        <span class="c1"># if it is a zip file</span>
        <span class="k">if</span> <span class="s2">&quot;.zip&quot;</span> <span class="ow">in</span> <span class="n">out_file_name</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">verbose</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unzipping </span><span class="si">{</span><span class="n">out_file_name</span><span class="si">}</span><span class="s2"> ...&quot;</span><span class="p">)</span>
            <span class="k">with</span> <span class="n">zipfile</span><span class="o">.</span><span class="n">ZipFile</span><span class="p">(</span><span class="n">out_file_path</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">zip_ref</span><span class="p">:</span>
                <span class="n">zip_ref</span><span class="o">.</span><span class="n">extractall</span><span class="p">(</span><span class="n">out_dir</span><span class="p">)</span>
            <span class="n">final_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
                <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">out_dir</span><span class="p">),</span> <span class="n">out_file_name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;.zip&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
            <span class="p">)</span>

        <span class="c1"># if it is a tar file</span>
        <span class="k">if</span> <span class="s2">&quot;.tar&quot;</span> <span class="ow">in</span> <span class="n">out_file_name</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">verbose</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unzipping </span><span class="si">{</span><span class="n">out_file_name</span><span class="si">}</span><span class="s2"> ...&quot;</span><span class="p">)</span>
            <span class="k">with</span> <span class="n">tarfile</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">out_file_path</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">tar_ref</span><span class="p">:</span>
                <span class="n">tar_ref</span><span class="o">.</span><span class="n">extractall</span><span class="p">(</span><span class="n">out_dir</span><span class="p">)</span>
            <span class="n">final_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
                <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">out_dir</span><span class="p">),</span> <span class="n">out_file_name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;.tar&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
            <span class="p">)</span>

    <span class="k">if</span> <span class="n">verbose</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Data downloaded to: </span><span class="si">{</span><span class="n">final_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">return</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.download_ned" class="doc doc-heading">
<code class="highlight language-python"><span class="n">download_ned</span><span class="p">(</span><span class="n">region</span><span class="p">,</span> <span class="n">out_dir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">return_url</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">download_args</span><span class="o">=</span><span class="p">{},</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.common.download_ned" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Download the US National Elevation Datasets (NED) for a region.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>region</code></td>
        <td><code>str | list</code></td>
        <td><p>A filepath to a vector dataset or a list of bounds in the form of [minx, miny, maxx, maxy].</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>out_dir</code></td>
        <td><code>str</code></td>
        <td><p>The directory to download the files to. Defaults to None, which uses the current working directory.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>return_url</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to return the download URLs of the files. Defaults to False.</p></td>
        <td><code>False</code></td>
      </tr>
      <tr>
        <td><code>download_args</code></td>
        <td><code>dict</code></td>
        <td><p>A dictionary of arguments to pass to the download_file function. Defaults to {}.</p></td>
        <td><code>{}</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>list</code></td>
      <td><p>A list of the download URLs of the files if return_url is True.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">download_ned</span><span class="p">(</span><span class="n">region</span><span class="p">,</span> <span class="n">out_dir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">return_url</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">download_args</span><span class="o">=</span><span class="p">{},</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Download the US National Elevation Datasets (NED) for a region.</span>

<span class="sd">    Args:</span>
<span class="sd">        region (str | list): A filepath to a vector dataset or a list of bounds in the form of [minx, miny, maxx, maxy].</span>
<span class="sd">        out_dir (str, optional): The directory to download the files to. Defaults to None, which uses the current working directory.</span>
<span class="sd">        return_url (bool, optional): Whether to return the download URLs of the files. Defaults to False.</span>
<span class="sd">        download_args (dict, optional): A dictionary of arguments to pass to the download_file function. Defaults to {}.</span>

<span class="sd">    Returns:</span>
<span class="sd">        list: A list of the download URLs of the files if return_url is True.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">geopandas</span> <span class="k">as</span> <span class="nn">gpd</span>

    <span class="k">if</span> <span class="n">out_dir</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">out_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">out_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">out_dir</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">region</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">region</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;http&quot;</span><span class="p">):</span>
            <span class="n">region</span> <span class="o">=</span> <span class="n">github_raw_url</span><span class="p">(</span><span class="n">region</span><span class="p">)</span>
            <span class="n">region</span> <span class="o">=</span> <span class="n">download_file</span><span class="p">(</span><span class="n">region</span><span class="p">)</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">region</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;region must be a path or a URL to a vector dataset.&quot;</span><span class="p">)</span>

        <span class="n">roi</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">region</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">roi</span> <span class="o">=</span> <span class="n">roi</span><span class="o">.</span><span class="n">to_crs</span><span class="p">(</span><span class="n">epsg</span><span class="o">=</span><span class="mi">4326</span><span class="p">)</span>
        <span class="n">bounds</span> <span class="o">=</span> <span class="n">roi</span><span class="o">.</span><span class="n">total_bounds</span>

    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">region</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
        <span class="n">bounds</span> <span class="o">=</span> <span class="n">region</span>

    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="s2">&quot;region must be a filepath or a list of bounds in the form of [minx, miny, maxx, maxy].&quot;</span>
        <span class="p">)</span>
    <span class="n">minx</span><span class="p">,</span> <span class="n">miny</span><span class="p">,</span> <span class="n">maxx</span><span class="p">,</span> <span class="n">maxy</span> <span class="o">=</span> <span class="p">[</span><span class="nb">float</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">bounds</span><span class="p">]</span>
    <span class="n">tiles</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">left</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="n">minx</span><span class="p">))</span>
    <span class="n">right</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="n">maxx</span><span class="p">))</span> <span class="o">-</span> <span class="mi">1</span>
    <span class="n">upper</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="n">maxy</span><span class="p">)</span>
    <span class="n">bottom</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="n">miny</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>

    <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">upper</span><span class="p">,</span> <span class="n">bottom</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">):</span>
            <span class="n">tile_id</span> <span class="o">=</span> <span class="s2">&quot;n</span><span class="si">{}</span><span class="s2">w</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">y</span><span class="p">)</span><span class="o">.</span><span class="n">zfill</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">zfill</span><span class="p">(</span><span class="mi">3</span><span class="p">))</span>
            <span class="n">tiles</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tile_id</span><span class="p">)</span>

    <span class="n">links</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">filepaths</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">tile</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">tiles</span><span class="p">):</span>
        <span class="n">tif_url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;https://prd-tnm.s3.amazonaws.com/StagedProducts/Elevation/13/TIFF/current/</span><span class="si">{</span><span class="n">tile</span><span class="si">}</span><span class="s2">/USGS_13_</span><span class="si">{</span><span class="n">tile</span><span class="si">}</span><span class="s2">.tif&quot;</span>

        <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="n">tif_url</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">r</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
            <span class="n">tif</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">out_dir</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">tif_url</span><span class="p">))</span>
            <span class="n">links</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tif_url</span><span class="p">)</span>
            <span class="n">filepaths</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tif</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">tif_url</span><span class="si">}</span><span class="s2"> does not exist.&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">return_url</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">links</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">link</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">links</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Downloading </span><span class="si">{</span><span class="n">index</span> <span class="o">+</span> <span class="mi">1</span><span class="si">}</span><span class="s2"> of </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">links</span><span class="p">)</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">link</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">download_file</span><span class="p">(</span><span class="n">link</span><span class="p">,</span> <span class="n">filepaths</span><span class="p">[</span><span class="n">index</span><span class="p">],</span> <span class="o">**</span><span class="n">download_args</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.dynamic_world" class="doc doc-heading">
<code class="highlight language-python"><span class="n">dynamic_world</span><span class="p">(</span><span class="n">region</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">start_date</span><span class="o">=</span><span class="s1">&#39;2020-01-01&#39;</span><span class="p">,</span> <span class="n">end_date</span><span class="o">=</span><span class="s1">&#39;2021-01-01&#39;</span><span class="p">,</span> <span class="n">clip</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">reducer</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">projection</span><span class="o">=</span><span class="s1">&#39;EPSG:3857&#39;</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">return_type</span><span class="o">=</span><span class="s1">&#39;hillshade&#39;</span><span class="p">)</span></code>


<a href="#geemap.common.dynamic_world" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Create 10-m land cover composite based on Dynamic World. The source code is adapted from the following tutorial by Spatial Thoughts:
https://developers.google.com/earth-engine/tutorials/community/introduction-to-dynamic-world-pt-1</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>region</code></td>
        <td><code>ee.Geometry | ee.FeatureCollection</code></td>
        <td><p>The region of interest.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>start_date</code></td>
        <td><code>str | ee.Date</code></td>
        <td><p>The start date of the query. Default to "2020-01-01".</p></td>
        <td><code>&#39;2020-01-01&#39;</code></td>
      </tr>
      <tr>
        <td><code>end_date</code></td>
        <td><code>str | ee.Date</code></td>
        <td><p>The end date of the query. Default to "2021-01-01".</p></td>
        <td><code>&#39;2021-01-01&#39;</code></td>
      </tr>
      <tr>
        <td><code>clip</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to clip the image to the region. Default to False.</p></td>
        <td><code>False</code></td>
      </tr>
      <tr>
        <td><code>reducer</code></td>
        <td><code>ee.Reducer</code></td>
        <td><p>The reducer to be used. Default to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>projection</code></td>
        <td><code>str</code></td>
        <td><p>The projection to be used for creating hillshade. Default to "EPSG:3857".</p></td>
        <td><code>&#39;EPSG:3857&#39;</code></td>
      </tr>
      <tr>
        <td><code>scale</code></td>
        <td><code>int</code></td>
        <td><p>The scale to be used for creating hillshade. Default to 10.</p></td>
        <td><code>10</code></td>
      </tr>
      <tr>
        <td><code>return_type</code></td>
        <td><code>str</code></td>
        <td><p>The type of image to be returned. Can be one of 'hillshade', 'visualize', 'class', or 'probability'. Default to "hillshade".</p></td>
        <td><code>&#39;hillshade&#39;</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>ee.Image</code></td>
      <td><p>The image with the specified return_type.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">dynamic_world</span><span class="p">(</span>
    <span class="n">region</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">start_date</span><span class="o">=</span><span class="s2">&quot;2020-01-01&quot;</span><span class="p">,</span>
    <span class="n">end_date</span><span class="o">=</span><span class="s2">&quot;2021-01-01&quot;</span><span class="p">,</span>
    <span class="n">clip</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">reducer</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">projection</span><span class="o">=</span><span class="s2">&quot;EPSG:3857&quot;</span><span class="p">,</span>
    <span class="n">scale</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
    <span class="n">return_type</span><span class="o">=</span><span class="s2">&quot;hillshade&quot;</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Create 10-m land cover composite based on Dynamic World. The source code is adapted from the following tutorial by Spatial Thoughts:</span>
<span class="sd">    https://developers.google.com/earth-engine/tutorials/community/introduction-to-dynamic-world-pt-1</span>

<span class="sd">    Args:</span>
<span class="sd">        region (ee.Geometry | ee.FeatureCollection): The region of interest.</span>
<span class="sd">        start_date (str | ee.Date): The start date of the query. Default to &quot;2020-01-01&quot;.</span>
<span class="sd">        end_date (str | ee.Date): The end date of the query. Default to &quot;2021-01-01&quot;.</span>
<span class="sd">        clip (bool, optional): Whether to clip the image to the region. Default to False.</span>
<span class="sd">        reducer (ee.Reducer, optional): The reducer to be used. Default to None.</span>
<span class="sd">        projection (str, optional): The projection to be used for creating hillshade. Default to &quot;EPSG:3857&quot;.</span>
<span class="sd">        scale (int, optional): The scale to be used for creating hillshade. Default to 10.</span>
<span class="sd">        return_type (str, optional): The type of image to be returned. Can be one of &#39;hillshade&#39;, &#39;visualize&#39;, &#39;class&#39;, or &#39;probability&#39;. Default to &quot;hillshade&quot;.</span>

<span class="sd">    Returns:</span>
<span class="sd">        ee.Image: The image with the specified return_type.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">return_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;hillshade&quot;</span><span class="p">,</span> <span class="s2">&quot;visualize&quot;</span><span class="p">,</span> <span class="s2">&quot;class&quot;</span><span class="p">,</span> <span class="s2">&quot;probability&quot;</span><span class="p">]:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">return_type</span><span class="si">}</span><span class="s2"> must be one of &#39;hillshade&#39;, &#39;visualize&#39;, &#39;class&#39;, or &#39;probability&#39;.&quot;</span>
        <span class="p">)</span>

    <span class="k">if</span> <span class="n">reducer</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">reducer</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">mode</span><span class="p">()</span>

    <span class="n">dw</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">(</span><span class="s2">&quot;GOOGLE/DYNAMICWORLD/V1&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span>
        <span class="n">ee</span><span class="o">.</span><span class="n">Filter</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="n">start_date</span><span class="p">,</span> <span class="n">end_date</span><span class="p">)</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">region</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">region</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Geometry</span><span class="p">):</span>
        <span class="n">dw</span> <span class="o">=</span> <span class="n">dw</span><span class="o">.</span><span class="n">filterBounds</span><span class="p">(</span><span class="n">region</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;region must be an ee.FeatureCollection or ee.Geometry.&quot;</span><span class="p">)</span>

    <span class="c1"># Create a Mode Composite</span>
    <span class="n">classification</span> <span class="o">=</span> <span class="n">dw</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;label&quot;</span><span class="p">)</span>
    <span class="n">dwComposite</span> <span class="o">=</span> <span class="n">classification</span><span class="o">.</span><span class="n">reduce</span><span class="p">(</span><span class="n">reducer</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">clip</span> <span class="ow">and</span> <span class="p">(</span><span class="n">region</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">region</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Geometry</span><span class="p">):</span>
            <span class="n">dwComposite</span> <span class="o">=</span> <span class="n">dwComposite</span><span class="o">.</span><span class="n">clip</span><span class="p">(</span><span class="n">region</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">region</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">):</span>
            <span class="n">dwComposite</span> <span class="o">=</span> <span class="n">dwComposite</span><span class="o">.</span><span class="n">clipToCollection</span><span class="p">(</span><span class="n">region</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">region</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Feature</span><span class="p">):</span>
            <span class="n">dwComposite</span> <span class="o">=</span> <span class="n">dwComposite</span><span class="o">.</span><span class="n">clip</span><span class="p">(</span><span class="n">region</span><span class="o">.</span><span class="n">geometry</span><span class="p">())</span>

    <span class="n">dwVisParams</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;min&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">&quot;max&quot;</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span>
        <span class="s2">&quot;palette&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="s2">&quot;#419BDF&quot;</span><span class="p">,</span>
            <span class="s2">&quot;#397D49&quot;</span><span class="p">,</span>
            <span class="s2">&quot;#88B053&quot;</span><span class="p">,</span>
            <span class="s2">&quot;#7A87C6&quot;</span><span class="p">,</span>
            <span class="s2">&quot;#E49635&quot;</span><span class="p">,</span>
            <span class="s2">&quot;#DFC35A&quot;</span><span class="p">,</span>
            <span class="s2">&quot;#C4281B&quot;</span><span class="p">,</span>
            <span class="s2">&quot;#A59B8F&quot;</span><span class="p">,</span>
            <span class="s2">&quot;#B39FE1&quot;</span><span class="p">,</span>
        <span class="p">],</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="n">return_type</span> <span class="o">==</span> <span class="s2">&quot;class&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">dwComposite</span>
    <span class="k">elif</span> <span class="n">return_type</span> <span class="o">==</span> <span class="s2">&quot;visualize&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">dwComposite</span><span class="o">.</span><span class="n">visualize</span><span class="p">(</span><span class="o">**</span><span class="n">dwVisParams</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># Create a Top-1 Probability Hillshade Visualization</span>
        <span class="n">probabilityBands</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">&quot;water&quot;</span><span class="p">,</span>
            <span class="s2">&quot;trees&quot;</span><span class="p">,</span>
            <span class="s2">&quot;grass&quot;</span><span class="p">,</span>
            <span class="s2">&quot;flooded_vegetation&quot;</span><span class="p">,</span>
            <span class="s2">&quot;crops&quot;</span><span class="p">,</span>
            <span class="s2">&quot;shrub_and_scrub&quot;</span><span class="p">,</span>
            <span class="s2">&quot;built&quot;</span><span class="p">,</span>
            <span class="s2">&quot;bare&quot;</span><span class="p">,</span>
            <span class="s2">&quot;snow_and_ice&quot;</span><span class="p">,</span>
        <span class="p">]</span>

        <span class="c1"># Select probability bands</span>
        <span class="n">probabilityCol</span> <span class="o">=</span> <span class="n">dw</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">probabilityBands</span><span class="p">)</span>

        <span class="c1"># Create a multi-band image with the average pixel-wise probability</span>
        <span class="c1"># for each band across the time-period</span>
        <span class="n">meanProbability</span> <span class="o">=</span> <span class="n">probabilityCol</span><span class="o">.</span><span class="n">reduce</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">mean</span><span class="p">())</span>

        <span class="c1"># Composites have a default projection that is not suitable</span>
        <span class="c1"># for hillshade computation.</span>
        <span class="c1"># Set a EPSG:3857 projection with 10m scale</span>
        <span class="n">proj</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Projection</span><span class="p">(</span><span class="n">projection</span><span class="p">)</span><span class="o">.</span><span class="n">atScale</span><span class="p">(</span><span class="n">scale</span><span class="p">)</span>
        <span class="n">meanProbability</span> <span class="o">=</span> <span class="n">meanProbability</span><span class="o">.</span><span class="n">setDefaultProjection</span><span class="p">(</span><span class="n">proj</span><span class="p">)</span>

        <span class="c1"># Create the Top1 Probability Hillshade</span>
        <span class="n">top1Probability</span> <span class="o">=</span> <span class="n">meanProbability</span><span class="o">.</span><span class="n">reduce</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">max</span><span class="p">())</span>

        <span class="k">if</span> <span class="n">clip</span> <span class="ow">and</span> <span class="p">(</span><span class="n">region</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">region</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Geometry</span><span class="p">):</span>
                <span class="n">top1Probability</span> <span class="o">=</span> <span class="n">top1Probability</span><span class="o">.</span><span class="n">clip</span><span class="p">(</span><span class="n">region</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">region</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">):</span>
                <span class="n">top1Probability</span> <span class="o">=</span> <span class="n">top1Probability</span><span class="o">.</span><span class="n">clipToCollection</span><span class="p">(</span><span class="n">region</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">region</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Feature</span><span class="p">):</span>
                <span class="n">top1Probability</span> <span class="o">=</span> <span class="n">top1Probability</span><span class="o">.</span><span class="n">clip</span><span class="p">(</span><span class="n">region</span><span class="o">.</span><span class="n">geometry</span><span class="p">())</span>

        <span class="k">if</span> <span class="n">return_type</span> <span class="o">==</span> <span class="s2">&quot;probability&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">top1Probability</span>
        <span class="k">else</span><span class="p">:</span>

            <span class="n">top1Confidence</span> <span class="o">=</span> <span class="n">top1Probability</span><span class="o">.</span><span class="n">multiply</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span><span class="o">.</span><span class="n">int</span><span class="p">()</span>
            <span class="n">hillshade</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Terrain</span><span class="o">.</span><span class="n">hillshade</span><span class="p">(</span><span class="n">top1Confidence</span><span class="p">)</span><span class="o">.</span><span class="n">divide</span><span class="p">(</span><span class="mi">255</span><span class="p">)</span>
            <span class="n">rgbImage</span> <span class="o">=</span> <span class="n">dwComposite</span><span class="o">.</span><span class="n">visualize</span><span class="p">(</span><span class="o">**</span><span class="n">dwVisParams</span><span class="p">)</span><span class="o">.</span><span class="n">divide</span><span class="p">(</span><span class="mi">255</span><span class="p">)</span>
            <span class="n">probabilityHillshade</span> <span class="o">=</span> <span class="n">rgbImage</span><span class="o">.</span><span class="n">multiply</span><span class="p">(</span><span class="n">hillshade</span><span class="p">)</span>

            <span class="k">return</span> <span class="n">probabilityHillshade</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.dynamic_world_s2" class="doc doc-heading">
<code class="highlight language-python"><span class="n">dynamic_world_s2</span><span class="p">(</span><span class="n">region</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">start_date</span><span class="o">=</span><span class="s1">&#39;2020-01-01&#39;</span><span class="p">,</span> <span class="n">end_date</span><span class="o">=</span><span class="s1">&#39;2021-01-01&#39;</span><span class="p">,</span> <span class="n">clip</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">cloud_pct</span><span class="o">=</span><span class="mf">0.35</span><span class="p">,</span> <span class="n">reducer</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


<a href="#geemap.common.dynamic_world_s2" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Create Sentinel-2 composite for the Dynamic World Land Cover product.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>region</code></td>
        <td><code>ee.Geometry | ee.FeatureCollection</code></td>
        <td><p>The region of interest. Default to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>start_date</code></td>
        <td><code>str | ee.Date</code></td>
        <td><p>The start date of the query. Default to "2020-01-01".</p></td>
        <td><code>&#39;2020-01-01&#39;</code></td>
      </tr>
      <tr>
        <td><code>end_date</code></td>
        <td><code>str | ee.Date</code></td>
        <td><p>The end date of the query. Default to "2021-01-01".</p></td>
        <td><code>&#39;2021-01-01&#39;</code></td>
      </tr>
      <tr>
        <td><code>clip</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to clip the image to the region. Default to False.</p></td>
        <td><code>False</code></td>
      </tr>
      <tr>
        <td><code>cloud_pct</code></td>
        <td><code>float</code></td>
        <td><p>The percentage of cloud cover to be used for filtering. Default to 0.35.</p></td>
        <td><code>0.35</code></td>
      </tr>
      <tr>
        <td><code>reducer</code></td>
        <td><code>ee.Reducer</code></td>
        <td><p>The reducer to be used for creating image composite. Default to None.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>ee.Image</code></td>
      <td><p>The Sentinel-2 composite.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">dynamic_world_s2</span><span class="p">(</span>
    <span class="n">region</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">start_date</span><span class="o">=</span><span class="s2">&quot;2020-01-01&quot;</span><span class="p">,</span>
    <span class="n">end_date</span><span class="o">=</span><span class="s2">&quot;2021-01-01&quot;</span><span class="p">,</span>
    <span class="n">clip</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">cloud_pct</span><span class="o">=</span><span class="mf">0.35</span><span class="p">,</span>
    <span class="n">reducer</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Create Sentinel-2 composite for the Dynamic World Land Cover product.</span>

<span class="sd">    Args:</span>
<span class="sd">        region (ee.Geometry | ee.FeatureCollection): The region of interest. Default to None.</span>
<span class="sd">        start_date (str | ee.Date): The start date of the query. Default to &quot;2020-01-01&quot;.</span>
<span class="sd">        end_date (str | ee.Date): The end date of the query. Default to &quot;2021-01-01&quot;.</span>
<span class="sd">        clip (bool, optional): Whether to clip the image to the region. Default to False.</span>
<span class="sd">        cloud_pct (float, optional): The percentage of cloud cover to be used for filtering. Default to 0.35.</span>
<span class="sd">        reducer (ee.Reducer, optional): The reducer to be used for creating image composite. Default to None.</span>

<span class="sd">    Returns:</span>
<span class="sd">        ee.Image: The Sentinel-2 composite.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">s2</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">(</span><span class="s2">&quot;COPERNICUS/S2_HARMONIZED&quot;</span><span class="p">)</span>
        <span class="o">.</span><span class="n">filterDate</span><span class="p">(</span><span class="n">start_date</span><span class="p">,</span> <span class="n">end_date</span><span class="p">)</span>
        <span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">Filter</span><span class="o">.</span><span class="n">lt</span><span class="p">(</span><span class="s2">&quot;CLOUDY_PIXEL_PERCENTAGE&quot;</span><span class="p">,</span> <span class="n">cloud_pct</span> <span class="o">*</span> <span class="mi">100</span><span class="p">))</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">region</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">region</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Geometry</span><span class="p">):</span>
        <span class="n">s2</span> <span class="o">=</span> <span class="n">s2</span><span class="o">.</span><span class="n">filterBounds</span><span class="p">(</span><span class="n">region</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;region must be an ee.FeatureCollection or ee.Geometry.&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">reducer</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">reducer</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">median</span><span class="p">()</span>

    <span class="n">image</span> <span class="o">=</span> <span class="n">s2</span><span class="o">.</span><span class="n">reduce</span><span class="p">(</span><span class="n">reducer</span><span class="p">)</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">s2</span><span class="o">.</span><span class="n">first</span><span class="p">()</span><span class="o">.</span><span class="n">bandNames</span><span class="p">())</span>

    <span class="k">if</span> <span class="n">clip</span> <span class="ow">and</span> <span class="p">(</span><span class="n">region</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">region</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Geometry</span><span class="p">):</span>
            <span class="n">image</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">clip</span><span class="p">(</span><span class="n">region</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">region</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">):</span>
            <span class="n">image</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">clipToCollection</span><span class="p">(</span><span class="n">region</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">image</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.edit_download_html" class="doc doc-heading">
<code class="highlight language-python"><span class="n">edit_download_html</span><span class="p">(</span><span class="n">htmlWidget</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Click here to download: &#39;</span><span class="p">)</span></code>


<a href="#geemap.common.edit_download_html" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Downloads a file from voila. Adopted from https://github.com/voila-dashboards/voila/issues/578#issuecomment-617668058</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>htmlWidget</code></td>
        <td><code>object</code></td>
        <td><p>The HTML widget to display the URL.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>filename</code></td>
        <td><code>str</code></td>
        <td><p>File path to download.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>title</code></td>
        <td><code>str</code></td>
        <td><p>Download description. Defaults to "Click here to download: ".</p></td>
        <td><code>&#39;Click here to download: &#39;</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">edit_download_html</span><span class="p">(</span><span class="n">htmlWidget</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Click here to download: &quot;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Downloads a file from voila. Adopted from https://github.com/voila-dashboards/voila/issues/578#issuecomment-617668058</span>

<span class="sd">    Args:</span>
<span class="sd">        htmlWidget (object): The HTML widget to display the URL.</span>
<span class="sd">        filename (str): File path to download.</span>
<span class="sd">        title (str, optional): Download description. Defaults to &quot;Click here to download: &quot;.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># from IPython.display import HTML</span>
    <span class="c1"># import ipywidgets as widgets</span>
    <span class="kn">import</span> <span class="nn">base64</span>

    <span class="c1"># Change widget html temporarily to a font-awesome spinner</span>
    <span class="n">htmlWidget</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s1">&#39;&lt;i class=&quot;fa fa-spinner fa-spin fa-2x fa-fw&quot;&gt;&lt;/i&gt;&lt;span class=&quot;sr-only&quot;&gt;Loading...&lt;/span&gt;&#39;</span>

    <span class="c1"># Process raw data</span>
    <span class="n">data</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s2">&quot;rb&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
    <span class="n">b64</span> <span class="o">=</span> <span class="n">base64</span><span class="o">.</span><span class="n">b64encode</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="n">b64</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span>

    <span class="n">basename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>

    <span class="c1"># Create and assign html to widget</span>
    <span class="n">html</span> <span class="o">=</span> <span class="s1">&#39;&lt;a download=&quot;</span><span class="si">{filename}</span><span class="s1">&quot; href=&quot;data:text/csv;base64,</span><span class="si">{payload}</span><span class="s1">&quot; target=&quot;_blank&quot;&gt;</span><span class="si">{title}</span><span class="s1">&lt;/a&gt;&#39;</span>
    <span class="n">htmlWidget</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
        <span class="n">payload</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="n">title</span> <span class="o">+</span> <span class="n">basename</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="n">basename</span>
    <span class="p">)</span>

    <span class="c1"># htmlWidget = widgets.HTML(value = &#39;&#39;)</span>
    <span class="c1"># htmlWidget</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.ee_api_to_csv" class="doc doc-heading">
<code class="highlight language-python"><span class="n">ee_api_to_csv</span><span class="p">(</span><span class="n">outfile</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="n">proxies</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


<a href="#geemap.common.ee_api_to_csv" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Extracts Earth Engine API documentation from https://developers.google.com/earth-engine/api_docs as a csv file.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>outfile</code></td>
        <td><code>str</code></td>
        <td><p>The output file path to a csv file. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>timeout</code></td>
        <td><code>int</code></td>
        <td><p>Timeout in seconds. Defaults to 300.</p></td>
        <td><code>300</code></td>
      </tr>
      <tr>
        <td><code>proxies</code></td>
        <td><code>dict</code></td>
        <td><p>Proxy settings. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">ee_api_to_csv</span><span class="p">(</span><span class="n">outfile</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="n">proxies</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Extracts Earth Engine API documentation from https://developers.google.com/earth-engine/api_docs as a csv file.</span>

<span class="sd">    Args:</span>
<span class="sd">        outfile (str, optional): The output file path to a csv file. Defaults to None.</span>
<span class="sd">        timeout (int, optional): Timeout in seconds. Defaults to 300.</span>
<span class="sd">        proxies (dict, optional): Proxy settings. Defaults to None.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">pkg_resources</span>

    <span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>

    <span class="n">pkg_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">pkg_resources</span><span class="o">.</span><span class="n">resource_filename</span><span class="p">(</span><span class="s2">&quot;geemap&quot;</span><span class="p">,</span> <span class="s2">&quot;geemap.py&quot;</span><span class="p">))</span>
    <span class="n">data_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">pkg_dir</span><span class="p">,</span> <span class="s2">&quot;data&quot;</span><span class="p">)</span>
    <span class="n">template_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">data_dir</span><span class="p">,</span> <span class="s2">&quot;template&quot;</span><span class="p">)</span>
    <span class="n">csv_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">template_dir</span><span class="p">,</span> <span class="s2">&quot;ee_api_docs.csv&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">outfile</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">outfile</span> <span class="o">=</span> <span class="n">csv_file</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">outfile</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.csv&quot;</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The output file must end with .csv&quot;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">out_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">outfile</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">out_dir</span><span class="p">):</span>
                <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">out_dir</span><span class="p">)</span>

    <span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;https://developers.google.com/earth-engine/api_docs&quot;</span>

    <span class="k">try</span><span class="p">:</span>

        <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span> <span class="n">proxies</span><span class="o">=</span><span class="n">proxies</span><span class="p">)</span>
        <span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">content</span><span class="p">,</span> <span class="s2">&quot;html.parser&quot;</span><span class="p">)</span>

        <span class="n">names</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">descriptions</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">functions</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">returns</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">arguments</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">types</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">details</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="n">names</span> <span class="o">=</span> <span class="p">[</span><span class="n">h2</span><span class="o">.</span><span class="n">text</span> <span class="k">for</span> <span class="n">h2</span> <span class="ow">in</span> <span class="n">soup</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s2">&quot;h2&quot;</span><span class="p">)]</span>
        <span class="n">descriptions</span> <span class="o">=</span> <span class="p">[</span><span class="n">h2</span><span class="o">.</span><span class="n">next_sibling</span><span class="o">.</span><span class="n">next_sibling</span><span class="o">.</span><span class="n">text</span> <span class="k">for</span> <span class="n">h2</span> <span class="ow">in</span> <span class="n">soup</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s2">&quot;h2&quot;</span><span class="p">)]</span>
        <span class="n">func_tables</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s2">&quot;table&quot;</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;blue&quot;</span><span class="p">)</span>
        <span class="n">functions</span> <span class="o">=</span> <span class="p">[</span><span class="n">func_table</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;code&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span> <span class="k">for</span> <span class="n">func_table</span> <span class="ow">in</span> <span class="n">func_tables</span><span class="p">]</span>
        <span class="n">returns</span> <span class="o">=</span> <span class="p">[</span><span class="n">func_table</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s2">&quot;td&quot;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">text</span> <span class="k">for</span> <span class="n">func_table</span> <span class="ow">in</span> <span class="n">func_tables</span><span class="p">]</span>

        <span class="n">detail_tables</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">tables</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s2">&quot;table&quot;</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;blue&quot;</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">table</span> <span class="ow">in</span> <span class="n">tables</span><span class="p">:</span>
            <span class="n">item</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">next_sibling</span>
            <span class="k">if</span> <span class="n">item</span><span class="o">.</span><span class="n">attrs</span> <span class="o">==</span> <span class="p">{</span><span class="s2">&quot;class&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;details&quot;</span><span class="p">]}:</span>
                <span class="n">detail_tables</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">detail_tables</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">detail_table</span> <span class="ow">in</span> <span class="n">detail_tables</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">detail_table</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
                <span class="n">items</span> <span class="o">=</span> <span class="p">[</span><span class="n">item</span><span class="o">.</span><span class="n">text</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">detail_table</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s2">&quot;code&quot;</span><span class="p">)]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">items</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
            <span class="n">arguments</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">items</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">detail_table</span> <span class="ow">in</span> <span class="n">detail_tables</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">detail_table</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
                <span class="n">items</span> <span class="o">=</span> <span class="p">[</span><span class="n">item</span><span class="o">.</span><span class="n">text</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">detail_table</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s2">&quot;td&quot;</span><span class="p">)]</span>
                <span class="n">items</span> <span class="o">=</span> <span class="n">items</span><span class="p">[</span><span class="mi">1</span><span class="p">::</span><span class="mi">3</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">items</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
            <span class="n">types</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">items</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">detail_table</span> <span class="ow">in</span> <span class="n">detail_tables</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">detail_table</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
                <span class="n">items</span> <span class="o">=</span> <span class="p">[</span><span class="n">item</span><span class="o">.</span><span class="n">text</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">detail_table</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s2">&quot;p&quot;</span><span class="p">)]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">items</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
            <span class="n">details</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">items</span><span class="p">)</span>

        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">outfile</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">csv_file</span><span class="p">:</span>
            <span class="n">csv_writer</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">writer</span><span class="p">(</span><span class="n">csv_file</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="n">csv_writer</span><span class="o">.</span><span class="n">writerow</span><span class="p">(</span>
                <span class="p">[</span>
                    <span class="s2">&quot;name&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;description&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;function&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;returns&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;argument&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;type&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;details&quot;</span><span class="p">,</span>
                <span class="p">]</span>
            <span class="p">)</span>

            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">names</span><span class="p">)):</span>
                <span class="n">name</span> <span class="o">=</span> <span class="n">names</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                <span class="n">description</span> <span class="o">=</span> <span class="n">descriptions</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                <span class="n">function</span> <span class="o">=</span> <span class="n">functions</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                <span class="n">return_type</span> <span class="o">=</span> <span class="n">returns</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                <span class="n">argument</span> <span class="o">=</span> <span class="s2">&quot;|&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">arguments</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
                <span class="n">argu_type</span> <span class="o">=</span> <span class="s2">&quot;|&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">types</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
                <span class="n">detail</span> <span class="o">=</span> <span class="s2">&quot;|&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">details</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>

                <span class="n">csv_writer</span><span class="o">.</span><span class="n">writerow</span><span class="p">(</span>
                    <span class="p">[</span>
                        <span class="n">name</span><span class="p">,</span>
                        <span class="n">description</span><span class="p">,</span>
                        <span class="n">function</span><span class="p">,</span>
                        <span class="n">return_type</span><span class="p">,</span>
                        <span class="n">argument</span><span class="p">,</span>
                        <span class="n">argu_type</span><span class="p">,</span>
                        <span class="n">detail</span><span class="p">,</span>
                    <span class="p">]</span>
                <span class="p">)</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.ee_data_html" class="doc doc-heading">
<code class="highlight language-python"><span class="n">ee_data_html</span><span class="p">(</span><span class="n">asset</span><span class="p">)</span></code>


<a href="#geemap.common.ee_data_html" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Generates HTML from an asset to be used in the HTML widget.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>asset</code></td>
        <td><code>dict</code></td>
        <td><p>A dictionary containing an Earth Engine asset.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>str</code></td>
      <td><p>A string containing HTML.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">ee_data_html</span><span class="p">(</span><span class="n">asset</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Generates HTML from an asset to be used in the HTML widget.</span>

<span class="sd">    Args:</span>
<span class="sd">        asset (dict): A dictionary containing an Earth Engine asset.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: A string containing HTML.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">asset_title</span> <span class="o">=</span> <span class="n">asset</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;title&quot;</span><span class="p">,</span> <span class="s2">&quot;Unknown&quot;</span><span class="p">)</span>
        <span class="n">asset_dates</span> <span class="o">=</span> <span class="n">asset</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;dates&quot;</span><span class="p">,</span> <span class="s2">&quot;Unknown&quot;</span><span class="p">)</span>
        <span class="n">ee_id_snippet</span> <span class="o">=</span> <span class="n">asset</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="s2">&quot;Unknown&quot;</span><span class="p">)</span>
        <span class="n">asset_uid</span> <span class="o">=</span> <span class="n">asset</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;uid&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="n">asset_url</span> <span class="o">=</span> <span class="n">asset</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;asset_url&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
        <span class="n">code_url</span> <span class="o">=</span> <span class="n">asset</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;sample_code&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="n">thumbnail_url</span> <span class="o">=</span> <span class="n">asset</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;thumbnail_url&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="n">asset_type</span> <span class="o">=</span> <span class="n">asset</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;type&quot;</span><span class="p">,</span> <span class="s2">&quot;Unknown&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">asset_type</span> <span class="o">==</span> <span class="s2">&quot;image&quot;</span><span class="p">:</span>
            <span class="n">ee_id_snippet</span> <span class="o">=</span> <span class="s2">&quot;ee.Image(&#39;</span><span class="si">{}</span><span class="s2">&#39;)&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ee_id_snippet</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">asset_type</span> <span class="o">==</span> <span class="s2">&quot;image_collection&quot;</span><span class="p">:</span>
            <span class="n">ee_id_snippet</span> <span class="o">=</span> <span class="s2">&quot;ee.ImageCollection(&#39;</span><span class="si">{}</span><span class="s2">&#39;)&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ee_id_snippet</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">asset_type</span> <span class="o">==</span> <span class="s2">&quot;table&quot;</span><span class="p">:</span>
            <span class="n">ee_id_snippet</span> <span class="o">=</span> <span class="s2">&quot;ee.FeatureCollection(&#39;</span><span class="si">{}</span><span class="s2">&#39;)&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ee_id_snippet</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">code_url</span> <span class="ow">and</span> <span class="n">asset_uid</span><span class="p">:</span>
            <span class="n">coder_url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;https://code.earthengine.google.com/?scriptPath=Examples%3ADatasets%2F</span><span class="si">{</span><span class="n">asset_uid</span><span class="si">}</span><span class="s2">&quot;&quot;&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">coder_url</span> <span class="o">=</span> <span class="n">code_url</span>

        <span class="c1">## ee datasets always have a asset_url, and should have a thumbnail</span>
        <span class="n">catalog</span> <span class="o">=</span> <span class="p">(</span>
            <span class="nb">bool</span><span class="p">(</span><span class="n">asset_url</span><span class="p">)</span>
            <span class="o">*</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">                    &lt;h4&gt;Data Catalog&lt;/h4&gt;</span>
<span class="s2">                        &lt;p style=&quot;margin-left: 40px&quot;&gt;&lt;a href=&quot;</span><span class="si">{</span><span class="n">asset_url</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;terms-of-use&#39;</span><span class="p">,</span><span class="s1">&#39;description&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot; target=&quot;_blank&quot;&gt;Description&lt;/a&gt;&lt;/p&gt;</span>
<span class="s2">                        &lt;p style=&quot;margin-left: 40px&quot;&gt;&lt;a href=&quot;</span><span class="si">{</span><span class="n">asset_url</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;terms-of-use&#39;</span><span class="p">,</span><span class="s1">&#39;bands&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot; target=&quot;_blank&quot;&gt;Bands&lt;/a&gt;&lt;/p&gt;</span>
<span class="s2">                        &lt;p style=&quot;margin-left: 40px&quot;&gt;&lt;a href=&quot;</span><span class="si">{</span><span class="n">asset_url</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;terms-of-use&#39;</span><span class="p">,</span><span class="s1">&#39;image-properties&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot; target=&quot;_blank&quot;&gt;Properties&lt;/a&gt;&lt;/p&gt;</span>
<span class="s2">                        &lt;p style=&quot;margin-left: 40px&quot;&gt;&lt;a href=&quot;</span><span class="si">{</span><span class="n">coder_url</span><span class="si">}</span><span class="s2">&quot; target=&quot;_blank&quot;&gt;Example&lt;/a&gt;&lt;/p&gt;</span>
<span class="s2">                    &quot;&quot;&quot;</span>
        <span class="p">)</span>
        <span class="n">thumbnail</span> <span class="o">=</span> <span class="p">(</span>
            <span class="nb">bool</span><span class="p">(</span><span class="n">thumbnail_url</span><span class="p">)</span>
            <span class="o">*</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">                    &lt;h4&gt;Dataset Thumbnail&lt;/h4&gt;</span>
<span class="s2">                    &lt;img src=&quot;</span><span class="si">{</span><span class="n">thumbnail_url</span><span class="si">}</span><span class="s2">&quot;&gt;  </span>
<span class="s2">                    &quot;&quot;&quot;</span>
        <span class="p">)</span>
        <span class="c1">## only community datasets have a code_url</span>
        <span class="n">alternative</span> <span class="o">=</span> <span class="p">(</span>
            <span class="nb">bool</span><span class="p">(</span><span class="n">code_url</span><span class="p">)</span>
            <span class="o">*</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">                    &lt;h4&gt;Community Catalog&lt;/h4&gt;</span>
<span class="s2">                        &lt;p style=&quot;margin-left: 40px&quot;&gt;</span><span class="si">{</span><span class="n">asset</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;provider&#39;</span><span class="p">,</span><span class="s1">&#39;Provider unknown&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&lt;/p&gt;</span>
<span class="s2">                        &lt;p style=&quot;margin-left: 40px&quot;&gt;</span><span class="si">{</span><span class="n">asset</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;tags&#39;</span><span class="p">,</span><span class="s1">&#39;Tags unknown&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&lt;/p&gt;</span>
<span class="s2">                        &lt;p style=&quot;margin-left: 40px&quot;&gt;&lt;a href=&quot;</span><span class="si">{</span><span class="n">coder_url</span><span class="si">}</span><span class="s2">&quot; target=&quot;_blank&quot;&gt;Example&lt;/a&gt;&lt;/p&gt;</span>
<span class="s2">                    &quot;&quot;&quot;</span>
        <span class="p">)</span>

        <span class="n">template</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">            &lt;html&gt;</span>
<span class="s2">            &lt;body&gt;</span>
<span class="s2">                &lt;h3&gt;</span><span class="si">{</span><span class="n">asset_title</span><span class="si">}</span><span class="s2">&lt;/h3&gt;</span>
<span class="s2">                &lt;h4&gt;Dataset Availability&lt;/h4&gt;</span>
<span class="s2">                    &lt;p style=&quot;margin-left: 40px&quot;&gt;</span><span class="si">{</span><span class="n">asset_dates</span><span class="si">}</span><span class="s2">&lt;/p&gt;</span>
<span class="s2">                &lt;h4&gt;Earth Engine Snippet&lt;/h4&gt;</span>
<span class="s2">                    &lt;p style=&quot;margin-left: 40px&quot;&gt;</span><span class="si">{</span><span class="n">ee_id_snippet</span><span class="si">}</span><span class="s2">&lt;/p&gt;</span>
<span class="s2">                </span><span class="si">{</span><span class="n">catalog</span><span class="si">}</span><span class="s2"></span>
<span class="s2">                </span><span class="si">{</span><span class="n">alternative</span><span class="si">}</span><span class="s2"></span>
<span class="s2">                </span><span class="si">{</span><span class="n">thumbnail</span><span class="si">}</span><span class="s2"></span>
<span class="s2">            &lt;/body&gt;</span>
<span class="s2">            &lt;/html&gt;</span>
<span class="s2">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">template</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.ee_data_thumbnail" class="doc doc-heading">
<code class="highlight language-python"><span class="n">ee_data_thumbnail</span><span class="p">(</span><span class="n">asset_id</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="n">proxies</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


<a href="#geemap.common.ee_data_thumbnail" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Retrieves the thumbnail URL of an Earth Engine asset.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>asset_id</code></td>
        <td><code>str</code></td>
        <td><p>An Earth Engine asset id.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>timeout</code></td>
        <td><code>int</code></td>
        <td><p>Timeout in seconds. Defaults to 300.</p></td>
        <td><code>300</code></td>
      </tr>
      <tr>
        <td><code>proxies</code></td>
        <td><code>dict</code></td>
        <td><p>Proxy settings. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>str</code></td>
      <td><p>An http url of the thumbnail.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">ee_data_thumbnail</span><span class="p">(</span><span class="n">asset_id</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="n">proxies</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Retrieves the thumbnail URL of an Earth Engine asset.</span>

<span class="sd">    Args:</span>
<span class="sd">        asset_id (str): An Earth Engine asset id.</span>
<span class="sd">        timeout (int, optional): Timeout in seconds. Defaults to 300.</span>
<span class="sd">        proxies (dict, optional): Proxy settings. Defaults to None.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: An http url of the thumbnail.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">urllib</span>

    <span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>

    <span class="n">asset_uid</span> <span class="o">=</span> <span class="n">asset_id</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">,</span> <span class="s2">&quot;_&quot;</span><span class="p">)</span>
    <span class="n">asset_url</span> <span class="o">=</span> <span class="s2">&quot;https://developers.google.com/earth-engine/datasets/catalog/</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
        <span class="n">asset_uid</span>
    <span class="p">)</span>
    <span class="n">thumbnail_url</span> <span class="o">=</span> <span class="s2">&quot;https://mw1.google.com/ges/dd/images/</span><span class="si">{}</span><span class="s2">_sample.png&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
        <span class="n">asset_uid</span>
    <span class="p">)</span>

    <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">thumbnail_url</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span> <span class="n">proxies</span><span class="o">=</span><span class="n">proxies</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">r</span><span class="o">.</span><span class="n">status_code</span> <span class="o">!=</span> <span class="mi">200</span><span class="p">:</span>
            <span class="n">html_page</span> <span class="o">=</span> <span class="n">urllib</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">urlopen</span><span class="p">(</span><span class="n">asset_url</span><span class="p">)</span>
            <span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">html_page</span><span class="p">,</span> <span class="n">features</span><span class="o">=</span><span class="s2">&quot;html.parser&quot;</span><span class="p">)</span>

            <span class="k">for</span> <span class="n">img</span> <span class="ow">in</span> <span class="n">soup</span><span class="o">.</span><span class="n">findAll</span><span class="p">(</span><span class="s2">&quot;img&quot;</span><span class="p">):</span>
                <span class="k">if</span> <span class="s2">&quot;sample.png&quot;</span> <span class="ow">in</span> <span class="n">img</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;src&quot;</span><span class="p">):</span>
                    <span class="n">thumbnail_url</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;src&quot;</span><span class="p">)</span>
                    <span class="k">return</span> <span class="n">thumbnail_url</span>

        <span class="k">return</span> <span class="n">thumbnail_url</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.ee_export_geojson" class="doc doc-heading">
<code class="highlight language-python"><span class="n">ee_export_geojson</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">selectors</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="n">proxies</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


<a href="#geemap.common.ee_export_geojson" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Exports Earth Engine FeatureCollection to geojson.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>ee_object</code></td>
        <td><code>object</code></td>
        <td><p>ee.FeatureCollection to export.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>filename</code></td>
        <td><code>str</code></td>
        <td><p>Output file name. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>selectors</code></td>
        <td><code>list</code></td>
        <td><p>A list of attributes to export. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>timeout</code></td>
        <td><code>int</code></td>
        <td><p>Timeout in seconds. Defaults to 300 seconds.</p></td>
        <td><code>300</code></td>
      </tr>
      <tr>
        <td><code>proxies</code></td>
        <td><code>dict</code></td>
        <td><p>Proxy settings. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">ee_export_geojson</span><span class="p">(</span>
    <span class="n">ee_object</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">selectors</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="n">proxies</span><span class="o">=</span><span class="kc">None</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Exports Earth Engine FeatureCollection to geojson.</span>

<span class="sd">    Args:</span>
<span class="sd">        ee_object (object): ee.FeatureCollection to export.</span>
<span class="sd">        filename (str): Output file name. Defaults to None.</span>
<span class="sd">        selectors (list, optional): A list of attributes to export. Defaults to None.</span>
<span class="sd">        timeout (int, optional): Timeout in seconds. Defaults to 300 seconds.</span>
<span class="sd">        proxies (dict, optional): Proxy settings. Defaults to None.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The ee_object must be an ee.FeatureCollection.&quot;</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="n">filename</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">out_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="s2">&quot;~&quot;</span><span class="p">),</span> <span class="s2">&quot;Downloads&quot;</span><span class="p">)</span>
        <span class="n">filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">out_dir</span><span class="p">,</span> <span class="n">random_string</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;.geojson&quot;</span><span class="p">)</span>

    <span class="n">allowed_formats</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;geojson&quot;</span><span class="p">]</span>
    <span class="n">filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
    <span class="n">basename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">basename</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">filetype</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">basename</span><span class="p">)[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">filetype</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="n">allowed_formats</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The output file type must be geojson.&quot;</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="n">selectors</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">selectors</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">first</span><span class="p">()</span><span class="o">.</span><span class="n">propertyNames</span><span class="p">()</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()</span>
        <span class="n">selectors</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;.geo&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="n">selectors</span>

    <span class="k">elif</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">selectors</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;selectors must be a list, such as [&#39;attribute1&#39;, &#39;attribute2&#39;]&quot;</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">allowed_attributes</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">first</span><span class="p">()</span><span class="o">.</span><span class="n">propertyNames</span><span class="p">()</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">attribute</span> <span class="ow">in</span> <span class="n">selectors</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">attribute</span> <span class="ow">in</span> <span class="n">allowed_attributes</span><span class="p">):</span>
                <span class="nb">print</span><span class="p">(</span>
                    <span class="s2">&quot;Attributes must be one chosen from: </span><span class="si">{}</span><span class="s2"> &quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                        <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">allowed_attributes</span><span class="p">)</span>
                    <span class="p">)</span>
                <span class="p">)</span>
                <span class="k">return</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># print(&#39;Generating URL ...&#39;)</span>
        <span class="n">url</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">getDownloadURL</span><span class="p">(</span>
            <span class="n">filetype</span><span class="o">=</span><span class="n">filetype</span><span class="p">,</span> <span class="n">selectors</span><span class="o">=</span><span class="n">selectors</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="n">name</span>
        <span class="p">)</span>
        <span class="c1"># print(&#39;Downloading data from {}\nPlease wait ...&#39;.format(url))</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">stream</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span> <span class="n">proxies</span><span class="o">=</span><span class="n">proxies</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">r</span><span class="o">.</span><span class="n">status_code</span> <span class="o">!=</span> <span class="mi">200</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;An error occurred while downloading. </span><span class="se">\n</span><span class="s2"> Retrying ...&quot;</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">new_ee_object</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">filter_polygons</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Generating URL ...&quot;</span><span class="p">)</span>
                <span class="n">url</span> <span class="o">=</span> <span class="n">new_ee_object</span><span class="o">.</span><span class="n">getDownloadURL</span><span class="p">(</span>
                    <span class="n">filetype</span><span class="o">=</span><span class="n">filetype</span><span class="p">,</span> <span class="n">selectors</span><span class="o">=</span><span class="n">selectors</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="n">name</span>
                <span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Downloading data from </span><span class="si">{</span><span class="n">url</span><span class="si">}</span><span class="se">\n</span><span class="s2">Please wait ...&quot;</span><span class="p">)</span>
                <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">stream</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span> <span class="n">proxies</span><span class="o">=</span><span class="n">proxies</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s2">&quot;wb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fd</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="n">r</span><span class="o">.</span><span class="n">iter_content</span><span class="p">(</span><span class="n">chunk_size</span><span class="o">=</span><span class="mi">1024</span><span class="p">):</span>
                <span class="n">fd</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">chunk</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;An error occurred while downloading.&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">()[</span><span class="s2">&quot;error&quot;</span><span class="p">][</span><span class="s2">&quot;message&quot;</span><span class="p">])</span>

        <span class="k">return</span>

    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">geojson</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>

    <span class="k">return</span> <span class="n">geojson</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.ee_export_image" class="doc doc-heading">
<code class="highlight language-python"><span class="n">ee_export_image</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">crs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">crs_transform</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">region</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">dimensions</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">file_per_band</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s1">&#39;ZIPPED_GEO_TIFF&#39;</span><span class="p">,</span> <span class="n">unmask_value</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="n">proxies</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


<a href="#geemap.common.ee_export_image" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Exports an ee.Image as a GeoTIFF.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>ee_object</code></td>
        <td><code>object</code></td>
        <td><p>The ee.Image to download.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>filename</code></td>
        <td><code>str</code></td>
        <td><p>Output filename for the exported image.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>scale</code></td>
        <td><code>float</code></td>
        <td><p>A default scale to use for any bands that do not specify one; ignored if crs and crs_transform is specified. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>crs</code></td>
        <td><code>str</code></td>
        <td><p>A default CRS string to use for any bands that do not explicitly specify one. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>crs_transform</code></td>
        <td><code>list</code></td>
        <td><p>a default affine transform to use for any bands that do not specify one, of the same format as the crs_transform of bands. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>region</code></td>
        <td><code>object</code></td>
        <td><p>A polygon specifying a region to download; ignored if crs and crs_transform is specified. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>dimensions</code></td>
        <td><code>list</code></td>
        <td><p>An optional array of two integers defining the width and height to which the band is cropped. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>file_per_band</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to produce a different GeoTIFF per band. Defaults to False.</p></td>
        <td><code>False</code></td>
      </tr>
      <tr>
        <td><code>format</code></td>
        <td><code>str</code></td>
        <td><p>One of: "ZIPPED_GEO_TIFF" (GeoTIFF file(s) wrapped in a zip file, default), "GEO_TIFF" (GeoTIFF file), "NPY" (NumPy binary format). If "GEO_TIFF" or "NPY",
filePerBand and all band-level transformations will be ignored. Loading a NumPy output results in a structured array.</p></td>
        <td><code>&#39;ZIPPED_GEO_TIFF&#39;</code></td>
      </tr>
      <tr>
        <td><code>unmask_value</code></td>
        <td><code>float</code></td>
        <td><p>The value to use for pixels that are masked in the input image.
If the exported image contains zero values, you should set the unmask value to a  non-zero value so that the zero values are not treated as missing data. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>timeout</code></td>
        <td><code>int</code></td>
        <td><p>The timeout in seconds for the request. Defaults to 300.</p></td>
        <td><code>300</code></td>
      </tr>
      <tr>
        <td><code>proxies</code></td>
        <td><code>dict</code></td>
        <td><p>A dictionary of proxy servers to use. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">ee_export_image</span><span class="p">(</span>
    <span class="n">ee_object</span><span class="p">,</span>
    <span class="n">filename</span><span class="p">,</span>
    <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">crs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">crs_transform</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">region</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">dimensions</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">file_per_band</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;ZIPPED_GEO_TIFF&quot;</span><span class="p">,</span>
    <span class="n">unmask_value</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">timeout</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span>
    <span class="n">proxies</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Exports an ee.Image as a GeoTIFF.</span>

<span class="sd">    Args:</span>
<span class="sd">        ee_object (object): The ee.Image to download.</span>
<span class="sd">        filename (str): Output filename for the exported image.</span>
<span class="sd">        scale (float, optional): A default scale to use for any bands that do not specify one; ignored if crs and crs_transform is specified. Defaults to None.</span>
<span class="sd">        crs (str, optional): A default CRS string to use for any bands that do not explicitly specify one. Defaults to None.</span>
<span class="sd">        crs_transform (list, optional): a default affine transform to use for any bands that do not specify one, of the same format as the crs_transform of bands. Defaults to None.</span>
<span class="sd">        region (object, optional): A polygon specifying a region to download; ignored if crs and crs_transform is specified. Defaults to None.</span>
<span class="sd">        dimensions (list, optional): An optional array of two integers defining the width and height to which the band is cropped. Defaults to None.</span>
<span class="sd">        file_per_band (bool, optional): Whether to produce a different GeoTIFF per band. Defaults to False.</span>
<span class="sd">        format (str, optional):  One of: &quot;ZIPPED_GEO_TIFF&quot; (GeoTIFF file(s) wrapped in a zip file, default), &quot;GEO_TIFF&quot; (GeoTIFF file), &quot;NPY&quot; (NumPy binary format). If &quot;GEO_TIFF&quot; or &quot;NPY&quot;,</span>
<span class="sd">            filePerBand and all band-level transformations will be ignored. Loading a NumPy output results in a structured array.</span>
<span class="sd">        unmask_value (float, optional): The value to use for pixels that are masked in the input image.</span>
<span class="sd">            If the exported image contains zero values, you should set the unmask value to a  non-zero value so that the zero values are not treated as missing data. Defaults to None.</span>
<span class="sd">        timeout (int, optional): The timeout in seconds for the request. Defaults to 300.</span>
<span class="sd">        proxies (dict, optional): A dictionary of proxy servers to use. Defaults to None.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The ee_object must be an ee.Image.&quot;</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="n">unmask_value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">ee_object</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">selfMask</span><span class="p">()</span><span class="o">.</span><span class="n">unmask</span><span class="p">(</span><span class="n">unmask_value</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">region</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Geometry</span><span class="p">):</span>
            <span class="n">ee_object</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">clip</span><span class="p">(</span><span class="n">region</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">region</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">):</span>
            <span class="n">ee_object</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">clipToCollection</span><span class="p">(</span><span class="n">region</span><span class="p">)</span>

    <span class="n">filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
    <span class="n">basename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">basename</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">filetype</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">basename</span><span class="p">)[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
    <span class="n">filename_zip</span> <span class="o">=</span> <span class="n">filename</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;.tif&quot;</span><span class="p">,</span> <span class="s2">&quot;.zip&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">filetype</span> <span class="o">!=</span> <span class="s2">&quot;tif&quot;</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The filename must end with .tif&quot;</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Generating URL ...&quot;</span><span class="p">)</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">name</span><span class="p">,</span> <span class="s2">&quot;filePerBand&quot;</span><span class="p">:</span> <span class="n">file_per_band</span><span class="p">}</span>

        <span class="n">params</span><span class="p">[</span><span class="s2">&quot;scale&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">scale</span>
        <span class="k">if</span> <span class="n">region</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">region</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">geometry</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">dimensions</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s2">&quot;dimensions&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">dimensions</span>
        <span class="k">if</span> <span class="n">region</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s2">&quot;region&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">region</span>
        <span class="k">if</span> <span class="n">crs</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s2">&quot;crs&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">crs</span>
        <span class="k">if</span> <span class="n">crs_transform</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s2">&quot;crs_transform&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">crs_transform</span>
        <span class="n">params</span><span class="p">[</span><span class="s2">&quot;format&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">format</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">url</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">getDownloadURL</span><span class="p">(</span><span class="n">params</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;An error occurred while downloading.&quot;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Downloading data from </span><span class="si">{</span><span class="n">url</span><span class="si">}</span><span class="se">\n</span><span class="s2">Please wait ...&quot;</span><span class="p">)</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">stream</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span> <span class="n">proxies</span><span class="o">=</span><span class="n">proxies</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">r</span><span class="o">.</span><span class="n">status_code</span> <span class="o">!=</span> <span class="mi">200</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;An error occurred while downloading.&quot;</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename_zip</span><span class="p">,</span> <span class="s2">&quot;wb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fd</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="n">r</span><span class="o">.</span><span class="n">iter_content</span><span class="p">(</span><span class="n">chunk_size</span><span class="o">=</span><span class="mi">1024</span><span class="p">):</span>
                <span class="n">fd</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">chunk</span><span class="p">)</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;An error occurred while downloading.&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">()[</span><span class="s2">&quot;error&quot;</span><span class="p">][</span><span class="s2">&quot;message&quot;</span><span class="p">])</span>
        <span class="k">return</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="k">with</span> <span class="n">zipfile</span><span class="o">.</span><span class="n">ZipFile</span><span class="p">(</span><span class="n">filename_zip</span><span class="p">)</span> <span class="k">as</span> <span class="n">z</span><span class="p">:</span>
            <span class="n">z</span><span class="o">.</span><span class="n">extractall</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">filename</span><span class="p">))</span>
        <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">filename_zip</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">file_per_band</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Data downloaded to </span><span class="si">{</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Data downloaded to </span><span class="si">{</span><span class="n">filename</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.ee_export_image_collection" class="doc doc-heading">
<code class="highlight language-python"><span class="n">ee_export_image_collection</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">out_dir</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">crs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">crs_transform</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">region</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">dimensions</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">file_per_band</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s1">&#39;ZIPPED_GEO_TIFF&#39;</span><span class="p">,</span> <span class="n">unmask_value</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="n">proxies</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


<a href="#geemap.common.ee_export_image_collection" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Exports an ImageCollection as GeoTIFFs.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>ee_object</code></td>
        <td><code>object</code></td>
        <td><p>The ee.Image to download.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>out_dir</code></td>
        <td><code>str</code></td>
        <td><p>The output directory for the exported images.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>scale</code></td>
        <td><code>float</code></td>
        <td><p>A default scale to use for any bands that do not specify one; ignored if crs and crs_transform is specified. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>crs</code></td>
        <td><code>str</code></td>
        <td><p>A default CRS string to use for any bands that do not explicitly specify one. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>crs_transform</code></td>
        <td><code>list</code></td>
        <td><p>a default affine transform to use for any bands that do not specify one, of the same format as the crs_transform of bands. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>region</code></td>
        <td><code>object</code></td>
        <td><p>A polygon specifying a region to download; ignored if crs and crs_transform is specified. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>dimensions</code></td>
        <td><code>list</code></td>
        <td><p>An optional array of two integers defining the width and height to which the band is cropped. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>file_per_band</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to produce a different GeoTIFF per band. Defaults to False.</p></td>
        <td><code>False</code></td>
      </tr>
      <tr>
        <td><code>format</code></td>
        <td><code>str</code></td>
        <td><p>One of: "ZIPPED_GEO_TIFF" (GeoTIFF file(s) wrapped in a zip file, default), "GEO_TIFF" (GeoTIFF file), "NPY" (NumPy binary format). If "GEO_TIFF" or "NPY",
filePerBand and all band-level transformations will be ignored. Loading a NumPy output results in a structured array.</p></td>
        <td><code>&#39;ZIPPED_GEO_TIFF&#39;</code></td>
      </tr>
      <tr>
        <td><code>unmask_value</code></td>
        <td><code>float</code></td>
        <td><p>The value to use for pixels that are masked in the input image.
If the exported image contains zero values, you should set the unmask value to a  non-zero value so that the zero values are not treated as missing data. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>timeout</code></td>
        <td><code>int</code></td>
        <td><p>The timeout in seconds for the request. Defaults to 300.</p></td>
        <td><code>300</code></td>
      </tr>
      <tr>
        <td><code>proxies</code></td>
        <td><code>dict</code></td>
        <td><p>A dictionary of proxy servers to use. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">ee_export_image_collection</span><span class="p">(</span>
    <span class="n">ee_object</span><span class="p">,</span>
    <span class="n">out_dir</span><span class="p">,</span>
    <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">crs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">crs_transform</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">region</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">dimensions</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">file_per_band</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;ZIPPED_GEO_TIFF&quot;</span><span class="p">,</span>
    <span class="n">unmask_value</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">timeout</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span>
    <span class="n">proxies</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Exports an ImageCollection as GeoTIFFs.</span>

<span class="sd">    Args:</span>
<span class="sd">        ee_object (object): The ee.Image to download.</span>
<span class="sd">        out_dir (str): The output directory for the exported images.</span>
<span class="sd">        scale (float, optional): A default scale to use for any bands that do not specify one; ignored if crs and crs_transform is specified. Defaults to None.</span>
<span class="sd">        crs (str, optional): A default CRS string to use for any bands that do not explicitly specify one. Defaults to None.</span>
<span class="sd">        crs_transform (list, optional): a default affine transform to use for any bands that do not specify one, of the same format as the crs_transform of bands. Defaults to None.</span>
<span class="sd">        region (object, optional): A polygon specifying a region to download; ignored if crs and crs_transform is specified. Defaults to None.</span>
<span class="sd">        dimensions (list, optional): An optional array of two integers defining the width and height to which the band is cropped. Defaults to None.</span>
<span class="sd">        file_per_band (bool, optional): Whether to produce a different GeoTIFF per band. Defaults to False.</span>
<span class="sd">        format (str, optional):  One of: &quot;ZIPPED_GEO_TIFF&quot; (GeoTIFF file(s) wrapped in a zip file, default), &quot;GEO_TIFF&quot; (GeoTIFF file), &quot;NPY&quot; (NumPy binary format). If &quot;GEO_TIFF&quot; or &quot;NPY&quot;,</span>
<span class="sd">            filePerBand and all band-level transformations will be ignored. Loading a NumPy output results in a structured array.</span>
<span class="sd">        unmask_value (float, optional): The value to use for pixels that are masked in the input image.</span>
<span class="sd">            If the exported image contains zero values, you should set the unmask value to a  non-zero value so that the zero values are not treated as missing data. Defaults to None.</span>
<span class="sd">        timeout (int, optional): The timeout in seconds for the request. Defaults to 300.</span>
<span class="sd">        proxies (dict, optional): A dictionary of proxy servers to use. Defaults to None.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The ee_object must be an ee.ImageCollection.&quot;</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">out_dir</span><span class="p">):</span>
        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">out_dir</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>

        <span class="n">count</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">ee_object</span><span class="o">.</span><span class="n">size</span><span class="p">()</span><span class="o">.</span><span class="n">getInfo</span><span class="p">())</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Total number of images: </span><span class="si">{</span><span class="n">count</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">count</span><span class="p">):</span>
            <span class="n">image</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">(</span><span class="n">ee_object</span><span class="o">.</span><span class="n">toList</span><span class="p">(</span><span class="n">count</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;system:index&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()</span> <span class="o">+</span> <span class="s2">&quot;.tif&quot;</span>
            <span class="n">filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">out_dir</span><span class="p">),</span> <span class="n">name</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Exporting </span><span class="si">{</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">count</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">ee_export_image</span><span class="p">(</span>
                <span class="n">image</span><span class="p">,</span>
                <span class="n">filename</span><span class="o">=</span><span class="n">filename</span><span class="p">,</span>
                <span class="n">scale</span><span class="o">=</span><span class="n">scale</span><span class="p">,</span>
                <span class="n">crs</span><span class="o">=</span><span class="n">crs</span><span class="p">,</span>
                <span class="n">crs_transform</span><span class="o">=</span><span class="n">crs_transform</span><span class="p">,</span>
                <span class="n">region</span><span class="o">=</span><span class="n">region</span><span class="p">,</span>
                <span class="n">dimensions</span><span class="o">=</span><span class="n">dimensions</span><span class="p">,</span>
                <span class="n">file_per_band</span><span class="o">=</span><span class="n">file_per_band</span><span class="p">,</span>
                <span class="nb">format</span><span class="o">=</span><span class="nb">format</span><span class="p">,</span>
                <span class="n">unmask_value</span><span class="o">=</span><span class="n">unmask_value</span><span class="p">,</span>
                <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span>
                <span class="n">proxies</span><span class="o">=</span><span class="n">proxies</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.ee_export_image_collection_to_asset" class="doc doc-heading">
<code class="highlight language-python"><span class="n">ee_export_image_collection_to_asset</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">descriptions</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">assetIds</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">pyramidingPolicy</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">dimensions</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">region</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">crs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">crsTransform</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">maxPixels</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.common.ee_export_image_collection_to_asset" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Creates a batch task to export an ImageCollection as raster images to Google Drive.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>ee_object</code></td>
        <td></td>
        <td><p>The image collection to export.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>descriptions</code></td>
        <td></td>
        <td><p>A list of human-readable names of the tasks.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>assetIds</code></td>
        <td></td>
        <td><p>The destination asset ID.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>pyramidingPolicy</code></td>
        <td></td>
        <td><p>The pyramiding policy to apply to each band in the
image, a dictionary keyed by band name. Values must be
one of: "mean", "sample", "min", "max", or "mode".
Defaults to "mean". A special key, ".default", may be used to
change the default for all bands.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>dimensions</code></td>
        <td></td>
        <td><p>The dimensions of the exported image. Takes either a
single positive integer as the maximum dimension or "WIDTHxHEIGHT"
where WIDTH and HEIGHT are each positive integers.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>region</code></td>
        <td></td>
        <td><p>The lon,lat coordinates for a LinearRing or Polygon
specifying the region to export. Can be specified as a nested
lists of numbers or a serialized string. Defaults to the image's
region.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>scale</code></td>
        <td></td>
        <td><p>The resolution in meters per pixel. Defaults to the
native resolution of the image assset unless a crsTransform
is specified.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>crs</code></td>
        <td></td>
        <td><p>The coordinate reference system of the exported image's
projection. Defaults to the image's default projection.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>crsTransform</code></td>
        <td></td>
        <td><p>A comma-separated string of 6 numbers describing
the affine transform of the coordinate reference system of the
exported image's projection, in the order: xScale, xShearing,
xTranslation, yShearing, yScale and yTranslation. Defaults to
the image's native CRS transform.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>maxPixels</code></td>
        <td></td>
        <td><p>The maximum allowed number of pixels in the exported
image. The task will fail if the exported region covers more
pixels in the specified projection. Defaults to 100,000,000.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>**kwargs</code></td>
        <td></td>
        <td><p>Holds other keyword arguments that may have been deprecated
such as 'crs_transform'.</p></td>
        <td><code>{}</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">ee_export_image_collection_to_asset</span><span class="p">(</span>
    <span class="n">ee_object</span><span class="p">,</span>
    <span class="n">descriptions</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">assetIds</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">pyramidingPolicy</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">dimensions</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">region</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">crs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">crsTransform</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">maxPixels</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Creates a batch task to export an ImageCollection as raster images to Google Drive.</span>

<span class="sd">    Args:</span>
<span class="sd">        ee_object: The image collection to export.</span>
<span class="sd">        descriptions: A list of human-readable names of the tasks.</span>
<span class="sd">        assetIds: The destination asset ID.</span>
<span class="sd">        pyramidingPolicy: The pyramiding policy to apply to each band in the</span>
<span class="sd">            image, a dictionary keyed by band name. Values must be</span>
<span class="sd">            one of: &quot;mean&quot;, &quot;sample&quot;, &quot;min&quot;, &quot;max&quot;, or &quot;mode&quot;.</span>
<span class="sd">            Defaults to &quot;mean&quot;. A special key, &quot;.default&quot;, may be used to</span>
<span class="sd">            change the default for all bands.</span>
<span class="sd">        dimensions: The dimensions of the exported image. Takes either a</span>
<span class="sd">            single positive integer as the maximum dimension or &quot;WIDTHxHEIGHT&quot;</span>
<span class="sd">            where WIDTH and HEIGHT are each positive integers.</span>
<span class="sd">        region: The lon,lat coordinates for a LinearRing or Polygon</span>
<span class="sd">            specifying the region to export. Can be specified as a nested</span>
<span class="sd">            lists of numbers or a serialized string. Defaults to the image&#39;s</span>
<span class="sd">            region.</span>
<span class="sd">        scale: The resolution in meters per pixel. Defaults to the</span>
<span class="sd">            native resolution of the image assset unless a crsTransform</span>
<span class="sd">            is specified.</span>
<span class="sd">        crs: The coordinate reference system of the exported image&#39;s</span>
<span class="sd">            projection. Defaults to the image&#39;s default projection.</span>
<span class="sd">        crsTransform: A comma-separated string of 6 numbers describing</span>
<span class="sd">            the affine transform of the coordinate reference system of the</span>
<span class="sd">            exported image&#39;s projection, in the order: xScale, xShearing,</span>
<span class="sd">            xTranslation, yShearing, yScale and yTranslation. Defaults to</span>
<span class="sd">            the image&#39;s native CRS transform.</span>
<span class="sd">        maxPixels: The maximum allowed number of pixels in the exported</span>
<span class="sd">            image. The task will fail if the exported region covers more</span>
<span class="sd">            pixels in the specified projection. Defaults to 100,000,000.</span>
<span class="sd">        **kwargs: Holds other keyword arguments that may have been deprecated</span>
<span class="sd">            such as &#39;crs_transform&#39;.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The ee_object must be an ee.ImageCollection.&quot;</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">count</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">ee_object</span><span class="o">.</span><span class="n">size</span><span class="p">()</span><span class="o">.</span><span class="n">getInfo</span><span class="p">())</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Total number of images: </span><span class="si">{</span><span class="n">count</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">descriptions</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">descriptions</span><span class="p">)</span> <span class="o">!=</span> <span class="n">count</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The number of descriptions is not equal to the number of images.&quot;</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="n">descriptions</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">descriptions</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">aggregate_array</span><span class="p">(</span><span class="s2">&quot;system:index&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">assetIds</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">assetIds</span> <span class="o">=</span> <span class="n">descriptions</span>

        <span class="n">images</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">toList</span><span class="p">(</span><span class="n">count</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;USE_MKDOCS&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># skip if running GitHub CI.</span>
            <span class="k">return</span>

        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">count</span><span class="p">):</span>
            <span class="n">image</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">(</span><span class="n">images</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>
            <span class="n">description</span> <span class="o">=</span> <span class="n">descriptions</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="n">assetId</span> <span class="o">=</span> <span class="n">assetIds</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="n">ee_export_image_to_asset</span><span class="p">(</span>
                <span class="n">image</span><span class="p">,</span>
                <span class="n">description</span><span class="p">,</span>
                <span class="n">assetId</span><span class="p">,</span>
                <span class="n">pyramidingPolicy</span><span class="p">,</span>
                <span class="n">dimensions</span><span class="p">,</span>
                <span class="n">region</span><span class="p">,</span>
                <span class="n">scale</span><span class="p">,</span>
                <span class="n">crs</span><span class="p">,</span>
                <span class="n">crsTransform</span><span class="p">,</span>
                <span class="n">maxPixels</span><span class="p">,</span>
                <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
            <span class="p">)</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.ee_export_image_collection_to_cloud_storage" class="doc doc-heading">
<code class="highlight language-python"><span class="n">ee_export_image_collection_to_cloud_storage</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">descriptions</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">bucket</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">fileNamePrefix</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">dimensions</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">region</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">crs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">crsTransform</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">maxPixels</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">shardSize</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">fileDimensions</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">skipEmptyTiles</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">fileFormat</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">formatOptions</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.common.ee_export_image_collection_to_cloud_storage" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Creates a batch task to export an ImageCollection as raster images to Google Drive.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>ee_object</code></td>
        <td></td>
        <td><p>The image collection to export.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>descriptions</code></td>
        <td></td>
        <td><p>A list of human-readable names of the tasks.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>bucket</code></td>
        <td></td>
        <td><p>The name of a Cloud Storage bucket for the export.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>fileNamePrefix</code></td>
        <td></td>
        <td><p>Cloud Storage object name prefix for the export.
Defaults to the name of the task.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>dimensions</code></td>
        <td></td>
        <td><p>The dimensions of the exported image. Takes either a
single positive integer as the maximum dimension or "WIDTHxHEIGHT"
where WIDTH and HEIGHT are each positive integers.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>region</code></td>
        <td></td>
        <td><p>The lon,lat coordinates for a LinearRing or Polygon
specifying the region to export. Can be specified as a nested
lists of numbers or a serialized string. Defaults to the image's
region.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>scale</code></td>
        <td></td>
        <td><p>The resolution in meters per pixel. Defaults to the
native resolution of the image assset unless a crsTransform
is specified.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>crs</code></td>
        <td></td>
        <td><p>The coordinate reference system of the exported image's
projection. Defaults to the image's default projection.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>crsTransform</code></td>
        <td></td>
        <td><p>A comma-separated string of 6 numbers describing
the affine transform of the coordinate reference system of the
exported image's projection, in the order: xScale, xShearing,
xTranslation, yShearing, yScale and yTranslation. Defaults to
the image's native CRS transform.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>maxPixels</code></td>
        <td></td>
        <td><p>The maximum allowed number of pixels in the exported
image. The task will fail if the exported region covers more
pixels in the specified projection. Defaults to 100,000,000.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>shardSize</code></td>
        <td></td>
        <td><p>Size in pixels of the tiles in which this image will be
computed. Defaults to 256.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>fileDimensions</code></td>
        <td></td>
        <td><p>The dimensions in pixels of each image file, if the
image is too large to fit in a single file. May specify a
single number to indicate a square shape, or a tuple of two
dimensions to indicate (width,height). Note that the image will
still be clipped to the overall image dimensions. Must be a
multiple of shardSize.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>skipEmptyTiles</code></td>
        <td></td>
        <td><p>If true, skip writing empty (i.e. fully-masked)
image tiles. Defaults to false.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>fileFormat</code></td>
        <td></td>
        <td><p>The string file format to which the image is exported.
Currently only 'GeoTIFF' and 'TFRecord' are supported, defaults to
'GeoTIFF'.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>formatOptions</code></td>
        <td></td>
        <td><p>A dictionary of string keys to format specific options.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>**kwargs</code></td>
        <td></td>
        <td><p>Holds other keyword arguments that may have been deprecated
such as 'crs_transform'.</p></td>
        <td><code>{}</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">ee_export_image_collection_to_cloud_storage</span><span class="p">(</span>
    <span class="n">ee_object</span><span class="p">,</span>
    <span class="n">descriptions</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">bucket</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">fileNamePrefix</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">dimensions</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">region</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">crs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">crsTransform</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">maxPixels</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">shardSize</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">fileDimensions</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">skipEmptyTiles</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">fileFormat</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">formatOptions</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Creates a batch task to export an ImageCollection as raster images to Google Drive.</span>

<span class="sd">    Args:</span>
<span class="sd">        ee_object: The image collection to export.</span>
<span class="sd">        descriptions: A list of human-readable names of the tasks.</span>
<span class="sd">        bucket: The name of a Cloud Storage bucket for the export.</span>
<span class="sd">        fileNamePrefix: Cloud Storage object name prefix for the export.</span>
<span class="sd">            Defaults to the name of the task.</span>
<span class="sd">        dimensions: The dimensions of the exported image. Takes either a</span>
<span class="sd">            single positive integer as the maximum dimension or &quot;WIDTHxHEIGHT&quot;</span>
<span class="sd">            where WIDTH and HEIGHT are each positive integers.</span>
<span class="sd">        region: The lon,lat coordinates for a LinearRing or Polygon</span>
<span class="sd">            specifying the region to export. Can be specified as a nested</span>
<span class="sd">            lists of numbers or a serialized string. Defaults to the image&#39;s</span>
<span class="sd">            region.</span>
<span class="sd">        scale: The resolution in meters per pixel. Defaults to the</span>
<span class="sd">            native resolution of the image assset unless a crsTransform</span>
<span class="sd">            is specified.</span>
<span class="sd">        crs: The coordinate reference system of the exported image&#39;s</span>
<span class="sd">            projection. Defaults to the image&#39;s default projection.</span>
<span class="sd">        crsTransform: A comma-separated string of 6 numbers describing</span>
<span class="sd">            the affine transform of the coordinate reference system of the</span>
<span class="sd">            exported image&#39;s projection, in the order: xScale, xShearing,</span>
<span class="sd">            xTranslation, yShearing, yScale and yTranslation. Defaults to</span>
<span class="sd">            the image&#39;s native CRS transform.</span>
<span class="sd">        maxPixels: The maximum allowed number of pixels in the exported</span>
<span class="sd">            image. The task will fail if the exported region covers more</span>
<span class="sd">            pixels in the specified projection. Defaults to 100,000,000.</span>
<span class="sd">        shardSize: Size in pixels of the tiles in which this image will be</span>
<span class="sd">            computed. Defaults to 256.</span>
<span class="sd">        fileDimensions: The dimensions in pixels of each image file, if the</span>
<span class="sd">            image is too large to fit in a single file. May specify a</span>
<span class="sd">            single number to indicate a square shape, or a tuple of two</span>
<span class="sd">            dimensions to indicate (width,height). Note that the image will</span>
<span class="sd">            still be clipped to the overall image dimensions. Must be a</span>
<span class="sd">            multiple of shardSize.</span>
<span class="sd">        skipEmptyTiles: If true, skip writing empty (i.e. fully-masked)</span>
<span class="sd">            image tiles. Defaults to false.</span>
<span class="sd">        fileFormat: The string file format to which the image is exported.</span>
<span class="sd">            Currently only &#39;GeoTIFF&#39; and &#39;TFRecord&#39; are supported, defaults to</span>
<span class="sd">            &#39;GeoTIFF&#39;.</span>
<span class="sd">        formatOptions: A dictionary of string keys to format specific options.</span>
<span class="sd">        **kwargs: Holds other keyword arguments that may have been deprecated</span>
<span class="sd">            such as &#39;crs_transform&#39;.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The ee_object must be an ee.ImageCollection.&quot;</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">count</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">ee_object</span><span class="o">.</span><span class="n">size</span><span class="p">()</span><span class="o">.</span><span class="n">getInfo</span><span class="p">())</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Total number of images: </span><span class="si">{</span><span class="n">count</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">descriptions</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">descriptions</span><span class="p">)</span> <span class="o">!=</span> <span class="n">count</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The number of descriptions is not equal to the number of images.&quot;</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="n">descriptions</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">descriptions</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">aggregate_array</span><span class="p">(</span><span class="s2">&quot;system:index&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()</span>

        <span class="n">images</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">toList</span><span class="p">(</span><span class="n">count</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;USE_MKDOCS&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># skip if running GitHub CI.</span>
            <span class="k">return</span>

        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">count</span><span class="p">):</span>
            <span class="n">image</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">(</span><span class="n">images</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>
            <span class="n">description</span> <span class="o">=</span> <span class="n">descriptions</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="n">ee_export_image_to_cloud_storage</span><span class="p">(</span>
                <span class="n">image</span><span class="p">,</span>
                <span class="n">description</span><span class="p">,</span>
                <span class="n">bucket</span><span class="p">,</span>
                <span class="n">fileNamePrefix</span><span class="p">,</span>
                <span class="n">dimensions</span><span class="p">,</span>
                <span class="n">region</span><span class="p">,</span>
                <span class="n">scale</span><span class="p">,</span>
                <span class="n">crs</span><span class="p">,</span>
                <span class="n">crsTransform</span><span class="p">,</span>
                <span class="n">maxPixels</span><span class="p">,</span>
                <span class="n">shardSize</span><span class="p">,</span>
                <span class="n">fileDimensions</span><span class="p">,</span>
                <span class="n">skipEmptyTiles</span><span class="p">,</span>
                <span class="n">fileFormat</span><span class="p">,</span>
                <span class="n">formatOptions</span><span class="p">,</span>
                <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
            <span class="p">)</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.ee_export_image_collection_to_drive" class="doc doc-heading">
<code class="highlight language-python"><span class="n">ee_export_image_collection_to_drive</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">descriptions</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">folder</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">fileNamePrefix</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">dimensions</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">region</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">crs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">crsTransform</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">maxPixels</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">shardSize</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">fileDimensions</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">skipEmptyTiles</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">fileFormat</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">formatOptions</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.common.ee_export_image_collection_to_drive" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Creates a batch task to export an ImageCollection as raster images to Google Drive.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>ee_object</code></td>
        <td></td>
        <td><p>The image collection to export.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>descriptions</code></td>
        <td></td>
        <td><p>A list of human-readable names of the tasks.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>folder</code></td>
        <td></td>
        <td><p>The name of a unique folder in your Drive account to
export into. Defaults to the root of the drive.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>fileNamePrefix</code></td>
        <td></td>
        <td><p>The Google Drive filename for the export.
Defaults to the name of the task.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>dimensions</code></td>
        <td></td>
        <td><p>The dimensions of the exported image. Takes either a
single positive integer as the maximum dimension or "WIDTHxHEIGHT"
where WIDTH and HEIGHT are each positive integers.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>region</code></td>
        <td></td>
        <td><p>The lon,lat coordinates for a LinearRing or Polygon
specifying the region to export. Can be specified as a nested
lists of numbers or a serialized string. Defaults to the image's
region.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>scale</code></td>
        <td></td>
        <td><p>The resolution in meters per pixel. Defaults to the
native resolution of the image assset unless a crsTransform
is specified.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>crs</code></td>
        <td></td>
        <td><p>The coordinate reference system of the exported image's
projection. Defaults to the image's default projection.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>crsTransform</code></td>
        <td></td>
        <td><p>A comma-separated string of 6 numbers describing
the affine transform of the coordinate reference system of the
exported image's projection, in the order: xScale, xShearing,
xTranslation, yShearing, yScale and yTranslation. Defaults to
the image's native CRS transform.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>maxPixels</code></td>
        <td></td>
        <td><p>The maximum allowed number of pixels in the exported
image. The task will fail if the exported region covers more
pixels in the specified projection. Defaults to 100,000,000.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>shardSize</code></td>
        <td></td>
        <td><p>Size in pixels of the tiles in which this image will be
computed. Defaults to 256.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>fileDimensions</code></td>
        <td></td>
        <td><p>The dimensions in pixels of each image file, if the
image is too large to fit in a single file. May specify a
single number to indicate a square shape, or a tuple of two
dimensions to indicate (width,height). Note that the image will
still be clipped to the overall image dimensions. Must be a
multiple of shardSize.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>skipEmptyTiles</code></td>
        <td></td>
        <td><p>If true, skip writing empty (i.e. fully-masked)
image tiles. Defaults to false.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>fileFormat</code></td>
        <td></td>
        <td><p>The string file format to which the image is exported.
Currently only 'GeoTIFF' and 'TFRecord' are supported, defaults to
'GeoTIFF'.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>formatOptions</code></td>
        <td></td>
        <td><p>A dictionary of string keys to format specific options.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>**kwargs</code></td>
        <td></td>
        <td><p>Holds other keyword arguments that may have been deprecated
such as 'crs_transform', 'driveFolder', and 'driveFileNamePrefix'.</p></td>
        <td><code>{}</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">ee_export_image_collection_to_drive</span><span class="p">(</span>
    <span class="n">ee_object</span><span class="p">,</span>
    <span class="n">descriptions</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">folder</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">fileNamePrefix</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">dimensions</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">region</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">crs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">crsTransform</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">maxPixels</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">shardSize</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">fileDimensions</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">skipEmptyTiles</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">fileFormat</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">formatOptions</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Creates a batch task to export an ImageCollection as raster images to Google Drive.</span>

<span class="sd">    Args:</span>
<span class="sd">        ee_object: The image collection to export.</span>
<span class="sd">        descriptions: A list of human-readable names of the tasks.</span>
<span class="sd">        folder: The name of a unique folder in your Drive account to</span>
<span class="sd">            export into. Defaults to the root of the drive.</span>
<span class="sd">        fileNamePrefix: The Google Drive filename for the export.</span>
<span class="sd">            Defaults to the name of the task.</span>
<span class="sd">        dimensions: The dimensions of the exported image. Takes either a</span>
<span class="sd">            single positive integer as the maximum dimension or &quot;WIDTHxHEIGHT&quot;</span>
<span class="sd">            where WIDTH and HEIGHT are each positive integers.</span>
<span class="sd">        region: The lon,lat coordinates for a LinearRing or Polygon</span>
<span class="sd">            specifying the region to export. Can be specified as a nested</span>
<span class="sd">            lists of numbers or a serialized string. Defaults to the image&#39;s</span>
<span class="sd">            region.</span>
<span class="sd">        scale: The resolution in meters per pixel. Defaults to the</span>
<span class="sd">            native resolution of the image assset unless a crsTransform</span>
<span class="sd">            is specified.</span>
<span class="sd">        crs: The coordinate reference system of the exported image&#39;s</span>
<span class="sd">            projection. Defaults to the image&#39;s default projection.</span>
<span class="sd">        crsTransform: A comma-separated string of 6 numbers describing</span>
<span class="sd">            the affine transform of the coordinate reference system of the</span>
<span class="sd">            exported image&#39;s projection, in the order: xScale, xShearing,</span>
<span class="sd">            xTranslation, yShearing, yScale and yTranslation. Defaults to</span>
<span class="sd">            the image&#39;s native CRS transform.</span>
<span class="sd">        maxPixels: The maximum allowed number of pixels in the exported</span>
<span class="sd">            image. The task will fail if the exported region covers more</span>
<span class="sd">            pixels in the specified projection. Defaults to 100,000,000.</span>
<span class="sd">        shardSize: Size in pixels of the tiles in which this image will be</span>
<span class="sd">            computed. Defaults to 256.</span>
<span class="sd">        fileDimensions: The dimensions in pixels of each image file, if the</span>
<span class="sd">            image is too large to fit in a single file. May specify a</span>
<span class="sd">            single number to indicate a square shape, or a tuple of two</span>
<span class="sd">            dimensions to indicate (width,height). Note that the image will</span>
<span class="sd">            still be clipped to the overall image dimensions. Must be a</span>
<span class="sd">            multiple of shardSize.</span>
<span class="sd">        skipEmptyTiles: If true, skip writing empty (i.e. fully-masked)</span>
<span class="sd">            image tiles. Defaults to false.</span>
<span class="sd">        fileFormat: The string file format to which the image is exported.</span>
<span class="sd">            Currently only &#39;GeoTIFF&#39; and &#39;TFRecord&#39; are supported, defaults to</span>
<span class="sd">            &#39;GeoTIFF&#39;.</span>
<span class="sd">        formatOptions: A dictionary of string keys to format specific options.</span>
<span class="sd">        **kwargs: Holds other keyword arguments that may have been deprecated</span>
<span class="sd">            such as &#39;crs_transform&#39;, &#39;driveFolder&#39;, and &#39;driveFileNamePrefix&#39;.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The ee_object must be an ee.ImageCollection.&quot;</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">count</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">ee_object</span><span class="o">.</span><span class="n">size</span><span class="p">()</span><span class="o">.</span><span class="n">getInfo</span><span class="p">())</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Total number of images: </span><span class="si">{</span><span class="n">count</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">descriptions</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">descriptions</span><span class="p">)</span> <span class="o">!=</span> <span class="n">count</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;The number of descriptions is not equal to the number of images.&quot;</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="n">descriptions</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">descriptions</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">aggregate_array</span><span class="p">(</span><span class="s2">&quot;system:index&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()</span>

        <span class="n">images</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">toList</span><span class="p">(</span><span class="n">count</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;USE_MKDOCS&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># skip if running GitHub CI.</span>
            <span class="k">return</span>

        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">count</span><span class="p">):</span>
            <span class="n">image</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">(</span><span class="n">images</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>
            <span class="n">description</span> <span class="o">=</span> <span class="n">descriptions</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="n">ee_export_image_to_drive</span><span class="p">(</span>
                <span class="n">image</span><span class="p">,</span>
                <span class="n">description</span><span class="p">,</span>
                <span class="n">folder</span><span class="p">,</span>
                <span class="n">fileNamePrefix</span><span class="p">,</span>
                <span class="n">dimensions</span><span class="p">,</span>
                <span class="n">region</span><span class="p">,</span>
                <span class="n">scale</span><span class="p">,</span>
                <span class="n">crs</span><span class="p">,</span>
                <span class="n">crsTransform</span><span class="p">,</span>
                <span class="n">maxPixels</span><span class="p">,</span>
                <span class="n">shardSize</span><span class="p">,</span>
                <span class="n">fileDimensions</span><span class="p">,</span>
                <span class="n">skipEmptyTiles</span><span class="p">,</span>
                <span class="n">fileFormat</span><span class="p">,</span>
                <span class="n">formatOptions</span><span class="p">,</span>
                <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
            <span class="p">)</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.ee_export_image_to_asset" class="doc doc-heading">
<code class="highlight language-python"><span class="n">ee_export_image_to_asset</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s1">&#39;myExportImageTask&#39;</span><span class="p">,</span> <span class="n">assetId</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">pyramidingPolicy</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">dimensions</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">region</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">crs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">crsTransform</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">maxPixels</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.common.ee_export_image_to_asset" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Creates a task to export an EE Image to an EE Asset.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>image</code></td>
        <td></td>
        <td><p>The image to be exported.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>description</code></td>
        <td></td>
        <td><p>Human-readable name of the task.</p></td>
        <td><code>&#39;myExportImageTask&#39;</code></td>
      </tr>
      <tr>
        <td><code>assetId</code></td>
        <td></td>
        <td><p>The destination asset ID.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>pyramidingPolicy</code></td>
        <td></td>
        <td><p>The pyramiding policy to apply to each band in the
image, a dictionary keyed by band name. Values must be
one of: "mean", "sample", "min", "max", or "mode".
Defaults to "mean". A special key, ".default", may be used to
change the default for all bands.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>dimensions</code></td>
        <td></td>
        <td><p>The dimensions of the exported image. Takes either a
single positive integer as the maximum dimension or "WIDTHxHEIGHT"
where WIDTH and HEIGHT are each positive integers.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>region</code></td>
        <td></td>
        <td><p>The lon,lat coordinates for a LinearRing or Polygon
specifying the region to export. Can be specified as a nested
lists of numbers or a serialized string. Defaults to the image's
region.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>scale</code></td>
        <td></td>
        <td><p>The resolution in meters per pixel. Defaults to the
native resolution of the image assset unless a crsTransform
is specified.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>crs</code></td>
        <td></td>
        <td><p>The coordinate reference system of the exported image's
projection. Defaults to the image's default projection.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>crsTransform</code></td>
        <td></td>
        <td><p>A comma-separated string of 6 numbers describing
the affine transform of the coordinate reference system of the
exported image's projection, in the order: xScale, xShearing,
xTranslation, yShearing, yScale and yTranslation. Defaults to
the image's native CRS transform.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>maxPixels</code></td>
        <td></td>
        <td><p>The maximum allowed number of pixels in the exported
image. The task will fail if the exported region covers more
pixels in the specified projection. Defaults to 100,000,000.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>**kwargs</code></td>
        <td></td>
        <td><p>Holds other keyword arguments that may have been deprecated
such as 'crs_transform'.</p></td>
        <td><code>{}</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">ee_export_image_to_asset</span><span class="p">(</span>
    <span class="n">image</span><span class="p">,</span>
    <span class="n">description</span><span class="o">=</span><span class="s2">&quot;myExportImageTask&quot;</span><span class="p">,</span>
    <span class="n">assetId</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">pyramidingPolicy</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">dimensions</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">region</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">crs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">crsTransform</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">maxPixels</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Creates a task to export an EE Image to an EE Asset.</span>

<span class="sd">    Args:</span>
<span class="sd">        image: The image to be exported.</span>
<span class="sd">        description: Human-readable name of the task.</span>
<span class="sd">        assetId: The destination asset ID.</span>
<span class="sd">        pyramidingPolicy: The pyramiding policy to apply to each band in the</span>
<span class="sd">            image, a dictionary keyed by band name. Values must be</span>
<span class="sd">            one of: &quot;mean&quot;, &quot;sample&quot;, &quot;min&quot;, &quot;max&quot;, or &quot;mode&quot;.</span>
<span class="sd">            Defaults to &quot;mean&quot;. A special key, &quot;.default&quot;, may be used to</span>
<span class="sd">            change the default for all bands.</span>
<span class="sd">        dimensions: The dimensions of the exported image. Takes either a</span>
<span class="sd">            single positive integer as the maximum dimension or &quot;WIDTHxHEIGHT&quot;</span>
<span class="sd">            where WIDTH and HEIGHT are each positive integers.</span>
<span class="sd">        region: The lon,lat coordinates for a LinearRing or Polygon</span>
<span class="sd">            specifying the region to export. Can be specified as a nested</span>
<span class="sd">            lists of numbers or a serialized string. Defaults to the image&#39;s</span>
<span class="sd">            region.</span>
<span class="sd">        scale: The resolution in meters per pixel. Defaults to the</span>
<span class="sd">            native resolution of the image assset unless a crsTransform</span>
<span class="sd">            is specified.</span>
<span class="sd">        crs: The coordinate reference system of the exported image&#39;s</span>
<span class="sd">            projection. Defaults to the image&#39;s default projection.</span>
<span class="sd">        crsTransform: A comma-separated string of 6 numbers describing</span>
<span class="sd">            the affine transform of the coordinate reference system of the</span>
<span class="sd">            exported image&#39;s projection, in the order: xScale, xShearing,</span>
<span class="sd">            xTranslation, yShearing, yScale and yTranslation. Defaults to</span>
<span class="sd">            the image&#39;s native CRS transform.</span>
<span class="sd">        maxPixels: The maximum allowed number of pixels in the exported</span>
<span class="sd">            image. The task will fail if the exported region covers more</span>
<span class="sd">            pixels in the specified projection. Defaults to 100,000,000.</span>
<span class="sd">        **kwargs: Holds other keyword arguments that may have been deprecated</span>
<span class="sd">            such as &#39;crs_transform&#39;.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">Image</span><span class="p">):</span>
        <span class="k">pass</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Input image must be an instance of ee.Image&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">assetId</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">assetId</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;users/&quot;</span><span class="p">)</span> <span class="ow">or</span> <span class="n">assetId</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;projects/&quot;</span><span class="p">):</span>
            <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">assetId</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">ee_user_id</span><span class="p">()</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">assetId</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="n">task</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">batch</span><span class="o">.</span><span class="n">Export</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">toAsset</span><span class="p">(</span>
        <span class="n">image</span><span class="p">,</span>
        <span class="n">description</span><span class="p">,</span>
        <span class="n">assetId</span><span class="p">,</span>
        <span class="n">pyramidingPolicy</span><span class="p">,</span>
        <span class="n">dimensions</span><span class="p">,</span>
        <span class="n">region</span><span class="p">,</span>
        <span class="n">scale</span><span class="p">,</span>
        <span class="n">crs</span><span class="p">,</span>
        <span class="n">crsTransform</span><span class="p">,</span>
        <span class="n">maxPixels</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">task</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.ee_export_image_to_cloud_storage" class="doc doc-heading">
<code class="highlight language-python"><span class="n">ee_export_image_to_cloud_storage</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s1">&#39;myExportImageTask&#39;</span><span class="p">,</span> <span class="n">bucket</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">fileNamePrefix</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">dimensions</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">region</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">crs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">crsTransform</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">maxPixels</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">shardSize</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">fileDimensions</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">skipEmptyTiles</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">fileFormat</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">formatOptions</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.common.ee_export_image_to_cloud_storage" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Creates a task to export an EE Image to Google Cloud Storage.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>image</code></td>
        <td></td>
        <td><p>The image to be exported.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>description</code></td>
        <td></td>
        <td><p>Human-readable name of the task.</p></td>
        <td><code>&#39;myExportImageTask&#39;</code></td>
      </tr>
      <tr>
        <td><code>bucket</code></td>
        <td></td>
        <td><p>The name of a Cloud Storage bucket for the export.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>fileNamePrefix</code></td>
        <td></td>
        <td><p>Cloud Storage object name prefix for the export.
Defaults to the name of the task.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>dimensions</code></td>
        <td></td>
        <td><p>The dimensions of the exported image. Takes either a
single positive integer as the maximum dimension or "WIDTHxHEIGHT"
where WIDTH and HEIGHT are each positive integers.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>region</code></td>
        <td></td>
        <td><p>The lon,lat coordinates for a LinearRing or Polygon
specifying the region to export. Can be specified as a nested
lists of numbers or a serialized string. Defaults to the image's
region.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>scale</code></td>
        <td></td>
        <td><p>The resolution in meters per pixel. Defaults to the
native resolution of the image assset unless a crsTransform
is specified.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>crs</code></td>
        <td></td>
        <td><p>The coordinate reference system of the exported image's
projection. Defaults to the image's default projection.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>crsTransform</code></td>
        <td></td>
        <td><p>A comma-separated string of 6 numbers describing
the affine transform of the coordinate reference system of the
exported image's projection, in the order: xScale, xShearing,
xTranslation, yShearing, yScale and yTranslation. Defaults to
the image's native CRS transform.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>maxPixels</code></td>
        <td></td>
        <td><p>The maximum allowed number of pixels in the exported
image. The task will fail if the exported region covers more
pixels in the specified projection. Defaults to 100,000,000.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>shardSize</code></td>
        <td></td>
        <td><p>Size in pixels of the tiles in which this image will be
computed. Defaults to 256.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>fileDimensions</code></td>
        <td></td>
        <td><p>The dimensions in pixels of each image file, if the
image is too large to fit in a single file. May specify a
single number to indicate a square shape, or a tuple of two
dimensions to indicate (width,height). Note that the image will
still be clipped to the overall image dimensions. Must be a
multiple of shardSize.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>skipEmptyTiles</code></td>
        <td></td>
        <td><p>If true, skip writing empty (i.e. fully-masked)
image tiles. Defaults to false.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>fileFormat</code></td>
        <td></td>
        <td><p>The string file format to which the image is exported.
Currently only 'GeoTIFF' and 'TFRecord' are supported, defaults to
'GeoTIFF'.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>formatOptions</code></td>
        <td></td>
        <td><p>A dictionary of string keys to format specific options.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>**kwargs</code></td>
        <td></td>
        <td><p>Holds other keyword arguments that may have been deprecated
such as 'crs_transform'.</p></td>
        <td><code>{}</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">ee_export_image_to_cloud_storage</span><span class="p">(</span>
    <span class="n">image</span><span class="p">,</span>
    <span class="n">description</span><span class="o">=</span><span class="s2">&quot;myExportImageTask&quot;</span><span class="p">,</span>
    <span class="n">bucket</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">fileNamePrefix</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">dimensions</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">region</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">crs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">crsTransform</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">maxPixels</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">shardSize</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">fileDimensions</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">skipEmptyTiles</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">fileFormat</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">formatOptions</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Creates a task to export an EE Image to Google Cloud Storage.</span>

<span class="sd">    Args:</span>
<span class="sd">        image: The image to be exported.</span>
<span class="sd">        description: Human-readable name of the task.</span>
<span class="sd">        bucket: The name of a Cloud Storage bucket for the export.</span>
<span class="sd">        fileNamePrefix: Cloud Storage object name prefix for the export.</span>
<span class="sd">            Defaults to the name of the task.</span>
<span class="sd">        dimensions: The dimensions of the exported image. Takes either a</span>
<span class="sd">            single positive integer as the maximum dimension or &quot;WIDTHxHEIGHT&quot;</span>
<span class="sd">            where WIDTH and HEIGHT are each positive integers.</span>
<span class="sd">        region: The lon,lat coordinates for a LinearRing or Polygon</span>
<span class="sd">            specifying the region to export. Can be specified as a nested</span>
<span class="sd">            lists of numbers or a serialized string. Defaults to the image&#39;s</span>
<span class="sd">            region.</span>
<span class="sd">        scale: The resolution in meters per pixel. Defaults to the</span>
<span class="sd">            native resolution of the image assset unless a crsTransform</span>
<span class="sd">            is specified.</span>
<span class="sd">        crs: The coordinate reference system of the exported image&#39;s</span>
<span class="sd">            projection. Defaults to the image&#39;s default projection.</span>
<span class="sd">        crsTransform: A comma-separated string of 6 numbers describing</span>
<span class="sd">            the affine transform of the coordinate reference system of the</span>
<span class="sd">            exported image&#39;s projection, in the order: xScale, xShearing,</span>
<span class="sd">            xTranslation, yShearing, yScale and yTranslation. Defaults to</span>
<span class="sd">            the image&#39;s native CRS transform.</span>
<span class="sd">        maxPixels: The maximum allowed number of pixels in the exported</span>
<span class="sd">            image. The task will fail if the exported region covers more</span>
<span class="sd">            pixels in the specified projection. Defaults to 100,000,000.</span>
<span class="sd">        shardSize: Size in pixels of the tiles in which this image will be</span>
<span class="sd">            computed. Defaults to 256.</span>
<span class="sd">        fileDimensions: The dimensions in pixels of each image file, if the</span>
<span class="sd">            image is too large to fit in a single file. May specify a</span>
<span class="sd">            single number to indicate a square shape, or a tuple of two</span>
<span class="sd">            dimensions to indicate (width,height). Note that the image will</span>
<span class="sd">            still be clipped to the overall image dimensions. Must be a</span>
<span class="sd">            multiple of shardSize.</span>
<span class="sd">        skipEmptyTiles: If true, skip writing empty (i.e. fully-masked)</span>
<span class="sd">            image tiles. Defaults to false.</span>
<span class="sd">        fileFormat: The string file format to which the image is exported.</span>
<span class="sd">            Currently only &#39;GeoTIFF&#39; and &#39;TFRecord&#39; are supported, defaults to</span>
<span class="sd">            &#39;GeoTIFF&#39;.</span>
<span class="sd">        formatOptions: A dictionary of string keys to format specific options.</span>
<span class="sd">        **kwargs: Holds other keyword arguments that may have been deprecated</span>
<span class="sd">            such as &#39;crs_transform&#39;.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Input image must be an instance of ee.Image&quot;</span><span class="p">)</span>

    <span class="n">task</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">batch</span><span class="o">.</span><span class="n">Export</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">toCloudStorage</span><span class="p">(</span>
        <span class="n">image</span><span class="p">,</span>
        <span class="n">description</span><span class="p">,</span>
        <span class="n">bucket</span><span class="p">,</span>
        <span class="n">fileNamePrefix</span><span class="p">,</span>
        <span class="n">dimensions</span><span class="p">,</span>
        <span class="n">region</span><span class="p">,</span>
        <span class="n">scale</span><span class="p">,</span>
        <span class="n">crs</span><span class="p">,</span>
        <span class="n">crsTransform</span><span class="p">,</span>
        <span class="n">maxPixels</span><span class="p">,</span>
        <span class="n">shardSize</span><span class="p">,</span>
        <span class="n">fileDimensions</span><span class="p">,</span>
        <span class="n">skipEmptyTiles</span><span class="p">,</span>
        <span class="n">fileFormat</span><span class="p">,</span>
        <span class="n">formatOptions</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">task</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.ee_export_image_to_drive" class="doc doc-heading">
<code class="highlight language-python"><span class="n">ee_export_image_to_drive</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s1">&#39;myExportImageTask&#39;</span><span class="p">,</span> <span class="n">folder</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">fileNamePrefix</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">dimensions</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">region</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">crs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">crsTransform</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">maxPixels</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">shardSize</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">fileDimensions</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">skipEmptyTiles</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">fileFormat</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">formatOptions</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.common.ee_export_image_to_drive" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Creates a batch task to export an Image as a raster to Google Drive.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>image</code></td>
        <td></td>
        <td><p>The image to be exported.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>description</code></td>
        <td></td>
        <td><p>Human-readable name of the task.</p></td>
        <td><code>&#39;myExportImageTask&#39;</code></td>
      </tr>
      <tr>
        <td><code>folder</code></td>
        <td></td>
        <td><p>The name of a unique folder in your Drive account to
export into. Defaults to the root of the drive.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>fileNamePrefix</code></td>
        <td></td>
        <td><p>The Google Drive filename for the export.
Defaults to the name of the task.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>dimensions</code></td>
        <td></td>
        <td><p>The dimensions of the exported image. Takes either a
single positive integer as the maximum dimension or "WIDTHxHEIGHT"
where WIDTH and HEIGHT are each positive integers.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>region</code></td>
        <td></td>
        <td><p>The lon,lat coordinates for a LinearRing or Polygon
specifying the region to export. Can be specified as a nested
lists of numbers or a serialized string. Defaults to the image's
region.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>scale</code></td>
        <td></td>
        <td><p>The resolution in meters per pixel. Defaults to the
native resolution of the image assset unless a crsTransform
is specified.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>crs</code></td>
        <td></td>
        <td><p>The coordinate reference system of the exported image's
projection. Defaults to the image's default projection.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>crsTransform</code></td>
        <td></td>
        <td><p>A comma-separated string of 6 numbers describing
the affine transform of the coordinate reference system of the
exported image's projection, in the order: xScale, xShearing,
xTranslation, yShearing, yScale and yTranslation. Defaults to
the image's native CRS transform.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>maxPixels</code></td>
        <td></td>
        <td><p>The maximum allowed number of pixels in the exported
image. The task will fail if the exported region covers more
pixels in the specified projection. Defaults to 100,000,000.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>shardSize</code></td>
        <td></td>
        <td><p>Size in pixels of the tiles in which this image will be
computed. Defaults to 256.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>fileDimensions</code></td>
        <td></td>
        <td><p>The dimensions in pixels of each image file, if the
image is too large to fit in a single file. May specify a
single number to indicate a square shape, or a tuple of two
dimensions to indicate (width,height). Note that the image will
still be clipped to the overall image dimensions. Must be a
multiple of shardSize.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>skipEmptyTiles</code></td>
        <td></td>
        <td><p>If true, skip writing empty (i.e. fully-masked)
image tiles. Defaults to false.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>fileFormat</code></td>
        <td></td>
        <td><p>The string file format to which the image is exported.
Currently only 'GeoTIFF' and 'TFRecord' are supported, defaults to
'GeoTIFF'.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>formatOptions</code></td>
        <td></td>
        <td><p>A dictionary of string keys to format specific options.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>**kwargs</code></td>
        <td></td>
        <td><p>Holds other keyword arguments that may have been deprecated
such as 'crs_transform', 'driveFolder', and 'driveFileNamePrefix'.</p></td>
        <td><code>{}</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">ee_export_image_to_drive</span><span class="p">(</span>
    <span class="n">image</span><span class="p">,</span>
    <span class="n">description</span><span class="o">=</span><span class="s2">&quot;myExportImageTask&quot;</span><span class="p">,</span>
    <span class="n">folder</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">fileNamePrefix</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">dimensions</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">region</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">crs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">crsTransform</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">maxPixels</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">shardSize</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">fileDimensions</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">skipEmptyTiles</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">fileFormat</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">formatOptions</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Creates a batch task to export an Image as a raster to Google Drive.</span>

<span class="sd">    Args:</span>
<span class="sd">        image: The image to be exported.</span>
<span class="sd">        description: Human-readable name of the task.</span>
<span class="sd">        folder: The name of a unique folder in your Drive account to</span>
<span class="sd">            export into. Defaults to the root of the drive.</span>
<span class="sd">        fileNamePrefix: The Google Drive filename for the export.</span>
<span class="sd">            Defaults to the name of the task.</span>
<span class="sd">        dimensions: The dimensions of the exported image. Takes either a</span>
<span class="sd">            single positive integer as the maximum dimension or &quot;WIDTHxHEIGHT&quot;</span>
<span class="sd">            where WIDTH and HEIGHT are each positive integers.</span>
<span class="sd">        region: The lon,lat coordinates for a LinearRing or Polygon</span>
<span class="sd">            specifying the region to export. Can be specified as a nested</span>
<span class="sd">            lists of numbers or a serialized string. Defaults to the image&#39;s</span>
<span class="sd">            region.</span>
<span class="sd">        scale: The resolution in meters per pixel. Defaults to the</span>
<span class="sd">            native resolution of the image assset unless a crsTransform</span>
<span class="sd">            is specified.</span>
<span class="sd">        crs: The coordinate reference system of the exported image&#39;s</span>
<span class="sd">            projection. Defaults to the image&#39;s default projection.</span>
<span class="sd">        crsTransform: A comma-separated string of 6 numbers describing</span>
<span class="sd">            the affine transform of the coordinate reference system of the</span>
<span class="sd">            exported image&#39;s projection, in the order: xScale, xShearing,</span>
<span class="sd">            xTranslation, yShearing, yScale and yTranslation. Defaults to</span>
<span class="sd">            the image&#39;s native CRS transform.</span>
<span class="sd">        maxPixels: The maximum allowed number of pixels in the exported</span>
<span class="sd">            image. The task will fail if the exported region covers more</span>
<span class="sd">            pixels in the specified projection. Defaults to 100,000,000.</span>
<span class="sd">        shardSize: Size in pixels of the tiles in which this image will be</span>
<span class="sd">            computed. Defaults to 256.</span>
<span class="sd">        fileDimensions: The dimensions in pixels of each image file, if the</span>
<span class="sd">            image is too large to fit in a single file. May specify a</span>
<span class="sd">            single number to indicate a square shape, or a tuple of two</span>
<span class="sd">            dimensions to indicate (width,height). Note that the image will</span>
<span class="sd">            still be clipped to the overall image dimensions. Must be a</span>
<span class="sd">            multiple of shardSize.</span>
<span class="sd">        skipEmptyTiles: If true, skip writing empty (i.e. fully-masked)</span>
<span class="sd">            image tiles. Defaults to false.</span>
<span class="sd">        fileFormat: The string file format to which the image is exported.</span>
<span class="sd">            Currently only &#39;GeoTIFF&#39; and &#39;TFRecord&#39; are supported, defaults to</span>
<span class="sd">            &#39;GeoTIFF&#39;.</span>
<span class="sd">        formatOptions: A dictionary of string keys to format specific options.</span>
<span class="sd">        **kwargs: Holds other keyword arguments that may have been deprecated</span>
<span class="sd">            such as &#39;crs_transform&#39;, &#39;driveFolder&#39;, and &#39;driveFileNamePrefix&#39;.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Input image must be an instance of ee.Image&quot;</span><span class="p">)</span>

    <span class="n">task</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">batch</span><span class="o">.</span><span class="n">Export</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">toDrive</span><span class="p">(</span>
        <span class="n">image</span><span class="p">,</span>
        <span class="n">description</span><span class="p">,</span>
        <span class="n">folder</span><span class="p">,</span>
        <span class="n">fileNamePrefix</span><span class="p">,</span>
        <span class="n">dimensions</span><span class="p">,</span>
        <span class="n">region</span><span class="p">,</span>
        <span class="n">scale</span><span class="p">,</span>
        <span class="n">crs</span><span class="p">,</span>
        <span class="n">crsTransform</span><span class="p">,</span>
        <span class="n">maxPixels</span><span class="p">,</span>
        <span class="n">shardSize</span><span class="p">,</span>
        <span class="n">fileDimensions</span><span class="p">,</span>
        <span class="n">skipEmptyTiles</span><span class="p">,</span>
        <span class="n">fileFormat</span><span class="p">,</span>
        <span class="n">formatOptions</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">task</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.ee_export_map_to_cloud_storage" class="doc doc-heading">
<code class="highlight language-python"><span class="n">ee_export_map_to_cloud_storage</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s1">&#39;myExportMapTask&#39;</span><span class="p">,</span> <span class="n">bucket</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">fileFormat</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">writePublicTiles</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">maxZoom</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">minZoom</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">region</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">skipEmptyTiles</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">mapsApiKey</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.common.ee_export_map_to_cloud_storage" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Creates a task to export an Image as a pyramid of map tiles.</p>
<p>Exports a rectangular pyramid of map tiles for use with web map
viewers. The map tiles will be accompanied by a reference
index.html file that displays them using the Google Maps API,
and an earth.html file for opening the map on Google Earth.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>image</code></td>
        <td></td>
        <td><p>The image to export as tiles.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>description</code></td>
        <td></td>
        <td><p>Human-readable name of the task.</p></td>
        <td><code>&#39;myExportMapTask&#39;</code></td>
      </tr>
      <tr>
        <td><code>bucket</code></td>
        <td></td>
        <td><p>The destination bucket to write to.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>fileFormat</code></td>
        <td></td>
        <td><p>The map tiles' file format, one of 'auto', 'png',
or 'jpeg'. Defaults to 'auto', which means that opaque tiles
will be encoded as 'jpg' and tiles with transparency will be
encoded as 'png'.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>path</code></td>
        <td></td>
        <td><p>The string used as the output's path. A trailing '/'
is optional. Defaults to the task's description.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>writePublicTiles</code></td>
        <td></td>
        <td><p>Whether to write public tiles instead of using the
bucket's default object ACL. Defaults to True and requires the
invoker to be an OWNER of bucket.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>maxZoom</code></td>
        <td></td>
        <td><p>The maximum zoom level of the map tiles to export.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>scale</code></td>
        <td></td>
        <td><p>The max image resolution in meters per pixel, as an alternative
to 'maxZoom'. The scale will be converted to the most appropriate
maximum zoom level at the equator.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>minZoom</code></td>
        <td></td>
        <td><p>The optional minimum zoom level of the map tiles to export.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>region</code></td>
        <td></td>
        <td><p>The lon,lat coordinates for a LinearRing or Polygon
specifying the region to export. Can be specified as a nested
lists of numbers or a serialized string. Map tiles will be
produced in the rectangular region containing this geometry.
Defaults to the image's region.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>skipEmptyTiles</code></td>
        <td></td>
        <td><p>If true, skip writing empty (i.e. fully-transparent)
map tiles. Defaults to false.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>mapsApiKey</code></td>
        <td></td>
        <td><p>Used in index.html to initialize the Google Maps API. This
removes the "development purposes only" message from the map.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>**kwargs</code></td>
        <td></td>
        <td><p>Holds other keyword arguments that may have been deprecated
such as 'crs_transform'.</p></td>
        <td><code>{}</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">ee_export_map_to_cloud_storage</span><span class="p">(</span>
    <span class="n">image</span><span class="p">,</span>
    <span class="n">description</span><span class="o">=</span><span class="s2">&quot;myExportMapTask&quot;</span><span class="p">,</span>
    <span class="n">bucket</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">fileFormat</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">writePublicTiles</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">maxZoom</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">minZoom</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">region</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">skipEmptyTiles</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">mapsApiKey</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">):</span>

    <span class="sd">&quot;&quot;&quot;Creates a task to export an Image as a pyramid of map tiles.</span>

<span class="sd">    Exports a rectangular pyramid of map tiles for use with web map</span>
<span class="sd">    viewers. The map tiles will be accompanied by a reference</span>
<span class="sd">    index.html file that displays them using the Google Maps API,</span>
<span class="sd">    and an earth.html file for opening the map on Google Earth.</span>

<span class="sd">    Args:</span>
<span class="sd">        image: The image to export as tiles.</span>
<span class="sd">        description: Human-readable name of the task.</span>
<span class="sd">        bucket: The destination bucket to write to.</span>
<span class="sd">        fileFormat: The map tiles&#39; file format, one of &#39;auto&#39;, &#39;png&#39;,</span>
<span class="sd">            or &#39;jpeg&#39;. Defaults to &#39;auto&#39;, which means that opaque tiles</span>
<span class="sd">            will be encoded as &#39;jpg&#39; and tiles with transparency will be</span>
<span class="sd">            encoded as &#39;png&#39;.</span>
<span class="sd">        path: The string used as the output&#39;s path. A trailing &#39;/&#39;</span>
<span class="sd">            is optional. Defaults to the task&#39;s description.</span>
<span class="sd">        writePublicTiles: Whether to write public tiles instead of using the</span>
<span class="sd">            bucket&#39;s default object ACL. Defaults to True and requires the</span>
<span class="sd">            invoker to be an OWNER of bucket.</span>
<span class="sd">        maxZoom: The maximum zoom level of the map tiles to export.</span>
<span class="sd">        scale: The max image resolution in meters per pixel, as an alternative</span>
<span class="sd">            to &#39;maxZoom&#39;. The scale will be converted to the most appropriate</span>
<span class="sd">            maximum zoom level at the equator.</span>
<span class="sd">        minZoom: The optional minimum zoom level of the map tiles to export.</span>
<span class="sd">        region: The lon,lat coordinates for a LinearRing or Polygon</span>
<span class="sd">            specifying the region to export. Can be specified as a nested</span>
<span class="sd">            lists of numbers or a serialized string. Map tiles will be</span>
<span class="sd">            produced in the rectangular region containing this geometry.</span>
<span class="sd">            Defaults to the image&#39;s region.</span>
<span class="sd">        skipEmptyTiles: If true, skip writing empty (i.e. fully-transparent)</span>
<span class="sd">            map tiles. Defaults to false.</span>
<span class="sd">        mapsApiKey: Used in index.html to initialize the Google Maps API. This</span>
<span class="sd">            removes the &quot;development purposes only&quot; message from the map.</span>
<span class="sd">        **kwargs: Holds other keyword arguments that may have been deprecated</span>
<span class="sd">            such as &#39;crs_transform&#39;.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;image must be an ee.Image&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;USE_MKDOCS&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># skip if running GitHub CI.</span>
        <span class="k">return</span>

    <span class="nb">print</span><span class="p">(</span>
        <span class="sa">f</span><span class="s2">&quot;Exporting </span><span class="si">{</span><span class="n">description</span><span class="si">}</span><span class="s2">... Please check the Task Manager from the JavaScript Code Editor.&quot;</span>
    <span class="p">)</span>

    <span class="n">task</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">batch</span><span class="o">.</span><span class="n">Export</span><span class="o">.</span><span class="n">map</span><span class="o">.</span><span class="n">toCloudStorage</span><span class="p">(</span>
        <span class="n">image</span><span class="p">,</span>
        <span class="n">description</span><span class="p">,</span>
        <span class="n">bucket</span><span class="p">,</span>
        <span class="n">fileFormat</span><span class="p">,</span>
        <span class="n">path</span><span class="p">,</span>
        <span class="n">writePublicTiles</span><span class="p">,</span>
        <span class="n">maxZoom</span><span class="p">,</span>
        <span class="n">scale</span><span class="p">,</span>
        <span class="n">minZoom</span><span class="p">,</span>
        <span class="n">region</span><span class="p">,</span>
        <span class="n">skipEmptyTiles</span><span class="p">,</span>
        <span class="n">mapsApiKey</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">task</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.ee_export_vector" class="doc doc-heading">
<code class="highlight language-python"><span class="n">ee_export_vector</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">selectors</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">keep_zip</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="n">proxies</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


<a href="#geemap.common.ee_export_vector" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Exports Earth Engine FeatureCollection to other formats, including shp, csv, json, kml, and kmz.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>ee_object</code></td>
        <td><code>object</code></td>
        <td><p>ee.FeatureCollection to export.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>filename</code></td>
        <td><code>str</code></td>
        <td><p>Output file name.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>selectors</code></td>
        <td><code>list</code></td>
        <td><p>A list of attributes to export. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>verbose</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to print out descriptive text.</p></td>
        <td><code>True</code></td>
      </tr>
      <tr>
        <td><code>keep_zip</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to keep the downloaded shapefile as a zip file.</p></td>
        <td><code>False</code></td>
      </tr>
      <tr>
        <td><code>timeout</code></td>
        <td><code>int</code></td>
        <td><p>Timeout in seconds. Defaults to 300 seconds.</p></td>
        <td><code>300</code></td>
      </tr>
      <tr>
        <td><code>proxies</code></td>
        <td><code>dict</code></td>
        <td><p>A dictionary of proxies to use. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">ee_export_vector</span><span class="p">(</span>
    <span class="n">ee_object</span><span class="p">,</span>
    <span class="n">filename</span><span class="p">,</span>
    <span class="n">selectors</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">keep_zip</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">timeout</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span>
    <span class="n">proxies</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Exports Earth Engine FeatureCollection to other formats, including shp, csv, json, kml, and kmz.</span>

<span class="sd">    Args:</span>
<span class="sd">        ee_object (object): ee.FeatureCollection to export.</span>
<span class="sd">        filename (str): Output file name.</span>
<span class="sd">        selectors (list, optional): A list of attributes to export. Defaults to None.</span>
<span class="sd">        verbose (bool, optional): Whether to print out descriptive text.</span>
<span class="sd">        keep_zip (bool, optional): Whether to keep the downloaded shapefile as a zip file.</span>
<span class="sd">        timeout (int, optional): Timeout in seconds. Defaults to 300 seconds.</span>
<span class="sd">        proxies (dict, optional): A dictionary of proxies to use. Defaults to None.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;ee_object must be an ee.FeatureCollection&quot;</span><span class="p">)</span>

    <span class="n">allowed_formats</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;csv&quot;</span><span class="p">,</span> <span class="s2">&quot;geojson&quot;</span><span class="p">,</span> <span class="s2">&quot;json&quot;</span><span class="p">,</span> <span class="s2">&quot;kml&quot;</span><span class="p">,</span> <span class="s2">&quot;kmz&quot;</span><span class="p">,</span> <span class="s2">&quot;shp&quot;</span><span class="p">]</span>
    <span class="c1"># allowed_formats = [&#39;csv&#39;, &#39;kml&#39;, &#39;kmz&#39;]</span>
    <span class="n">filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
    <span class="n">basename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">basename</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">filetype</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">basename</span><span class="p">)[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">filetype</span> <span class="o">==</span> <span class="s2">&quot;shp&quot;</span><span class="p">:</span>
        <span class="n">filename</span> <span class="o">=</span> <span class="n">filename</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;.shp&quot;</span><span class="p">,</span> <span class="s2">&quot;.zip&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">filetype</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="n">allowed_formats</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="s2">&quot;The file type must be one of the following: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">allowed_formats</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="p">)</span>

    <span class="k">if</span> <span class="n">selectors</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">selectors</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">first</span><span class="p">()</span><span class="o">.</span><span class="n">propertyNames</span><span class="p">()</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">filetype</span> <span class="o">==</span> <span class="s2">&quot;csv&quot;</span><span class="p">:</span>
            <span class="c1"># remove .geo coordinate field</span>
            <span class="n">ee_object</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">select</span><span class="p">([</span><span class="s2">&quot;.*&quot;</span><span class="p">],</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">filetype</span> <span class="o">==</span> <span class="s2">&quot;geojson&quot;</span><span class="p">:</span>
        <span class="n">selectors</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;.geo&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="n">selectors</span>

    <span class="k">elif</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">selectors</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="s2">&quot;selectors must be a list, such as [&#39;attribute1&#39;, &#39;attribute2&#39;]&quot;</span>
        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">allowed_attributes</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">first</span><span class="p">()</span><span class="o">.</span><span class="n">propertyNames</span><span class="p">()</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">attribute</span> <span class="ow">in</span> <span class="n">selectors</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">attribute</span> <span class="ow">in</span> <span class="n">allowed_attributes</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="s2">&quot;Attributes must be one chosen from: </span><span class="si">{}</span><span class="s2"> &quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                        <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">allowed_attributes</span><span class="p">)</span>
                    <span class="p">)</span>
                <span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">verbose</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Generating URL ...&quot;</span><span class="p">)</span>
        <span class="n">url</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">getDownloadURL</span><span class="p">(</span>
            <span class="n">filetype</span><span class="o">=</span><span class="n">filetype</span><span class="p">,</span> <span class="n">selectors</span><span class="o">=</span><span class="n">selectors</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="n">name</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">verbose</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Downloading data from </span><span class="si">{</span><span class="n">url</span><span class="si">}</span><span class="se">\n</span><span class="s2">Please wait ...&quot;</span><span class="p">)</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">stream</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span> <span class="n">proxies</span><span class="o">=</span><span class="n">proxies</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">r</span><span class="o">.</span><span class="n">status_code</span> <span class="o">!=</span> <span class="mi">200</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;An error occurred while downloading. </span><span class="se">\n</span><span class="s2"> Retrying ...&quot;</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">new_ee_object</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">filter_polygons</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Generating URL ...&quot;</span><span class="p">)</span>
                <span class="n">url</span> <span class="o">=</span> <span class="n">new_ee_object</span><span class="o">.</span><span class="n">getDownloadURL</span><span class="p">(</span>
                    <span class="n">filetype</span><span class="o">=</span><span class="n">filetype</span><span class="p">,</span> <span class="n">selectors</span><span class="o">=</span><span class="n">selectors</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="n">name</span>
                <span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Downloading data from </span><span class="si">{</span><span class="n">url</span><span class="si">}</span><span class="se">\n</span><span class="s2">Please wait ...&quot;</span><span class="p">)</span>
                <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">stream</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span> <span class="n">proxies</span><span class="o">=</span><span class="n">proxies</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
                <span class="k">raise</span> <span class="ne">ValueError</span>

        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s2">&quot;wb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fd</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="n">r</span><span class="o">.</span><span class="n">iter_content</span><span class="p">(</span><span class="n">chunk_size</span><span class="o">=</span><span class="mi">1024</span><span class="p">):</span>
                <span class="n">fd</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">chunk</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;An error occurred while downloading.&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">()[</span><span class="s2">&quot;error&quot;</span><span class="p">][</span><span class="s2">&quot;message&quot;</span><span class="p">])</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">filetype</span> <span class="o">==</span> <span class="s2">&quot;shp&quot;</span><span class="p">:</span>
            <span class="k">with</span> <span class="n">zipfile</span><span class="o">.</span><span class="n">ZipFile</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span> <span class="k">as</span> <span class="n">z</span><span class="p">:</span>
                <span class="n">z</span><span class="o">.</span><span class="n">extractall</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">filename</span><span class="p">))</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">keep_zip</span><span class="p">:</span>
                <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
            <span class="n">filename</span> <span class="o">=</span> <span class="n">filename</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;.zip&quot;</span><span class="p">,</span> <span class="s2">&quot;.shp&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">verbose</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Data downloaded to </span><span class="si">{</span><span class="n">filename</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.ee_export_vector_to_asset" class="doc doc-heading">
<code class="highlight language-python"><span class="n">ee_export_vector_to_asset</span><span class="p">(</span><span class="n">collection</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s1">&#39;myExportTableTask&#39;</span><span class="p">,</span> <span class="n">assetId</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">maxVertices</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.common.ee_export_vector_to_asset" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Creates a task to export a FeatureCollection to Asset.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>collection</code></td>
        <td></td>
        <td><p>The feature collection to be exported.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>description</code></td>
        <td></td>
        <td><p>Human-readable name of the task.</p></td>
        <td><code>&#39;myExportTableTask&#39;</code></td>
      </tr>
      <tr>
        <td><code>assetId</code></td>
        <td></td>
        <td><p>The destination asset ID.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>maxVertices</code></td>
        <td></td>
        <td><p>Max number of uncut vertices per geometry; geometries with more
vertices will be cut into pieces smaller than this size.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>**kwargs</code></td>
        <td></td>
        <td><p>Holds other keyword arguments that may have been deprecated.</p></td>
        <td><code>{}</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">ee_export_vector_to_asset</span><span class="p">(</span>
    <span class="n">collection</span><span class="p">,</span>
    <span class="n">description</span><span class="o">=</span><span class="s2">&quot;myExportTableTask&quot;</span><span class="p">,</span>
    <span class="n">assetId</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">maxVertices</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Creates a task to export a FeatureCollection to Asset.</span>

<span class="sd">    Args:</span>
<span class="sd">        collection: The feature collection to be exported.</span>
<span class="sd">        description: Human-readable name of the task.</span>
<span class="sd">        assetId: The destination asset ID.</span>
<span class="sd">        maxVertices:</span>
<span class="sd">            Max number of uncut vertices per geometry; geometries with more</span>
<span class="sd">            vertices will be cut into pieces smaller than this size.</span>
<span class="sd">        **kwargs: Holds other keyword arguments that may have been deprecated.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">collection</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The collection must be an ee.FeatureCollection.&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;USE_MKDOCS&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># skip if running GitHub CI.</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">assetId</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">assetId</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;users/&quot;</span><span class="p">)</span> <span class="ow">or</span> <span class="n">assetId</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;projects/&quot;</span><span class="p">):</span>
            <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">assetId</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">ee_user_id</span><span class="p">()</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">assetId</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="nb">print</span><span class="p">(</span><span class="n">assetId</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span>
        <span class="sa">f</span><span class="s2">&quot;Exporting </span><span class="si">{</span><span class="n">description</span><span class="si">}</span><span class="s2">... Please check the Task Manager from the JavaScript Code Editor.&quot;</span>
    <span class="p">)</span>

    <span class="n">task</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">batch</span><span class="o">.</span><span class="n">Export</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">toAsset</span><span class="p">(</span>
        <span class="n">collection</span><span class="p">,</span>
        <span class="n">description</span><span class="p">,</span>
        <span class="n">assetId</span><span class="p">,</span>
        <span class="n">maxVertices</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">task</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.ee_export_vector_to_cloud_storage" class="doc doc-heading">
<code class="highlight language-python"><span class="n">ee_export_vector_to_cloud_storage</span><span class="p">(</span><span class="n">collection</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s1">&#39;myExportTableTask&#39;</span><span class="p">,</span> <span class="n">bucket</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">fileNamePrefix</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">fileFormat</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">selectors</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">maxVertices</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.common.ee_export_vector_to_cloud_storage" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Creates a task to export a FeatureCollection to Google Cloud Storage.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>collection</code></td>
        <td></td>
        <td><p>The feature collection to be exported.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>description</code></td>
        <td></td>
        <td><p>Human-readable name of the task.</p></td>
        <td><code>&#39;myExportTableTask&#39;</code></td>
      </tr>
      <tr>
        <td><code>bucket</code></td>
        <td></td>
        <td><p>The name of a Cloud Storage bucket for the export.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>fileNamePrefix</code></td>
        <td></td>
        <td><p>Cloud Storage object name prefix for the export.
Defaults to the name of the task.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>fileFormat</code></td>
        <td></td>
        <td><p>The output format: "CSV" (default), "GeoJSON", "KML", "KMZ",
"SHP", or "TFRecord".</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>selectors</code></td>
        <td></td>
        <td><p>The list of properties to include in the output, as a list
of strings or a comma-separated string. By default, all properties
are included.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>maxVertices</code></td>
        <td></td>
        <td><p>Max number of uncut vertices per geometry; geometries with more
vertices will be cut into pieces smaller than this size.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>**kwargs</code></td>
        <td></td>
        <td><p>Holds other keyword arguments that may have been deprecated
such as 'outputBucket'.</p></td>
        <td><code>{}</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">ee_export_vector_to_cloud_storage</span><span class="p">(</span>
    <span class="n">collection</span><span class="p">,</span>
    <span class="n">description</span><span class="o">=</span><span class="s2">&quot;myExportTableTask&quot;</span><span class="p">,</span>
    <span class="n">bucket</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">fileNamePrefix</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">fileFormat</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">selectors</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">maxVertices</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Creates a task to export a FeatureCollection to Google Cloud Storage.</span>

<span class="sd">    Args:</span>
<span class="sd">        collection: The feature collection to be exported.</span>
<span class="sd">        description: Human-readable name of the task.</span>
<span class="sd">        bucket: The name of a Cloud Storage bucket for the export.</span>
<span class="sd">        fileNamePrefix: Cloud Storage object name prefix for the export.</span>
<span class="sd">            Defaults to the name of the task.</span>
<span class="sd">        fileFormat: The output format: &quot;CSV&quot; (default), &quot;GeoJSON&quot;, &quot;KML&quot;, &quot;KMZ&quot;,</span>
<span class="sd">            &quot;SHP&quot;, or &quot;TFRecord&quot;.</span>
<span class="sd">        selectors: The list of properties to include in the output, as a list</span>
<span class="sd">            of strings or a comma-separated string. By default, all properties</span>
<span class="sd">            are included.</span>
<span class="sd">        maxVertices:</span>
<span class="sd">            Max number of uncut vertices per geometry; geometries with more</span>
<span class="sd">            vertices will be cut into pieces smaller than this size.</span>
<span class="sd">        **kwargs: Holds other keyword arguments that may have been deprecated</span>
<span class="sd">            such as &#39;outputBucket&#39;.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">collection</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The collection must be an ee.FeatureCollection.&quot;</span><span class="p">)</span>

    <span class="n">allowed_formats</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;csv&quot;</span><span class="p">,</span> <span class="s2">&quot;geojson&quot;</span><span class="p">,</span> <span class="s2">&quot;kml&quot;</span><span class="p">,</span> <span class="s2">&quot;kmz&quot;</span><span class="p">,</span> <span class="s2">&quot;shp&quot;</span><span class="p">,</span> <span class="s2">&quot;tfrecord&quot;</span><span class="p">]</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">fileFormat</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="n">allowed_formats</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="s2">&quot;The file type must be one of the following: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">allowed_formats</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="p">)</span>

    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;USE_MKDOCS&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># skip if running GitHub CI.</span>
        <span class="k">return</span>

    <span class="nb">print</span><span class="p">(</span>
        <span class="sa">f</span><span class="s2">&quot;Exporting </span><span class="si">{</span><span class="n">description</span><span class="si">}</span><span class="s2">... Please check the Task Manager from the JavaScript Code Editor.&quot;</span>
    <span class="p">)</span>

    <span class="n">task</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">batch</span><span class="o">.</span><span class="n">Export</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">toCloudStorage</span><span class="p">(</span>
        <span class="n">collection</span><span class="p">,</span>
        <span class="n">description</span><span class="p">,</span>
        <span class="n">bucket</span><span class="p">,</span>
        <span class="n">fileNamePrefix</span><span class="p">,</span>
        <span class="n">fileFormat</span><span class="p">,</span>
        <span class="n">selectors</span><span class="p">,</span>
        <span class="n">maxVertices</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">task</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.ee_export_vector_to_drive" class="doc doc-heading">
<code class="highlight language-python"><span class="n">ee_export_vector_to_drive</span><span class="p">(</span><span class="n">collection</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s1">&#39;myExportTableTask&#39;</span><span class="p">,</span> <span class="n">folder</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">fileNamePrefix</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">fileFormat</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">selectors</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">maxVertices</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.common.ee_export_vector_to_drive" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Creates a task to export a FeatureCollection to Drive.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>collection</code></td>
        <td></td>
        <td><p>The feature collection to be exported.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>description</code></td>
        <td></td>
        <td><p>Human-readable name of the task.</p></td>
        <td><code>&#39;myExportTableTask&#39;</code></td>
      </tr>
      <tr>
        <td><code>folder</code></td>
        <td></td>
        <td><p>The name of a unique folder in your Drive account to
export into. Defaults to the root of the drive.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>fileNamePrefix</code></td>
        <td></td>
        <td><p>The Google Drive filename for the export.
Defaults to the name of the task.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>fileFormat</code></td>
        <td></td>
        <td><p>The output format: "CSV" (default), "GeoJSON", "KML",
"KMZ", "SHP", or "TFRecord".</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>selectors</code></td>
        <td></td>
        <td><p>The list of properties to include in the output, as a list
of strings or a comma-separated string. By default, all properties
are included.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>maxVertices</code></td>
        <td></td>
        <td><p>Max number of uncut vertices per geometry; geometries with more
vertices will be cut into pieces smaller than this size.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>**kwargs</code></td>
        <td></td>
        <td><p>Holds other keyword arguments that may have been deprecated
such as 'driveFolder' and 'driveFileNamePrefix'.</p></td>
        <td><code>{}</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">ee_export_vector_to_drive</span><span class="p">(</span>
    <span class="n">collection</span><span class="p">,</span>
    <span class="n">description</span><span class="o">=</span><span class="s2">&quot;myExportTableTask&quot;</span><span class="p">,</span>
    <span class="n">folder</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">fileNamePrefix</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">fileFormat</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">selectors</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">maxVertices</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Creates a task to export a FeatureCollection to Drive.</span>

<span class="sd">    Args:</span>
<span class="sd">        collection: The feature collection to be exported.</span>
<span class="sd">        description: Human-readable name of the task.</span>
<span class="sd">        folder: The name of a unique folder in your Drive account to</span>
<span class="sd">            export into. Defaults to the root of the drive.</span>
<span class="sd">        fileNamePrefix: The Google Drive filename for the export.</span>
<span class="sd">            Defaults to the name of the task.</span>
<span class="sd">        fileFormat: The output format: &quot;CSV&quot; (default), &quot;GeoJSON&quot;, &quot;KML&quot;,</span>
<span class="sd">            &quot;KMZ&quot;, &quot;SHP&quot;, or &quot;TFRecord&quot;.</span>
<span class="sd">        selectors: The list of properties to include in the output, as a list</span>
<span class="sd">            of strings or a comma-separated string. By default, all properties</span>
<span class="sd">            are included.</span>
<span class="sd">        maxVertices:</span>
<span class="sd">            Max number of uncut vertices per geometry; geometries with more</span>
<span class="sd">            vertices will be cut into pieces smaller than this size.</span>
<span class="sd">        **kwargs: Holds other keyword arguments that may have been deprecated</span>
<span class="sd">            such as &#39;driveFolder&#39; and &#39;driveFileNamePrefix&#39;.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">collection</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The collection must be an ee.FeatureCollection.&quot;</span><span class="p">)</span>

    <span class="n">allowed_formats</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;csv&quot;</span><span class="p">,</span> <span class="s2">&quot;geojson&quot;</span><span class="p">,</span> <span class="s2">&quot;kml&quot;</span><span class="p">,</span> <span class="s2">&quot;kmz&quot;</span><span class="p">,</span> <span class="s2">&quot;shp&quot;</span><span class="p">,</span> <span class="s2">&quot;tfrecord&quot;</span><span class="p">]</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">fileFormat</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="n">allowed_formats</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="s2">&quot;The file type must be one of the following: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">allowed_formats</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="p">)</span>

    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;USE_MKDOCS&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># skip if running GitHub CI.</span>
        <span class="k">return</span>

    <span class="nb">print</span><span class="p">(</span>
        <span class="sa">f</span><span class="s2">&quot;Exporting </span><span class="si">{</span><span class="n">description</span><span class="si">}</span><span class="s2">... Please check the Task Manager from the JavaScript Code Editor.&quot;</span>
    <span class="p">)</span>

    <span class="n">task</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">batch</span><span class="o">.</span><span class="n">Export</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">toDrive</span><span class="p">(</span>
        <span class="n">collection</span><span class="p">,</span>
        <span class="n">description</span><span class="p">,</span>
        <span class="n">folder</span><span class="p">,</span>
        <span class="n">fileNamePrefix</span><span class="p">,</span>
        <span class="n">fileFormat</span><span class="p">,</span>
        <span class="n">selectors</span><span class="p">,</span>
        <span class="n">maxVertices</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">task</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.ee_export_vector_to_feature_view" class="doc doc-heading">
<code class="highlight language-python"><span class="n">ee_export_vector_to_feature_view</span><span class="p">(</span><span class="n">collection</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s1">&#39;myExportTableTask&#39;</span><span class="p">,</span> <span class="n">assetId</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ingestionTimeParameters</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.common.ee_export_vector_to_feature_view" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Creates a task to export a FeatureCollection to a FeatureView.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>collection</code></td>
        <td></td>
        <td><p>The feature collection to be exported.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>description</code></td>
        <td></td>
        <td><p>Human-readable name of the task.</p></td>
        <td><code>&#39;myExportTableTask&#39;</code></td>
      </tr>
      <tr>
        <td><code>assetId</code></td>
        <td></td>
        <td><p>The destination asset ID.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>ingestionTimeParameters</code></td>
        <td></td>
        <td><p>The FeatureView ingestion time parameters.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>**kwargs</code></td>
        <td></td>
        <td><p>Holds other keyword arguments that may have been deprecated.</p></td>
        <td><code>{}</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">ee_export_vector_to_feature_view</span><span class="p">(</span>
    <span class="n">collection</span><span class="p">,</span>
    <span class="n">description</span><span class="o">=</span><span class="s2">&quot;myExportTableTask&quot;</span><span class="p">,</span>
    <span class="n">assetId</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">ingestionTimeParameters</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Creates a task to export a FeatureCollection to a FeatureView.</span>

<span class="sd">    Args:</span>
<span class="sd">        collection: The feature collection to be exported.</span>
<span class="sd">        description: Human-readable name of the task.</span>
<span class="sd">        assetId: The destination asset ID.</span>
<span class="sd">        ingestionTimeParameters: The FeatureView ingestion time parameters.</span>
<span class="sd">        **kwargs: Holds other keyword arguments that may have been deprecated.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">collection</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The collection must be an ee.FeatureCollection.&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;USE_MKDOCS&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># skip if running GitHub CI.</span>
        <span class="k">return</span>

    <span class="nb">print</span><span class="p">(</span>
        <span class="sa">f</span><span class="s2">&quot;Exporting </span><span class="si">{</span><span class="n">description</span><span class="si">}</span><span class="s2">... Please check the Task Manager from the JavaScript Code Editor.&quot;</span>
    <span class="p">)</span>

    <span class="n">task</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">batch</span><span class="o">.</span><span class="n">Export</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">toFeatureView</span><span class="p">(</span>
        <span class="n">collection</span><span class="p">,</span>
        <span class="n">description</span><span class="p">,</span>
        <span class="n">assetId</span><span class="p">,</span>
        <span class="n">ingestionTimeParameters</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">task</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.ee_export_video_to_cloud_storage" class="doc doc-heading">
<code class="highlight language-python"><span class="n">ee_export_video_to_cloud_storage</span><span class="p">(</span><span class="n">collection</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s1">&#39;myExportVideoTask&#39;</span><span class="p">,</span> <span class="n">bucket</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">fileNamePrefix</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">framesPerSecond</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">dimensions</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">region</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">crs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">crsTransform</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">maxPixels</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">maxFrames</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.common.ee_export_video_to_cloud_storage" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Creates a task to export an ImageCollection as a video to Cloud Storage.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>collection</code></td>
        <td></td>
        <td><p>The image collection to be exported. The collection must
only contain RGB images.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>description</code></td>
        <td></td>
        <td><p>Human-readable name of the task.</p></td>
        <td><code>&#39;myExportVideoTask&#39;</code></td>
      </tr>
      <tr>
        <td><code>bucket</code></td>
        <td></td>
        <td><p>The name of a Cloud Storage bucket for the export.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>fileNamePrefix</code></td>
        <td></td>
        <td><p>Cloud Storage object name prefix for the export.
Defaults to the task's description.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>framesPerSecond</code></td>
        <td></td>
        <td><p>A number between .1 and 120 describing the
framerate of the exported video.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>dimensions</code></td>
        <td></td>
        <td><p>The dimensions of the exported video. Takes either a
single positive integer as the maximum dimension or "WIDTHxHEIGHT"
where WIDTH and HEIGHT are each positive integers.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>region</code></td>
        <td></td>
        <td><p>The lon,lat coordinates for a LinearRing or Polygon
specifying the region to export. Can be specified as a nested
lists of numbers or a serialized string. Defaults to the first
image's region.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>scale</code></td>
        <td></td>
        <td><p>The resolution in meters per pixel.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>crs</code></td>
        <td></td>
        <td><p>The coordinate reference system of the exported video's
projection. Defaults to SR-ORG:6627.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>crsTransform</code></td>
        <td></td>
        <td><p>A comma-separated string of 6 numbers describing
the affine transform of the coordinate reference system of the
exported video's projection, in the order: xScale, xShearing,
xTranslation, yShearing, yScale and yTranslation. Defaults to
the image collection's native CRS transform.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>maxPixels</code></td>
        <td></td>
        <td><p>The maximum number of pixels per frame.
Defaults to 1e8 pixels per frame. By setting this explicitly,
you may raise or lower the limit.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>maxFrames</code></td>
        <td></td>
        <td><p>The maximum number of frames to export.
Defaults to 1000 frames. By setting this explicitly, you may
raise or lower the limit.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>**kwargs</code></td>
        <td></td>
        <td><p>Holds other keyword arguments that may have been deprecated
such as 'crs_transform'.</p></td>
        <td><code>{}</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">ee_export_video_to_cloud_storage</span><span class="p">(</span>
    <span class="n">collection</span><span class="p">,</span>
    <span class="n">description</span><span class="o">=</span><span class="s2">&quot;myExportVideoTask&quot;</span><span class="p">,</span>
    <span class="n">bucket</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">fileNamePrefix</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">framesPerSecond</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">dimensions</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">region</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">crs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">crsTransform</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">maxPixels</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">maxFrames</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">):</span>

    <span class="sd">&quot;&quot;&quot;Creates a task to export an ImageCollection as a video to Cloud Storage.</span>

<span class="sd">    Args:</span>
<span class="sd">        collection: The image collection to be exported. The collection must</span>
<span class="sd">            only contain RGB images.</span>
<span class="sd">        description: Human-readable name of the task.</span>
<span class="sd">        bucket: The name of a Cloud Storage bucket for the export.</span>
<span class="sd">        fileNamePrefix: Cloud Storage object name prefix for the export.</span>
<span class="sd">            Defaults to the task&#39;s description.</span>
<span class="sd">        framesPerSecond: A number between .1 and 120 describing the</span>
<span class="sd">            framerate of the exported video.</span>
<span class="sd">        dimensions: The dimensions of the exported video. Takes either a</span>
<span class="sd">            single positive integer as the maximum dimension or &quot;WIDTHxHEIGHT&quot;</span>
<span class="sd">            where WIDTH and HEIGHT are each positive integers.</span>
<span class="sd">        region: The lon,lat coordinates for a LinearRing or Polygon</span>
<span class="sd">            specifying the region to export. Can be specified as a nested</span>
<span class="sd">            lists of numbers or a serialized string. Defaults to the first</span>
<span class="sd">            image&#39;s region.</span>
<span class="sd">        scale: The resolution in meters per pixel.</span>
<span class="sd">        crs: The coordinate reference system of the exported video&#39;s</span>
<span class="sd">            projection. Defaults to SR-ORG:6627.</span>
<span class="sd">        crsTransform: A comma-separated string of 6 numbers describing</span>
<span class="sd">            the affine transform of the coordinate reference system of the</span>
<span class="sd">            exported video&#39;s projection, in the order: xScale, xShearing,</span>
<span class="sd">            xTranslation, yShearing, yScale and yTranslation. Defaults to</span>
<span class="sd">            the image collection&#39;s native CRS transform.</span>
<span class="sd">        maxPixels: The maximum number of pixels per frame.</span>
<span class="sd">            Defaults to 1e8 pixels per frame. By setting this explicitly,</span>
<span class="sd">            you may raise or lower the limit.</span>
<span class="sd">        maxFrames: The maximum number of frames to export.</span>
<span class="sd">            Defaults to 1000 frames. By setting this explicitly, you may</span>
<span class="sd">            raise or lower the limit.</span>
<span class="sd">        **kwargs: Holds other keyword arguments that may have been deprecated</span>
<span class="sd">            such as &#39;crs_transform&#39;.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">collection</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;collection must be an ee.ImageCollection&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;USE_MKDOCS&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># skip if running GitHub CI.</span>
        <span class="k">return</span>

    <span class="nb">print</span><span class="p">(</span>
        <span class="sa">f</span><span class="s2">&quot;Exporting </span><span class="si">{</span><span class="n">description</span><span class="si">}</span><span class="s2">... Please check the Task Manager from the JavaScript Code Editor.&quot;</span>
    <span class="p">)</span>

    <span class="n">task</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">batch</span><span class="o">.</span><span class="n">Export</span><span class="o">.</span><span class="n">video</span><span class="o">.</span><span class="n">toCloudStorage</span><span class="p">(</span>
        <span class="n">collection</span><span class="p">,</span>
        <span class="n">description</span><span class="p">,</span>
        <span class="n">bucket</span><span class="p">,</span>
        <span class="n">fileNamePrefix</span><span class="p">,</span>
        <span class="n">framesPerSecond</span><span class="p">,</span>
        <span class="n">dimensions</span><span class="p">,</span>
        <span class="n">region</span><span class="p">,</span>
        <span class="n">scale</span><span class="p">,</span>
        <span class="n">crs</span><span class="p">,</span>
        <span class="n">crsTransform</span><span class="p">,</span>
        <span class="n">maxPixels</span><span class="p">,</span>
        <span class="n">maxFrames</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">task</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.ee_export_video_to_dirve" class="doc doc-heading">
<code class="highlight language-python"><span class="n">ee_export_video_to_dirve</span><span class="p">(</span><span class="n">collection</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s1">&#39;myExportVideoTask&#39;</span><span class="p">,</span> <span class="n">folder</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">fileNamePrefix</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">framesPerSecond</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">dimensions</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">region</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">crs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">crsTransform</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">maxPixels</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">maxFrames</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.common.ee_export_video_to_dirve" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Creates a task to export an ImageCollection as a video to Drive.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>collection</code></td>
        <td></td>
        <td><p>The image collection to be exported. The collection must
only contain RGB images.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>description</code></td>
        <td></td>
        <td><p>Human-readable name of the task.</p></td>
        <td><code>&#39;myExportVideoTask&#39;</code></td>
      </tr>
      <tr>
        <td><code>folder</code></td>
        <td></td>
        <td><p>The name of a unique folder in your Drive account to
export into. Defaults to the root of the drive.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>fileNamePrefix</code></td>
        <td></td>
        <td><p>The Google Drive filename for the export.
Defaults to the name of the task.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>framesPerSecond</code></td>
        <td></td>
        <td><p>A number between .1 and 120 describing the
framerate of the exported video.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>dimensions</code></td>
        <td></td>
        <td><p>The dimensions of the exported video. Takes either a
single positive integer as the maximum dimension or "WIDTHxHEIGHT"
where WIDTH and HEIGHT are each positive integers.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>region</code></td>
        <td></td>
        <td><p>The lon,lat coordinates for a LinearRing or Polygon
specifying the region to export. Can be specified as a nested
lists of numbers or a serialized string. Defaults to the first
image's region.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>scale</code></td>
        <td></td>
        <td><p>The resolution in meters per pixel.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>crs</code></td>
        <td></td>
        <td><p>The coordinate reference system of the exported video's
projection. Defaults to SR-ORG:6627.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>crsTransform</code></td>
        <td></td>
        <td><p>A comma-separated string of 6 numbers describing
the affine transform of the coordinate reference system of the
exported video's projection, in the order: xScale, xShearing,
xTranslation, yShearing, yScale and yTranslation. Defaults to
the image collection's native CRS transform.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>maxPixels</code></td>
        <td></td>
        <td><p>The maximum number of pixels per frame.
Defaults to 1e8 pixels per frame. By setting this explicitly,
you may raise or lower the limit.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>maxFrames</code></td>
        <td></td>
        <td><p>The maximum number of frames to export.
Defaults to 1000 frames. By setting this explicitly, you may
raise or lower the limit.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>**kwargs</code></td>
        <td></td>
        <td><p>Holds other keyword arguments that may have been deprecated
such as 'crs_transform'.</p></td>
        <td><code>{}</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">ee_export_video_to_dirve</span><span class="p">(</span>
    <span class="n">collection</span><span class="p">,</span>
    <span class="n">description</span><span class="o">=</span><span class="s2">&quot;myExportVideoTask&quot;</span><span class="p">,</span>
    <span class="n">folder</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">fileNamePrefix</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">framesPerSecond</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">dimensions</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">region</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">crs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">crsTransform</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">maxPixels</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">maxFrames</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">):</span>

    <span class="sd">&quot;&quot;&quot;Creates a task to export an ImageCollection as a video to Drive.</span>

<span class="sd">    Args:</span>
<span class="sd">        collection: The image collection to be exported. The collection must</span>
<span class="sd">            only contain RGB images.</span>
<span class="sd">        description: Human-readable name of the task.</span>
<span class="sd">        folder: The name of a unique folder in your Drive account to</span>
<span class="sd">            export into. Defaults to the root of the drive.</span>
<span class="sd">        fileNamePrefix: The Google Drive filename for the export.</span>
<span class="sd">            Defaults to the name of the task.</span>
<span class="sd">        framesPerSecond: A number between .1 and 120 describing the</span>
<span class="sd">            framerate of the exported video.</span>
<span class="sd">        dimensions: The dimensions of the exported video. Takes either a</span>
<span class="sd">            single positive integer as the maximum dimension or &quot;WIDTHxHEIGHT&quot;</span>
<span class="sd">            where WIDTH and HEIGHT are each positive integers.</span>
<span class="sd">        region: The lon,lat coordinates for a LinearRing or Polygon</span>
<span class="sd">            specifying the region to export. Can be specified as a nested</span>
<span class="sd">            lists of numbers or a serialized string. Defaults to the first</span>
<span class="sd">            image&#39;s region.</span>
<span class="sd">        scale: The resolution in meters per pixel.</span>
<span class="sd">        crs: The coordinate reference system of the exported video&#39;s</span>
<span class="sd">            projection. Defaults to SR-ORG:6627.</span>
<span class="sd">        crsTransform: A comma-separated string of 6 numbers describing</span>
<span class="sd">            the affine transform of the coordinate reference system of the</span>
<span class="sd">            exported video&#39;s projection, in the order: xScale, xShearing,</span>
<span class="sd">            xTranslation, yShearing, yScale and yTranslation. Defaults to</span>
<span class="sd">            the image collection&#39;s native CRS transform.</span>
<span class="sd">        maxPixels: The maximum number of pixels per frame.</span>
<span class="sd">            Defaults to 1e8 pixels per frame. By setting this explicitly,</span>
<span class="sd">            you may raise or lower the limit.</span>
<span class="sd">        maxFrames: The maximum number of frames to export.</span>
<span class="sd">            Defaults to 1000 frames. By setting this explicitly, you may</span>
<span class="sd">            raise or lower the limit.</span>
<span class="sd">        **kwargs: Holds other keyword arguments that may have been deprecated</span>
<span class="sd">            such as &#39;crs_transform&#39;.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">collection</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;collection must be an ee.ImageCollection&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;USE_MKDOCS&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># skip if running GitHub CI.</span>
        <span class="k">return</span>

    <span class="nb">print</span><span class="p">(</span>
        <span class="sa">f</span><span class="s2">&quot;Exporting </span><span class="si">{</span><span class="n">description</span><span class="si">}</span><span class="s2">... Please check the Task Manager from the JavaScript Code Editor.&quot;</span>
    <span class="p">)</span>

    <span class="n">task</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">batch</span><span class="o">.</span><span class="n">Export</span><span class="o">.</span><span class="n">video</span><span class="o">.</span><span class="n">toDrive</span><span class="p">(</span>
        <span class="n">collection</span><span class="p">,</span>
        <span class="n">description</span><span class="p">,</span>
        <span class="n">folder</span><span class="p">,</span>
        <span class="n">fileNamePrefix</span><span class="p">,</span>
        <span class="n">framesPerSecond</span><span class="p">,</span>
        <span class="n">dimensions</span><span class="p">,</span>
        <span class="n">region</span><span class="p">,</span>
        <span class="n">scale</span><span class="p">,</span>
        <span class="n">crs</span><span class="p">,</span>
        <span class="n">crsTransform</span><span class="p">,</span>
        <span class="n">maxPixels</span><span class="p">,</span>
        <span class="n">maxFrames</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">task</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.ee_function_tree" class="doc doc-heading">
<code class="highlight language-python"><span class="n">ee_function_tree</span><span class="p">(</span><span class="n">name</span><span class="p">)</span></code>


<a href="#geemap.common.ee_function_tree" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Construct the tree structure based on an Earth Engine function. For example, the function "ee.Algorithms.FMask.matchClouds" will return a list ["ee.Algorithms", "ee.Algorithms.FMask", "ee.Algorithms.FMask.matchClouds"]</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>name</code></td>
        <td><code>str</code></td>
        <td><p>The name of the Earth Engine function</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>list</code></td>
      <td><p>The list for parent functions.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">ee_function_tree</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Construct the tree structure based on an Earth Engine function. For example, the function &quot;ee.Algorithms.FMask.matchClouds&quot; will return a list [&quot;ee.Algorithms&quot;, &quot;ee.Algorithms.FMask&quot;, &quot;ee.Algorithms.FMask.matchClouds&quot;]</span>

<span class="sd">    Args:</span>
<span class="sd">        name (str): The name of the Earth Engine function</span>

<span class="sd">    Returns:</span>
<span class="sd">        list: The list for parent functions.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">func_list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">items</span> <span class="o">=</span> <span class="n">name</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">items</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;ee&quot;</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">items</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
                <span class="n">func_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">items</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="n">i</span><span class="p">]))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">items</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
                <span class="n">func_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">items</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="n">i</span><span class="p">]))</span>

        <span class="k">return</span> <span class="n">func_list</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The provided function name is invalid.&quot;</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.ee_initialize" class="doc doc-heading">
<code class="highlight language-python"><span class="n">ee_initialize</span><span class="p">(</span><span class="n">token_name</span><span class="o">=</span><span class="s1">&#39;EARTHENGINE_TOKEN&#39;</span><span class="p">,</span> <span class="n">auth_mode</span><span class="o">=</span><span class="s1">&#39;notebook&#39;</span><span class="p">,</span> <span class="n">service_account</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>


<a href="#geemap.common.ee_initialize" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Authenticates Earth Engine and initialize an Earth Engine session</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>token_name</code></td>
        <td><code>str</code></td>
        <td><p>The name of the Earth Engine token. Defaults to "EARTHENGINE_TOKEN".</p></td>
        <td><code>&#39;EARTHENGINE_TOKEN&#39;</code></td>
      </tr>
      <tr>
        <td><code>auth_mode</code></td>
        <td><code>str</code></td>
        <td><p>The authentication mode, can be one of paste,notebook,gcloud,appdefault. Defaults to "notebook".</p></td>
        <td><code>&#39;notebook&#39;</code></td>
      </tr>
      <tr>
        <td><code>service_account</code></td>
        <td><code>bool</code></td>
        <td><p>If True, use a service account. Defaults to False.</p></td>
        <td><code>False</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">ee_initialize</span><span class="p">(</span>
    <span class="n">token_name</span><span class="o">=</span><span class="s2">&quot;EARTHENGINE_TOKEN&quot;</span><span class="p">,</span> <span class="n">auth_mode</span><span class="o">=</span><span class="s2">&quot;notebook&quot;</span><span class="p">,</span> <span class="n">service_account</span><span class="o">=</span><span class="kc">False</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Authenticates Earth Engine and initialize an Earth Engine session</span>

<span class="sd">    Args:</span>
<span class="sd">        token_name (str, optional): The name of the Earth Engine token. Defaults to &quot;EARTHENGINE_TOKEN&quot;.</span>
<span class="sd">        auth_mode (str, optional): The authentication mode, can be one of paste,notebook,gcloud,appdefault. Defaults to &quot;notebook&quot;.</span>
<span class="sd">        service_account (bool, optional): If True, use a service account. Defaults to False.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">httplib2</span>

    <span class="k">if</span> <span class="n">ee</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">_credentials</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>

        <span class="n">ee_token</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">token_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">service_account</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">credential_file_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span>
                    <span class="s2">&quot;~/.config/earthengine/private-key.json&quot;</span>
                <span class="p">)</span>

                <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">credential_file_path</span><span class="p">):</span>
                    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">credential_file_path</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                        <span class="n">token_dict</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">token_name</span> <span class="o">=</span> <span class="s2">&quot;EARTHENGINE_TOKEN&quot;</span>
                    <span class="n">ee_token</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">token_name</span><span class="p">)</span>
                    <span class="n">token_dict</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">ee_token</span><span class="p">,</span> <span class="n">strict</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
                <span class="n">service_account</span> <span class="o">=</span> <span class="n">token_dict</span><span class="p">[</span><span class="s2">&quot;client_email&quot;</span><span class="p">]</span>
                <span class="n">private_key</span> <span class="o">=</span> <span class="n">token_dict</span><span class="p">[</span><span class="s2">&quot;private_key&quot;</span><span class="p">]</span>

                <span class="n">credentials</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">ServiceAccountCredentials</span><span class="p">(</span>
                    <span class="n">service_account</span><span class="p">,</span> <span class="n">key_data</span><span class="o">=</span><span class="n">private_key</span>
                <span class="p">)</span>
                <span class="n">ee</span><span class="o">.</span><span class="n">Initialize</span><span class="p">(</span><span class="n">credentials</span><span class="p">)</span>

            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">ee_token</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">credential_file_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span>
                        <span class="s2">&quot;~/.config/earthengine/credentials&quot;</span>
                    <span class="p">)</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">credential_file_path</span><span class="p">):</span>
                        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span>
                            <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">credential_file_path</span><span class="p">),</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span>
                        <span class="p">)</span>
                        <span class="k">if</span> <span class="n">ee_token</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;{&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">ee_token</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span>
                            <span class="s2">&quot;}&quot;</span>
                        <span class="p">):</span>  <span class="c1"># deals with token generated by new auth method (earthengine-api&gt;=0.1.304).</span>
                            <span class="n">token_dict</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">ee_token</span><span class="p">)</span>
                            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">credential_file_path</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                                <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">token_dict</span><span class="p">))</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">credential</span> <span class="o">=</span> <span class="p">(</span>
                                <span class="s1">&#39;{&quot;refresh_token&quot;:&quot;</span><span class="si">%s</span><span class="s1">&quot;}&#39;</span> <span class="o">%</span> <span class="n">ee_token</span>
                            <span class="p">)</span>  <span class="c1"># deals with token generated by old auth method.</span>
                            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">credential_file_path</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                                <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">credential</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">in_colab_shell</span><span class="p">():</span>
                    <span class="k">if</span> <span class="n">credentials_in_drive</span><span class="p">()</span> <span class="ow">and</span> <span class="p">(</span><span class="ow">not</span> <span class="n">credentials_in_colab</span><span class="p">()):</span>
                        <span class="n">copy_credentials_to_colab</span><span class="p">()</span>
                    <span class="k">elif</span> <span class="ow">not</span> <span class="n">credentials_in_colab</span><span class="p">:</span>
                        <span class="n">ee</span><span class="o">.</span><span class="n">Authenticate</span><span class="p">(</span><span class="n">auth_mode</span><span class="o">=</span><span class="n">auth_mode</span><span class="p">)</span>
                        <span class="k">if</span> <span class="n">is_drive_mounted</span><span class="p">()</span> <span class="ow">and</span> <span class="p">(</span><span class="ow">not</span> <span class="n">credentials_in_drive</span><span class="p">()):</span>
                            <span class="n">copy_credentials_to_drive</span><span class="p">()</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">is_drive_mounted</span><span class="p">():</span>
                            <span class="n">copy_credentials_to_drive</span><span class="p">()</span>

                <span class="n">ee</span><span class="o">.</span><span class="n">Initialize</span><span class="p">(</span><span class="n">http_transport</span><span class="o">=</span><span class="n">httplib2</span><span class="o">.</span><span class="n">Http</span><span class="p">())</span>
            <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
                <span class="n">ee</span><span class="o">.</span><span class="n">Authenticate</span><span class="p">(</span><span class="n">auth_mode</span><span class="o">=</span><span class="n">auth_mode</span><span class="p">)</span>
                <span class="n">ee</span><span class="o">.</span><span class="n">Initialize</span><span class="p">(</span><span class="n">http_transport</span><span class="o">=</span><span class="n">httplib2</span><span class="o">.</span><span class="n">Http</span><span class="p">())</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.ee_join_table" class="doc doc-heading">
<code class="highlight language-python"><span class="n">ee_join_table</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">src_key</span><span class="p">,</span> <span class="n">dst_key</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


<a href="#geemap.common.ee_join_table" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Join a table to an ee.FeatureCollection attribute table.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>ee_object</code></td>
        <td><code>ee.FeatureCollection</code></td>
        <td><p>The ee.FeatureCollection to be joined by a table.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>data</code></td>
        <td><code>str | pd.DataFraem | gpd.GeoDataFrame</code></td>
        <td><p>The table to join to the ee.FeatureCollection.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>src_key</code></td>
        <td><code>str</code></td>
        <td><p>The key of ee.FeatureCollection attribute table to join.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>dst_key</code></td>
        <td><code>str</code></td>
        <td><p>The key of the table to be joined to the ee.FeatureCollection. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>ee.FeatureCollection</code></td>
      <td><p>The joined ee.FeatureCollection.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">ee_join_table</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">src_key</span><span class="p">,</span> <span class="n">dst_key</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Join a table to an ee.FeatureCollection attribute table.</span>

<span class="sd">    Args:</span>
<span class="sd">        ee_object (ee.FeatureCollection): The ee.FeatureCollection to be joined by a table.</span>
<span class="sd">        data (str | pd.DataFraem | gpd.GeoDataFrame): The table to join to the ee.FeatureCollection.</span>
<span class="sd">        src_key (str): The key of ee.FeatureCollection attribute table to join.</span>
<span class="sd">        dst_key (str, optional): The key of the table to be joined to the ee.FeatureCollection. Defaults to None.</span>

<span class="sd">    Returns:</span>
<span class="sd">        ee.FeatureCollection: The joined ee.FeatureCollection.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;The input ee_object must be of type ee.FeatureCollection.&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">src_key</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;The input src_key must be of type str.&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">dst_key</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">dst_key</span> <span class="o">=</span> <span class="n">src_key</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">github_raw_url</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.csv&quot;</span><span class="p">):</span>
            <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">data</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.geojson&quot;</span><span class="p">):</span>
            <span class="n">df</span> <span class="o">=</span> <span class="n">geojson_to_df</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="kn">import</span> <span class="nn">geopandas</span> <span class="k">as</span> <span class="nn">gpd</span>

            <span class="n">gdf</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
            <span class="n">df</span> <span class="o">=</span> <span class="n">gdf_to_df</span><span class="p">(</span><span class="n">gdf</span><span class="p">)</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">):</span>
        <span class="k">if</span> <span class="s2">&quot;geometry&quot;</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
            <span class="n">df</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;geometry&quot;</span><span class="p">])</span>
        <span class="k">elif</span> <span class="s2">&quot;geom&quot;</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
            <span class="n">df</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;geom&quot;</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">df</span> <span class="o">=</span> <span class="n">data</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;The input data must be of type str or pandas.DataFrame.&quot;</span><span class="p">)</span>

    <span class="n">df</span><span class="p">[</span><span class="n">dst_key</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">dst_key</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>
    <span class="n">df</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="n">dst_key</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="o">~</span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">duplicated</span><span class="p">(</span><span class="n">keep</span><span class="o">=</span><span class="s2">&quot;first&quot;</span><span class="p">)]</span>
    <span class="n">table</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Dictionary</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(</span><span class="s2">&quot;index&quot;</span><span class="p">))</span>

    <span class="n">fc</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">f</span><span class="p">:</span> <span class="n">f</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">table</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">src_key</span><span class="p">),</span> <span class="n">ee</span><span class="o">.</span><span class="n">Dictionary</span><span class="p">())))</span>
    <span class="k">return</span> <span class="n">fc</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.ee_num_round" class="doc doc-heading">
<code class="highlight language-python"><span class="n">ee_num_round</span><span class="p">(</span><span class="n">num</span><span class="p">,</span> <span class="n">decimal</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span></code>


<a href="#geemap.common.ee_num_round" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Rounds a number to a specified number of decimal places.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>num</code></td>
        <td><code>ee.Number</code></td>
        <td><p>The number to round.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>decimal</code></td>
        <td><code>int</code></td>
        <td><p>The number of decimal places to round. Defaults to 2.</p></td>
        <td><code>2</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>ee.Number</code></td>
      <td><p>The number with the specified decimal places rounded.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">ee_num_round</span><span class="p">(</span><span class="n">num</span><span class="p">,</span> <span class="n">decimal</span><span class="o">=</span><span class="mi">2</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Rounds a number to a specified number of decimal places.</span>

<span class="sd">    Args:</span>
<span class="sd">        num (ee.Number): The number to round.</span>
<span class="sd">        decimal (int, optional): The number of decimal places to round. Defaults to 2.</span>

<span class="sd">    Returns:</span>
<span class="sd">        ee.Number: The number with the specified decimal places rounded.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">format_str</span> <span class="o">=</span> <span class="s2">&quot;%.</span><span class="si">{}</span><span class="s2">f&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">decimal</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ee</span><span class="o">.</span><span class="n">Number</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">Number</span><span class="p">(</span><span class="n">num</span><span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">format_str</span><span class="p">))</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.ee_search" class="doc doc-heading">
<code class="highlight language-python"><span class="n">ee_search</span><span class="p">(</span><span class="n">asset_limit</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span></code>


<a href="#geemap.common.ee_search" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Search Earth Engine API and user assets. If you received a warning (IOPub message rate exceeded) in Jupyter notebook, you can relaunch Jupyter notebook using the following command:
    jupyter notebook --NotebookApp.iopub_msg_rate_limit=10000</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>asset_limit</code></td>
        <td><code>int</code></td>
        <td><p>The number of assets to display for each asset type, i.e., Image, ImageCollection, and FeatureCollection. Defaults to 100.</p></td>
        <td><code>100</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">ee_search</span><span class="p">(</span><span class="n">asset_limit</span><span class="o">=</span><span class="mi">100</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Search Earth Engine API and user assets. If you received a warning (IOPub message rate exceeded) in Jupyter notebook, you can relaunch Jupyter notebook using the following command:</span>
<span class="sd">        jupyter notebook --NotebookApp.iopub_msg_rate_limit=10000</span>

<span class="sd">    Args:</span>
<span class="sd">        asset_limit (int, optional): The number of assets to display for each asset type, i.e., Image, ImageCollection, and FeatureCollection. Defaults to 100.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s2">&quot;ignore&quot;</span><span class="p">)</span>

    <span class="k">class</span> <span class="nc">Flags</span><span class="p">:</span>
        <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span>
            <span class="n">repos</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">docs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">assets</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">docs_dict</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">asset_dict</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">asset_import</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">repos</span> <span class="o">=</span> <span class="n">repos</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">docs</span> <span class="o">=</span> <span class="n">docs</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assets</span> <span class="o">=</span> <span class="n">assets</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">docs_dict</span> <span class="o">=</span> <span class="n">docs_dict</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">asset_dict</span> <span class="o">=</span> <span class="n">asset_dict</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">asset_import</span> <span class="o">=</span> <span class="n">asset_import</span>

    <span class="n">flags</span> <span class="o">=</span> <span class="n">Flags</span><span class="p">()</span>

    <span class="n">search_type</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">ToggleButtons</span><span class="p">(</span>
        <span class="n">options</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Scripts&quot;</span><span class="p">,</span> <span class="s2">&quot;Docs&quot;</span><span class="p">,</span> <span class="s2">&quot;Assets&quot;</span><span class="p">],</span>
        <span class="n">tooltips</span><span class="o">=</span><span class="p">[</span>
            <span class="s2">&quot;Search Earth Engine Scripts&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Search Earth Engine API&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Search Earth Engine Assets&quot;</span><span class="p">,</span>
        <span class="p">],</span>
        <span class="n">button_style</span><span class="o">=</span><span class="s2">&quot;primary&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">search_type</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">button_width</span> <span class="o">=</span> <span class="s2">&quot;100px&quot;</span>

    <span class="n">search_box</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Text</span><span class="p">(</span><span class="n">placeholder</span><span class="o">=</span><span class="s2">&quot;Filter scripts...&quot;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s2">&quot;Loading...&quot;</span><span class="p">)</span>
    <span class="n">search_box</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="s2">&quot;310px&quot;</span>

    <span class="n">tree_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Output</span><span class="p">()</span>

    <span class="n">left_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">VBox</span><span class="p">()</span>
    <span class="n">right_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">VBox</span><span class="p">()</span>
    <span class="n">output_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Output</span><span class="p">()</span>
    <span class="n">output_widget</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">max_width</span> <span class="o">=</span> <span class="s2">&quot;650px&quot;</span>

    <span class="n">search_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">HBox</span><span class="p">()</span>
    <span class="n">search_widget</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">[</span><span class="n">left_widget</span><span class="p">,</span> <span class="n">right_widget</span><span class="p">]</span>
    <span class="n">display</span><span class="p">(</span><span class="n">search_widget</span><span class="p">)</span>

    <span class="n">repo_tree</span><span class="p">,</span> <span class="n">repo_output</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">build_repo_tree</span><span class="p">()</span>
    <span class="n">left_widget</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">[</span><span class="n">search_type</span><span class="p">,</span> <span class="n">repo_tree</span><span class="p">]</span>
    <span class="n">right_widget</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">[</span><span class="n">repo_output</span><span class="p">]</span>

    <span class="n">flags</span><span class="o">.</span><span class="n">repos</span> <span class="o">=</span> <span class="n">repo_tree</span>
    <span class="n">search_box</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">search_type_changed</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>
        <span class="n">search_box</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

        <span class="n">output_widget</span><span class="o">.</span><span class="n">clear_output</span><span class="p">()</span>
        <span class="n">tree_widget</span><span class="o">.</span><span class="n">clear_output</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">change</span><span class="p">[</span><span class="s2">&quot;new&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;Scripts&quot;</span><span class="p">:</span>
            <span class="n">search_box</span><span class="o">.</span><span class="n">placeholder</span> <span class="o">=</span> <span class="s2">&quot;Filter scripts...&quot;</span>
            <span class="n">left_widget</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">[</span><span class="n">search_type</span><span class="p">,</span> <span class="n">repo_tree</span><span class="p">]</span>
            <span class="n">right_widget</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">[</span><span class="n">repo_output</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">change</span><span class="p">[</span><span class="s2">&quot;new&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;Docs&quot;</span><span class="p">:</span>
            <span class="n">search_box</span><span class="o">.</span><span class="n">placeholder</span> <span class="o">=</span> <span class="s2">&quot;Filter methods...&quot;</span>
            <span class="n">search_box</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s2">&quot;Loading...&quot;</span>
            <span class="n">left_widget</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">[</span><span class="n">search_type</span><span class="p">,</span> <span class="n">search_box</span><span class="p">,</span> <span class="n">tree_widget</span><span class="p">]</span>
            <span class="n">right_widget</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">[</span><span class="n">output_widget</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">flags</span><span class="o">.</span><span class="n">docs</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">api_dict</span> <span class="o">=</span> <span class="n">read_api_csv</span><span class="p">()</span>
                <span class="n">ee_api_tree</span><span class="p">,</span> <span class="n">tree_dict</span> <span class="o">=</span> <span class="n">build_api_tree</span><span class="p">(</span><span class="n">api_dict</span><span class="p">,</span> <span class="n">output_widget</span><span class="p">)</span>
                <span class="n">flags</span><span class="o">.</span><span class="n">docs</span> <span class="o">=</span> <span class="n">ee_api_tree</span>
                <span class="n">flags</span><span class="o">.</span><span class="n">docs_dict</span> <span class="o">=</span> <span class="n">tree_dict</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">ee_api_tree</span> <span class="o">=</span> <span class="n">flags</span><span class="o">.</span><span class="n">docs</span>
            <span class="k">with</span> <span class="n">tree_widget</span><span class="p">:</span>
                <span class="n">tree_widget</span><span class="o">.</span><span class="n">clear_output</span><span class="p">()</span>
                <span class="n">display</span><span class="p">(</span><span class="n">ee_api_tree</span><span class="p">)</span>
                <span class="n">right_widget</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">[</span><span class="n">output_widget</span><span class="p">]</span>
            <span class="n">search_box</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">elif</span> <span class="n">change</span><span class="p">[</span><span class="s2">&quot;new&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;Assets&quot;</span><span class="p">:</span>
            <span class="n">search_box</span><span class="o">.</span><span class="n">placeholder</span> <span class="o">=</span> <span class="s2">&quot;Filter assets...&quot;</span>
            <span class="n">left_widget</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">[</span><span class="n">search_type</span><span class="p">,</span> <span class="n">search_box</span><span class="p">,</span> <span class="n">tree_widget</span><span class="p">]</span>
            <span class="n">right_widget</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">[</span><span class="n">output_widget</span><span class="p">]</span>
            <span class="n">search_box</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s2">&quot;Loading...&quot;</span>
            <span class="k">if</span> <span class="n">flags</span><span class="o">.</span><span class="n">assets</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">asset_tree</span><span class="p">,</span> <span class="n">asset_widget</span><span class="p">,</span> <span class="n">asset_dict</span> <span class="o">=</span> <span class="n">build_asset_tree</span><span class="p">(</span>
                    <span class="n">limit</span><span class="o">=</span><span class="n">asset_limit</span>
                <span class="p">)</span>
                <span class="n">flags</span><span class="o">.</span><span class="n">assets</span> <span class="o">=</span> <span class="n">asset_tree</span>
                <span class="n">flags</span><span class="o">.</span><span class="n">asset_dict</span> <span class="o">=</span> <span class="n">asset_dict</span>
                <span class="n">flags</span><span class="o">.</span><span class="n">asset_import</span> <span class="o">=</span> <span class="n">asset_widget</span>

            <span class="k">with</span> <span class="n">tree_widget</span><span class="p">:</span>
                <span class="n">tree_widget</span><span class="o">.</span><span class="n">clear_output</span><span class="p">()</span>
                <span class="n">display</span><span class="p">(</span><span class="n">flags</span><span class="o">.</span><span class="n">assets</span><span class="p">)</span>
            <span class="n">right_widget</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">[</span><span class="n">flags</span><span class="o">.</span><span class="n">asset_import</span><span class="p">]</span>
            <span class="n">search_box</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

    <span class="n">search_type</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">search_type_changed</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="s2">&quot;value&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">search_box_callback</span><span class="p">(</span><span class="n">text</span><span class="p">):</span>

        <span class="k">if</span> <span class="n">search_type</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="s2">&quot;Docs&quot;</span><span class="p">:</span>
            <span class="k">with</span> <span class="n">tree_widget</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">text</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Loading...&quot;</span><span class="p">)</span>
                    <span class="n">tree_widget</span><span class="o">.</span><span class="n">clear_output</span><span class="p">(</span><span class="n">wait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                    <span class="n">display</span><span class="p">(</span><span class="n">flags</span><span class="o">.</span><span class="n">docs</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">tree_widget</span><span class="o">.</span><span class="n">clear_output</span><span class="p">()</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Searching...&quot;</span><span class="p">)</span>
                    <span class="n">tree_widget</span><span class="o">.</span><span class="n">clear_output</span><span class="p">(</span><span class="n">wait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                    <span class="n">sub_tree</span> <span class="o">=</span> <span class="n">search_api_tree</span><span class="p">(</span><span class="n">text</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">flags</span><span class="o">.</span><span class="n">docs_dict</span><span class="p">)</span>
                    <span class="n">display</span><span class="p">(</span><span class="n">sub_tree</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">search_type</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="s2">&quot;Assets&quot;</span><span class="p">:</span>
            <span class="k">with</span> <span class="n">tree_widget</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">text</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Loading...&quot;</span><span class="p">)</span>
                    <span class="n">tree_widget</span><span class="o">.</span><span class="n">clear_output</span><span class="p">(</span><span class="n">wait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                    <span class="n">display</span><span class="p">(</span><span class="n">flags</span><span class="o">.</span><span class="n">assets</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">tree_widget</span><span class="o">.</span><span class="n">clear_output</span><span class="p">()</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Searching...&quot;</span><span class="p">)</span>
                    <span class="n">tree_widget</span><span class="o">.</span><span class="n">clear_output</span><span class="p">(</span><span class="n">wait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                    <span class="n">sub_tree</span> <span class="o">=</span> <span class="n">search_api_tree</span><span class="p">(</span><span class="n">text</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">flags</span><span class="o">.</span><span class="n">asset_dict</span><span class="p">)</span>
                    <span class="n">display</span><span class="p">(</span><span class="n">sub_tree</span><span class="p">)</span>

    <span class="n">search_box</span><span class="o">.</span><span class="n">on_submit</span><span class="p">(</span><span class="n">search_box_callback</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.ee_to_csv" class="doc doc-heading">
<code class="highlight language-python"><span class="n">ee_to_csv</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">selectors</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="n">proxies</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


<a href="#geemap.common.ee_to_csv" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Downloads an ee.FeatureCollection as a CSV file.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>ee_object</code></td>
        <td><code>object</code></td>
        <td><p>ee.FeatureCollection</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>filename</code></td>
        <td><code>str</code></td>
        <td><p>The output filepath of the CSV file.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>selectors</code></td>
        <td><code>list</code></td>
        <td><p>A list of attributes to export. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>verbose</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to print out descriptive text.</p></td>
        <td><code>True</code></td>
      </tr>
      <tr>
        <td><code>timeout</code></td>
        <td><code>int</code></td>
        <td><p>Timeout in seconds. Defaults to 300 seconds.</p></td>
        <td><code>300</code></td>
      </tr>
      <tr>
        <td><code>proxies</code></td>
        <td><code>dict</code></td>
        <td><p>Proxy settings. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">ee_to_csv</span><span class="p">(</span>
    <span class="n">ee_object</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">selectors</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="n">proxies</span><span class="o">=</span><span class="kc">None</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Downloads an ee.FeatureCollection as a CSV file.</span>

<span class="sd">    Args:</span>
<span class="sd">        ee_object (object): ee.FeatureCollection</span>
<span class="sd">        filename (str): The output filepath of the CSV file.</span>
<span class="sd">        selectors (list, optional): A list of attributes to export. Defaults to None.</span>
<span class="sd">        verbose (bool, optional): Whether to print out descriptive text.</span>
<span class="sd">        timeout (int, optional): Timeout in seconds. Defaults to 300 seconds.</span>
<span class="sd">        proxies (dict, optional): Proxy settings. Defaults to None.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># ee_initialize()</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">filename</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.csv&quot;</span><span class="p">):</span>
            <span class="n">ee_export_vector</span><span class="p">(</span>
                <span class="n">ee_object</span><span class="o">=</span><span class="n">ee_object</span><span class="p">,</span>
                <span class="n">filename</span><span class="o">=</span><span class="n">filename</span><span class="p">,</span>
                <span class="n">selectors</span><span class="o">=</span><span class="n">selectors</span><span class="p">,</span>
                <span class="n">verbose</span><span class="o">=</span><span class="n">verbose</span><span class="p">,</span>
                <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span>
                <span class="n">proxies</span><span class="o">=</span><span class="n">proxies</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The filename must end with .csv&quot;</span><span class="p">)</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.ee_to_df" class="doc doc-heading">
<code class="highlight language-python"><span class="n">ee_to_df</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">col_names</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">sort_columns</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.common.ee_to_df" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Converts an ee.FeatureCollection to pandas dataframe.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>ee_object</code></td>
        <td><code>ee.FeatureCollection</code></td>
        <td><p>ee.FeatureCollection.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>col_names</code></td>
        <td><code>list</code></td>
        <td><p>List of column names. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>sort_columns</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to sort the column names. Defaults to False.</p></td>
        <td><code>False</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>TypeError</code></td>
        <td><p>ee_object must be an ee.FeatureCollection</p></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>pd.DataFrame</code></td>
      <td><p>pandas DataFrame</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">ee_to_df</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">col_names</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">sort_columns</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Converts an ee.FeatureCollection to pandas dataframe.</span>

<span class="sd">    Args:</span>
<span class="sd">        ee_object (ee.FeatureCollection): ee.FeatureCollection.</span>
<span class="sd">        col_names (list): List of column names. Defaults to None.</span>
<span class="sd">        sort_columns (bool): Whether to sort the column names. Defaults to False.</span>

<span class="sd">    Raises:</span>
<span class="sd">        TypeError: ee_object must be an ee.FeatureCollection</span>

<span class="sd">    Returns:</span>
<span class="sd">        pd.DataFrame: pandas DataFrame</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Feature</span><span class="p">):</span>
        <span class="n">ee_object</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">([</span><span class="n">ee_object</span><span class="p">])</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;ee_object must be an ee.FeatureCollection&quot;</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">f</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Feature</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">f</span><span class="o">.</span><span class="n">toDictionary</span><span class="p">()))</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="s2">&quot;properties&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()[</span><span class="s2">&quot;features&quot;</span><span class="p">]]</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">col_names</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">col_names</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">first</span><span class="p">()</span><span class="o">.</span><span class="n">propertyNames</span><span class="p">()</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()</span>
            <span class="n">col_names</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s2">&quot;system:index&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">col_names</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;col_names must be a list&quot;</span><span class="p">)</span>

        <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">col_names</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">sort_columns</span><span class="p">:</span>
            <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">reindex</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">),</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">df</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.ee_to_gdf" class="doc doc-heading">
<code class="highlight language-python"><span class="n">ee_to_gdf</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">selectors</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>


<a href="#geemap.common.ee_to_gdf" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Converts an ee.FeatureCollection to Geopandas dataframe.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>ee_object</code></td>
        <td><code>ee.FeatureCollection</code></td>
        <td><p>ee.FeatureCollection.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>selectors</code></td>
        <td><code>list</code></td>
        <td><p>A list of attributes to export. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>verbose</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to print out descriptive text. Defaults to False.</p></td>
        <td><code>False</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>TypeError</code></td>
        <td><p>ee_object must be an ee.FeatureCollection.</p></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>gpd.GeoDataFrame</code></td>
      <td><p>geopandas.GeoDataFrame</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">ee_to_gdf</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">selectors</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Converts an ee.FeatureCollection to Geopandas dataframe.</span>

<span class="sd">    Args:</span>
<span class="sd">        ee_object (ee.FeatureCollection): ee.FeatureCollection.</span>
<span class="sd">        selectors (list, optional): A list of attributes to export. Defaults to None.</span>
<span class="sd">        verbose (bool, optional): Whether to print out descriptive text. Defaults to False.</span>

<span class="sd">    Raises:</span>
<span class="sd">        TypeError: ee_object must be an ee.FeatureCollection.</span>

<span class="sd">    Returns:</span>
<span class="sd">        gpd.GeoDataFrame: geopandas.GeoDataFrame</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">check_package</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;geopandas&quot;</span><span class="p">,</span> <span class="n">URL</span><span class="o">=</span><span class="s2">&quot;https://geopandas.org&quot;</span><span class="p">)</span>

    <span class="kn">import</span> <span class="nn">geopandas</span> <span class="k">as</span> <span class="nn">gpd</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;ee_object must be an ee.FeatureCollection&quot;</span><span class="p">)</span>

    <span class="n">collection</span> <span class="o">=</span> <span class="n">ee_to_geojson</span><span class="p">(</span><span class="n">ee_object</span><span class="p">)</span>
    <span class="n">gdf</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">GeoDataFrame</span><span class="o">.</span><span class="n">from_features</span><span class="p">(</span><span class="n">collection</span><span class="p">[</span><span class="s2">&quot;features&quot;</span><span class="p">])</span>

    <span class="k">return</span> <span class="n">gdf</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.ee_to_geojson" class="doc doc-heading">
<code class="highlight language-python"><span class="n">ee_to_geojson</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.common.ee_to_geojson" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Converts Earth Engine object to geojson.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>ee_object</code></td>
        <td><code>object</code></td>
        <td><p>An Earth Engine object.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>filename</code></td>
        <td><code>str</code></td>
        <td><p>The file path to save the geojson. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>object</code></td>
      <td><p>GeoJSON object.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">ee_to_geojson</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Converts Earth Engine object to geojson.</span>

<span class="sd">    Args:</span>
<span class="sd">        ee_object (object): An Earth Engine object.</span>
<span class="sd">        filename (str, optional): The file path to save the geojson. Defaults to None.</span>

<span class="sd">    Returns:</span>
<span class="sd">        object: GeoJSON object.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># from json import dumps</span>

    <span class="c1"># ee_initialize()</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="k">if</span> <span class="p">(</span>
            <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">Geometry</span><span class="p">)</span>
            <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">feature</span><span class="o">.</span><span class="n">Feature</span><span class="p">)</span>
            <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">featurecollection</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">)</span>
        <span class="p">):</span>
            <span class="n">json_object</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">filename</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">filename</span><span class="p">)):</span>
                    <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">filename</span><span class="p">))</span>
                <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">geojson</span><span class="p">:</span>
                    <span class="n">geojson</span><span class="o">.</span><span class="n">write</span><span class="p">(</span>
                        <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">json_object</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="n">indent</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
                    <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">json_object</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Could not convert the Earth Engine object to geojson&quot;</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.ee_to_geopandas" class="doc doc-heading">
<code class="highlight language-python"><span class="n">ee_to_geopandas</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">selectors</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>


<a href="#geemap.common.ee_to_geopandas" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Converts an ee.FeatureCollection to Geopandas dataframe.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>ee_object</code></td>
        <td><code>ee.FeatureCollection</code></td>
        <td><p>ee.FeatureCollection.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>selectors</code></td>
        <td><code>list</code></td>
        <td><p>A list of attributes to export. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>verbose</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to print out descriptive text. Defaults to False.</p></td>
        <td><code>False</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>TypeError</code></td>
        <td><p>ee_object must be an ee.FeatureCollection.</p></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>gpd.GeoDataFrame</code></td>
      <td><p>geopandas.GeoDataFrame</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">ee_to_gdf</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">selectors</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Converts an ee.FeatureCollection to Geopandas dataframe.</span>

<span class="sd">    Args:</span>
<span class="sd">        ee_object (ee.FeatureCollection): ee.FeatureCollection.</span>
<span class="sd">        selectors (list, optional): A list of attributes to export. Defaults to None.</span>
<span class="sd">        verbose (bool, optional): Whether to print out descriptive text. Defaults to False.</span>

<span class="sd">    Raises:</span>
<span class="sd">        TypeError: ee_object must be an ee.FeatureCollection.</span>

<span class="sd">    Returns:</span>
<span class="sd">        gpd.GeoDataFrame: geopandas.GeoDataFrame</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">check_package</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;geopandas&quot;</span><span class="p">,</span> <span class="n">URL</span><span class="o">=</span><span class="s2">&quot;https://geopandas.org&quot;</span><span class="p">)</span>

    <span class="kn">import</span> <span class="nn">geopandas</span> <span class="k">as</span> <span class="nn">gpd</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;ee_object must be an ee.FeatureCollection&quot;</span><span class="p">)</span>

    <span class="n">collection</span> <span class="o">=</span> <span class="n">ee_to_geojson</span><span class="p">(</span><span class="n">ee_object</span><span class="p">)</span>
    <span class="n">gdf</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">GeoDataFrame</span><span class="o">.</span><span class="n">from_features</span><span class="p">(</span><span class="n">collection</span><span class="p">[</span><span class="s2">&quot;features&quot;</span><span class="p">])</span>

    <span class="k">return</span> <span class="n">gdf</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.ee_to_numpy" class="doc doc-heading">
<code class="highlight language-python"><span class="n">ee_to_numpy</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">bands</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">region</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">properties</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">default_value</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


<a href="#geemap.common.ee_to_numpy" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Extracts a rectangular region of pixels from an image into a 2D numpy array per band.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>ee_object</code></td>
        <td><code>object</code></td>
        <td><p>The image to sample.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>bands</code></td>
        <td><code>list</code></td>
        <td><p>The list of band names to extract. Please make sure that all bands have the same spatial resolution. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>region</code></td>
        <td><code>object</code></td>
        <td><p>The region whose projected bounding box is used to sample the image. The maximum number of pixels you can export is 262,144. Resampling and reprojecting all bands to a fixed scale can be useful. Defaults to the footprint in each band.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>properties</code></td>
        <td><code>list</code></td>
        <td><p>The properties to copy over from the sampled image. Defaults to all non-system properties.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>default_value</code></td>
        <td><code>float</code></td>
        <td><p>A default value used when a sampled pixel is masked or outside a band's footprint. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>array</code></td>
      <td><p>A 3D numpy array.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">ee_to_numpy</span><span class="p">(</span>
    <span class="n">ee_object</span><span class="p">,</span> <span class="n">bands</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">region</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">properties</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">default_value</span><span class="o">=</span><span class="kc">None</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Extracts a rectangular region of pixels from an image into a 2D numpy array per band.</span>

<span class="sd">    Args:</span>
<span class="sd">        ee_object (object): The image to sample.</span>
<span class="sd">        bands (list, optional): The list of band names to extract. Please make sure that all bands have the same spatial resolution. Defaults to None.</span>
<span class="sd">        region (object, optional): The region whose projected bounding box is used to sample the image. The maximum number of pixels you can export is 262,144. Resampling and reprojecting all bands to a fixed scale can be useful. Defaults to the footprint in each band.</span>
<span class="sd">        properties (list, optional): The properties to copy over from the sampled image. Defaults to all non-system properties.</span>
<span class="sd">        default_value (float, optional): A default value used when a sampled pixel is masked or outside a band&#39;s footprint. Defaults to None.</span>

<span class="sd">    Returns:</span>
<span class="sd">        array: A 3D numpy array.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The input must be an ee.Image.&quot;</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="n">region</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">region</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">geometry</span><span class="p">()</span>

    <span class="k">try</span><span class="p">:</span>

        <span class="k">if</span> <span class="n">bands</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">ee_object</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">bands</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">bands</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">bandNames</span><span class="p">()</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()</span>

        <span class="n">band_arrs</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">sampleRectangle</span><span class="p">(</span>
            <span class="n">region</span><span class="o">=</span><span class="n">region</span><span class="p">,</span> <span class="n">properties</span><span class="o">=</span><span class="n">properties</span><span class="p">,</span> <span class="n">defaultValue</span><span class="o">=</span><span class="n">default_value</span>
        <span class="p">)</span>
        <span class="n">band_values</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">for</span> <span class="n">band</span> <span class="ow">in</span> <span class="n">bands</span><span class="p">:</span>
            <span class="n">band_arr</span> <span class="o">=</span> <span class="n">band_arrs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">band</span><span class="p">)</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()</span>
            <span class="n">band_value</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">band_arr</span><span class="p">)</span>
            <span class="n">band_values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">band_value</span><span class="p">)</span>

        <span class="n">image</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">dstack</span><span class="p">(</span><span class="n">band_values</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">image</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.ee_to_pandas" class="doc doc-heading">
<code class="highlight language-python"><span class="n">ee_to_pandas</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">col_names</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">sort_columns</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.common.ee_to_pandas" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Converts an ee.FeatureCollection to pandas dataframe.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>ee_object</code></td>
        <td><code>ee.FeatureCollection</code></td>
        <td><p>ee.FeatureCollection.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>col_names</code></td>
        <td><code>list</code></td>
        <td><p>List of column names. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>sort_columns</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to sort the column names. Defaults to False.</p></td>
        <td><code>False</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>TypeError</code></td>
        <td><p>ee_object must be an ee.FeatureCollection</p></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>pd.DataFrame</code></td>
      <td><p>pandas DataFrame</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">ee_to_df</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">col_names</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">sort_columns</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Converts an ee.FeatureCollection to pandas dataframe.</span>

<span class="sd">    Args:</span>
<span class="sd">        ee_object (ee.FeatureCollection): ee.FeatureCollection.</span>
<span class="sd">        col_names (list): List of column names. Defaults to None.</span>
<span class="sd">        sort_columns (bool): Whether to sort the column names. Defaults to False.</span>

<span class="sd">    Raises:</span>
<span class="sd">        TypeError: ee_object must be an ee.FeatureCollection</span>

<span class="sd">    Returns:</span>
<span class="sd">        pd.DataFrame: pandas DataFrame</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Feature</span><span class="p">):</span>
        <span class="n">ee_object</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">([</span><span class="n">ee_object</span><span class="p">])</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;ee_object must be an ee.FeatureCollection&quot;</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">f</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Feature</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">f</span><span class="o">.</span><span class="n">toDictionary</span><span class="p">()))</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="s2">&quot;properties&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()[</span><span class="s2">&quot;features&quot;</span><span class="p">]]</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">col_names</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">col_names</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">first</span><span class="p">()</span><span class="o">.</span><span class="n">propertyNames</span><span class="p">()</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()</span>
            <span class="n">col_names</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s2">&quot;system:index&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">col_names</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;col_names must be a list&quot;</span><span class="p">)</span>

        <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">col_names</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">sort_columns</span><span class="p">:</span>
            <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">reindex</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">),</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">df</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.ee_to_shp" class="doc doc-heading">
<code class="highlight language-python"><span class="n">ee_to_shp</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">selectors</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">keep_zip</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="n">proxies</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


<a href="#geemap.common.ee_to_shp" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Downloads an ee.FeatureCollection as a shapefile.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>ee_object</code></td>
        <td><code>object</code></td>
        <td><p>ee.FeatureCollection</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>filename</code></td>
        <td><code>str</code></td>
        <td><p>The output filepath of the shapefile.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>selectors</code></td>
        <td><code>list</code></td>
        <td><p>A list of attributes to export. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>verbose</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to print out descriptive text.</p></td>
        <td><code>True</code></td>
      </tr>
      <tr>
        <td><code>keep_zip</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to keep the downloaded shapefile as a zip file.</p></td>
        <td><code>False</code></td>
      </tr>
      <tr>
        <td><code>timeout</code></td>
        <td><code>int</code></td>
        <td><p>Timeout in seconds. Defaults to 300 seconds.</p></td>
        <td><code>300</code></td>
      </tr>
      <tr>
        <td><code>proxies</code></td>
        <td><code>dict</code></td>
        <td><p>Proxy settings. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">ee_to_shp</span><span class="p">(</span>
    <span class="n">ee_object</span><span class="p">,</span>
    <span class="n">filename</span><span class="p">,</span>
    <span class="n">selectors</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">keep_zip</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">timeout</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span>
    <span class="n">proxies</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Downloads an ee.FeatureCollection as a shapefile.</span>

<span class="sd">    Args:</span>
<span class="sd">        ee_object (object): ee.FeatureCollection</span>
<span class="sd">        filename (str): The output filepath of the shapefile.</span>
<span class="sd">        selectors (list, optional): A list of attributes to export. Defaults to None.</span>
<span class="sd">        verbose (bool, optional): Whether to print out descriptive text.</span>
<span class="sd">        keep_zip (bool, optional): Whether to keep the downloaded shapefile as a zip file.</span>
<span class="sd">        timeout (int, optional): Timeout in seconds. Defaults to 300 seconds.</span>
<span class="sd">        proxies (dict, optional): Proxy settings. Defaults to None.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># ee_initialize()</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">filename</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.shp&quot;</span><span class="p">):</span>
            <span class="n">ee_export_vector</span><span class="p">(</span>
                <span class="n">ee_object</span><span class="o">=</span><span class="n">ee_object</span><span class="p">,</span>
                <span class="n">filename</span><span class="o">=</span><span class="n">filename</span><span class="p">,</span>
                <span class="n">selectors</span><span class="o">=</span><span class="n">selectors</span><span class="p">,</span>
                <span class="n">verbose</span><span class="o">=</span><span class="n">verbose</span><span class="p">,</span>
                <span class="n">keep_zip</span><span class="o">=</span><span class="n">keep_zip</span><span class="p">,</span>
                <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span>
                <span class="n">proxies</span><span class="o">=</span><span class="n">proxies</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The filename must end with .shp&quot;</span><span class="p">)</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.ee_user_id" class="doc doc-heading">
<code class="highlight language-python"><span class="n">ee_user_id</span><span class="p">()</span></code>


<a href="#geemap.common.ee_user_id" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Gets Earth Engine account user id.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>str</code></td>
      <td><p>A string containing the user id.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">ee_user_id</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Gets Earth Engine account user id.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: A string containing the user id.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># ee_initialize()</span>
    <span class="n">roots</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">getAssetRoots</span><span class="p">()</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">roots</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">None</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">root</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">getAssetRoots</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">user_id</span> <span class="o">=</span> <span class="n">root</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;projects/earthengine-legacy/assets/&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">user_id</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.ee_vector_style" class="doc doc-heading">
<code class="highlight language-python"><span class="n">ee_vector_style</span><span class="p">(</span><span class="n">collection</span><span class="p">,</span> <span class="n">column</span><span class="p">,</span> <span class="n">labels</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">,</span> <span class="n">pointSize</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">pointShape</span><span class="o">=</span><span class="s1">&#39;circle&#39;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">fillColor</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">lineType</span><span class="o">=</span><span class="s1">&#39;solid&#39;</span><span class="p">,</span> <span class="n">neighborhood</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">return_fc</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>


<a href="#geemap.common.ee_vector_style" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Create a vector style for a feature collection.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>collection</code></td>
        <td><code>ee.FeatureCollection</code></td>
        <td><p>The input feature collection.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>column</code></td>
        <td><code>str</code></td>
        <td><p>The name of the column to use for styling.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>labels</code></td>
        <td><code>list</code></td>
        <td><p>A list of labels to use for styling. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>color</code></td>
        <td><code>str | list</code></td>
        <td><p>A default color (CSS 3.0 color value e.g. 'FF0000' or 'red') to use for drawing the features. Supports opacity (e.g.: 'FF000088' for 50% transparent red). Defaults to "black".</p></td>
        <td><code>&#39;black&#39;</code></td>
      </tr>
      <tr>
        <td><code>pointSize</code></td>
        <td><code>int | list</code></td>
        <td><p>The default size in pixels of the point markers. Defaults to 3.</p></td>
        <td><code>3</code></td>
      </tr>
      <tr>
        <td><code>pointShape</code></td>
        <td><code>str | list</code></td>
        <td><p>The default shape of the marker to draw at each point location. One of: circle, square, diamond, cross, plus, pentagram, hexagram, triangle, triangle_up, triangle_down, triangle_left, triangle_right, pentagon, hexagon, star5, star6. This argument also supports the following Matlab marker abbreviations: o, s, d, x, +, p, h, ^, v, &lt;, &gt;. Defaults to "circle".</p></td>
        <td><code>&#39;circle&#39;</code></td>
      </tr>
      <tr>
        <td><code>width</code></td>
        <td><code>int | list</code></td>
        <td><p>The default line width for lines and outlines for polygons and point shapes. Defaults to 2.</p></td>
        <td><code>2</code></td>
      </tr>
      <tr>
        <td><code>fillColor</code></td>
        <td><code>str | list</code></td>
        <td><p>The color for filling polygons and point shapes. Defaults to 'color' at 0.66 opacity. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>lineType</code></td>
        <td><code>str | list</code></td>
        <td><p>The default line style for lines and outlines of polygons and point shapes. Defaults to 'solid'. One of: solid, dotted, dashed. Defaults to "solid".</p></td>
        <td><code>&#39;solid&#39;</code></td>
      </tr>
      <tr>
        <td><code>neighborhood</code></td>
        <td><code>int</code></td>
        <td><p>If styleProperty is used and any feature has a pointSize or width larger than the defaults, tiling artifacts can occur. Specifies the maximum neighborhood (pointSize + width) needed for any feature. Defaults to 5.</p></td>
        <td><code>5</code></td>
      </tr>
      <tr>
        <td><code>return_fc</code></td>
        <td><code>bool</code></td>
        <td><p>If True, return an ee.FeatureCollection with a style property. Otherwise, return a styled ee.Image. Defaults to False.</p></td>
        <td><code>False</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>ee.FeatureCollection | ee.Image</code></td>
      <td><p>The styled Earth Engine FeatureCollection or Image.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">ee_vector_style</span><span class="p">(</span>
    <span class="n">collection</span><span class="p">,</span>
    <span class="n">column</span><span class="p">,</span>
    <span class="n">labels</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">color</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">,</span>
    <span class="n">pointSize</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
    <span class="n">pointShape</span><span class="o">=</span><span class="s2">&quot;circle&quot;</span><span class="p">,</span>
    <span class="n">width</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
    <span class="n">fillColor</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">lineType</span><span class="o">=</span><span class="s2">&quot;solid&quot;</span><span class="p">,</span>
    <span class="n">neighborhood</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
    <span class="n">return_fc</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Create a vector style for a feature collection.</span>

<span class="sd">    Args:</span>
<span class="sd">        collection (ee.FeatureCollection): The input feature collection.</span>
<span class="sd">        column (str): The name of the column to use for styling.</span>
<span class="sd">        labels (list, optional): A list of labels to use for styling. Defaults to None.</span>
<span class="sd">        color (str | list, optional): A default color (CSS 3.0 color value e.g. &#39;FF0000&#39; or &#39;red&#39;) to use for drawing the features. Supports opacity (e.g.: &#39;FF000088&#39; for 50% transparent red). Defaults to &quot;black&quot;.</span>
<span class="sd">        pointSize (int | list, optional): The default size in pixels of the point markers. Defaults to 3.</span>
<span class="sd">        pointShape (str | list, optional): The default shape of the marker to draw at each point location. One of: circle, square, diamond, cross, plus, pentagram, hexagram, triangle, triangle_up, triangle_down, triangle_left, triangle_right, pentagon, hexagon, star5, star6. This argument also supports the following Matlab marker abbreviations: o, s, d, x, +, p, h, ^, v, &lt;, &gt;. Defaults to &quot;circle&quot;.</span>
<span class="sd">        width (int | list, optional): The default line width for lines and outlines for polygons and point shapes. Defaults to 2.</span>
<span class="sd">        fillColor (str | list, optional): The color for filling polygons and point shapes. Defaults to &#39;color&#39; at 0.66 opacity. Defaults to None.</span>
<span class="sd">        lineType (str | list, optional): The default line style for lines and outlines of polygons and point shapes. Defaults to &#39;solid&#39;. One of: solid, dotted, dashed. Defaults to &quot;solid&quot;.</span>
<span class="sd">        neighborhood (int, optional): If styleProperty is used and any feature has a pointSize or width larger than the defaults, tiling artifacts can occur. Specifies the maximum neighborhood (pointSize + width) needed for any feature. Defaults to 5.</span>
<span class="sd">        return_fc (bool, optional): If True, return an ee.FeatureCollection with a style property. Otherwise, return a styled ee.Image. Defaults to False.</span>

<span class="sd">    Returns:</span>
<span class="sd">        ee.FeatureCollection | ee.Image: The styled Earth Engine FeatureCollection or Image.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">collection</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;collection must be an ee.FeatureCollection.&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">column</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;column must be a string.&quot;</span><span class="p">)</span>

    <span class="n">prop_names</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Feature</span><span class="p">(</span><span class="n">collection</span><span class="o">.</span><span class="n">first</span><span class="p">())</span><span class="o">.</span><span class="n">propertyNames</span><span class="p">()</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">column</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">prop_names</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">column</span><span class="si">}</span><span class="s2"> is not a property name of the collection. It must be one of </span><span class="si">{</span><span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">prop_names</span><span class="p">)</span><span class="si">}</span><span class="s2">.&quot;</span>
        <span class="p">)</span>

    <span class="k">if</span> <span class="n">labels</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">labels</span> <span class="o">=</span> <span class="n">collection</span><span class="o">.</span><span class="n">aggregate_array</span><span class="p">(</span><span class="n">column</span><span class="p">)</span><span class="o">.</span><span class="n">distinct</span><span class="p">()</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">labels</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
        <span class="n">collection</span> <span class="o">=</span> <span class="n">collection</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">Filter</span><span class="o">.</span><span class="n">inList</span><span class="p">(</span><span class="n">column</span><span class="p">,</span> <span class="n">labels</span><span class="p">))</span>
    <span class="k">elif</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">labels</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;labels must be a list.&quot;</span><span class="p">)</span>

    <span class="n">size</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">labels</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">color</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">color</span> <span class="o">=</span> <span class="p">[</span><span class="n">color</span><span class="p">]</span> <span class="o">*</span> <span class="n">size</span>
    <span class="k">elif</span> <span class="n">size</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">color</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;labels and color must be the same length.&quot;</span><span class="p">)</span>
    <span class="k">elif</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">color</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;color must be a string or a list.&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pointSize</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
        <span class="n">pointSize</span> <span class="o">=</span> <span class="p">[</span><span class="n">pointSize</span><span class="p">]</span> <span class="o">*</span> <span class="n">size</span>
    <span class="k">elif</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pointSize</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;pointSize must be an integer or a list.&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pointShape</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">pointShape</span> <span class="o">=</span> <span class="p">[</span><span class="n">pointShape</span><span class="p">]</span> <span class="o">*</span> <span class="n">size</span>
    <span class="k">elif</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pointShape</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;pointShape must be a string or a list.&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">width</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
        <span class="n">width</span> <span class="o">=</span> <span class="p">[</span><span class="n">width</span><span class="p">]</span> <span class="o">*</span> <span class="n">size</span>
    <span class="k">elif</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">width</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;width must be an integer or a list.&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">fillColor</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">fillColor</span> <span class="o">=</span> <span class="n">color</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">fillColor</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">fillColor</span> <span class="o">=</span> <span class="p">[</span><span class="n">fillColor</span><span class="p">]</span> <span class="o">*</span> <span class="n">size</span>
    <span class="k">elif</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">fillColor</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;fillColor must be a list.&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">neighborhood</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;neighborhood must be an integer.&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">lineType</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">lineType</span> <span class="o">=</span> <span class="p">[</span><span class="n">lineType</span><span class="p">]</span> <span class="o">*</span> <span class="n">size</span>
    <span class="k">elif</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">lineType</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;lineType must be a string or list.&quot;</span><span class="p">)</span>

    <span class="n">style_dict</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">label</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">labels</span><span class="p">):</span>
        <span class="n">style_dict</span><span class="p">[</span><span class="n">label</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;color&quot;</span><span class="p">:</span> <span class="n">color</span><span class="p">[</span><span class="n">i</span><span class="p">],</span>
            <span class="s2">&quot;pointSize&quot;</span><span class="p">:</span> <span class="n">pointSize</span><span class="p">[</span><span class="n">i</span><span class="p">],</span>
            <span class="s2">&quot;pointShape&quot;</span><span class="p">:</span> <span class="n">pointShape</span><span class="p">[</span><span class="n">i</span><span class="p">],</span>
            <span class="s2">&quot;width&quot;</span><span class="p">:</span> <span class="n">width</span><span class="p">[</span><span class="n">i</span><span class="p">],</span>
            <span class="s2">&quot;fillColor&quot;</span><span class="p">:</span> <span class="n">fillColor</span><span class="p">[</span><span class="n">i</span><span class="p">],</span>
            <span class="s2">&quot;lineType&quot;</span><span class="p">:</span> <span class="n">lineType</span><span class="p">[</span><span class="n">i</span><span class="p">],</span>
        <span class="p">}</span>

    <span class="n">style</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Dictionary</span><span class="p">(</span><span class="n">style_dict</span><span class="p">)</span>

    <span class="n">result</span> <span class="o">=</span> <span class="n">collection</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">f</span><span class="p">:</span> <span class="n">f</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;style&quot;</span><span class="p">,</span> <span class="n">style</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">column</span><span class="p">))))</span>

    <span class="k">if</span> <span class="n">return_fc</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">result</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">result</span><span class="o">.</span><span class="n">style</span><span class="p">(</span><span class="o">**</span><span class="p">{</span><span class="s2">&quot;styleProperty&quot;</span><span class="p">:</span> <span class="s2">&quot;style&quot;</span><span class="p">,</span> <span class="s2">&quot;neighborhood&quot;</span><span class="p">:</span> <span class="n">neighborhood</span><span class="p">})</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.explode" class="doc doc-heading">
<code class="highlight language-python"><span class="n">explode</span><span class="p">(</span><span class="n">coords</span><span class="p">)</span></code>


<a href="#geemap.common.explode" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Explode a GeoJSON geometry's coordinates object and yield
coordinate tuples. As long as the input is conforming, the type of
the geometry doesn't matter.  From Fiona 1.4.8</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>coords</code></td>
        <td><code>list</code></td>
        <td><p>A list of coordinates.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Yields:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>[type]</code></td>
      <td><p>[description]</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">explode</span><span class="p">(</span><span class="n">coords</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Explode a GeoJSON geometry&#39;s coordinates object and yield</span>
<span class="sd">    coordinate tuples. As long as the input is conforming, the type of</span>
<span class="sd">    the geometry doesn&#39;t matter.  From Fiona 1.4.8</span>

<span class="sd">    Args:</span>
<span class="sd">        coords (list): A list of coordinates.</span>

<span class="sd">    Yields:</span>
<span class="sd">        [type]: [description]</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">coords</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="p">(</span><span class="nb">float</span><span class="p">,</span> <span class="nb">int</span><span class="p">)):</span>
            <span class="k">yield</span> <span class="n">coords</span>
            <span class="k">break</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">explode</span><span class="p">(</span><span class="n">e</span><span class="p">):</span>
                <span class="k">yield</span> <span class="n">f</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.extract_pixel_values" class="doc doc-heading">
<code class="highlight language-python"><span class="n">extract_pixel_values</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">region</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">projection</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">tileScale</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">getInfo</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>


<a href="#geemap.common.extract_pixel_values" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Samples the pixels of an image, returning them as a ee.Dictionary.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>ee_object</code></td>
        <td><code>ee.Image | ee.ImageCollection</code></td>
        <td><p>The ee.Image or ee.ImageCollection to sample.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>region</code></td>
        <td><code>ee.Geometry</code></td>
        <td><p>The region to sample from. If unspecified, uses the image's whole footprint.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>scale</code></td>
        <td><code>float</code></td>
        <td><p>A nominal scale in meters of the projection to sample in. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>projection</code></td>
        <td><code>str</code></td>
        <td><p>The projection in which to sample. If unspecified, the projection of the image's first band is used. If specified in addition to scale, rescaled to the specified scale. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>tileScale</code></td>
        <td><code>int</code></td>
        <td><p>A scaling factor used to reduce aggregation tile size; using a larger tileScale (e.g. 2 or 4) may enable computations that run out of memory with the default. Defaults to 1.</p></td>
        <td><code>1</code></td>
      </tr>
      <tr>
        <td><code>getInfo</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to use getInfo with the results, i.e., returning the values a list. Default to False.</p></td>
        <td><code>False</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>TypeError</code></td>
        <td><p>The image must be an instance of ee.Image.</p></td>
      </tr>
      <tr>
        <td><code>TypeError</code></td>
        <td><p>Region must be an instance of ee.Geometry.</p></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>ee.Dictionary</code></td>
      <td><p>The dictionary containing band names and pixel values.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">extract_pixel_values</span><span class="p">(</span>
    <span class="n">ee_object</span><span class="p">,</span> <span class="n">region</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">projection</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">tileScale</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">getInfo</span><span class="o">=</span><span class="kc">False</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Samples the pixels of an image, returning them as a ee.Dictionary.</span>

<span class="sd">    Args:</span>
<span class="sd">        ee_object (ee.Image | ee.ImageCollection): The ee.Image or ee.ImageCollection to sample.</span>
<span class="sd">        region (ee.Geometry): The region to sample from. If unspecified, uses the image&#39;s whole footprint.</span>
<span class="sd">        scale (float, optional): A nominal scale in meters of the projection to sample in. Defaults to None.</span>
<span class="sd">        projection (str, optional): The projection in which to sample. If unspecified, the projection of the image&#39;s first band is used. If specified in addition to scale, rescaled to the specified scale. Defaults to None.</span>
<span class="sd">        tileScale (int, optional): A scaling factor used to reduce aggregation tile size; using a larger tileScale (e.g. 2 or 4) may enable computations that run out of memory with the default. Defaults to 1.</span>
<span class="sd">        getInfo (bool, optional): Whether to use getInfo with the results, i.e., returning the values a list. Default to False.</span>

<span class="sd">    Raises:</span>
<span class="sd">        TypeError: The image must be an instance of ee.Image.</span>
<span class="sd">        TypeError: Region must be an instance of ee.Geometry.</span>

<span class="sd">    Returns:</span>
<span class="sd">        ee.Dictionary: The dictionary containing band names and pixel values.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">):</span>
        <span class="n">ee_object</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">toBands</span><span class="p">()</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;The image must be an instance of ee.Image.&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">region</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Geometry</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Region must be an instance of ee.Geometry.&quot;</span><span class="p">)</span>

    <span class="n">dict_values</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">ee_object</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="n">region</span><span class="p">,</span> <span class="n">scale</span><span class="p">,</span> <span class="n">projection</span><span class="p">,</span> <span class="n">tileScale</span><span class="o">=</span><span class="n">tileScale</span><span class="p">)</span>
        <span class="o">.</span><span class="n">first</span><span class="p">()</span>
        <span class="o">.</span><span class="n">toDictionary</span><span class="p">()</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">getInfo</span><span class="p">:</span>
        <span class="n">band_names</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">bandNames</span><span class="p">()</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()</span>
        <span class="n">values_tmp</span> <span class="o">=</span> <span class="n">dict_values</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()</span>
        <span class="n">values</span> <span class="o">=</span> <span class="p">[</span><span class="n">values_tmp</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">band_names</span><span class="p">]</span>
        <span class="k">return</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">band_names</span><span class="p">,</span> <span class="n">values</span><span class="p">))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">dict_values</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.extract_transect" class="doc doc-heading">
<code class="highlight language-python"><span class="n">extract_transect</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">line</span><span class="p">,</span> <span class="n">reducer</span><span class="o">=</span><span class="s1">&#39;mean&#39;</span><span class="p">,</span> <span class="n">n_segments</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">dist_interval</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">crs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">crsTransform</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">tileScale</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">to_pandas</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.common.extract_transect" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Extracts transect from an image. Credits to Gena for providing the JavaScript example https://code.earthengine.google.com/b09759b8ac60366ee2ae4eccdd19e615.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>image</code></td>
        <td><code>ee.Image</code></td>
        <td><p>The image to extract transect from.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>line</code></td>
        <td><code>ee.Geometry.LineString</code></td>
        <td><p>The LineString used to extract transect from an image.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>reducer</code></td>
        <td><code>str</code></td>
        <td><p>The ee.Reducer to use, e.g., 'mean', 'median', 'min', 'max', 'stdDev'. Defaults to "mean".</p></td>
        <td><code>&#39;mean&#39;</code></td>
      </tr>
      <tr>
        <td><code>n_segments</code></td>
        <td><code>int</code></td>
        <td><p>The number of segments that the LineString will be split into. Defaults to 100.</p></td>
        <td><code>100</code></td>
      </tr>
      <tr>
        <td><code>dist_interval</code></td>
        <td><code>float</code></td>
        <td><p>The distance interval used for splitting the LineString. If specified, the n_segments parameter will be ignored. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>scale</code></td>
        <td><code>float</code></td>
        <td><p>A nominal scale in meters of the projection to work in. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>crs</code></td>
        <td><code>ee.Projection</code></td>
        <td><p>The projection to work in. If unspecified, the projection of the image's first band is used. If specified in addition to scale, rescaled to the specified scale. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>crsTransform</code></td>
        <td><code>list</code></td>
        <td><p>The list of CRS transform values. This is a row-major ordering of the 3x2 transform matrix. This option is mutually exclusive with 'scale', and will replace any transform already set on the projection. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>tileScale</code></td>
        <td><code>float</code></td>
        <td><p>A scaling factor used to reduce aggregation tile size; using a larger tileScale (e.g. 2 or 4) may enable computations that run out of memory with the default. Defaults to 1.</p></td>
        <td><code>1.0</code></td>
      </tr>
      <tr>
        <td><code>to_pandas</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to convert the result to a pandas dataframe. Default to False.</p></td>
        <td><code>False</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>TypeError</code></td>
        <td><p>If the geometry type is not LineString.</p></td>
      </tr>
      <tr>
        <td><code>Exception</code></td>
        <td><p>If the program fails to compute.</p></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>ee.FeatureCollection</code></td>
      <td><p>The FeatureCollection containing the transect with distance and reducer values.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">extract_transect</span><span class="p">(</span>
    <span class="n">image</span><span class="p">,</span>
    <span class="n">line</span><span class="p">,</span>
    <span class="n">reducer</span><span class="o">=</span><span class="s2">&quot;mean&quot;</span><span class="p">,</span>
    <span class="n">n_segments</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
    <span class="n">dist_interval</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">crs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">crsTransform</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">tileScale</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
    <span class="n">to_pandas</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Extracts transect from an image. Credits to Gena for providing the JavaScript example https://code.earthengine.google.com/b09759b8ac60366ee2ae4eccdd19e615.</span>

<span class="sd">    Args:</span>
<span class="sd">        image (ee.Image): The image to extract transect from.</span>
<span class="sd">        line (ee.Geometry.LineString): The LineString used to extract transect from an image.</span>
<span class="sd">        reducer (str, optional): The ee.Reducer to use, e.g., &#39;mean&#39;, &#39;median&#39;, &#39;min&#39;, &#39;max&#39;, &#39;stdDev&#39;. Defaults to &quot;mean&quot;.</span>
<span class="sd">        n_segments (int, optional): The number of segments that the LineString will be split into. Defaults to 100.</span>
<span class="sd">        dist_interval (float, optional): The distance interval used for splitting the LineString. If specified, the n_segments parameter will be ignored. Defaults to None.</span>
<span class="sd">        scale (float, optional): A nominal scale in meters of the projection to work in. Defaults to None.</span>
<span class="sd">        crs (ee.Projection, optional): The projection to work in. If unspecified, the projection of the image&#39;s first band is used. If specified in addition to scale, rescaled to the specified scale. Defaults to None.</span>
<span class="sd">        crsTransform (list, optional): The list of CRS transform values. This is a row-major ordering of the 3x2 transform matrix. This option is mutually exclusive with &#39;scale&#39;, and will replace any transform already set on the projection. Defaults to None.</span>
<span class="sd">        tileScale (float, optional): A scaling factor used to reduce aggregation tile size; using a larger tileScale (e.g. 2 or 4) may enable computations that run out of memory with the default. Defaults to 1.</span>
<span class="sd">        to_pandas (bool, optional): Whether to convert the result to a pandas dataframe. Default to False.</span>

<span class="sd">    Raises:</span>
<span class="sd">        TypeError: If the geometry type is not LineString.</span>
<span class="sd">        Exception: If the program fails to compute.</span>

<span class="sd">    Returns:</span>
<span class="sd">        ee.FeatureCollection: The FeatureCollection containing the transect with distance and reducer values.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>

        <span class="n">geom_type</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">type</span><span class="p">()</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">geom_type</span> <span class="o">!=</span> <span class="s2">&quot;LineString&quot;</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;The geometry type must be LineString.&quot;</span><span class="p">)</span>

        <span class="n">reducer</span> <span class="o">=</span> <span class="nb">eval</span><span class="p">(</span><span class="s2">&quot;ee.Reducer.&quot;</span> <span class="o">+</span> <span class="n">reducer</span> <span class="o">+</span> <span class="s2">&quot;()&quot;</span><span class="p">)</span>
        <span class="n">maxError</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">projection</span><span class="p">()</span><span class="o">.</span><span class="n">nominalScale</span><span class="p">()</span><span class="o">.</span><span class="n">divide</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>

        <span class="n">length</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">length</span><span class="p">(</span><span class="n">maxError</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">dist_interval</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">dist_interval</span> <span class="o">=</span> <span class="n">length</span><span class="o">.</span><span class="n">divide</span><span class="p">(</span><span class="n">n_segments</span><span class="p">)</span>

        <span class="n">distances</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">List</span><span class="o">.</span><span class="n">sequence</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">length</span><span class="p">,</span> <span class="n">dist_interval</span><span class="p">)</span>
        <span class="n">lines</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">cutLines</span><span class="p">(</span><span class="n">distances</span><span class="p">,</span> <span class="n">maxError</span><span class="p">)</span><span class="o">.</span><span class="n">geometries</span><span class="p">()</span>

        <span class="k">def</span> <span class="nf">set_dist_attr</span><span class="p">(</span><span class="n">l</span><span class="p">):</span>
            <span class="n">l</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">List</span><span class="p">(</span><span class="n">l</span><span class="p">)</span>
            <span class="n">geom</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Geometry</span><span class="p">(</span><span class="n">l</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
            <span class="n">distance</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Number</span><span class="p">(</span><span class="n">l</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
            <span class="n">geom</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Geometry</span><span class="o">.</span><span class="n">LineString</span><span class="p">(</span><span class="n">geom</span><span class="o">.</span><span class="n">coordinates</span><span class="p">())</span>
            <span class="k">return</span> <span class="n">ee</span><span class="o">.</span><span class="n">Feature</span><span class="p">(</span><span class="n">geom</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;distance&quot;</span><span class="p">:</span> <span class="n">distance</span><span class="p">})</span>

        <span class="n">lines</span> <span class="o">=</span> <span class="n">lines</span><span class="o">.</span><span class="n">zip</span><span class="p">(</span><span class="n">distances</span><span class="p">)</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">set_dist_attr</span><span class="p">)</span>
        <span class="n">lines</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span>

        <span class="n">transect</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">reduceRegions</span><span class="p">(</span>
            <span class="o">**</span><span class="p">{</span>
                <span class="s2">&quot;collection&quot;</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">(</span><span class="n">lines</span><span class="p">),</span>
                <span class="s2">&quot;reducer&quot;</span><span class="p">:</span> <span class="n">reducer</span><span class="p">,</span>
                <span class="s2">&quot;scale&quot;</span><span class="p">:</span> <span class="n">scale</span><span class="p">,</span>
                <span class="s2">&quot;crs&quot;</span><span class="p">:</span> <span class="n">crs</span><span class="p">,</span>
                <span class="s2">&quot;crsTransform&quot;</span><span class="p">:</span> <span class="n">crsTransform</span><span class="p">,</span>
                <span class="s2">&quot;tileScale&quot;</span><span class="p">:</span> <span class="n">tileScale</span><span class="p">,</span>
            <span class="p">}</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="n">to_pandas</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">ee_to_df</span><span class="p">(</span><span class="n">transect</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">transect</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.extract_values_to_points" class="doc doc-heading">
<code class="highlight language-python"><span class="n">extract_values_to_points</span><span class="p">(</span><span class="n">in_fc</span><span class="p">,</span> <span class="n">image</span><span class="p">,</span> <span class="n">out_fc</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">crs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">crsTransform</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">tileScale</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">stats_type</span><span class="o">=</span><span class="s1">&#39;FIRST&#39;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="n">proxies</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.common.extract_values_to_points" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Extracts image values to points.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>in_fc</code></td>
        <td><code>object</code></td>
        <td><p>ee.FeatureCollection.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>image</code></td>
        <td><code>object</code></td>
        <td><p>The ee.Image to extract pixel values.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>out_fc</code></td>
        <td><code>object</code></td>
        <td><p>The output feature collection. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>scale</code></td>
        <td><code>ee.Projectoin</code></td>
        <td><p>A nominal scale in meters of the projection to sample in. If unspecified,the scale of the image's first band is used.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>crs</code></td>
        <td><code>str</code></td>
        <td><p>The projection to work in. If unspecified, the projection of the image's first band is used. If specified in addition to scale, rescaled to the specified scale. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>crsTransform</code></td>
        <td><code>list</code></td>
        <td><p>The list of CRS transform values. This is a row-major ordering of the 3x2 transform matrix. This option is mutually exclusive with 'scale', and will replace any transform already set on the projection.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>tile_scale</code></td>
        <td><code>float</code></td>
        <td><p>A scaling factor used to reduce aggregation tile size; using a larger tileScale (e.g. 2 or 4) may enable computations that run out of memory with the default.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>stats_type</code></td>
        <td><code>str</code></td>
        <td><p>Statistic type to be calculated. Defaults to 'FIRST'.</p></td>
        <td><code>&#39;FIRST&#39;</code></td>
      </tr>
      <tr>
        <td><code>timeout</code></td>
        <td><code>int</code></td>
        <td><p>The number of seconds after which the request will be terminated. Defaults to 300.</p></td>
        <td><code>300</code></td>
      </tr>
      <tr>
        <td><code>proxies</code></td>
        <td><code>dict</code></td>
        <td><p>A dictionary of proxy servers to use for each request. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>object</code></td>
      <td><p>ee.FeatureCollection</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">extract_values_to_points</span><span class="p">(</span>
    <span class="n">in_fc</span><span class="p">,</span>
    <span class="n">image</span><span class="p">,</span>
    <span class="n">out_fc</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">crs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">crsTransform</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">tileScale</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
    <span class="n">stats_type</span><span class="o">=</span><span class="s2">&quot;FIRST&quot;</span><span class="p">,</span>
    <span class="n">timeout</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span>
    <span class="n">proxies</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Extracts image values to points.</span>

<span class="sd">    Args:</span>
<span class="sd">        in_fc (object): ee.FeatureCollection.</span>
<span class="sd">        image (object): The ee.Image to extract pixel values.</span>
<span class="sd">        out_fc (object, optional): The output feature collection. Defaults to None.</span>
<span class="sd">        scale (ee.Projectoin, optional): A nominal scale in meters of the projection to sample in. If unspecified,the scale of the image&#39;s first band is used.</span>
<span class="sd">        crs (str, optional): The projection to work in. If unspecified, the projection of the image&#39;s first band is used. If specified in addition to scale, rescaled to the specified scale. Defaults to None.</span>
<span class="sd">        crsTransform (list, optional): The list of CRS transform values. This is a row-major ordering of the 3x2 transform matrix. This option is mutually exclusive with &#39;scale&#39;, and will replace any transform already set on the projection.</span>
<span class="sd">        tile_scale (float, optional): A scaling factor used to reduce aggregation tile size; using a larger tileScale (e.g. 2 or 4) may enable computations that run out of memory with the default.</span>
<span class="sd">        stats_type (str, optional): Statistic type to be calculated. Defaults to &#39;FIRST&#39;.</span>
<span class="sd">        timeout (int, optional): The number of seconds after which the request will be terminated. Defaults to 300.</span>
<span class="sd">        proxies (dict, optional): A dictionary of proxy servers to use for each request. Defaults to None.</span>

<span class="sd">    Returns:</span>
<span class="sd">        object: ee.FeatureCollection</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="s2">&quot;tile_scale&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
        <span class="n">tileScale</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;tile_scale&quot;</span><span class="p">]</span>
    <span class="k">if</span> <span class="s2">&quot;crs_transform&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
        <span class="n">crsTransform</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;crs_transform&quot;</span><span class="p">]</span>

    <span class="n">allowed_stats</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;FIRST&quot;</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">first</span><span class="p">(),</span>
        <span class="s2">&quot;MEAN&quot;</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">mean</span><span class="p">(),</span>
        <span class="s2">&quot;MAXIMUM&quot;</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">max</span><span class="p">(),</span>
        <span class="s2">&quot;MEDIAN&quot;</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">median</span><span class="p">(),</span>
        <span class="s2">&quot;MINIMUM&quot;</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span>
        <span class="s2">&quot;STD&quot;</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">stdDev</span><span class="p">(),</span>
        <span class="s2">&quot;MIN_MAX&quot;</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">minMax</span><span class="p">(),</span>
        <span class="s2">&quot;SUM&quot;</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">sum</span><span class="p">(),</span>
        <span class="s2">&quot;VARIANCE&quot;</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">variance</span><span class="p">(),</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="n">stats_type</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">allowed_stats</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;The statistics_type must be one of the following </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">allowed_stats</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">in_fc</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">in_fc</span> <span class="o">=</span> <span class="n">shp_to_ee</span><span class="p">(</span><span class="n">in_fc</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
            <span class="k">return</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The image must be an instance of ee.Image.&quot;</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="n">result</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">reduceRegions</span><span class="p">(</span>
        <span class="n">collection</span><span class="o">=</span><span class="n">in_fc</span><span class="p">,</span>
        <span class="n">reducer</span><span class="o">=</span><span class="n">allowed_stats</span><span class="p">[</span><span class="n">stats_type</span><span class="o">.</span><span class="n">upper</span><span class="p">()],</span>
        <span class="n">scale</span><span class="o">=</span><span class="n">scale</span><span class="p">,</span>
        <span class="n">crs</span><span class="o">=</span><span class="n">crs</span><span class="p">,</span>
        <span class="n">crsTransform</span><span class="o">=</span><span class="n">crsTransform</span><span class="p">,</span>
        <span class="n">tileScale</span><span class="o">=</span><span class="n">tileScale</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">out_fc</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">ee_export_vector</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">out_fc</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span> <span class="n">proxies</span><span class="o">=</span><span class="n">proxies</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">result</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.file_browser" class="doc doc-heading">
<code class="highlight language-python"><span class="n">file_browser</span><span class="p">(</span><span class="n">in_dir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">show_hidden</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">add_root_node</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">search_description</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">use_import</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">return_sep_widgets</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">node_icon</span><span class="o">=</span><span class="s1">&#39;file&#39;</span><span class="p">)</span></code>


<a href="#geemap.common.file_browser" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Creates a simple file browser and text editor.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>in_dir</code></td>
        <td><code>str</code></td>
        <td><p>The input directory. Defaults to None, which will use the current working directory.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>show_hidden</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to show hidden files/folders. Defaults to False.</p></td>
        <td><code>False</code></td>
      </tr>
      <tr>
        <td><code>add_root_node</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to add the input directory as a root node. Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
      <tr>
        <td><code>search_description</code></td>
        <td><code>str</code></td>
        <td><p>The description of the search box. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>use_import</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to show the import button. Defaults to False.</p></td>
        <td><code>False</code></td>
      </tr>
      <tr>
        <td><code>return_sep_widgets</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to return the results as separate widgets. Defaults to False.</p></td>
        <td><code>False</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>object</code></td>
      <td><p>An ipywidget.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">file_browser</span><span class="p">(</span>
    <span class="n">in_dir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">show_hidden</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">add_root_node</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">search_description</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">use_import</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">return_sep_widgets</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">node_icon</span><span class="o">=</span><span class="s2">&quot;file&quot;</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Creates a simple file browser and text editor.</span>

<span class="sd">    Args:</span>
<span class="sd">        in_dir (str, optional): The input directory. Defaults to None, which will use the current working directory.</span>
<span class="sd">        show_hidden (bool, optional): Whether to show hidden files/folders. Defaults to False.</span>
<span class="sd">        add_root_node (bool, optional): Whether to add the input directory as a root node. Defaults to True.</span>
<span class="sd">        search_description (str, optional): The description of the search box. Defaults to None.</span>
<span class="sd">        use_import (bool, optional): Whether to show the import button. Defaults to False.</span>
<span class="sd">        return_sep_widgets (bool, optional): Whether to return the results as separate widgets. Defaults to False.</span>

<span class="sd">    Returns:</span>
<span class="sd">        object: An ipywidget.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">platform</span>

    <span class="k">if</span> <span class="n">in_dir</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">in_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">in_dir</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The provided directory does not exist.&quot;</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="k">elif</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">in_dir</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The provided path is not a valid directory.&quot;</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="n">sep</span> <span class="o">=</span> <span class="s2">&quot;/&quot;</span>
    <span class="k">if</span> <span class="n">platform</span><span class="o">.</span><span class="n">system</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;Windows&quot;</span><span class="p">:</span>
        <span class="n">sep</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\\</span><span class="s2">&quot;</span>

    <span class="k">if</span> <span class="n">in_dir</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">sep</span><span class="p">):</span>
        <span class="n">in_dir</span> <span class="o">=</span> <span class="n">in_dir</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

    <span class="n">full_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">HBox</span><span class="p">()</span>
    <span class="n">left_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">VBox</span><span class="p">()</span>

    <span class="n">right_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">VBox</span><span class="p">()</span>

    <span class="n">import_btn</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;import&quot;</span><span class="p">,</span>
        <span class="n">button_style</span><span class="o">=</span><span class="s2">&quot;primary&quot;</span><span class="p">,</span>
        <span class="n">tooltip</span><span class="o">=</span><span class="s2">&quot;import the content to a new cell&quot;</span><span class="p">,</span>
        <span class="n">disabled</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">import_btn</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="s2">&quot;70px&quot;</span>
    <span class="n">path_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Text</span><span class="p">()</span>
    <span class="n">path_widget</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">min_width</span> <span class="o">=</span> <span class="s2">&quot;400px&quot;</span>
    <span class="c1"># path_widget.layout.max_width = &#39;400px&#39;</span>
    <span class="n">save_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Save&quot;</span><span class="p">,</span>
        <span class="n">button_style</span><span class="o">=</span><span class="s2">&quot;primary&quot;</span><span class="p">,</span>
        <span class="n">tooltip</span><span class="o">=</span><span class="s2">&quot;Save edits to file.&quot;</span><span class="p">,</span>
        <span class="n">disabled</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">info_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">HBox</span><span class="p">()</span>
    <span class="n">info_widget</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">[</span><span class="n">path_widget</span><span class="p">,</span> <span class="n">save_widget</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">use_import</span><span class="p">:</span>
        <span class="n">info_widget</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">[</span><span class="n">import_btn</span><span class="p">,</span> <span class="n">path_widget</span><span class="p">,</span> <span class="n">save_widget</span><span class="p">]</span>

    <span class="n">text_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Textarea</span><span class="p">()</span>
    <span class="n">text_widget</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="s2">&quot;630px&quot;</span>
    <span class="n">text_widget</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="s2">&quot;600px&quot;</span>

    <span class="n">right_widget</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">[</span><span class="n">info_widget</span><span class="p">,</span> <span class="n">text_widget</span><span class="p">]</span>
    <span class="n">full_widget</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">[</span><span class="n">left_widget</span><span class="p">]</span>

    <span class="k">if</span> <span class="n">search_description</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">search_description</span> <span class="o">=</span> <span class="s2">&quot;Search files/folders...&quot;</span>
    <span class="n">search_box</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Text</span><span class="p">(</span><span class="n">placeholder</span><span class="o">=</span><span class="n">search_description</span><span class="p">)</span>
    <span class="n">search_box</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="s2">&quot;310px&quot;</span>
    <span class="n">tree_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Output</span><span class="p">()</span>
    <span class="n">tree_widget</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">max_width</span> <span class="o">=</span> <span class="s2">&quot;310px&quot;</span>
    <span class="n">tree_widget</span><span class="o">.</span><span class="n">overflow</span> <span class="o">=</span> <span class="s2">&quot;auto&quot;</span>

    <span class="n">left_widget</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">[</span><span class="n">search_box</span><span class="p">,</span> <span class="n">tree_widget</span><span class="p">]</span>

    <span class="n">tree</span> <span class="o">=</span> <span class="n">Tree</span><span class="p">(</span><span class="n">multiple_selection</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">tree_dict</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">def</span> <span class="nf">on_button_clicked</span><span class="p">(</span><span class="n">b</span><span class="p">):</span>
        <span class="n">content</span> <span class="o">=</span> <span class="n">text_widget</span><span class="o">.</span><span class="n">value</span>
        <span class="n">out_file</span> <span class="o">=</span> <span class="n">path_widget</span><span class="o">.</span><span class="n">value</span>

        <span class="n">out_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">out_file</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">out_dir</span><span class="p">):</span>
            <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">out_dir</span><span class="p">)</span>

        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">out_file</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">content</span><span class="p">)</span>

        <span class="n">text_widget</span><span class="o">.</span><span class="n">disabled</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">text_widget</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s2">&quot;The content has been saved successfully.&quot;</span>
        <span class="n">save_widget</span><span class="o">.</span><span class="n">disabled</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">path_widget</span><span class="o">.</span><span class="n">disabled</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">out_file</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">tree_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span> <span class="ow">and</span> <span class="p">(</span><span class="n">out_dir</span> <span class="ow">in</span> <span class="n">tree_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
            <span class="n">node</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">out_file</span><span class="p">))</span>
            <span class="n">tree_dict</span><span class="p">[</span><span class="n">out_file</span><span class="p">]</span> <span class="o">=</span> <span class="n">node</span>
            <span class="n">parent_node</span> <span class="o">=</span> <span class="n">tree_dict</span><span class="p">[</span><span class="n">out_dir</span><span class="p">]</span>
            <span class="n">parent_node</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>

    <span class="n">save_widget</span><span class="o">.</span><span class="n">on_click</span><span class="p">(</span><span class="n">on_button_clicked</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">import_btn_clicked</span><span class="p">(</span><span class="n">b</span><span class="p">):</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">text_widget</span><span class="o">.</span><span class="n">value</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">path_widget</span><span class="o">.</span><span class="n">value</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.py&quot;</span><span class="p">)):</span>
            <span class="n">create_code_cell</span><span class="p">(</span><span class="n">text_widget</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>

    <span class="n">import_btn</span><span class="o">.</span><span class="n">on_click</span><span class="p">(</span><span class="n">import_btn_clicked</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">search_box_callback</span><span class="p">(</span><span class="n">text</span><span class="p">):</span>

        <span class="k">with</span> <span class="n">tree_widget</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">text</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Loading...&quot;</span><span class="p">)</span>
                <span class="n">tree_widget</span><span class="o">.</span><span class="n">clear_output</span><span class="p">(</span><span class="n">wait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                <span class="n">display</span><span class="p">(</span><span class="n">tree</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">tree_widget</span><span class="o">.</span><span class="n">clear_output</span><span class="p">()</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Searching...&quot;</span><span class="p">)</span>
                <span class="n">tree_widget</span><span class="o">.</span><span class="n">clear_output</span><span class="p">(</span><span class="n">wait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                <span class="n">sub_tree</span> <span class="o">=</span> <span class="n">search_api_tree</span><span class="p">(</span><span class="n">text</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">tree_dict</span><span class="p">)</span>
                <span class="n">display</span><span class="p">(</span><span class="n">sub_tree</span><span class="p">)</span>

    <span class="n">search_box</span><span class="o">.</span><span class="n">on_submit</span><span class="p">(</span><span class="n">search_box_callback</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">handle_file_click</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">event</span><span class="p">[</span><span class="s2">&quot;new&quot;</span><span class="p">]:</span>
            <span class="n">cur_node</span> <span class="o">=</span> <span class="n">event</span><span class="p">[</span><span class="s2">&quot;owner&quot;</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">tree_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">cur_node</span> <span class="ow">is</span> <span class="n">tree_dict</span><span class="p">[</span><span class="n">key</span><span class="p">])</span> <span class="ow">and</span> <span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">key</span><span class="p">)):</span>
                    <span class="k">if</span> <span class="n">key</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.py&quot;</span><span class="p">):</span>
                        <span class="n">import_btn</span><span class="o">.</span><span class="n">disabled</span> <span class="o">=</span> <span class="kc">False</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">import_btn</span><span class="o">.</span><span class="n">disabled</span> <span class="o">=</span> <span class="kc">True</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                            <span class="n">content</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
                            <span class="n">text_widget</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">content</span>
                            <span class="n">text_widget</span><span class="o">.</span><span class="n">disabled</span> <span class="o">=</span> <span class="kc">False</span>
                            <span class="n">path_widget</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">key</span>
                            <span class="n">path_widget</span><span class="o">.</span><span class="n">disabled</span> <span class="o">=</span> <span class="kc">False</span>
                            <span class="n">save_widget</span><span class="o">.</span><span class="n">disabled</span> <span class="o">=</span> <span class="kc">False</span>
                            <span class="n">full_widget</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">[</span><span class="n">left_widget</span><span class="p">,</span> <span class="n">right_widget</span><span class="p">]</span>
                    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                        <span class="n">path_widget</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">key</span>
                        <span class="n">path_widget</span><span class="o">.</span><span class="n">disabled</span> <span class="o">=</span> <span class="kc">True</span>
                        <span class="n">save_widget</span><span class="o">.</span><span class="n">disabled</span> <span class="o">=</span> <span class="kc">True</span>
                        <span class="n">text_widget</span><span class="o">.</span><span class="n">disabled</span> <span class="o">=</span> <span class="kc">True</span>
                        <span class="n">text_widget</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="p">(</span>
                            <span class="s2">&quot;Failed to open </span><span class="si">{}</span><span class="s2">.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cur_node</span><span class="o">.</span><span class="n">name</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
                        <span class="p">)</span>
                        <span class="n">full_widget</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">[</span><span class="n">left_widget</span><span class="p">,</span> <span class="n">right_widget</span><span class="p">]</span>
                        <span class="k">return</span>
                    <span class="k">break</span>

    <span class="k">def</span> <span class="nf">handle_folder_click</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">event</span><span class="p">[</span><span class="s2">&quot;new&quot;</span><span class="p">]:</span>
            <span class="n">full_widget</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">[</span><span class="n">left_widget</span><span class="p">]</span>
            <span class="n">text_widget</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

    <span class="k">if</span> <span class="n">add_root_node</span><span class="p">:</span>
        <span class="n">root_name</span> <span class="o">=</span> <span class="n">in_dir</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">sep</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">root_node</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">root_name</span><span class="p">)</span>
        <span class="n">tree_dict</span><span class="p">[</span><span class="n">in_dir</span><span class="p">]</span> <span class="o">=</span> <span class="n">root_node</span>
        <span class="n">tree</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="n">root_node</span><span class="p">)</span>
        <span class="n">root_node</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">handle_folder_click</span><span class="p">,</span> <span class="s2">&quot;selected&quot;</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">root</span><span class="p">,</span> <span class="n">d_names</span><span class="p">,</span> <span class="n">f_names</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">walk</span><span class="p">(</span><span class="n">in_dir</span><span class="p">):</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">show_hidden</span><span class="p">:</span>
            <span class="n">folders</span> <span class="o">=</span> <span class="n">root</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">sep</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">folder</span> <span class="ow">in</span> <span class="n">folders</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">folder</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">):</span>
                    <span class="k">continue</span>
            <span class="k">for</span> <span class="n">d_name</span> <span class="ow">in</span> <span class="n">d_names</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">d_name</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">):</span>
                    <span class="n">d_names</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">d_name</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">f_name</span> <span class="ow">in</span> <span class="n">f_names</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">f_name</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">):</span>
                    <span class="n">f_names</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">f_name</span><span class="p">)</span>

        <span class="n">d_names</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="n">f_names</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>

        <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="n">add_root_node</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">root</span> <span class="o">==</span> <span class="n">in_dir</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">d_name</span> <span class="ow">in</span> <span class="n">d_names</span><span class="p">:</span>
                <span class="n">node</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">d_name</span><span class="p">)</span>
                <span class="n">tree_dict</span><span class="p">[</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">in_dir</span><span class="p">,</span> <span class="n">d_name</span><span class="p">)]</span> <span class="o">=</span> <span class="n">node</span>
                <span class="n">tree</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
                <span class="n">node</span><span class="o">.</span><span class="n">opened</span> <span class="o">=</span> <span class="kc">False</span>
                <span class="n">node</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">handle_folder_click</span><span class="p">,</span> <span class="s2">&quot;selected&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">root</span> <span class="o">!=</span> <span class="n">in_dir</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">root</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">tree_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">root</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">sep</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">dir_name</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">root</span><span class="p">)</span>
            <span class="n">parent_node</span> <span class="o">=</span> <span class="n">tree_dict</span><span class="p">[</span><span class="n">dir_name</span><span class="p">]</span>
            <span class="n">node</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
            <span class="n">tree_dict</span><span class="p">[</span><span class="n">root</span><span class="p">]</span> <span class="o">=</span> <span class="n">node</span>
            <span class="n">parent_node</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
            <span class="n">node</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">handle_folder_click</span><span class="p">,</span> <span class="s2">&quot;selected&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">f_names</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">parent_node</span> <span class="o">=</span> <span class="n">tree_dict</span><span class="p">[</span><span class="n">root</span><span class="p">]</span>
            <span class="n">parent_node</span><span class="o">.</span><span class="n">opened</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">for</span> <span class="n">f_name</span> <span class="ow">in</span> <span class="n">f_names</span><span class="p">:</span>
                <span class="n">node</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">f_name</span><span class="p">)</span>
                <span class="n">node</span><span class="o">.</span><span class="n">icon</span> <span class="o">=</span> <span class="n">node_icon</span>
                <span class="n">full_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">f_name</span><span class="p">)</span>
                <span class="n">tree_dict</span><span class="p">[</span><span class="n">full_path</span><span class="p">]</span> <span class="o">=</span> <span class="n">node</span>
                <span class="n">parent_node</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
                <span class="n">node</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">handle_file_click</span><span class="p">,</span> <span class="s2">&quot;selected&quot;</span><span class="p">)</span>

    <span class="k">with</span> <span class="n">tree_widget</span><span class="p">:</span>
        <span class="n">tree_widget</span><span class="o">.</span><span class="n">clear_output</span><span class="p">()</span>
        <span class="n">display</span><span class="p">(</span><span class="n">tree</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">return_sep_widgets</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">left_widget</span><span class="p">,</span> <span class="n">right_widget</span><span class="p">,</span> <span class="n">tree_dict</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">full_widget</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.filter_HUC08" class="doc doc-heading">
<code class="highlight language-python"><span class="n">filter_HUC08</span><span class="p">(</span><span class="n">region</span><span class="p">)</span></code>


<a href="#geemap.common.filter_HUC08" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Filters HUC08 watersheds intersecting a given region.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>region</code></td>
        <td><code>object</code></td>
        <td><p>ee.Geometry</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>object</code></td>
      <td><p>ee.FeatureCollection</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">filter_HUC08</span><span class="p">(</span><span class="n">region</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Filters HUC08 watersheds intersecting a given region.</span>

<span class="sd">    Args:</span>
<span class="sd">        region (object): ee.Geometry</span>

<span class="sd">    Returns:</span>
<span class="sd">        object: ee.FeatureCollection</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">USGS_HUC08</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">(</span><span class="s2">&quot;USGS/WBD/2017/HUC08&quot;</span><span class="p">)</span>  <span class="c1"># Subbasins</span>
    <span class="n">HUC08</span> <span class="o">=</span> <span class="n">USGS_HUC08</span><span class="o">.</span><span class="n">filterBounds</span><span class="p">(</span><span class="n">region</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">HUC08</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.filter_HUC10" class="doc doc-heading">
<code class="highlight language-python"><span class="n">filter_HUC10</span><span class="p">(</span><span class="n">region</span><span class="p">)</span></code>


<a href="#geemap.common.filter_HUC10" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Filters HUC10 watersheds intersecting a given region.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>region</code></td>
        <td><code>object</code></td>
        <td><p>ee.Geometry</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>object</code></td>
      <td><p>ee.FeatureCollection</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">filter_HUC10</span><span class="p">(</span><span class="n">region</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Filters HUC10 watersheds intersecting a given region.</span>

<span class="sd">    Args:</span>
<span class="sd">        region (object): ee.Geometry</span>

<span class="sd">    Returns:</span>
<span class="sd">        object: ee.FeatureCollection</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">USGS_HUC10</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">(</span><span class="s2">&quot;USGS/WBD/2017/HUC10&quot;</span><span class="p">)</span>  <span class="c1"># Watersheds</span>
    <span class="n">HUC10</span> <span class="o">=</span> <span class="n">USGS_HUC10</span><span class="o">.</span><span class="n">filterBounds</span><span class="p">(</span><span class="n">region</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">HUC10</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.filter_NWI" class="doc doc-heading">
<code class="highlight language-python"><span class="n">filter_NWI</span><span class="p">(</span><span class="n">HUC08_Id</span><span class="p">,</span> <span class="n">region</span><span class="p">,</span> <span class="n">exclude_riverine</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>


<a href="#geemap.common.filter_NWI" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Retrieves NWI dataset for a given HUC8 watershed.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>HUC08_Id</code></td>
        <td><code>str</code></td>
        <td><p>The HUC8 watershed id.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>region</code></td>
        <td><code>object</code></td>
        <td><p>ee.Geometry</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>exclude_riverine</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to exclude riverine wetlands. Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>object</code></td>
      <td><p>ee.FeatureCollection</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">filter_NWI</span><span class="p">(</span><span class="n">HUC08_Id</span><span class="p">,</span> <span class="n">region</span><span class="p">,</span> <span class="n">exclude_riverine</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Retrieves NWI dataset for a given HUC8 watershed.</span>

<span class="sd">    Args:</span>
<span class="sd">        HUC08_Id (str): The HUC8 watershed id.</span>
<span class="sd">        region (object): ee.Geometry</span>
<span class="sd">        exclude_riverine (bool, optional): Whether to exclude riverine wetlands. Defaults to True.</span>

<span class="sd">    Returns:</span>
<span class="sd">        object: ee.FeatureCollection</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">nwi_asset_prefix</span> <span class="o">=</span> <span class="s2">&quot;users/wqs/NWI-HU8/HU8_&quot;</span>
    <span class="n">nwi_asset_suffix</span> <span class="o">=</span> <span class="s2">&quot;_Wetlands&quot;</span>
    <span class="n">nwi_asset_path</span> <span class="o">=</span> <span class="n">nwi_asset_prefix</span> <span class="o">+</span> <span class="n">HUC08_Id</span> <span class="o">+</span> <span class="n">nwi_asset_suffix</span>
    <span class="n">nwi_huc</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">(</span><span class="n">nwi_asset_path</span><span class="p">)</span><span class="o">.</span><span class="n">filterBounds</span><span class="p">(</span><span class="n">region</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">exclude_riverine</span><span class="p">:</span>
        <span class="n">nwi_huc</span> <span class="o">=</span> <span class="n">nwi_huc</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span>
            <span class="n">ee</span><span class="o">.</span><span class="n">Filter</span><span class="o">.</span><span class="n">notEquals</span><span class="p">(</span><span class="o">**</span><span class="p">{</span><span class="s2">&quot;leftField&quot;</span><span class="p">:</span> <span class="s2">&quot;WETLAND_TY&quot;</span><span class="p">,</span> <span class="s2">&quot;rightValue&quot;</span><span class="p">:</span> <span class="s2">&quot;Riverine&quot;</span><span class="p">})</span>
        <span class="p">)</span>
    <span class="k">return</span> <span class="n">nwi_huc</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.filter_polygons" class="doc doc-heading">
<code class="highlight language-python"><span class="n">filter_polygons</span><span class="p">(</span><span class="n">ftr</span><span class="p">)</span></code>


<a href="#geemap.common.filter_polygons" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Converts GeometryCollection to Polygon/MultiPolygon</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>ftr</code></td>
        <td><code>object</code></td>
        <td><p>ee.Feature</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>object</code></td>
      <td><p>ee.Feature</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">filter_polygons</span><span class="p">(</span><span class="n">ftr</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Converts GeometryCollection to Polygon/MultiPolygon</span>

<span class="sd">    Args:</span>
<span class="sd">        ftr (object): ee.Feature</span>

<span class="sd">    Returns:</span>
<span class="sd">        object: ee.Feature</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># ee_initialize()</span>
    <span class="n">geometries</span> <span class="o">=</span> <span class="n">ftr</span><span class="o">.</span><span class="n">geometry</span><span class="p">()</span><span class="o">.</span><span class="n">geometries</span><span class="p">()</span>
    <span class="n">geometries</span> <span class="o">=</span> <span class="n">geometries</span><span class="o">.</span><span class="n">map</span><span class="p">(</span>
        <span class="k">lambda</span> <span class="n">geo</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Feature</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">Geometry</span><span class="p">(</span><span class="n">geo</span><span class="p">))</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;geoType&quot;</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Geometry</span><span class="p">(</span><span class="n">geo</span><span class="p">)</span><span class="o">.</span><span class="n">type</span><span class="p">())</span>
    <span class="p">)</span>

    <span class="n">polygons</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">(</span><span class="n">geometries</span><span class="p">)</span>
        <span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">Filter</span><span class="o">.</span><span class="n">eq</span><span class="p">(</span><span class="s2">&quot;geoType&quot;</span><span class="p">,</span> <span class="s2">&quot;Polygon&quot;</span><span class="p">))</span>
        <span class="o">.</span><span class="n">geometry</span><span class="p">()</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">ee</span><span class="o">.</span><span class="n">Feature</span><span class="p">(</span><span class="n">polygons</span><span class="p">)</span><span class="o">.</span><span class="n">copyProperties</span><span class="p">(</span><span class="n">ftr</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.find_HUC08" class="doc doc-heading">
<code class="highlight language-python"><span class="n">find_HUC08</span><span class="p">(</span><span class="n">HUC08_Id</span><span class="p">)</span></code>


<a href="#geemap.common.find_HUC08" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Finds a HUC08 watershed based on a given HUC08 ID</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>HUC08_Id</code></td>
        <td><code>str</code></td>
        <td><p>The HUC08 ID.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>object</code></td>
      <td><p>ee.FeatureCollection</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">find_HUC08</span><span class="p">(</span><span class="n">HUC08_Id</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Finds a HUC08 watershed based on a given HUC08 ID</span>

<span class="sd">    Args:</span>
<span class="sd">        HUC08_Id (str): The HUC08 ID.</span>

<span class="sd">    Returns:</span>
<span class="sd">        object: ee.FeatureCollection</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">USGS_HUC08</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">(</span><span class="s2">&quot;USGS/WBD/2017/HUC08&quot;</span><span class="p">)</span>  <span class="c1"># Subbasins</span>
    <span class="n">HUC08</span> <span class="o">=</span> <span class="n">USGS_HUC08</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">Filter</span><span class="o">.</span><span class="n">eq</span><span class="p">(</span><span class="s2">&quot;huc8&quot;</span><span class="p">,</span> <span class="n">HUC08_Id</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">HUC08</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.find_HUC10" class="doc doc-heading">
<code class="highlight language-python"><span class="n">find_HUC10</span><span class="p">(</span><span class="n">HUC10_Id</span><span class="p">)</span></code>


<a href="#geemap.common.find_HUC10" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Finds a HUC10 watershed based on a given HUC08 ID</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>HUC10_Id</code></td>
        <td><code>str</code></td>
        <td><p>The HUC10 ID.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>object</code></td>
      <td><p>ee.FeatureCollection</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">find_HUC10</span><span class="p">(</span><span class="n">HUC10_Id</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Finds a HUC10 watershed based on a given HUC08 ID</span>

<span class="sd">    Args:</span>
<span class="sd">        HUC10_Id (str): The HUC10 ID.</span>

<span class="sd">    Returns:</span>
<span class="sd">        object: ee.FeatureCollection</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">USGS_HUC10</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">(</span><span class="s2">&quot;USGS/WBD/2017/HUC10&quot;</span><span class="p">)</span>  <span class="c1"># Watersheds</span>
    <span class="n">HUC10</span> <span class="o">=</span> <span class="n">USGS_HUC10</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">Filter</span><span class="o">.</span><span class="n">eq</span><span class="p">(</span><span class="s2">&quot;huc10&quot;</span><span class="p">,</span> <span class="n">HUC10_Id</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">HUC10</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.find_NAIP" class="doc doc-heading">
<code class="highlight language-python"><span class="n">find_NAIP</span><span class="p">(</span><span class="n">region</span><span class="p">,</span> <span class="n">add_NDVI</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">add_NDWI</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>


<a href="#geemap.common.find_NAIP" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Create annual NAIP mosaic for a given region.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>region</code></td>
        <td><code>object</code></td>
        <td><p>ee.Geometry</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>add_NDVI</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to add the NDVI band. Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
      <tr>
        <td><code>add_NDWI</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to add the NDWI band. Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>object</code></td>
      <td><p>ee.ImageCollection</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">find_NAIP</span><span class="p">(</span><span class="n">region</span><span class="p">,</span> <span class="n">add_NDVI</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">add_NDWI</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Create annual NAIP mosaic for a given region.</span>

<span class="sd">    Args:</span>
<span class="sd">        region (object): ee.Geometry</span>
<span class="sd">        add_NDVI (bool, optional): Whether to add the NDVI band. Defaults to True.</span>
<span class="sd">        add_NDWI (bool, optional): Whether to add the NDWI band. Defaults to True.</span>

<span class="sd">    Returns:</span>
<span class="sd">        object: ee.ImageCollection</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">init_collection</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">(</span><span class="s2">&quot;USDA/NAIP/DOQQ&quot;</span><span class="p">)</span>
        <span class="o">.</span><span class="n">filterBounds</span><span class="p">(</span><span class="n">region</span><span class="p">)</span>
        <span class="o">.</span><span class="n">filterDate</span><span class="p">(</span><span class="s2">&quot;2009-01-01&quot;</span><span class="p">,</span> <span class="s2">&quot;2019-12-31&quot;</span><span class="p">)</span>
        <span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">Filter</span><span class="o">.</span><span class="n">listContains</span><span class="p">(</span><span class="s2">&quot;system:band_names&quot;</span><span class="p">,</span> <span class="s2">&quot;N&quot;</span><span class="p">))</span>
    <span class="p">)</span>

    <span class="n">yearList</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">List</span><span class="p">(</span>
        <span class="n">init_collection</span><span class="o">.</span><span class="n">distinct</span><span class="p">([</span><span class="s2">&quot;system:time_start&quot;</span><span class="p">])</span><span class="o">.</span><span class="n">aggregate_array</span><span class="p">(</span>
            <span class="s2">&quot;system:time_start&quot;</span>
        <span class="p">)</span>
    <span class="p">)</span>
    <span class="n">init_years</span> <span class="o">=</span> <span class="n">yearList</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">y</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Date</span><span class="p">(</span><span class="n">y</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;year&quot;</span><span class="p">))</span>

    <span class="c1"># remove duplicates</span>
    <span class="n">init_years</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Dictionary</span><span class="p">(</span>
        <span class="n">init_years</span><span class="o">.</span><span class="n">reduce</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">frequencyHistogram</span><span class="p">())</span>
    <span class="p">)</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
    <span class="n">years</span> <span class="o">=</span> <span class="n">init_years</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Number</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
    <span class="c1"># years = init_years.map(lambda x: x)</span>

    <span class="c1"># Available NAIP years with NIR band</span>
    <span class="k">def</span> <span class="nf">NAIPAnnual</span><span class="p">(</span><span class="n">year</span><span class="p">):</span>
        <span class="n">start_date</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Date</span><span class="o">.</span><span class="n">fromYMD</span><span class="p">(</span><span class="n">year</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">end_date</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Date</span><span class="o">.</span><span class="n">fromYMD</span><span class="p">(</span><span class="n">year</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">31</span><span class="p">)</span>
        <span class="n">collection</span> <span class="o">=</span> <span class="n">init_collection</span><span class="o">.</span><span class="n">filterDate</span><span class="p">(</span><span class="n">start_date</span><span class="p">,</span> <span class="n">end_date</span><span class="p">)</span>
        <span class="c1"># .filterBounds(geometry)</span>
        <span class="c1"># .filter(ee.Filter.listContains(&quot;system:band_names&quot;, &quot;N&quot;))</span>
        <span class="n">time_start</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Date</span><span class="p">(</span>
            <span class="n">ee</span><span class="o">.</span><span class="n">List</span><span class="p">(</span><span class="n">collection</span><span class="o">.</span><span class="n">aggregate_array</span><span class="p">(</span><span class="s2">&quot;system:time_start&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">&quot;YYYY-MM-dd&quot;</span><span class="p">)</span>
        <span class="n">time_end</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Date</span><span class="p">(</span>
            <span class="n">ee</span><span class="o">.</span><span class="n">List</span><span class="p">(</span><span class="n">collection</span><span class="o">.</span><span class="n">aggregate_array</span><span class="p">(</span><span class="s2">&quot;system:time_end&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
        <span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">&quot;YYYY-MM-dd&quot;</span><span class="p">)</span>
        <span class="n">col_size</span> <span class="o">=</span> <span class="n">collection</span><span class="o">.</span><span class="n">size</span><span class="p">()</span>
        <span class="n">image</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">(</span><span class="n">collection</span><span class="o">.</span><span class="n">mosaic</span><span class="p">()</span><span class="o">.</span><span class="n">clip</span><span class="p">(</span><span class="n">region</span><span class="p">))</span>

        <span class="k">if</span> <span class="n">add_NDVI</span><span class="p">:</span>
            <span class="n">NDVI</span> <span class="o">=</span> <span class="p">(</span>
                <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>
                <span class="o">.</span><span class="n">normalizedDifference</span><span class="p">([</span><span class="s2">&quot;N&quot;</span><span class="p">,</span> <span class="s2">&quot;R&quot;</span><span class="p">])</span>
                <span class="o">.</span><span class="n">select</span><span class="p">([</span><span class="s2">&quot;nd&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;ndvi&quot;</span><span class="p">])</span>
            <span class="p">)</span>
            <span class="n">image</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">addBands</span><span class="p">(</span><span class="n">NDVI</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">add_NDWI</span><span class="p">:</span>
            <span class="n">NDWI</span> <span class="o">=</span> <span class="p">(</span>
                <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>
                <span class="o">.</span><span class="n">normalizedDifference</span><span class="p">([</span><span class="s2">&quot;G&quot;</span><span class="p">,</span> <span class="s2">&quot;N&quot;</span><span class="p">])</span>
                <span class="o">.</span><span class="n">select</span><span class="p">([</span><span class="s2">&quot;nd&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;ndwi&quot;</span><span class="p">])</span>
            <span class="p">)</span>
            <span class="n">image</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">addBands</span><span class="p">(</span><span class="n">NDWI</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">image</span><span class="o">.</span><span class="n">set</span><span class="p">(</span>
            <span class="p">{</span>
                <span class="s2">&quot;system:time_start&quot;</span><span class="p">:</span> <span class="n">time_start</span><span class="p">,</span>
                <span class="s2">&quot;system:time_end&quot;</span><span class="p">:</span> <span class="n">time_end</span><span class="p">,</span>
                <span class="s2">&quot;tiles&quot;</span><span class="p">:</span> <span class="n">col_size</span><span class="p">,</span>
            <span class="p">}</span>
        <span class="p">)</span>

    <span class="c1"># remove years with incomplete coverage</span>
    <span class="n">naip</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">(</span><span class="n">years</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">NAIPAnnual</span><span class="p">))</span>
    <span class="n">mean_size</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Number</span><span class="p">(</span><span class="n">naip</span><span class="o">.</span><span class="n">aggregate_mean</span><span class="p">(</span><span class="s2">&quot;tiles&quot;</span><span class="p">))</span>
    <span class="n">total_sd</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Number</span><span class="p">(</span><span class="n">naip</span><span class="o">.</span><span class="n">aggregate_total_sd</span><span class="p">(</span><span class="s2">&quot;tiles&quot;</span><span class="p">))</span>
    <span class="n">threshold</span> <span class="o">=</span> <span class="n">mean_size</span><span class="o">.</span><span class="n">subtract</span><span class="p">(</span><span class="n">total_sd</span><span class="o">.</span><span class="n">multiply</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
    <span class="n">naip</span> <span class="o">=</span> <span class="n">naip</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span>
        <span class="n">ee</span><span class="o">.</span><span class="n">Filter</span><span class="o">.</span><span class="n">Or</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">Filter</span><span class="o">.</span><span class="n">gte</span><span class="p">(</span><span class="s2">&quot;tiles&quot;</span><span class="p">,</span> <span class="n">threshold</span><span class="p">),</span> <span class="n">ee</span><span class="o">.</span><span class="n">Filter</span><span class="o">.</span><span class="n">gte</span><span class="p">(</span><span class="s2">&quot;tiles&quot;</span><span class="p">,</span> <span class="mi">15</span><span class="p">))</span>
    <span class="p">)</span>
    <span class="n">naip</span> <span class="o">=</span> <span class="n">naip</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">Filter</span><span class="o">.</span><span class="n">gte</span><span class="p">(</span><span class="s2">&quot;tiles&quot;</span><span class="p">,</span> <span class="mi">7</span><span class="p">))</span>

    <span class="n">naip_count</span> <span class="o">=</span> <span class="n">naip</span><span class="o">.</span><span class="n">size</span><span class="p">()</span>
    <span class="n">naip_seq</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">List</span><span class="o">.</span><span class="n">sequence</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">naip_count</span><span class="o">.</span><span class="n">subtract</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">set_index</span><span class="p">(</span><span class="n">index</span><span class="p">):</span>
        <span class="n">img</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">(</span><span class="n">naip</span><span class="o">.</span><span class="n">toList</span><span class="p">(</span><span class="n">naip_count</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">index</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">img</span><span class="o">.</span><span class="n">set</span><span class="p">({</span><span class="s2">&quot;system:uid&quot;</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Number</span><span class="p">(</span><span class="n">index</span><span class="p">)</span><span class="o">.</span><span class="n">toUint8</span><span class="p">()})</span>

    <span class="n">naip</span> <span class="o">=</span> <span class="n">naip_seq</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">set_index</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">(</span><span class="n">naip</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.find_NWI" class="doc doc-heading">
<code class="highlight language-python"><span class="n">find_NWI</span><span class="p">(</span><span class="n">HUC08_Id</span><span class="p">,</span> <span class="n">exclude_riverine</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>


<a href="#geemap.common.find_NWI" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Finds NWI dataset for a given HUC08 watershed.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>HUC08_Id</code></td>
        <td><code>str</code></td>
        <td><p>The HUC08 watershed ID.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>exclude_riverine</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to exclude riverine wetlands. Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>object</code></td>
      <td><p>ee.FeatureCollection</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">find_NWI</span><span class="p">(</span><span class="n">HUC08_Id</span><span class="p">,</span> <span class="n">exclude_riverine</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Finds NWI dataset for a given HUC08 watershed.</span>

<span class="sd">    Args:</span>
<span class="sd">        HUC08_Id (str): The HUC08 watershed ID.</span>
<span class="sd">        exclude_riverine (bool, optional): Whether to exclude riverine wetlands. Defaults to True.</span>

<span class="sd">    Returns:</span>
<span class="sd">        object: ee.FeatureCollection</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">nwi_asset_prefix</span> <span class="o">=</span> <span class="s2">&quot;users/wqs/NWI-HU8/HU8_&quot;</span>
    <span class="n">nwi_asset_suffix</span> <span class="o">=</span> <span class="s2">&quot;_Wetlands&quot;</span>
    <span class="n">nwi_asset_path</span> <span class="o">=</span> <span class="n">nwi_asset_prefix</span> <span class="o">+</span> <span class="n">HUC08_Id</span> <span class="o">+</span> <span class="n">nwi_asset_suffix</span>
    <span class="n">nwi_huc</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">(</span><span class="n">nwi_asset_path</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">exclude_riverine</span><span class="p">:</span>
        <span class="n">nwi_huc</span> <span class="o">=</span> <span class="n">nwi_huc</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span>
            <span class="n">ee</span><span class="o">.</span><span class="n">Filter</span><span class="o">.</span><span class="n">notEquals</span><span class="p">(</span><span class="o">**</span><span class="p">{</span><span class="s2">&quot;leftField&quot;</span><span class="p">:</span> <span class="s2">&quot;WETLAND_TY&quot;</span><span class="p">,</span> <span class="s2">&quot;rightValue&quot;</span><span class="p">:</span> <span class="s2">&quot;Riverine&quot;</span><span class="p">})</span>
        <span class="p">)</span>
    <span class="k">return</span> <span class="n">nwi_huc</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.find_landsat_by_path_row" class="doc doc-heading">
<code class="highlight language-python"><span class="n">find_landsat_by_path_row</span><span class="p">(</span><span class="n">landsat_col</span><span class="p">,</span> <span class="n">path_num</span><span class="p">,</span> <span class="n">row_num</span><span class="p">)</span></code>


<a href="#geemap.common.find_landsat_by_path_row" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Finds Landsat images by WRS path number and row number.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>landsat_col</code></td>
        <td><code>str</code></td>
        <td><p>The image collection id of Landsat.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>path_num</code></td>
        <td><code>int</code></td>
        <td><p>The WRS path number.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>row_num</code></td>
        <td><code>int</code></td>
        <td><p>the WRS row number.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>object</code></td>
      <td><p>ee.ImageCollection</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">find_landsat_by_path_row</span><span class="p">(</span><span class="n">landsat_col</span><span class="p">,</span> <span class="n">path_num</span><span class="p">,</span> <span class="n">row_num</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Finds Landsat images by WRS path number and row number.</span>

<span class="sd">    Args:</span>
<span class="sd">        landsat_col (str): The image collection id of Landsat.</span>
<span class="sd">        path_num (int): The WRS path number.</span>
<span class="sd">        row_num (int): the WRS row number.</span>

<span class="sd">    Returns:</span>
<span class="sd">        object: ee.ImageCollection</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">landsat_col</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">landsat_col</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">(</span><span class="n">landsat_col</span><span class="p">)</span>
            <span class="n">collection</span> <span class="o">=</span> <span class="n">landsat_col</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">Filter</span><span class="o">.</span><span class="n">eq</span><span class="p">(</span><span class="s2">&quot;WRS_PATH&quot;</span><span class="p">,</span> <span class="n">path_num</span><span class="p">))</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span>
                <span class="n">ee</span><span class="o">.</span><span class="n">Filter</span><span class="o">.</span><span class="n">eq</span><span class="p">(</span><span class="s2">&quot;WRS_ROW&quot;</span><span class="p">,</span> <span class="n">row_num</span><span class="p">)</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="n">collection</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.fishnet" class="doc doc-heading">
<code class="highlight language-python"><span class="n">fishnet</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">h_interval</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">v_interval</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">rows</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">cols</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">delta</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">intersect</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">output</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.common.fishnet" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Create a fishnet (i.e., rectangular grid) based on an input vector dataset.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>data</code></td>
        <td><code>str | ee.Geometry | ee.Feature | ee.FeatureCollection</code></td>
        <td><p>The input vector dataset. It can be a file path, HTTP URL, ee.Geometry, ee.Feature, or ee.FeatureCollection.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>h_interval</code></td>
        <td><code>float</code></td>
        <td><p>The horizontal interval in degrees. It will be ignored if rows and cols are specified. Defaults to 1.0.</p></td>
        <td><code>1.0</code></td>
      </tr>
      <tr>
        <td><code>v_interval</code></td>
        <td><code>float</code></td>
        <td><p>The vertical interval in degrees. It will be ignored if rows and cols are specified. Defaults to 1.0.</p></td>
        <td><code>1.0</code></td>
      </tr>
      <tr>
        <td><code>rows</code></td>
        <td><code>int</code></td>
        <td><p>The number of rows. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>cols</code></td>
        <td><code>int</code></td>
        <td><p>The number of columns. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>delta</code></td>
        <td><code>float</code></td>
        <td><p>The buffer distance in degrees. Defaults to 1.0.</p></td>
        <td><code>1.0</code></td>
      </tr>
      <tr>
        <td><code>intersect</code></td>
        <td><code>bool</code></td>
        <td><p>If True, the output will be a feature collection of intersecting polygons. Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
      <tr>
        <td><code>output</code></td>
        <td><code>str</code></td>
        <td><p>The output file path. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>ee.FeatureCollection</code></td>
      <td><p>The fishnet as an ee.FeatureCollection.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">fishnet</span><span class="p">(</span>
    <span class="n">data</span><span class="p">,</span>
    <span class="n">h_interval</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
    <span class="n">v_interval</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
    <span class="n">rows</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">cols</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">delta</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
    <span class="n">intersect</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">output</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Create a fishnet (i.e., rectangular grid) based on an input vector dataset.</span>

<span class="sd">    Args:</span>
<span class="sd">        data (str | ee.Geometry | ee.Feature | ee.FeatureCollection): The input vector dataset. It can be a file path, HTTP URL, ee.Geometry, ee.Feature, or ee.FeatureCollection.</span>
<span class="sd">        h_interval (float, optional): The horizontal interval in degrees. It will be ignored if rows and cols are specified. Defaults to 1.0.</span>
<span class="sd">        v_interval (float, optional): The vertical interval in degrees. It will be ignored if rows and cols are specified. Defaults to 1.0.</span>
<span class="sd">        rows (int, optional): The number of rows. Defaults to None.</span>
<span class="sd">        cols (int, optional): The number of columns. Defaults to None.</span>
<span class="sd">        delta (float, optional): The buffer distance in degrees. Defaults to 1.0.</span>
<span class="sd">        intersect (bool, optional): If True, the output will be a feature collection of intersecting polygons. Defaults to True.</span>
<span class="sd">        output (str, optional): The output file path. Defaults to None.</span>


<span class="sd">    Returns:</span>
<span class="sd">        ee.FeatureCollection: The fishnet as an ee.FeatureCollection.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>

        <span class="n">data</span> <span class="o">=</span> <span class="n">vector_to_ee</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Feature</span><span class="p">):</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">geometry</span><span class="p">()</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Geometry</span><span class="p">):</span>
        <span class="k">pass</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="s2">&quot;data must be a string, ee.FeatureCollection, ee.Feature, or ee.Geometry.&quot;</span>
        <span class="p">)</span>

    <span class="n">coords</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">bounds</span><span class="p">()</span><span class="o">.</span><span class="n">coordinates</span><span class="p">()</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()</span>

    <span class="n">west</span> <span class="o">=</span> <span class="n">coords</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">east</span> <span class="o">=</span> <span class="n">coords</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">south</span> <span class="o">=</span> <span class="n">coords</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">north</span> <span class="o">=</span> <span class="n">coords</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>

    <span class="k">if</span> <span class="n">rows</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">cols</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">v_interval</span> <span class="o">=</span> <span class="p">(</span><span class="n">north</span> <span class="o">-</span> <span class="n">south</span><span class="p">)</span> <span class="o">/</span> <span class="n">rows</span>
        <span class="n">h_interval</span> <span class="o">=</span> <span class="p">(</span><span class="n">east</span> <span class="o">-</span> <span class="n">west</span><span class="p">)</span> <span class="o">/</span> <span class="n">cols</span>

    <span class="c1"># west = west - delta * h_interval</span>
    <span class="n">east</span> <span class="o">=</span> <span class="n">east</span> <span class="o">+</span> <span class="n">delta</span> <span class="o">*</span> <span class="n">h_interval</span>
    <span class="c1"># south = south - delta * v_interval</span>
    <span class="n">north</span> <span class="o">=</span> <span class="n">north</span> <span class="o">+</span> <span class="n">delta</span> <span class="o">*</span> <span class="n">v_interval</span>

    <span class="n">grids</span> <span class="o">=</span> <span class="n">latlon_grid</span><span class="p">(</span><span class="n">v_interval</span><span class="p">,</span> <span class="n">h_interval</span><span class="p">,</span> <span class="n">west</span><span class="p">,</span> <span class="n">east</span><span class="p">,</span> <span class="n">south</span><span class="p">,</span> <span class="n">north</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">intersect</span><span class="p">:</span>
        <span class="n">grids</span> <span class="o">=</span> <span class="n">grids</span><span class="o">.</span><span class="n">filterBounds</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">output</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">ee_export_vector</span><span class="p">(</span><span class="n">grids</span><span class="p">,</span> <span class="n">output</span><span class="p">)</span>

    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">grids</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.gdf_bounds" class="doc doc-heading">
<code class="highlight language-python"><span class="n">gdf_bounds</span><span class="p">(</span><span class="n">gdf</span><span class="p">,</span> <span class="n">return_geom</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>


<a href="#geemap.common.gdf_bounds" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Returns the bounding box of a GeoDataFrame.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>gdf</code></td>
        <td><code>gpd.GeoDataFrame</code></td>
        <td><p>A GeoDataFrame.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>return_geom</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to return the bounding box as a GeoDataFrame. Defaults to False.</p></td>
        <td><code>False</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>list | gpd.GeoDataFrame</code></td>
      <td><p>A bounding box in the form of a list (minx, miny, maxx, maxy) or GeoDataFrame.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">gdf_bounds</span><span class="p">(</span><span class="n">gdf</span><span class="p">,</span> <span class="n">return_geom</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Returns the bounding box of a GeoDataFrame.</span>

<span class="sd">    Args:</span>
<span class="sd">        gdf (gpd.GeoDataFrame): A GeoDataFrame.</span>
<span class="sd">        return_geom (bool, optional): Whether to return the bounding box as a GeoDataFrame. Defaults to False.</span>

<span class="sd">    Returns:</span>
<span class="sd">        list | gpd.GeoDataFrame: A bounding box in the form of a list (minx, miny, maxx, maxy) or GeoDataFrame.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">bounds</span> <span class="o">=</span> <span class="n">gdf</span><span class="o">.</span><span class="n">total_bounds</span>
    <span class="k">if</span> <span class="n">return_geom</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">bbox_to_gdf</span><span class="p">(</span><span class="n">bbox</span><span class="o">=</span><span class="n">bounds</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">bounds</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.gdf_centroid" class="doc doc-heading">
<code class="highlight language-python"><span class="n">gdf_centroid</span><span class="p">(</span><span class="n">gdf</span><span class="p">,</span> <span class="n">return_geom</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>


<a href="#geemap.common.gdf_centroid" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Returns the centroid of a GeoDataFrame.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>gdf</code></td>
        <td><code>gpd.GeoDataFrame</code></td>
        <td><p>A GeoDataFrame.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>return_geom</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to return the bounding box as a GeoDataFrame. Defaults to False.</p></td>
        <td><code>False</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>list | gpd.GeoDataFrame</code></td>
      <td><p>A bounding box in the form of a list (lon, lat) or GeoDataFrame.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">gdf_centroid</span><span class="p">(</span><span class="n">gdf</span><span class="p">,</span> <span class="n">return_geom</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Returns the centroid of a GeoDataFrame.</span>

<span class="sd">    Args:</span>
<span class="sd">        gdf (gpd.GeoDataFrame): A GeoDataFrame.</span>
<span class="sd">        return_geom (bool, optional): Whether to return the bounding box as a GeoDataFrame. Defaults to False.</span>

<span class="sd">    Returns:</span>
<span class="sd">        list | gpd.GeoDataFrame: A bounding box in the form of a list (lon, lat) or GeoDataFrame.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s2">&quot;ignore&quot;</span><span class="p">)</span>

    <span class="n">centroid</span> <span class="o">=</span> <span class="n">gdf_bounds</span><span class="p">(</span><span class="n">gdf</span><span class="p">,</span> <span class="n">return_geom</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">centroid</span>
    <span class="k">if</span> <span class="n">return_geom</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">centroid</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">centroid</span><span class="o">.</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">centroid</span><span class="o">.</span><span class="n">y</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.gdf_geom_type" class="doc doc-heading">
<code class="highlight language-python"><span class="n">gdf_geom_type</span><span class="p">(</span><span class="n">gdf</span><span class="p">,</span> <span class="n">first_only</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>


<a href="#geemap.common.gdf_geom_type" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Returns the geometry type of a GeoDataFrame.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>gdf</code></td>
        <td><code>gpd.GeoDataFrame</code></td>
        <td><p>A GeoDataFrame.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>first_only</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to return the geometry type of the first feature in the GeoDataFrame. Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>str</code></td>
      <td><p>The geometry type of the GeoDataFrame.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">gdf_geom_type</span><span class="p">(</span><span class="n">gdf</span><span class="p">,</span> <span class="n">first_only</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Returns the geometry type of a GeoDataFrame.</span>

<span class="sd">    Args:</span>
<span class="sd">        gdf (gpd.GeoDataFrame): A GeoDataFrame.</span>
<span class="sd">        first_only (bool, optional): Whether to return the geometry type of the first feature in the GeoDataFrame. Defaults to True.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: The geometry type of the GeoDataFrame.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">first_only</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">gdf</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">type</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">gdf</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">type</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.gdf_to_df" class="doc doc-heading">
<code class="highlight language-python"><span class="n">gdf_to_df</span><span class="p">(</span><span class="n">gdf</span><span class="p">,</span> <span class="n">drop_geom</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>


<a href="#geemap.common.gdf_to_df" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Converts a GeoDataFrame to a pandas DataFrame.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>gdf</code></td>
        <td><code>gpd.GeoDataFrame</code></td>
        <td><p>A GeoDataFrame.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>drop_geom</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to drop the geometry column. Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>pd.DataFrame</code></td>
      <td><p>A pandas DataFrame containing the GeoDataFrame.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">gdf_to_df</span><span class="p">(</span><span class="n">gdf</span><span class="p">,</span> <span class="n">drop_geom</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Converts a GeoDataFrame to a pandas DataFrame.</span>

<span class="sd">    Args:</span>
<span class="sd">        gdf (gpd.GeoDataFrame): A GeoDataFrame.</span>
<span class="sd">        drop_geom (bool, optional): Whether to drop the geometry column. Defaults to True.</span>

<span class="sd">    Returns:</span>
<span class="sd">        pd.DataFrame: A pandas DataFrame containing the GeoDataFrame.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

    <span class="k">if</span> <span class="n">drop_geom</span><span class="p">:</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">gdf</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;geometry&quot;</span><span class="p">]))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">gdf</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">df</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.gdf_to_ee" class="doc doc-heading">
<code class="highlight language-python"><span class="n">gdf_to_ee</span><span class="p">(</span><span class="n">gdf</span><span class="p">,</span> <span class="n">geodesic</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">date</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">date_format</span><span class="o">=</span><span class="s1">&#39;YYYY-MM-dd&#39;</span><span class="p">)</span></code>


<a href="#geemap.common.gdf_to_ee" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Converts a GeoPandas GeoDataFrame to ee.FeatureCollection.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>gdf</code></td>
        <td><code>geopandas.GeoDataFrame</code></td>
        <td><p>The input geopandas.GeoDataFrame to be converted ee.FeatureCollection.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>geodesic</code></td>
        <td><code>bool</code></td>
        <td><p>Whether line segments should be interpreted as spherical geodesics. If false, indicates that line segments should be interpreted as planar lines in the specified CRS. If absent, defaults to true if the CRS is geographic (including the default EPSG:4326), or to false if the CRS is projected. Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
      <tr>
        <td><code>date</code></td>
        <td><code>str</code></td>
        <td><p>Column name for the date column. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>date_format</code></td>
        <td><code>str</code></td>
        <td><p>Date format. A pattern, as described at http://joda-time.sourceforge.net/apidocs/org/joda/time/format/DateTimeFormat.html. Defaults to 'YYYY-MM-dd'.</p></td>
        <td><code>&#39;YYYY-MM-dd&#39;</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>TypeError</code></td>
        <td><p>The input data type must be geopandas.GeoDataFrame.</p></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>ee.FeatureCollection</code></td>
      <td><p>The output ee.FeatureCollection converted from the input geopandas.GeoDataFrame.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">gdf_to_ee</span><span class="p">(</span><span class="n">gdf</span><span class="p">,</span> <span class="n">geodesic</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">date</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">date_format</span><span class="o">=</span><span class="s2">&quot;YYYY-MM-dd&quot;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Converts a GeoPandas GeoDataFrame to ee.FeatureCollection.</span>

<span class="sd">    Args:</span>
<span class="sd">        gdf (geopandas.GeoDataFrame): The input geopandas.GeoDataFrame to be converted ee.FeatureCollection.</span>
<span class="sd">        geodesic (bool, optional): Whether line segments should be interpreted as spherical geodesics. If false, indicates that line segments should be interpreted as planar lines in the specified CRS. If absent, defaults to true if the CRS is geographic (including the default EPSG:4326), or to false if the CRS is projected. Defaults to True.</span>
<span class="sd">        date (str, optional): Column name for the date column. Defaults to None.</span>
<span class="sd">        date_format (str, optional): Date format. A pattern, as described at http://joda-time.sourceforge.net/apidocs/org/joda/time/format/DateTimeFormat.html. Defaults to &#39;YYYY-MM-dd&#39;.</span>

<span class="sd">    Raises:</span>
<span class="sd">        TypeError: The input data type must be geopandas.GeoDataFrame.</span>

<span class="sd">    Returns:</span>
<span class="sd">        ee.FeatureCollection: The output ee.FeatureCollection converted from the input geopandas.GeoDataFrame.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">check_package</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;geopandas&quot;</span><span class="p">,</span> <span class="n">URL</span><span class="o">=</span><span class="s2">&quot;https://geopandas.org&quot;</span><span class="p">)</span>

    <span class="kn">import</span> <span class="nn">geopandas</span> <span class="k">as</span> <span class="nn">gpd</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">gdf</span><span class="p">,</span> <span class="n">gpd</span><span class="o">.</span><span class="n">GeoDataFrame</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;The input data type must be geopandas.GeoDataFrame.&quot;</span><span class="p">)</span>

    <span class="n">out_json</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">(),</span> <span class="n">random_string</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;.geojson&quot;</span><span class="p">)</span>
    <span class="n">gdf</span> <span class="o">=</span> <span class="n">gdf</span><span class="o">.</span><span class="n">to_crs</span><span class="p">(</span><span class="mi">4326</span><span class="p">)</span>
    <span class="n">gdf</span><span class="o">.</span><span class="n">to_file</span><span class="p">(</span><span class="n">out_json</span><span class="p">,</span> <span class="n">driver</span><span class="o">=</span><span class="s2">&quot;GeoJSON&quot;</span><span class="p">)</span>

    <span class="n">fc</span> <span class="o">=</span> <span class="n">geojson_to_ee</span><span class="p">(</span><span class="n">out_json</span><span class="p">,</span> <span class="n">geodesic</span><span class="o">=</span><span class="n">geodesic</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">date</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">fc</span> <span class="o">=</span> <span class="n">fc</span><span class="o">.</span><span class="n">map</span><span class="p">(</span>
                <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">set</span><span class="p">(</span>
                    <span class="s2">&quot;system:time_start&quot;</span><span class="p">,</span>
                    <span class="n">ee</span><span class="o">.</span><span class="n">Date</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">date_format</span><span class="p">,</span> <span class="n">x</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">date</span><span class="p">))</span><span class="o">.</span><span class="n">millis</span><span class="p">(),</span>
                <span class="p">)</span>
            <span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

    <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">out_json</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">fc</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.gdf_to_geojson" class="doc doc-heading">
<code class="highlight language-python"><span class="n">gdf_to_geojson</span><span class="p">(</span><span class="n">gdf</span><span class="p">,</span> <span class="n">out_geojson</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">epsg</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


<a href="#geemap.common.gdf_to_geojson" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Converts a GeoDataFame to GeoJSON.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>gdf</code></td>
        <td><code>GeoDataFrame</code></td>
        <td><p>A GeoPandas GeoDataFrame.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>out_geojson</code></td>
        <td><code>str</code></td>
        <td><p>File path to he output GeoJSON. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>epsg</code></td>
        <td><code>str</code></td>
        <td><p>An EPSG string, e.g., "4326". Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>TypeError</code></td>
        <td><p>When the output file extension is incorrect.</p></td>
      </tr>
      <tr>
        <td><code>Exception</code></td>
        <td><p>When the conversion fails.</p></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>dict</code></td>
      <td><p>When the out_json is None returns a dict.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">gdf_to_geojson</span><span class="p">(</span><span class="n">gdf</span><span class="p">,</span> <span class="n">out_geojson</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">epsg</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Converts a GeoDataFame to GeoJSON.</span>

<span class="sd">    Args:</span>
<span class="sd">        gdf (GeoDataFrame): A GeoPandas GeoDataFrame.</span>
<span class="sd">        out_geojson (str, optional): File path to he output GeoJSON. Defaults to None.</span>
<span class="sd">        epsg (str, optional): An EPSG string, e.g., &quot;4326&quot;. Defaults to None.</span>

<span class="sd">    Raises:</span>
<span class="sd">        TypeError: When the output file extension is incorrect.</span>
<span class="sd">        Exception: When the conversion fails.</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict: When the out_json is None returns a dict.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">check_package</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;geopandas&quot;</span><span class="p">,</span> <span class="n">URL</span><span class="o">=</span><span class="s2">&quot;https://geopandas.org&quot;</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">epsg</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">gdf</span> <span class="o">=</span> <span class="n">gdf</span><span class="o">.</span><span class="n">to_crs</span><span class="p">(</span><span class="n">epsg</span><span class="o">=</span><span class="n">epsg</span><span class="p">)</span>
        <span class="n">geojson</span> <span class="o">=</span> <span class="n">gdf</span><span class="o">.</span><span class="n">__geo_interface__</span>

        <span class="k">if</span> <span class="n">out_geojson</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">geojson</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">ext</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">out_geojson</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">ext</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;.json&quot;</span><span class="p">,</span> <span class="s2">&quot;.geojson&quot;</span><span class="p">]:</span>
                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
                    <span class="s2">&quot;The output file extension must be either .json or .geojson&quot;</span>
                <span class="p">)</span>
            <span class="n">out_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">out_geojson</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">out_dir</span><span class="p">):</span>
                <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">out_dir</span><span class="p">)</span>

            <span class="n">gdf</span><span class="o">.</span><span class="n">to_file</span><span class="p">(</span><span class="n">out_geojson</span><span class="p">,</span> <span class="n">driver</span><span class="o">=</span><span class="s2">&quot;GeoJSON&quot;</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.geocode" class="doc doc-heading">
<code class="highlight language-python"><span class="n">geocode</span><span class="p">(</span><span class="n">location</span><span class="p">,</span> <span class="n">max_rows</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">reverse</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>


<a href="#geemap.common.geocode" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Search location by address and lat/lon coordinates.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>location</code></td>
        <td><code>str</code></td>
        <td><p>Place name or address</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>max_rows</code></td>
        <td><code>int</code></td>
        <td><p>Maximum number of records to return. Defaults to 10.</p></td>
        <td><code>10</code></td>
      </tr>
      <tr>
        <td><code>reverse</code></td>
        <td><code>bool</code></td>
        <td><p>Search place based on coordinates. Defaults to False.</p></td>
        <td><code>False</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>list</code></td>
      <td><p>Returns a list of locations.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">geocode</span><span class="p">(</span><span class="n">location</span><span class="p">,</span> <span class="n">max_rows</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">reverse</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Search location by address and lat/lon coordinates.</span>

<span class="sd">    Args:</span>
<span class="sd">        location (str): Place name or address</span>
<span class="sd">        max_rows (int, optional): Maximum number of records to return. Defaults to 10.</span>
<span class="sd">        reverse (bool, optional): Search place based on coordinates. Defaults to False.</span>

<span class="sd">    Returns:</span>
<span class="sd">        list: Returns a list of locations.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">geocoder</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">location</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The location must be a string.&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">reverse</span><span class="p">:</span>

        <span class="n">locations</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">addresses</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="n">g</span> <span class="o">=</span> <span class="n">geocoder</span><span class="o">.</span><span class="n">arcgis</span><span class="p">(</span><span class="n">location</span><span class="p">,</span> <span class="n">maxRows</span><span class="o">=</span><span class="n">max_rows</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">g</span><span class="p">:</span>
            <span class="n">address</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">address</span>
            <span class="k">if</span> <span class="n">address</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">addresses</span><span class="p">:</span>
                <span class="n">addresses</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">address</span><span class="p">)</span>
                <span class="n">locations</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">locations</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">locations</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>

    <span class="k">else</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="s2">&quot;,&quot;</span> <span class="ow">in</span> <span class="n">location</span><span class="p">:</span>
                <span class="n">latlon</span> <span class="o">=</span> <span class="p">[</span><span class="nb">float</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">location</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">)]</span>
            <span class="k">elif</span> <span class="s2">&quot; &quot;</span> <span class="ow">in</span> <span class="n">location</span><span class="p">:</span>
                <span class="n">latlon</span> <span class="o">=</span> <span class="p">[</span><span class="nb">float</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">location</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">)]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span>
                    <span class="s2">&quot;The lat-lon coordinates should be numbers only and separated by comma or space, such as 40.2, -100.3&quot;</span>
                <span class="p">)</span>
                <span class="k">return</span>
            <span class="n">g</span> <span class="o">=</span> <span class="n">geocoder</span><span class="o">.</span><span class="n">arcgis</span><span class="p">(</span><span class="n">latlon</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s2">&quot;reverse&quot;</span><span class="p">)</span>
            <span class="n">locations</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">addresses</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>

            <span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">g</span><span class="p">:</span>
                <span class="n">address</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">address</span>
                <span class="k">if</span> <span class="n">address</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">addresses</span><span class="p">:</span>
                    <span class="n">addresses</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">address</span><span class="p">)</span>
                    <span class="n">locations</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>

            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">locations</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">locations</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">None</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.geojson_to_df" class="doc doc-heading">
<code class="highlight language-python"><span class="n">geojson_to_df</span><span class="p">(</span><span class="n">in_geojson</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">,</span> <span class="n">drop_geometry</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>


<a href="#geemap.common.geojson_to_df" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Converts a GeoJSON object to a pandas DataFrame.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>in_geojson</code></td>
        <td><code>str | dict</code></td>
        <td><p>The input GeoJSON file or dict.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>encoding</code></td>
        <td><code>str</code></td>
        <td><p>The encoding of the GeoJSON object. Defaults to "utf-8".</p></td>
        <td><code>&#39;utf-8&#39;</code></td>
      </tr>
      <tr>
        <td><code>drop_geometry</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to drop the geometry column. Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>FileNotFoundError</code></td>
        <td><p>If the input GeoJSON file could not be found.</p></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>pd.DataFrame</code></td>
      <td><p>A pandas DataFrame containing the GeoJSON object.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">geojson_to_df</span><span class="p">(</span><span class="n">in_geojson</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">,</span> <span class="n">drop_geometry</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Converts a GeoJSON object to a pandas DataFrame.</span>

<span class="sd">    Args:</span>
<span class="sd">        in_geojson (str | dict): The input GeoJSON file or dict.</span>
<span class="sd">        encoding (str, optional): The encoding of the GeoJSON object. Defaults to &quot;utf-8&quot;.</span>
<span class="sd">        drop_geometry (bool, optional): Whether to drop the geometry column. Defaults to True.</span>

<span class="sd">    Raises:</span>
<span class="sd">        FileNotFoundError: If the input GeoJSON file could not be found.</span>

<span class="sd">    Returns:</span>
<span class="sd">        pd.DataFrame: A pandas DataFrame containing the GeoJSON object.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
    <span class="kn">from</span> <span class="nn">urllib.request</span> <span class="kn">import</span> <span class="n">urlopen</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">in_geojson</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>

        <span class="k">if</span> <span class="n">in_geojson</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;http&quot;</span><span class="p">):</span>
            <span class="n">in_geojson</span> <span class="o">=</span> <span class="n">github_raw_url</span><span class="p">(</span><span class="n">in_geojson</span><span class="p">)</span>
            <span class="k">with</span> <span class="n">urlopen</span><span class="p">(</span><span class="n">in_geojson</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">in_geojson</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">in_geojson</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">in_geojson</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span><span class="s2">&quot;The provided GeoJSON file could not be found.&quot;</span><span class="p">)</span>

            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">in_geojson</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="n">encoding</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>

    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">in_geojson</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">in_geojson</span>

    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">json_normalize</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;features&quot;</span><span class="p">])</span>
    <span class="n">df</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="n">col</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;properties.&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">drop_geometry</span><span class="p">:</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">regex</span><span class="o">=</span><span class="s2">&quot;geometry&quot;</span><span class="p">)))]</span>
    <span class="k">return</span> <span class="n">df</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.geojson_to_ee" class="doc doc-heading">
<code class="highlight language-python"><span class="n">geojson_to_ee</span><span class="p">(</span><span class="n">geo_json</span><span class="p">,</span> <span class="n">geodesic</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span></code>


<a href="#geemap.common.geojson_to_ee" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Converts a geojson to ee.Geometry()</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>geo_json</code></td>
        <td><code>dict</code></td>
        <td><p>A geojson geometry dictionary or file path.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>geodesic</code></td>
        <td><code>bool</code></td>
        <td><p>Whether line segments should be interpreted as spherical geodesics. If false, indicates that line segments should be interpreted as planar lines in the specified CRS. If absent, defaults to true if the CRS is geographic (including the default EPSG:4326), or to false if the CRS is projected. Defaults to False.</p></td>
        <td><code>False</code></td>
      </tr>
      <tr>
        <td><code>encoding</code></td>
        <td><code>str</code></td>
        <td><p>The encoding of characters. Defaults to "utf-8".</p></td>
        <td><code>&#39;utf-8&#39;</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>ee_object</code></td>
      <td><p>An ee.Geometry object</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">geojson_to_ee</span><span class="p">(</span><span class="n">geo_json</span><span class="p">,</span> <span class="n">geodesic</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Converts a geojson to ee.Geometry()</span>

<span class="sd">    Args:</span>
<span class="sd">        geo_json (dict): A geojson geometry dictionary or file path.</span>
<span class="sd">        geodesic (bool, optional): Whether line segments should be interpreted as spherical geodesics. If false, indicates that line segments should be interpreted as planar lines in the specified CRS. If absent, defaults to true if the CRS is geographic (including the default EPSG:4326), or to false if the CRS is projected. Defaults to False.</span>
<span class="sd">        encoding (str, optional): The encoding of characters. Defaults to &quot;utf-8&quot;.</span>

<span class="sd">    Returns:</span>
<span class="sd">        ee_object: An ee.Geometry object</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">try</span><span class="p">:</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">geo_json</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">geo_json</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;http&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">geo_json</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.geojson&quot;</span><span class="p">):</span>
                <span class="n">geo_json</span> <span class="o">=</span> <span class="n">github_raw_url</span><span class="p">(</span><span class="n">geo_json</span><span class="p">)</span>
                <span class="n">out_geojson</span> <span class="o">=</span> <span class="n">temp_file_path</span><span class="p">(</span><span class="n">extension</span><span class="o">=</span><span class="s2">&quot;.geojson&quot;</span><span class="p">)</span>
                <span class="n">download_file</span><span class="p">(</span><span class="n">geo_json</span><span class="p">,</span> <span class="n">out_geojson</span><span class="p">)</span>
                <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">out_geojson</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="n">encoding</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                    <span class="n">geo_json</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
                <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">out_geojson</span><span class="p">)</span>

            <span class="k">elif</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">geo_json</span><span class="p">):</span>
                <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">geo_json</span><span class="p">),</span> <span class="n">encoding</span><span class="o">=</span><span class="n">encoding</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                    <span class="n">geo_json</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>

        <span class="c1"># geo_json[&quot;geodesic&quot;] = geodesic</span>
        <span class="k">if</span> <span class="n">geo_json</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;FeatureCollection&quot;</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">feature</span> <span class="ow">in</span> <span class="n">geo_json</span><span class="p">[</span><span class="s2">&quot;features&quot;</span><span class="p">]:</span>
                <span class="k">if</span> <span class="n">feature</span><span class="p">[</span><span class="s2">&quot;geometry&quot;</span><span class="p">][</span><span class="s2">&quot;type&quot;</span><span class="p">]</span> <span class="o">!=</span> <span class="s2">&quot;Point&quot;</span><span class="p">:</span>
                    <span class="n">feature</span><span class="p">[</span><span class="s2">&quot;geometry&quot;</span><span class="p">][</span><span class="s2">&quot;geodesic&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">geodesic</span>
            <span class="n">features</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">(</span><span class="n">geo_json</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">features</span>
        <span class="k">elif</span> <span class="n">geo_json</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;Feature&quot;</span><span class="p">:</span>
            <span class="n">geom</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">if</span> <span class="s2">&quot;style&quot;</span> <span class="ow">in</span> <span class="n">geo_json</span><span class="p">[</span><span class="s2">&quot;properties&quot;</span><span class="p">]:</span>
                <span class="n">keys</span> <span class="o">=</span> <span class="n">geo_json</span><span class="p">[</span><span class="s2">&quot;properties&quot;</span><span class="p">][</span><span class="s2">&quot;style&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
                <span class="k">if</span> <span class="s2">&quot;radius&quot;</span> <span class="ow">in</span> <span class="n">keys</span><span class="p">:</span>  <span class="c1"># Checks whether it is a circle</span>
                    <span class="n">geom</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Geometry</span><span class="p">(</span><span class="n">geo_json</span><span class="p">[</span><span class="s2">&quot;geometry&quot;</span><span class="p">])</span>
                    <span class="n">radius</span> <span class="o">=</span> <span class="n">geo_json</span><span class="p">[</span><span class="s2">&quot;properties&quot;</span><span class="p">][</span><span class="s2">&quot;style&quot;</span><span class="p">][</span><span class="s2">&quot;radius&quot;</span><span class="p">]</span>
                    <span class="n">geom</span> <span class="o">=</span> <span class="n">geom</span><span class="o">.</span><span class="n">buffer</span><span class="p">(</span><span class="n">radius</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">geom</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Geometry</span><span class="p">(</span><span class="n">geo_json</span><span class="p">[</span><span class="s2">&quot;geometry&quot;</span><span class="p">])</span>
            <span class="k">elif</span> <span class="p">(</span>
                <span class="n">geo_json</span><span class="p">[</span><span class="s2">&quot;geometry&quot;</span><span class="p">][</span><span class="s2">&quot;type&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;Point&quot;</span>
            <span class="p">):</span>  <span class="c1"># Checks whether it is a point</span>
                <span class="n">coordinates</span> <span class="o">=</span> <span class="n">geo_json</span><span class="p">[</span><span class="s2">&quot;geometry&quot;</span><span class="p">][</span><span class="s2">&quot;coordinates&quot;</span><span class="p">]</span>
                <span class="n">longitude</span> <span class="o">=</span> <span class="n">coordinates</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">latitude</span> <span class="o">=</span> <span class="n">coordinates</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                <span class="n">geom</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Geometry</span><span class="o">.</span><span class="n">Point</span><span class="p">(</span><span class="n">longitude</span><span class="p">,</span> <span class="n">latitude</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">geom</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Geometry</span><span class="p">(</span><span class="n">geo_json</span><span class="p">[</span><span class="s2">&quot;geometry&quot;</span><span class="p">],</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">geodesic</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">geom</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Could not convert the geojson to ee.Geometry()&quot;</span><span class="p">)</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Could not convert the geojson to ee.Geometry()&quot;</span><span class="p">)</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.geometry_type" class="doc doc-heading">
<code class="highlight language-python"><span class="n">geometry_type</span><span class="p">(</span><span class="n">ee_object</span><span class="p">)</span></code>


<a href="#geemap.common.geometry_type" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Get geometry type of an Earth Engine object.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>ee_object</code></td>
        <td><code>object</code></td>
        <td><p>An Earth Engine object.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>str</code></td>
      <td><p>Returns geometry type. One of Point, MultiPoint, LineString, LinearRing, MultiLineString, BBox, Rectangle, Polygon, MultiPolygon.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">geometry_type</span><span class="p">(</span><span class="n">ee_object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get geometry type of an Earth Engine object.</span>

<span class="sd">    Args:</span>
<span class="sd">        ee_object (object): An Earth Engine object.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: Returns geometry type. One of Point, MultiPoint, LineString, LinearRing, MultiLineString, BBox, Rectangle, Polygon, MultiPolygon.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Geometry</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">type</span><span class="p">()</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Feature</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">geometry</span><span class="p">()</span><span class="o">.</span><span class="n">type</span><span class="p">()</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">ee</span><span class="o">.</span><span class="n">Feature</span><span class="p">(</span><span class="n">ee_object</span><span class="o">.</span><span class="n">first</span><span class="p">())</span><span class="o">.</span><span class="n">geometry</span><span class="p">()</span><span class="o">.</span><span class="n">type</span><span class="p">()</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
            <span class="s2">&quot;The ee_object must be one of ee.Geometry, ee.Feature, ee.FeatureCollection.&quot;</span>
        <span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.geopandas_to_ee" class="doc doc-heading">
<code class="highlight language-python"><span class="n">geopandas_to_ee</span><span class="p">(</span><span class="n">gdf</span><span class="p">,</span> <span class="n">geodesic</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">date</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">date_format</span><span class="o">=</span><span class="s1">&#39;YYYY-MM-dd&#39;</span><span class="p">)</span></code>


<a href="#geemap.common.geopandas_to_ee" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Converts a GeoPandas GeoDataFrame to ee.FeatureCollection.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>gdf</code></td>
        <td><code>geopandas.GeoDataFrame</code></td>
        <td><p>The input geopandas.GeoDataFrame to be converted ee.FeatureCollection.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>geodesic</code></td>
        <td><code>bool</code></td>
        <td><p>Whether line segments should be interpreted as spherical geodesics. If false, indicates that line segments should be interpreted as planar lines in the specified CRS. If absent, defaults to true if the CRS is geographic (including the default EPSG:4326), or to false if the CRS is projected. Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
      <tr>
        <td><code>date</code></td>
        <td><code>str</code></td>
        <td><p>Column name for the date column. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>date_format</code></td>
        <td><code>str</code></td>
        <td><p>Date format. A pattern, as described at http://joda-time.sourceforge.net/apidocs/org/joda/time/format/DateTimeFormat.html. Defaults to 'YYYY-MM-dd'.</p></td>
        <td><code>&#39;YYYY-MM-dd&#39;</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>TypeError</code></td>
        <td><p>The input data type must be geopandas.GeoDataFrame.</p></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>ee.FeatureCollection</code></td>
      <td><p>The output ee.FeatureCollection converted from the input geopandas.GeoDataFrame.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">gdf_to_ee</span><span class="p">(</span><span class="n">gdf</span><span class="p">,</span> <span class="n">geodesic</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">date</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">date_format</span><span class="o">=</span><span class="s2">&quot;YYYY-MM-dd&quot;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Converts a GeoPandas GeoDataFrame to ee.FeatureCollection.</span>

<span class="sd">    Args:</span>
<span class="sd">        gdf (geopandas.GeoDataFrame): The input geopandas.GeoDataFrame to be converted ee.FeatureCollection.</span>
<span class="sd">        geodesic (bool, optional): Whether line segments should be interpreted as spherical geodesics. If false, indicates that line segments should be interpreted as planar lines in the specified CRS. If absent, defaults to true if the CRS is geographic (including the default EPSG:4326), or to false if the CRS is projected. Defaults to True.</span>
<span class="sd">        date (str, optional): Column name for the date column. Defaults to None.</span>
<span class="sd">        date_format (str, optional): Date format. A pattern, as described at http://joda-time.sourceforge.net/apidocs/org/joda/time/format/DateTimeFormat.html. Defaults to &#39;YYYY-MM-dd&#39;.</span>

<span class="sd">    Raises:</span>
<span class="sd">        TypeError: The input data type must be geopandas.GeoDataFrame.</span>

<span class="sd">    Returns:</span>
<span class="sd">        ee.FeatureCollection: The output ee.FeatureCollection converted from the input geopandas.GeoDataFrame.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">check_package</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;geopandas&quot;</span><span class="p">,</span> <span class="n">URL</span><span class="o">=</span><span class="s2">&quot;https://geopandas.org&quot;</span><span class="p">)</span>

    <span class="kn">import</span> <span class="nn">geopandas</span> <span class="k">as</span> <span class="nn">gpd</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">gdf</span><span class="p">,</span> <span class="n">gpd</span><span class="o">.</span><span class="n">GeoDataFrame</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;The input data type must be geopandas.GeoDataFrame.&quot;</span><span class="p">)</span>

    <span class="n">out_json</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">(),</span> <span class="n">random_string</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;.geojson&quot;</span><span class="p">)</span>
    <span class="n">gdf</span> <span class="o">=</span> <span class="n">gdf</span><span class="o">.</span><span class="n">to_crs</span><span class="p">(</span><span class="mi">4326</span><span class="p">)</span>
    <span class="n">gdf</span><span class="o">.</span><span class="n">to_file</span><span class="p">(</span><span class="n">out_json</span><span class="p">,</span> <span class="n">driver</span><span class="o">=</span><span class="s2">&quot;GeoJSON&quot;</span><span class="p">)</span>

    <span class="n">fc</span> <span class="o">=</span> <span class="n">geojson_to_ee</span><span class="p">(</span><span class="n">out_json</span><span class="p">,</span> <span class="n">geodesic</span><span class="o">=</span><span class="n">geodesic</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">date</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">fc</span> <span class="o">=</span> <span class="n">fc</span><span class="o">.</span><span class="n">map</span><span class="p">(</span>
                <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">set</span><span class="p">(</span>
                    <span class="s2">&quot;system:time_start&quot;</span><span class="p">,</span>
                    <span class="n">ee</span><span class="o">.</span><span class="n">Date</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">date_format</span><span class="p">,</span> <span class="n">x</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">date</span><span class="p">))</span><span class="o">.</span><span class="n">millis</span><span class="p">(),</span>
                <span class="p">)</span>
            <span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

    <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">out_json</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">fc</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.get_all_NAIP" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_all_NAIP</span><span class="p">(</span><span class="n">start_year</span><span class="o">=</span><span class="mi">2009</span><span class="p">,</span> <span class="n">end_year</span><span class="o">=</span><span class="mi">2019</span><span class="p">)</span></code>


<a href="#geemap.common.get_all_NAIP" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Creates annual NAIP imagery mosaic.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>start_year</code></td>
        <td><code>int</code></td>
        <td><p>The starting year. Defaults to 2009.</p></td>
        <td><code>2009</code></td>
      </tr>
      <tr>
        <td><code>end_year</code></td>
        <td><code>int</code></td>
        <td><p>The ending year. Defaults to 2019.</p></td>
        <td><code>2019</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>object</code></td>
      <td><p>ee.ImageCollection</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_all_NAIP</span><span class="p">(</span><span class="n">start_year</span><span class="o">=</span><span class="mi">2009</span><span class="p">,</span> <span class="n">end_year</span><span class="o">=</span><span class="mi">2019</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Creates annual NAIP imagery mosaic.</span>

<span class="sd">    Args:</span>
<span class="sd">        start_year (int, optional): The starting year. Defaults to 2009.</span>
<span class="sd">        end_year (int, optional): The ending year. Defaults to 2019.</span>

<span class="sd">    Returns:</span>
<span class="sd">        object: ee.ImageCollection</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>

        <span class="k">def</span> <span class="nf">get_annual_NAIP</span><span class="p">(</span><span class="n">year</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">collection</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">(</span><span class="s2">&quot;USDA/NAIP/DOQQ&quot;</span><span class="p">)</span>
                <span class="n">start_date</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Date</span><span class="o">.</span><span class="n">fromYMD</span><span class="p">(</span><span class="n">year</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
                <span class="n">end_date</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Date</span><span class="o">.</span><span class="n">fromYMD</span><span class="p">(</span><span class="n">year</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">31</span><span class="p">)</span>
                <span class="n">naip</span> <span class="o">=</span> <span class="n">collection</span><span class="o">.</span><span class="n">filterDate</span><span class="p">(</span><span class="n">start_date</span><span class="p">,</span> <span class="n">end_date</span><span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span>
                    <span class="n">ee</span><span class="o">.</span><span class="n">Filter</span><span class="o">.</span><span class="n">listContains</span><span class="p">(</span><span class="s2">&quot;system:band_names&quot;</span><span class="p">,</span> <span class="s2">&quot;N&quot;</span><span class="p">)</span>
                <span class="p">)</span>
                <span class="k">return</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">(</span><span class="n">naip</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

        <span class="n">years</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">List</span><span class="o">.</span><span class="n">sequence</span><span class="p">(</span><span class="n">start_year</span><span class="p">,</span> <span class="n">end_year</span><span class="p">)</span>
        <span class="n">collection</span> <span class="o">=</span> <span class="n">years</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">get_annual_NAIP</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">collection</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.get_annual_NAIP" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_annual_NAIP</span><span class="p">(</span><span class="n">year</span><span class="p">,</span> <span class="n">RGBN</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>


<a href="#geemap.common.get_annual_NAIP" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Filters NAIP ImageCollection by year.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>year</code></td>
        <td><code>int</code></td>
        <td><p>The year to filter the NAIP ImageCollection.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>RGBN</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to retrieve 4-band NAIP imagery only. Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>object</code></td>
      <td><p>ee.ImageCollection</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_annual_NAIP</span><span class="p">(</span><span class="n">year</span><span class="p">,</span> <span class="n">RGBN</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Filters NAIP ImageCollection by year.</span>

<span class="sd">    Args:</span>
<span class="sd">        year (int): The year to filter the NAIP ImageCollection.</span>
<span class="sd">        RGBN (bool, optional): Whether to retrieve 4-band NAIP imagery only. Defaults to True.</span>

<span class="sd">    Returns:</span>
<span class="sd">        object: ee.ImageCollection</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">collection</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">(</span><span class="s2">&quot;USDA/NAIP/DOQQ&quot;</span><span class="p">)</span>
        <span class="n">start_date</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">year</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;-01-01&quot;</span>
        <span class="n">end_date</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">year</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;-12-31&quot;</span>
        <span class="n">naip</span> <span class="o">=</span> <span class="n">collection</span><span class="o">.</span><span class="n">filterDate</span><span class="p">(</span><span class="n">start_date</span><span class="p">,</span> <span class="n">end_date</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">RGBN</span><span class="p">:</span>
            <span class="n">naip</span> <span class="o">=</span> <span class="n">naip</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">Filter</span><span class="o">.</span><span class="n">listContains</span><span class="p">(</span><span class="s2">&quot;system:band_names&quot;</span><span class="p">,</span> <span class="s2">&quot;N&quot;</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">naip</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.get_api_key" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_api_key</span><span class="p">(</span><span class="n">token_name</span><span class="p">,</span> <span class="n">m</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


<a href="#geemap.common.get_api_key" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Retrieves an API key based on a system environmen variable.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>token_name</code></td>
        <td><code>str</code></td>
        <td><p>The token name.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>m</code></td>
        <td><code>ipyleaflet.Map | folium.Map</code></td>
        <td><p>A Map instance. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>str</code></td>
      <td><p>The API key.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_api_key</span><span class="p">(</span><span class="n">token_name</span><span class="p">,</span> <span class="n">m</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Retrieves an API key based on a system environmen variable.</span>

<span class="sd">    Args:</span>
<span class="sd">        token_name (str): The token name.</span>
<span class="sd">        m (ipyleaflet.Map | folium.Map, optional): A Map instance. Defaults to None.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: The API key.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">api_key</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">token_name</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">m</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">token_name</span> <span class="ow">in</span> <span class="n">m</span><span class="o">.</span><span class="n">api_keys</span><span class="p">:</span>
        <span class="n">api_key</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">api_keys</span><span class="p">[</span><span class="n">token_name</span><span class="p">]</span>

    <span class="k">return</span> <span class="n">api_key</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.get_bounds" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_bounds</span><span class="p">(</span><span class="n">geometry</span><span class="p">,</span> <span class="n">north_up</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">transform</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


<a href="#geemap.common.get_bounds" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Bounding box of a GeoJSON geometry, GeometryCollection, or FeatureCollection.
left, bottom, right, top
<em>not</em> xmin, ymin, xmax, ymax
If not north_up, y will be switched to guarantee the above.
Source code adapted from https://github.com/mapbox/rasterio/blob/master/rasterio/features.py#L361</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>geometry</code></td>
        <td><code>dict</code></td>
        <td><p>A GeoJSON dict.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>north_up</code></td>
        <td><code>bool</code></td>
        <td><p>. Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
      <tr>
        <td><code>transform</code></td>
        <td><code>[type]</code></td>
        <td><p>. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>list</code></td>
      <td><p>A list of coordinates representing [left, bottom, right, top]</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_bounds</span><span class="p">(</span><span class="n">geometry</span><span class="p">,</span> <span class="n">north_up</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">transform</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Bounding box of a GeoJSON geometry, GeometryCollection, or FeatureCollection.</span>
<span class="sd">    left, bottom, right, top</span>
<span class="sd">    *not* xmin, ymin, xmax, ymax</span>
<span class="sd">    If not north_up, y will be switched to guarantee the above.</span>
<span class="sd">    Source code adapted from https://github.com/mapbox/rasterio/blob/master/rasterio/features.py#L361</span>

<span class="sd">    Args:</span>
<span class="sd">        geometry (dict): A GeoJSON dict.</span>
<span class="sd">        north_up (bool, optional): . Defaults to True.</span>
<span class="sd">        transform ([type], optional): . Defaults to None.</span>

<span class="sd">    Returns:</span>
<span class="sd">        list: A list of coordinates representing [left, bottom, right, top]</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="s2">&quot;bbox&quot;</span> <span class="ow">in</span> <span class="n">geometry</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">geometry</span><span class="p">[</span><span class="s2">&quot;bbox&quot;</span><span class="p">])</span>

    <span class="n">geometry</span> <span class="o">=</span> <span class="n">geometry</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;geometry&quot;</span><span class="p">)</span> <span class="ow">or</span> <span class="n">geometry</span>

    <span class="c1"># geometry must be a geometry, GeometryCollection, or FeatureCollection</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span>
        <span class="s2">&quot;coordinates&quot;</span> <span class="ow">in</span> <span class="n">geometry</span> <span class="ow">or</span> <span class="s2">&quot;geometries&quot;</span> <span class="ow">in</span> <span class="n">geometry</span> <span class="ow">or</span> <span class="s2">&quot;features&quot;</span> <span class="ow">in</span> <span class="n">geometry</span>
    <span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="s2">&quot;geometry must be a GeoJSON-like geometry, GeometryCollection, &quot;</span>
            <span class="s2">&quot;or FeatureCollection&quot;</span>
        <span class="p">)</span>

    <span class="k">if</span> <span class="s2">&quot;features&quot;</span> <span class="ow">in</span> <span class="n">geometry</span><span class="p">:</span>
        <span class="c1"># Input is a FeatureCollection</span>
        <span class="n">xmins</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">ymins</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">xmaxs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">ymaxs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">feature</span> <span class="ow">in</span> <span class="n">geometry</span><span class="p">[</span><span class="s2">&quot;features&quot;</span><span class="p">]:</span>
            <span class="n">xmin</span><span class="p">,</span> <span class="n">ymin</span><span class="p">,</span> <span class="n">xmax</span><span class="p">,</span> <span class="n">ymax</span> <span class="o">=</span> <span class="n">get_bounds</span><span class="p">(</span><span class="n">feature</span><span class="p">[</span><span class="s2">&quot;geometry&quot;</span><span class="p">])</span>
            <span class="n">xmins</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">xmin</span><span class="p">)</span>
            <span class="n">ymins</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ymin</span><span class="p">)</span>
            <span class="n">xmaxs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">xmax</span><span class="p">)</span>
            <span class="n">ymaxs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ymax</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">north_up</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">min</span><span class="p">(</span><span class="n">xmins</span><span class="p">),</span> <span class="nb">min</span><span class="p">(</span><span class="n">ymins</span><span class="p">),</span> <span class="nb">max</span><span class="p">(</span><span class="n">xmaxs</span><span class="p">),</span> <span class="nb">max</span><span class="p">(</span><span class="n">ymaxs</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">min</span><span class="p">(</span><span class="n">xmins</span><span class="p">),</span> <span class="nb">max</span><span class="p">(</span><span class="n">ymaxs</span><span class="p">),</span> <span class="nb">max</span><span class="p">(</span><span class="n">xmaxs</span><span class="p">),</span> <span class="nb">min</span><span class="p">(</span><span class="n">ymins</span><span class="p">)</span>

    <span class="k">elif</span> <span class="s2">&quot;geometries&quot;</span> <span class="ow">in</span> <span class="n">geometry</span><span class="p">:</span>
        <span class="c1"># Input is a geometry collection</span>
        <span class="n">xmins</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">ymins</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">xmaxs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">ymaxs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">geometry</span> <span class="ow">in</span> <span class="n">geometry</span><span class="p">[</span><span class="s2">&quot;geometries&quot;</span><span class="p">]:</span>
            <span class="n">xmin</span><span class="p">,</span> <span class="n">ymin</span><span class="p">,</span> <span class="n">xmax</span><span class="p">,</span> <span class="n">ymax</span> <span class="o">=</span> <span class="n">get_bounds</span><span class="p">(</span><span class="n">geometry</span><span class="p">)</span>
            <span class="n">xmins</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">xmin</span><span class="p">)</span>
            <span class="n">ymins</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ymin</span><span class="p">)</span>
            <span class="n">xmaxs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">xmax</span><span class="p">)</span>
            <span class="n">ymaxs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ymax</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">north_up</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">min</span><span class="p">(</span><span class="n">xmins</span><span class="p">),</span> <span class="nb">min</span><span class="p">(</span><span class="n">ymins</span><span class="p">),</span> <span class="nb">max</span><span class="p">(</span><span class="n">xmaxs</span><span class="p">),</span> <span class="nb">max</span><span class="p">(</span><span class="n">ymaxs</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">min</span><span class="p">(</span><span class="n">xmins</span><span class="p">),</span> <span class="nb">max</span><span class="p">(</span><span class="n">ymaxs</span><span class="p">),</span> <span class="nb">max</span><span class="p">(</span><span class="n">xmaxs</span><span class="p">),</span> <span class="nb">min</span><span class="p">(</span><span class="n">ymins</span><span class="p">)</span>

    <span class="k">elif</span> <span class="s2">&quot;coordinates&quot;</span> <span class="ow">in</span> <span class="n">geometry</span><span class="p">:</span>
        <span class="c1"># Input is a singular geometry object</span>
        <span class="k">if</span> <span class="n">transform</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">xyz</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">explode</span><span class="p">(</span><span class="n">geometry</span><span class="p">[</span><span class="s2">&quot;coordinates&quot;</span><span class="p">]))</span>
            <span class="n">xyz_px</span> <span class="o">=</span> <span class="p">[</span><span class="n">transform</span> <span class="o">*</span> <span class="n">point</span> <span class="k">for</span> <span class="n">point</span> <span class="ow">in</span> <span class="n">xyz</span><span class="p">]</span>
            <span class="n">xyz</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="n">xyz_px</span><span class="p">))</span>
            <span class="k">return</span> <span class="nb">min</span><span class="p">(</span><span class="n">xyz</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="nb">max</span><span class="p">(</span><span class="n">xyz</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span> <span class="nb">max</span><span class="p">(</span><span class="n">xyz</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="nb">min</span><span class="p">(</span><span class="n">xyz</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">xyz</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="nb">list</span><span class="p">(</span><span class="n">explode</span><span class="p">(</span><span class="n">geometry</span><span class="p">[</span><span class="s2">&quot;coordinates&quot;</span><span class="p">]))))</span>
            <span class="k">if</span> <span class="n">north_up</span><span class="p">:</span>
                <span class="k">return</span> <span class="nb">min</span><span class="p">(</span><span class="n">xyz</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="nb">min</span><span class="p">(</span><span class="n">xyz</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span> <span class="nb">max</span><span class="p">(</span><span class="n">xyz</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="nb">max</span><span class="p">(</span><span class="n">xyz</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="nb">min</span><span class="p">(</span><span class="n">xyz</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="nb">max</span><span class="p">(</span><span class="n">xyz</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span> <span class="nb">max</span><span class="p">(</span><span class="n">xyz</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="nb">min</span><span class="p">(</span><span class="n">xyz</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>

    <span class="c1"># all valid inputs returned above, so whatever falls through is an error</span>
    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
        <span class="s2">&quot;geometry must be a GeoJSON-like geometry, GeometryCollection, &quot;</span>
        <span class="s2">&quot;or FeatureCollection&quot;</span>
    <span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.get_census_dict" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_census_dict</span><span class="p">(</span><span class="n">reset</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>


<a href="#geemap.common.get_census_dict" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Returns a dictionary of Census data.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>reset</code></td>
        <td><code>bool</code></td>
        <td><p>Reset the dictionary. Defaults to False.</p></td>
        <td><code>False</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>dict</code></td>
      <td><p>A dictionary of Census data.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_census_dict</span><span class="p">(</span><span class="n">reset</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Returns a dictionary of Census data.</span>

<span class="sd">    Args:</span>
<span class="sd">        reset (bool, optional): Reset the dictionary. Defaults to False.</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict: A dictionary of Census data.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">pkg_resources</span>

    <span class="n">pkg_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">pkg_resources</span><span class="o">.</span><span class="n">resource_filename</span><span class="p">(</span><span class="s2">&quot;geemap&quot;</span><span class="p">,</span> <span class="s2">&quot;geemap.py&quot;</span><span class="p">))</span>
    <span class="n">census_data</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">pkg_dir</span><span class="p">,</span> <span class="s2">&quot;data/census_data.json&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">reset</span><span class="p">:</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="kn">from</span> <span class="nn">owslib.wms</span> <span class="kn">import</span> <span class="n">WebMapService</span>
        <span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ImportError</span><span class="p">(</span>
                <span class="s1">&#39;The owslib package must be installed to use this function. Install with &quot;pip install owslib&quot;&#39;</span>
            <span class="p">)</span>

        <span class="n">census_dict</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">names</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">&quot;Current&quot;</span><span class="p">,</span>
            <span class="s2">&quot;ACS 2021&quot;</span><span class="p">,</span>
            <span class="s2">&quot;ACS 2019&quot;</span><span class="p">,</span>
            <span class="s2">&quot;ACS 2018&quot;</span><span class="p">,</span>
            <span class="s2">&quot;ACS 2017&quot;</span><span class="p">,</span>
            <span class="s2">&quot;ACS 2016&quot;</span><span class="p">,</span>
            <span class="s2">&quot;ACS 2015&quot;</span><span class="p">,</span>
            <span class="s2">&quot;ACS 2014&quot;</span><span class="p">,</span>
            <span class="s2">&quot;ACS 2013&quot;</span><span class="p">,</span>
            <span class="s2">&quot;ACS 2012&quot;</span><span class="p">,</span>
            <span class="s2">&quot;ECON 2012&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Census 2020&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Census 2010&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Physical Features&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Decennial Census 2020&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Decennial Census 2010&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Decennial Census 2000&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Decennial Physical Features&quot;</span><span class="p">,</span>
        <span class="p">]</span>

        <span class="n">links</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Retrieving data. Please wait ...&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">names</span><span class="p">:</span>
            <span class="k">if</span> <span class="s2">&quot;Decennial&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">name</span><span class="p">:</span>
                <span class="n">links</span><span class="p">[</span>
                    <span class="n">name</span>
                <span class="p">]</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;https://tigerweb.geo.census.gov/arcgis/services/TIGERweb/tigerWMS_</span><span class="si">{</span><span class="n">name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">/MapServer/WMSServer&quot;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">links</span><span class="p">[</span>
                    <span class="n">name</span>
                <span class="p">]</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;https://tigerweb.geo.census.gov/arcgis/services/Census2020/tigerWMS_</span><span class="si">{</span><span class="n">name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;Decennial&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">/MapServer/WMSServer&quot;</span>

            <span class="n">wms</span> <span class="o">=</span> <span class="n">WebMapService</span><span class="p">(</span><span class="n">links</span><span class="p">[</span><span class="n">name</span><span class="p">],</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">300</span><span class="p">)</span>
            <span class="n">layers</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">wms</span><span class="o">.</span><span class="n">contents</span><span class="p">)</span>
            <span class="n">layers</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
            <span class="n">census_dict</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="n">links</span><span class="p">[</span><span class="n">name</span><span class="p">],</span>
                <span class="s2">&quot;layers&quot;</span><span class="p">:</span> <span class="n">layers</span><span class="p">,</span>
                <span class="c1"># &quot;title&quot;: wms.identification.title,</span>
                <span class="c1"># &quot;abstract&quot;: wms.identification.abstract,</span>
            <span class="p">}</span>

        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">census_data</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">census_dict</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>

    <span class="k">else</span><span class="p">:</span>

        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">census_data</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">census_dict</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">census_dict</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.get_center" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_center</span><span class="p">(</span><span class="n">geometry</span><span class="p">,</span> <span class="n">north_up</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">transform</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


<a href="#geemap.common.get_center" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Get the centroid of a GeoJSON.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>geometry</code></td>
        <td><code>dict</code></td>
        <td><p>A GeoJSON dict.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>north_up</code></td>
        <td><code>bool</code></td>
        <td><p>. Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
      <tr>
        <td><code>transform</code></td>
        <td><code>[type]</code></td>
        <td><p>. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>list</code></td>
      <td><p>[lon, lat]</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_center</span><span class="p">(</span><span class="n">geometry</span><span class="p">,</span> <span class="n">north_up</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">transform</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get the centroid of a GeoJSON.</span>

<span class="sd">    Args:</span>
<span class="sd">        geometry (dict): A GeoJSON dict.</span>
<span class="sd">        north_up (bool, optional): . Defaults to True.</span>
<span class="sd">        transform ([type], optional): . Defaults to None.</span>

<span class="sd">    Returns:</span>
<span class="sd">        list: [lon, lat]</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">bounds</span> <span class="o">=</span> <span class="n">get_bounds</span><span class="p">(</span><span class="n">geometry</span><span class="p">,</span> <span class="n">north_up</span><span class="p">,</span> <span class="n">transform</span><span class="p">)</span>
    <span class="n">center</span> <span class="o">=</span> <span class="p">((</span><span class="n">bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="p">(</span><span class="n">bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>  <span class="c1"># (lat, lon)</span>
    <span class="k">return</span> <span class="n">center</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.get_current_latlon" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_current_latlon</span><span class="p">()</span></code>


<a href="#geemap.common.get_current_latlon" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Get the current latitude and longitude based on the user's location.</p>

        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_current_latlon</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Get the current latitude and longitude based on the user&#39;s location.&quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">geocoder</span>

    <span class="n">g</span> <span class="o">=</span> <span class="n">geocoder</span><span class="o">.</span><span class="n">ip</span><span class="p">(</span><span class="s2">&quot;me&quot;</span><span class="p">)</span>
    <span class="n">props</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">geojson</span><span class="p">[</span><span class="s2">&quot;features&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;properties&quot;</span><span class="p">]</span>
    <span class="n">lat</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s2">&quot;lat&quot;</span><span class="p">]</span>
    <span class="n">lon</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s2">&quot;lng&quot;</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">lat</span><span class="p">,</span> <span class="n">lon</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.get_direct_url" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_direct_url</span><span class="p">(</span><span class="n">url</span><span class="p">)</span></code>


<a href="#geemap.common.get_direct_url" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Get the direct URL for a given URL.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>url</code></td>
        <td><code>str</code></td>
        <td><p>The URL to get the direct URL for.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>str</code></td>
      <td><p>The direct URL.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_direct_url</span><span class="p">(</span><span class="n">url</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get the direct URL for a given URL.</span>

<span class="sd">    Args:</span>
<span class="sd">        url (str): The URL to get the direct URL for.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: The direct URL.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;url must be a string.&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">url</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;http&quot;</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;url must start with http.&quot;</span><span class="p">)</span>

    <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">allow_redirects</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">r</span><span class="o">.</span><span class="n">url</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.get_image_collection_thumbnails" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_image_collection_thumbnails</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">out_dir</span><span class="p">,</span> <span class="n">vis_params</span><span class="p">,</span> <span class="n">dimensions</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">region</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s1">&#39;jpg&#39;</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="n">proxies</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


<a href="#geemap.common.get_image_collection_thumbnails" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Download thumbnails for all images in an ImageCollection.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>ee_object</code></td>
        <td><code>object</code></td>
        <td><p>The ee.ImageCollection instance.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>out_dir</code></td>
        <td><code>[str</code></td>
        <td><p>The output directory to store thumbnails.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>vis_params</code></td>
        <td><code>dict</code></td>
        <td><p>The visualization parameters.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>dimensions</code></td>
        <td><code>int</code></td>
        <td><p>(a number or pair of numbers in format WIDTHxHEIGHT) Maximum dimensions of the thumbnail to render, in pixels. If only one number is passed, it is used as the maximum, and the other dimension is computed by proportional scaling. Defaults to 500.</p></td>
        <td><code>500</code></td>
      </tr>
      <tr>
        <td><code>region</code></td>
        <td><code>object</code></td>
        <td><p>Geospatial region of the image to render, it may be an ee.Geometry, GeoJSON, or an array of lat/lon points (E,S,W,N). If not set the default is the bounds image. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>format</code></td>
        <td><code>str</code></td>
        <td><p>Either 'png' or 'jpg'. Default to 'jpg'.</p></td>
        <td><code>&#39;jpg&#39;</code></td>
      </tr>
      <tr>
        <td><code>names</code></td>
        <td><code>list</code></td>
        <td><p>The list of output file names. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>verbose</code></td>
        <td><code>bool</code></td>
        <td><p>Whether or not to print hints. Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
      <tr>
        <td><code>timeout</code></td>
        <td><code>int</code></td>
        <td><p>The number of seconds after which the request will be terminated. Defaults to 300.</p></td>
        <td><code>300</code></td>
      </tr>
      <tr>
        <td><code>proxies</code></td>
        <td><code>dict</code></td>
        <td><p>A dictionary of proxy servers to use for the request. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_image_collection_thumbnails</span><span class="p">(</span>
    <span class="n">ee_object</span><span class="p">,</span>
    <span class="n">out_dir</span><span class="p">,</span>
    <span class="n">vis_params</span><span class="p">,</span>
    <span class="n">dimensions</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span>
    <span class="n">region</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;jpg&quot;</span><span class="p">,</span>
    <span class="n">names</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">timeout</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span>
    <span class="n">proxies</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Download thumbnails for all images in an ImageCollection.</span>

<span class="sd">    Args:</span>
<span class="sd">        ee_object (object): The ee.ImageCollection instance.</span>
<span class="sd">        out_dir ([str): The output directory to store thumbnails.</span>
<span class="sd">        vis_params (dict): The visualization parameters.</span>
<span class="sd">        dimensions (int, optional):(a number or pair of numbers in format WIDTHxHEIGHT) Maximum dimensions of the thumbnail to render, in pixels. If only one number is passed, it is used as the maximum, and the other dimension is computed by proportional scaling. Defaults to 500.</span>
<span class="sd">        region (object, optional): Geospatial region of the image to render, it may be an ee.Geometry, GeoJSON, or an array of lat/lon points (E,S,W,N). If not set the default is the bounds image. Defaults to None.</span>
<span class="sd">        format (str, optional): Either &#39;png&#39; or &#39;jpg&#39;. Default to &#39;jpg&#39;.</span>
<span class="sd">        names (list, optional): The list of output file names. Defaults to None.</span>
<span class="sd">        verbose (bool, optional): Whether or not to print hints. Defaults to True.</span>
<span class="sd">        timeout (int, optional): The number of seconds after which the request will be terminated. Defaults to 300.</span>
<span class="sd">        proxies (dict, optional): A dictionary of proxy servers to use for the request. Defaults to None.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The ee_object must be an ee.ImageCollection.&quot;</span><span class="p">)</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;The ee_object must be an ee.Image.&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">format</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;png&quot;</span><span class="p">,</span> <span class="s2">&quot;jpg&quot;</span><span class="p">]:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The output image format must be png or jpg.&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">out_dir</span><span class="p">):</span>
        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">out_dir</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">count</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">ee_object</span><span class="o">.</span><span class="n">size</span><span class="p">()</span><span class="o">.</span><span class="n">getInfo</span><span class="p">())</span>
        <span class="k">if</span> <span class="n">verbose</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Total number of images: </span><span class="si">{</span><span class="n">count</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">names</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">names</span><span class="p">)</span> <span class="o">!=</span> <span class="n">count</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The number of names is not equal to the number of images.&quot;</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="n">names</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">names</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">aggregate_array</span><span class="p">(</span><span class="s2">&quot;system:index&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()</span>

        <span class="n">images</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">toList</span><span class="p">(</span><span class="n">count</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">count</span><span class="p">):</span>
            <span class="n">image</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">(</span><span class="n">images</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>
            <span class="n">name</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">names</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
            <span class="n">ext</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">name</span><span class="p">)[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">:]</span>
            <span class="k">if</span> <span class="n">ext</span> <span class="o">!=</span> <span class="nb">format</span><span class="p">:</span>
                <span class="n">name</span> <span class="o">=</span> <span class="n">name</span> <span class="o">+</span> <span class="s2">&quot;.&quot;</span> <span class="o">+</span> <span class="nb">format</span>
            <span class="n">out_img</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">out_dir</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">verbose</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Downloading </span><span class="si">{</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">count</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2"> ...&quot;</span><span class="p">)</span>

            <span class="n">get_image_thumbnail</span><span class="p">(</span>
                <span class="n">image</span><span class="p">,</span>
                <span class="n">out_img</span><span class="p">,</span>
                <span class="n">vis_params</span><span class="p">,</span>
                <span class="n">dimensions</span><span class="p">,</span>
                <span class="n">region</span><span class="p">,</span>
                <span class="nb">format</span><span class="p">,</span>
                <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span>
                <span class="n">proxies</span><span class="o">=</span><span class="n">proxies</span><span class="p">,</span>
            <span class="p">)</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.get_image_thumbnail" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_image_thumbnail</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">out_img</span><span class="p">,</span> <span class="n">vis_params</span><span class="p">,</span> <span class="n">dimensions</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">region</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s1">&#39;jpg&#39;</span><span class="p">,</span> <span class="n">crs</span><span class="o">=</span><span class="s1">&#39;EPSG:3857&#39;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="n">proxies</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


<a href="#geemap.common.get_image_thumbnail" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Download a thumbnail for an ee.Image.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>ee_object</code></td>
        <td><code>object</code></td>
        <td><p>The ee.Image instance.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>out_img</code></td>
        <td><code>str</code></td>
        <td><p>The output file path to the png thumbnail.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>vis_params</code></td>
        <td><code>dict</code></td>
        <td><p>The visualization parameters.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>dimensions</code></td>
        <td><code>int</code></td>
        <td><p>(a number or pair of numbers in format WIDTHxHEIGHT) Maximum dimensions of the thumbnail to render, in pixels. If only one number is passed, it is used as the maximum, and the other dimension is computed by proportional scaling. Defaults to 500.</p></td>
        <td><code>500</code></td>
      </tr>
      <tr>
        <td><code>region</code></td>
        <td><code>object</code></td>
        <td><p>Geospatial region of the image to render, it may be an ee.Geometry, GeoJSON, or an array of lat/lon points (E,S,W,N). If not set the default is the bounds image. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>format</code></td>
        <td><code>str</code></td>
        <td><p>Either 'png' or 'jpg'. Default to 'jpg'.</p></td>
        <td><code>&#39;jpg&#39;</code></td>
      </tr>
      <tr>
        <td><code>timeout</code></td>
        <td><code>int</code></td>
        <td><p>The number of seconds after which the request will be terminated. Defaults to 300.</p></td>
        <td><code>300</code></td>
      </tr>
      <tr>
        <td><code>proxies</code></td>
        <td><code>dict</code></td>
        <td><p>A dictionary of proxy servers to use for the request. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_image_thumbnail</span><span class="p">(</span>
    <span class="n">ee_object</span><span class="p">,</span>
    <span class="n">out_img</span><span class="p">,</span>
    <span class="n">vis_params</span><span class="p">,</span>
    <span class="n">dimensions</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span>
    <span class="n">region</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;jpg&quot;</span><span class="p">,</span>
    <span class="n">crs</span><span class="o">=</span><span class="s2">&quot;EPSG:3857&quot;</span><span class="p">,</span>
    <span class="n">timeout</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span>
    <span class="n">proxies</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Download a thumbnail for an ee.Image.</span>

<span class="sd">    Args:</span>
<span class="sd">        ee_object (object): The ee.Image instance.</span>
<span class="sd">        out_img (str): The output file path to the png thumbnail.</span>
<span class="sd">        vis_params (dict): The visualization parameters.</span>
<span class="sd">        dimensions (int, optional):(a number or pair of numbers in format WIDTHxHEIGHT) Maximum dimensions of the thumbnail to render, in pixels. If only one number is passed, it is used as the maximum, and the other dimension is computed by proportional scaling. Defaults to 500.</span>
<span class="sd">        region (object, optional): Geospatial region of the image to render, it may be an ee.Geometry, GeoJSON, or an array of lat/lon points (E,S,W,N). If not set the default is the bounds image. Defaults to None.</span>
<span class="sd">        format (str, optional): Either &#39;png&#39; or &#39;jpg&#39;. Default to &#39;jpg&#39;.</span>
<span class="sd">        timeout (int, optional): The number of seconds after which the request will be terminated. Defaults to 300.</span>
<span class="sd">        proxies (dict, optional): A dictionary of proxy servers to use for the request. Defaults to None.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;The ee_object must be an ee.Image.&quot;</span><span class="p">)</span>

    <span class="n">ext</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">out_img</span><span class="p">)[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">:]</span>
    <span class="k">if</span> <span class="n">ext</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;png&quot;</span><span class="p">,</span> <span class="s2">&quot;jpg&quot;</span><span class="p">]:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The output image format must be png or jpg.&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">format</span> <span class="o">=</span> <span class="n">ext</span>

    <span class="n">out_image</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">out_img</span><span class="p">)</span>
    <span class="n">out_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">out_image</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">out_dir</span><span class="p">):</span>
        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">out_dir</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">region</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">vis_params</span><span class="p">[</span><span class="s2">&quot;region&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">region</span>

    <span class="n">vis_params</span><span class="p">[</span><span class="s2">&quot;dimensions&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">dimensions</span>
    <span class="n">vis_params</span><span class="p">[</span><span class="s2">&quot;format&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">format</span>
    <span class="n">vis_params</span><span class="p">[</span><span class="s2">&quot;crs&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">crs</span>
    <span class="n">url</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">getThumbURL</span><span class="p">(</span><span class="n">vis_params</span><span class="p">)</span>

    <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">stream</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span> <span class="n">proxies</span><span class="o">=</span><span class="n">proxies</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">r</span><span class="o">.</span><span class="n">status_code</span> <span class="o">!=</span> <span class="mi">200</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;An error occurred while downloading.&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">()[</span><span class="s2">&quot;error&quot;</span><span class="p">][</span><span class="s2">&quot;message&quot;</span><span class="p">])</span>

    <span class="k">else</span><span class="p">:</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">out_img</span><span class="p">,</span> <span class="s2">&quot;wb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fd</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="n">r</span><span class="o">.</span><span class="n">iter_content</span><span class="p">(</span><span class="n">chunk_size</span><span class="o">=</span><span class="mi">1024</span><span class="p">):</span>
                <span class="n">fd</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">chunk</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.get_info" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_info</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">layer_name</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">opened</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">return_node</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>


<a href="#geemap.common.get_info" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Print out the information for an Earth Engine object using a tree structure. The source code
    was adapted from https://github.com/google/earthengine-jupyter. Credits to Tyler Erickson.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>ee_object</code></td>
        <td><code>object</code></td>
        <td><p>The Earth Engine object.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>layer_name</code></td>
        <td><code>str</code></td>
        <td><p>The name of the layer. Defaults to "".</p></td>
        <td><code>&#39;&#39;</code></td>
      </tr>
      <tr>
        <td><code>opened</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to expand the tree. Defaults to False.</p></td>
        <td><code>False</code></td>
      </tr>
      <tr>
        <td><code>return_node</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to return the widget as ipytree.Node.
If False, returns the widget as ipytree.Tree. Defaults to False.</p></td>
        <td><code>False</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_info</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">layer_name</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">opened</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">return_node</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Print out the information for an Earth Engine object using a tree structure. The source code</span>
<span class="sd">        was adapted from https://github.com/google/earthengine-jupyter. Credits to Tyler Erickson.</span>

<span class="sd">    Args:</span>
<span class="sd">        ee_object (object): The Earth Engine object.</span>
<span class="sd">        layer_name (str, optional): The name of the layer. Defaults to &quot;&quot;.</span>
<span class="sd">        opened (bool, optional): Whether to expand the tree. Defaults to False.</span>
<span class="sd">        return_node (bool, optional): Whether to return the widget as ipytree.Node.</span>
<span class="sd">            If False, returns the widget as ipytree.Tree. Defaults to False.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">_order_items</span><span class="p">(</span><span class="n">item_dict</span><span class="p">,</span> <span class="n">ordering_list</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Orders dictionary items in a specified order.</span>
<span class="sd">        Adapted from https://github.com/google/earthengine-jupyter.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">list_of_tuples</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">item_dict</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>
            <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">ordering_list</span> <span class="k">if</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">item_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">()]</span>
        <span class="p">]</span>

        <span class="k">return</span> <span class="nb">dict</span><span class="p">(</span><span class="n">list_of_tuples</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_process_info</span><span class="p">(</span><span class="n">info</span><span class="p">):</span>
        <span class="n">node_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">info</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">count</span><span class="p">,</span> <span class="n">item</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">info</span><span class="p">):</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)):</span>
                    <span class="k">if</span> <span class="s2">&quot;id&quot;</span> <span class="ow">in</span> <span class="n">item</span><span class="p">:</span>
                        <span class="n">count</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">count</span><span class="si">}</span><span class="s2">: </span><span class="se">\&quot;</span><span class="si">{</span><span class="n">item</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span><span class="si">}</span><span class="se">\&quot;</span><span class="s2">&quot;</span>
                    <span class="k">if</span> <span class="s2">&quot;data_type&quot;</span> <span class="ow">in</span> <span class="n">item</span><span class="p">:</span>
                        <span class="n">count</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">count</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">item</span><span class="p">[</span><span class="s1">&#39;data_type&#39;</span><span class="p">][</span><span class="s1">&#39;precision&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="k">if</span> <span class="s2">&quot;crs&quot;</span> <span class="ow">in</span> <span class="n">item</span><span class="p">:</span>
                        <span class="n">count</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">count</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">item</span><span class="p">[</span><span class="s1">&#39;crs&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="k">if</span> <span class="s2">&quot;dimensions&quot;</span> <span class="ow">in</span> <span class="n">item</span><span class="p">:</span>
                        <span class="n">dimensions</span> <span class="o">=</span> <span class="n">item</span><span class="p">[</span><span class="s2">&quot;dimensions&quot;</span><span class="p">]</span>
                        <span class="n">count</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">count</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">dimensions</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">x</span><span class="si">{</span><span class="n">dimensions</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2"> px&quot;</span>
                    <span class="n">node_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                        <span class="n">Node</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">count</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">nodes</span><span class="o">=</span><span class="n">_process_info</span><span class="p">(</span><span class="n">item</span><span class="p">),</span> <span class="n">opened</span><span class="o">=</span><span class="n">opened</span><span class="p">)</span>
                    <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">node_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Node</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">count</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">item</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;file&quot;</span><span class="p">))</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">info</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">info</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)):</span>
                    <span class="k">if</span> <span class="n">k</span> <span class="o">==</span> <span class="s2">&quot;properties&quot;</span><span class="p">:</span>
                        <span class="n">k</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;properties: Object (</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">v</span><span class="p">)</span><span class="si">}</span><span class="s2"> properties)&quot;</span>
                    <span class="k">elif</span> <span class="n">k</span> <span class="o">==</span> <span class="s2">&quot;bands&quot;</span><span class="p">:</span>
                        <span class="n">k</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;bands: List (</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">v</span><span class="p">)</span><span class="si">}</span><span class="s2"> elements)&quot;</span>
                    <span class="n">node_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                        <span class="n">Node</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">k</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">nodes</span><span class="o">=</span><span class="n">_process_info</span><span class="p">(</span><span class="n">v</span><span class="p">),</span> <span class="n">opened</span><span class="o">=</span><span class="n">opened</span><span class="p">)</span>
                    <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">node_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Node</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">k</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;file&quot;</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">node_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Node</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">info</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;file&quot;</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">node_list</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">):</span>
        <span class="n">ee_object</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">f</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Feature</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">f</span><span class="o">.</span><span class="n">toDictionary</span><span class="p">()))</span>
    <span class="n">layer_info</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()</span>
    <span class="n">props</span> <span class="o">=</span> <span class="n">layer_info</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;properties&quot;</span><span class="p">,</span> <span class="p">{})</span>
    <span class="n">layer_info</span><span class="p">[</span><span class="s2">&quot;properties&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="n">props</span><span class="o">.</span><span class="n">items</span><span class="p">()))</span>

    <span class="n">ordering_list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="s2">&quot;type&quot;</span> <span class="ow">in</span> <span class="n">layer_info</span><span class="p">:</span>
        <span class="n">ordering_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;type&quot;</span><span class="p">)</span>
        <span class="n">ee_type</span> <span class="o">=</span> <span class="n">layer_info</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">ee_type</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

    <span class="k">if</span> <span class="s2">&quot;id&quot;</span> <span class="ow">in</span> <span class="n">layer_info</span><span class="p">:</span>
        <span class="n">ordering_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">)</span>
        <span class="n">ee_id</span> <span class="o">=</span> <span class="n">layer_info</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">ee_id</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

    <span class="n">ordering_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;version&quot;</span><span class="p">)</span>
    <span class="n">ordering_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;bands&quot;</span><span class="p">)</span>
    <span class="n">ordering_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;properties&quot;</span><span class="p">)</span>

    <span class="n">layer_info</span> <span class="o">=</span> <span class="n">_order_items</span><span class="p">(</span><span class="n">layer_info</span><span class="p">,</span> <span class="n">ordering_list</span><span class="p">)</span>
    <span class="n">nodes</span> <span class="o">=</span> <span class="n">_process_info</span><span class="p">(</span><span class="n">layer_info</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">layer_name</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">layer_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">layer_name</span><span class="si">}</span><span class="s2">: &quot;</span>

    <span class="k">if</span> <span class="s2">&quot;bands&quot;</span> <span class="ow">in</span> <span class="n">layer_info</span><span class="p">:</span>
        <span class="n">band_info</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39; (</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">layer_info</span><span class="p">[</span><span class="s2">&quot;bands&quot;</span><span class="p">])</span><span class="si">}</span><span class="s1"> bands)&#39;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">band_info</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="n">root_node</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">layer_name</span><span class="si">}{</span><span class="n">ee_type</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">band_info</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">nodes</span><span class="o">=</span><span class="n">nodes</span><span class="p">,</span> <span class="n">opened</span><span class="o">=</span><span class="n">opened</span><span class="p">)</span>
    <span class="c1"># root_node.open_icon = &quot;plus-square&quot;</span>
    <span class="c1"># root_node.open_icon_style = &quot;success&quot;</span>
    <span class="c1"># root_node.close_icon = &quot;minus-square&quot;</span>
    <span class="c1"># root_node.close_icon_style = &quot;info&quot;</span>

    <span class="k">if</span> <span class="n">return_node</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">root_node</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">tree</span> <span class="o">=</span> <span class="n">Tree</span><span class="p">()</span>
        <span class="n">tree</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="n">root_node</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">tree</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.get_local_tile_layer" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_local_tile_layer</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="s1">&#39;default&#39;</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">projection</span><span class="o">=</span><span class="s1">&#39;EPSG:3857&#39;</span><span class="p">,</span> <span class="n">band</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">palette</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">vmin</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">nodata</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">attribution</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">tile_format</span><span class="o">=</span><span class="s1">&#39;ipyleaflet&#39;</span><span class="p">,</span> <span class="n">layer_name</span><span class="o">=</span><span class="s1">&#39;Local COG&#39;</span><span class="p">,</span> <span class="n">return_client</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.common.get_local_tile_layer" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Generate an ipyleaflet/folium TileLayer from a local raster dataset or remote Cloud Optimized GeoTIFF (COG).
    If you are using this function in JupyterHub on a remote server (e.g., Binder, Microsoft Planetary Computer),
    try adding to following two lines to the beginning of the notebook if the raster does not render properly.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code>import os
os.environ[&#39;LOCALTILESERVER_CLIENT_PREFIX&#39;] = f&#39;{os.environ[&#39;JUPYTERHUB_SERVICE_PREFIX&#39;].lstrip(&#39;/&#39;)}/proxy/{{port}}&#39;
</code></pre></div></td></tr></table></div>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>source</code></td>
        <td><code>str</code></td>
        <td><p>The path to the GeoTIFF file or the URL of the Cloud Optimized GeoTIFF.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>port</code></td>
        <td><code>str</code></td>
        <td><p>The port to use for the server. Defaults to "default".</p></td>
        <td><code>&#39;default&#39;</code></td>
      </tr>
      <tr>
        <td><code>debug</code></td>
        <td><code>bool</code></td>
        <td><p>If True, the server will be started in debug mode. Defaults to False.</p></td>
        <td><code>False</code></td>
      </tr>
      <tr>
        <td><code>projection</code></td>
        <td><code>str</code></td>
        <td><p>The projection of the GeoTIFF. Defaults to "EPSG:3857".</p></td>
        <td><code>&#39;EPSG:3857&#39;</code></td>
      </tr>
      <tr>
        <td><code>band</code></td>
        <td><code>int</code></td>
        <td><p>The band to use. Band indexing starts at 1. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>palette</code></td>
        <td><code>str</code></td>
        <td><p>The name of the color palette from <code>palettable</code> to use when plotting a single band. See https://jiffyclub.github.io/palettable. Default is greyscale</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>vmin</code></td>
        <td><code>float</code></td>
        <td><p>The minimum value to use when colormapping the palette when plotting a single band. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>vmax</code></td>
        <td><code>float</code></td>
        <td><p>The maximum value to use when colormapping the palette when plotting a single band. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>nodata</code></td>
        <td><code>float</code></td>
        <td><p>The value from the band to use to interpret as not valid data. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>attribution</code></td>
        <td><code>str</code></td>
        <td><p>Attribution for the source raster. This defaults to a message about it being a local file.. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>tile_format</code></td>
        <td><code>str</code></td>
        <td><p>The tile layer format. Can be either ipyleaflet or folium. Defaults to "ipyleaflet".</p></td>
        <td><code>&#39;ipyleaflet&#39;</code></td>
      </tr>
      <tr>
        <td><code>layer_name</code></td>
        <td><code>str</code></td>
        <td><p>The layer name to use. Defaults to None.</p></td>
        <td><code>&#39;Local COG&#39;</code></td>
      </tr>
      <tr>
        <td><code>return_client</code></td>
        <td><code>bool</code></td>
        <td><p>If True, the tile client will be returned. Defaults to False.</p></td>
        <td><code>False</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>ipyleaflet.TileLayer | folium.TileLayer</code></td>
      <td><p>An ipyleaflet.TileLayer or folium.TileLayer.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_local_tile_layer</span><span class="p">(</span>
    <span class="n">source</span><span class="p">,</span>
    <span class="n">port</span><span class="o">=</span><span class="s2">&quot;default&quot;</span><span class="p">,</span>
    <span class="n">debug</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">projection</span><span class="o">=</span><span class="s2">&quot;EPSG:3857&quot;</span><span class="p">,</span>
    <span class="n">band</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">palette</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">vmin</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">vmax</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">nodata</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">attribution</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">tile_format</span><span class="o">=</span><span class="s2">&quot;ipyleaflet&quot;</span><span class="p">,</span>
    <span class="n">layer_name</span><span class="o">=</span><span class="s2">&quot;Local COG&quot;</span><span class="p">,</span>
    <span class="n">return_client</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Generate an ipyleaflet/folium TileLayer from a local raster dataset or remote Cloud Optimized GeoTIFF (COG).</span>
<span class="sd">        If you are using this function in JupyterHub on a remote server (e.g., Binder, Microsoft Planetary Computer),</span>
<span class="sd">        try adding to following two lines to the beginning of the notebook if the raster does not render properly.</span>

<span class="sd">        import os</span>
<span class="sd">        os.environ[&#39;LOCALTILESERVER_CLIENT_PREFIX&#39;] = f&#39;{os.environ[&#39;JUPYTERHUB_SERVICE_PREFIX&#39;].lstrip(&#39;/&#39;)}/proxy/{{port}}&#39;</span>

<span class="sd">    Args:</span>
<span class="sd">        source (str): The path to the GeoTIFF file or the URL of the Cloud Optimized GeoTIFF.</span>
<span class="sd">        port (str, optional): The port to use for the server. Defaults to &quot;default&quot;.</span>
<span class="sd">        debug (bool, optional): If True, the server will be started in debug mode. Defaults to False.</span>
<span class="sd">        projection (str, optional): The projection of the GeoTIFF. Defaults to &quot;EPSG:3857&quot;.</span>
<span class="sd">        band (int, optional): The band to use. Band indexing starts at 1. Defaults to None.</span>
<span class="sd">        palette (str, optional): The name of the color palette from `palettable` to use when plotting a single band. See https://jiffyclub.github.io/palettable. Default is greyscale</span>
<span class="sd">        vmin (float, optional): The minimum value to use when colormapping the palette when plotting a single band. Defaults to None.</span>
<span class="sd">        vmax (float, optional): The maximum value to use when colormapping the palette when plotting a single band. Defaults to None.</span>
<span class="sd">        nodata (float, optional): The value from the band to use to interpret as not valid data. Defaults to None.</span>
<span class="sd">        attribution (str, optional): Attribution for the source raster. This defaults to a message about it being a local file.. Defaults to None.</span>
<span class="sd">        tile_format (str, optional): The tile layer format. Can be either ipyleaflet or folium. Defaults to &quot;ipyleaflet&quot;.</span>
<span class="sd">        layer_name (str, optional): The layer name to use. Defaults to None.</span>
<span class="sd">        return_client (bool, optional): If True, the tile client will be returned. Defaults to False.</span>

<span class="sd">    Returns:</span>
<span class="sd">        ipyleaflet.TileLayer | folium.TileLayer: An ipyleaflet.TileLayer or folium.TileLayer.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s2">&quot;ignore&quot;</span><span class="p">)</span>

    <span class="n">output</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Output</span><span class="p">()</span>

    <span class="n">check_package</span><span class="p">(</span>
        <span class="s2">&quot;localtileserver&quot;</span><span class="p">,</span> <span class="n">URL</span><span class="o">=</span><span class="s2">&quot;https://github.com/banesullivan/localtileserver&quot;</span>
    <span class="p">)</span>

    <span class="c1"># Make it compatible with binder and JupyterHub</span>
    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;JUPYTERHUB_SERVICE_PREFIX&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span>
            <span class="s2">&quot;LOCALTILESERVER_CLIENT_PREFIX&quot;</span>
        <span class="p">]</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;JUPYTERHUB_SERVICE_PREFIX&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">lstrip</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">/proxy/</span><span class="se">{{</span><span class="s2">port</span><span class="se">}}</span><span class="s2">&quot;</span>

    <span class="kn">from</span> <span class="nn">localtileserver</span> <span class="kn">import</span> <span class="p">(</span>
        <span class="n">get_leaflet_tile_layer</span><span class="p">,</span>
        <span class="n">get_folium_tile_layer</span><span class="p">,</span>
        <span class="n">TileClient</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">source</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;http&quot;</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">source</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;~&quot;</span><span class="p">):</span>
                <span class="n">source</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="n">source</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">source</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">source</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">source</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The source path does not exist.&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">source</span> <span class="o">=</span> <span class="n">github_raw_url</span><span class="p">(</span><span class="n">source</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The source must either be a string or TileClient&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">palette</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>

        <span class="n">palette</span> <span class="o">=</span> <span class="n">get_palette_colors</span><span class="p">(</span><span class="n">palette</span><span class="p">,</span> <span class="n">hashtag</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">tile_format</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;ipyleaflet&quot;</span><span class="p">,</span> <span class="s2">&quot;folium&quot;</span><span class="p">]:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The tile format must be either ipyleaflet or folium.&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">layer_name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">source</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;http&quot;</span><span class="p">):</span>
            <span class="n">layer_name</span> <span class="o">=</span> <span class="s2">&quot;RemoteTile_&quot;</span> <span class="o">+</span> <span class="n">random_string</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">layer_name</span> <span class="o">=</span> <span class="s2">&quot;LocalTile_&quot;</span> <span class="o">+</span> <span class="n">random_string</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>

    <span class="k">with</span> <span class="n">output</span><span class="p">:</span>
        <span class="n">tile_client</span> <span class="o">=</span> <span class="n">TileClient</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="n">port</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="n">debug</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">tile_format</span> <span class="o">==</span> <span class="s2">&quot;ipyleaflet&quot;</span><span class="p">:</span>
            <span class="n">tile_layer</span> <span class="o">=</span> <span class="n">get_leaflet_tile_layer</span><span class="p">(</span>
                <span class="n">tile_client</span><span class="p">,</span>
                <span class="n">port</span><span class="o">=</span><span class="n">port</span><span class="p">,</span>
                <span class="n">debug</span><span class="o">=</span><span class="n">debug</span><span class="p">,</span>
                <span class="n">projection</span><span class="o">=</span><span class="n">projection</span><span class="p">,</span>
                <span class="n">band</span><span class="o">=</span><span class="n">band</span><span class="p">,</span>
                <span class="n">palette</span><span class="o">=</span><span class="n">palette</span><span class="p">,</span>
                <span class="n">vmin</span><span class="o">=</span><span class="n">vmin</span><span class="p">,</span>
                <span class="n">vmax</span><span class="o">=</span><span class="n">vmax</span><span class="p">,</span>
                <span class="n">nodata</span><span class="o">=</span><span class="n">nodata</span><span class="p">,</span>
                <span class="n">attribution</span><span class="o">=</span><span class="n">attribution</span><span class="p">,</span>
                <span class="n">name</span><span class="o">=</span><span class="n">layer_name</span><span class="p">,</span>
                <span class="n">max_zoom</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span>
                <span class="n">max_native_zoom</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span>
                <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">tile_layer</span> <span class="o">=</span> <span class="n">get_folium_tile_layer</span><span class="p">(</span>
                <span class="n">tile_client</span><span class="p">,</span>
                <span class="n">port</span><span class="o">=</span><span class="n">port</span><span class="p">,</span>
                <span class="n">debug</span><span class="o">=</span><span class="n">debug</span><span class="p">,</span>
                <span class="n">projection</span><span class="o">=</span><span class="n">projection</span><span class="p">,</span>
                <span class="n">band</span><span class="o">=</span><span class="n">band</span><span class="p">,</span>
                <span class="n">palette</span><span class="o">=</span><span class="n">palette</span><span class="p">,</span>
                <span class="n">vmin</span><span class="o">=</span><span class="n">vmin</span><span class="p">,</span>
                <span class="n">vmax</span><span class="o">=</span><span class="n">vmax</span><span class="p">,</span>
                <span class="n">nodata</span><span class="o">=</span><span class="n">nodata</span><span class="p">,</span>
                <span class="n">attr</span><span class="o">=</span><span class="n">attribution</span><span class="p">,</span>
                <span class="n">overlay</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                <span class="n">name</span><span class="o">=</span><span class="n">layer_name</span><span class="p">,</span>
                <span class="n">max_zoom</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span>
                <span class="n">max_native_zoom</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span>
                <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
            <span class="p">)</span>

    <span class="k">if</span> <span class="n">return_client</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">tile_layer</span><span class="p">,</span> <span class="n">tile_client</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">tile_layer</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.get_palettable" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_palettable</span><span class="p">(</span><span class="n">types</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


<a href="#geemap.common.get_palettable" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Get a list of palettable color palettes.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>types</code></td>
        <td><code>list</code></td>
        <td><p>A list of palettable types to return, e.g., types=['matplotlib', 'cartocolors']. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>list</code></td>
      <td><p>A list of palettable color palettes.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_palettable</span><span class="p">(</span><span class="n">types</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get a list of palettable color palettes.</span>

<span class="sd">    Args:</span>
<span class="sd">        types (list, optional): A list of palettable types to return, e.g., types=[&#39;matplotlib&#39;, &#39;cartocolors&#39;]. Defaults to None.</span>

<span class="sd">    Returns:</span>
<span class="sd">        list: A list of palettable color palettes.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="kn">import</span> <span class="nn">palettable</span>
    <span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ImportError</span><span class="p">(</span>
            <span class="s2">&quot;The palettable package is not installed. Please install it with `pip install palettable`.&quot;</span>
        <span class="p">)</span>

    <span class="k">if</span> <span class="n">types</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="p">(</span><span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">types</span><span class="p">,</span> <span class="nb">list</span><span class="p">)):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The types must be a list.&quot;</span><span class="p">)</span>

    <span class="n">allowed_palettes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s2">&quot;cartocolors&quot;</span><span class="p">,</span>
        <span class="s2">&quot;cmocean&quot;</span><span class="p">,</span>
        <span class="s2">&quot;colorbrewer&quot;</span><span class="p">,</span>
        <span class="s2">&quot;cubehelix&quot;</span><span class="p">,</span>
        <span class="s2">&quot;lightbartlein&quot;</span><span class="p">,</span>
        <span class="s2">&quot;matplotlib&quot;</span><span class="p">,</span>
        <span class="s2">&quot;mycarta&quot;</span><span class="p">,</span>
        <span class="s2">&quot;scientific&quot;</span><span class="p">,</span>
        <span class="s2">&quot;tableau&quot;</span><span class="p">,</span>
        <span class="s2">&quot;wesanderson&quot;</span><span class="p">,</span>
    <span class="p">]</span>

    <span class="k">if</span> <span class="n">types</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">types</span> <span class="o">=</span> <span class="n">allowed_palettes</span><span class="p">[:]</span>

    <span class="k">if</span> <span class="nb">all</span><span class="p">(</span><span class="n">x</span> <span class="ow">in</span> <span class="n">allowed_palettes</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">types</span><span class="p">):</span>
        <span class="k">pass</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="s2">&quot;The types must be one of the following: &quot;</span> <span class="o">+</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">allowed_palettes</span><span class="p">)</span>
        <span class="p">)</span>

    <span class="n">palettes</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">if</span> <span class="s2">&quot;cartocolors&quot;</span> <span class="ow">in</span> <span class="n">types</span><span class="p">:</span>

        <span class="n">cartocolors_diverging</span> <span class="o">=</span> <span class="p">[</span>
            <span class="sa">f</span><span class="s2">&quot;cartocolors.diverging.</span><span class="si">{</span><span class="n">c</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="nb">dir</span><span class="p">(</span><span class="n">palettable</span><span class="o">.</span><span class="n">cartocolors</span><span class="o">.</span><span class="n">diverging</span><span class="p">)[:</span><span class="o">-</span><span class="mi">19</span><span class="p">]</span>
        <span class="p">]</span>
        <span class="n">cartocolors_qualitative</span> <span class="o">=</span> <span class="p">[</span>
            <span class="sa">f</span><span class="s2">&quot;cartocolors.qualitative.</span><span class="si">{</span><span class="n">c</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="nb">dir</span><span class="p">(</span><span class="n">palettable</span><span class="o">.</span><span class="n">cartocolors</span><span class="o">.</span><span class="n">qualitative</span><span class="p">)[:</span><span class="o">-</span><span class="mi">19</span><span class="p">]</span>
        <span class="p">]</span>
        <span class="n">cartocolors_sequential</span> <span class="o">=</span> <span class="p">[</span>
            <span class="sa">f</span><span class="s2">&quot;cartocolors.sequential.</span><span class="si">{</span><span class="n">c</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="nb">dir</span><span class="p">(</span><span class="n">palettable</span><span class="o">.</span><span class="n">cartocolors</span><span class="o">.</span><span class="n">sequential</span><span class="p">)[:</span><span class="o">-</span><span class="mi">41</span><span class="p">]</span>
        <span class="p">]</span>

        <span class="n">palettes</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">palettes</span>
            <span class="o">+</span> <span class="n">cartocolors_diverging</span>
            <span class="o">+</span> <span class="n">cartocolors_qualitative</span>
            <span class="o">+</span> <span class="n">cartocolors_sequential</span>
        <span class="p">)</span>

    <span class="k">if</span> <span class="s2">&quot;cmocean&quot;</span> <span class="ow">in</span> <span class="n">types</span><span class="p">:</span>

        <span class="n">cmocean_diverging</span> <span class="o">=</span> <span class="p">[</span>
            <span class="sa">f</span><span class="s2">&quot;cmocean.diverging.</span><span class="si">{</span><span class="n">c</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="nb">dir</span><span class="p">(</span><span class="n">palettable</span><span class="o">.</span><span class="n">cmocean</span><span class="o">.</span><span class="n">diverging</span><span class="p">)[:</span><span class="o">-</span><span class="mi">19</span><span class="p">]</span>
        <span class="p">]</span>
        <span class="n">cmocean_sequential</span> <span class="o">=</span> <span class="p">[</span>
            <span class="sa">f</span><span class="s2">&quot;cmocean.sequential.</span><span class="si">{</span><span class="n">c</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="nb">dir</span><span class="p">(</span><span class="n">palettable</span><span class="o">.</span><span class="n">cmocean</span><span class="o">.</span><span class="n">sequential</span><span class="p">)[:</span><span class="o">-</span><span class="mi">19</span><span class="p">]</span>
        <span class="p">]</span>

        <span class="n">palettes</span> <span class="o">=</span> <span class="n">palettes</span> <span class="o">+</span> <span class="n">cmocean_diverging</span> <span class="o">+</span> <span class="n">cmocean_sequential</span>

    <span class="k">if</span> <span class="s2">&quot;colorbrewer&quot;</span> <span class="ow">in</span> <span class="n">types</span><span class="p">:</span>

        <span class="n">colorbrewer_diverging</span> <span class="o">=</span> <span class="p">[</span>
            <span class="sa">f</span><span class="s2">&quot;colorbrewer.diverging.</span><span class="si">{</span><span class="n">c</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="nb">dir</span><span class="p">(</span><span class="n">palettable</span><span class="o">.</span><span class="n">colorbrewer</span><span class="o">.</span><span class="n">diverging</span><span class="p">)[:</span><span class="o">-</span><span class="mi">19</span><span class="p">]</span>
        <span class="p">]</span>
        <span class="n">colorbrewer_qualitative</span> <span class="o">=</span> <span class="p">[</span>
            <span class="sa">f</span><span class="s2">&quot;colorbrewer.qualitative.</span><span class="si">{</span><span class="n">c</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="nb">dir</span><span class="p">(</span><span class="n">palettable</span><span class="o">.</span><span class="n">colorbrewer</span><span class="o">.</span><span class="n">qualitative</span><span class="p">)[:</span><span class="o">-</span><span class="mi">19</span><span class="p">]</span>
        <span class="p">]</span>
        <span class="n">colorbrewer_sequential</span> <span class="o">=</span> <span class="p">[</span>
            <span class="sa">f</span><span class="s2">&quot;colorbrewer.sequential.</span><span class="si">{</span><span class="n">c</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="nb">dir</span><span class="p">(</span><span class="n">palettable</span><span class="o">.</span><span class="n">colorbrewer</span><span class="o">.</span><span class="n">sequential</span><span class="p">)[:</span><span class="o">-</span><span class="mi">41</span><span class="p">]</span>
        <span class="p">]</span>

        <span class="n">palettes</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">palettes</span>
            <span class="o">+</span> <span class="n">colorbrewer_diverging</span>
            <span class="o">+</span> <span class="n">colorbrewer_qualitative</span>
            <span class="o">+</span> <span class="n">colorbrewer_sequential</span>
        <span class="p">)</span>

    <span class="k">if</span> <span class="s2">&quot;cubehelix&quot;</span> <span class="ow">in</span> <span class="n">types</span><span class="p">:</span>
        <span class="n">cubehelix</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">&quot;classic_16&quot;</span><span class="p">,</span>
            <span class="s2">&quot;cubehelix1_16&quot;</span><span class="p">,</span>
            <span class="s2">&quot;cubehelix2_16&quot;</span><span class="p">,</span>
            <span class="s2">&quot;cubehelix3_16&quot;</span><span class="p">,</span>
            <span class="s2">&quot;jim_special_16&quot;</span><span class="p">,</span>
            <span class="s2">&quot;perceptual_rainbow_16&quot;</span><span class="p">,</span>
            <span class="s2">&quot;purple_16&quot;</span><span class="p">,</span>
            <span class="s2">&quot;red_16&quot;</span><span class="p">,</span>
        <span class="p">]</span>
        <span class="n">cubehelix</span> <span class="o">=</span> <span class="p">[</span><span class="sa">f</span><span class="s2">&quot;cubehelix.</span><span class="si">{</span><span class="n">c</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">cubehelix</span><span class="p">]</span>
        <span class="n">palettes</span> <span class="o">=</span> <span class="n">palettes</span> <span class="o">+</span> <span class="n">cubehelix</span>

    <span class="k">if</span> <span class="s2">&quot;lightbartlein&quot;</span> <span class="ow">in</span> <span class="n">types</span><span class="p">:</span>
        <span class="n">lightbartlein_diverging</span> <span class="o">=</span> <span class="p">[</span>
            <span class="sa">f</span><span class="s2">&quot;lightbartlein.diverging.</span><span class="si">{</span><span class="n">c</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="nb">dir</span><span class="p">(</span><span class="n">palettable</span><span class="o">.</span><span class="n">lightbartlein</span><span class="o">.</span><span class="n">diverging</span><span class="p">)[:</span><span class="o">-</span><span class="mi">19</span><span class="p">]</span>
        <span class="p">]</span>
        <span class="n">lightbartlein_sequential</span> <span class="o">=</span> <span class="p">[</span>
            <span class="sa">f</span><span class="s2">&quot;lightbartlein.sequential.</span><span class="si">{</span><span class="n">c</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="nb">dir</span><span class="p">(</span><span class="n">palettable</span><span class="o">.</span><span class="n">lightbartlein</span><span class="o">.</span><span class="n">sequential</span><span class="p">)[:</span><span class="o">-</span><span class="mi">19</span><span class="p">]</span>
        <span class="p">]</span>

        <span class="n">palettes</span> <span class="o">=</span> <span class="n">palettes</span> <span class="o">+</span> <span class="n">lightbartlein_diverging</span> <span class="o">+</span> <span class="n">lightbartlein_sequential</span>

    <span class="k">if</span> <span class="s2">&quot;matplotlib&quot;</span> <span class="ow">in</span> <span class="n">types</span><span class="p">:</span>
        <span class="n">matplotlib_colors</span> <span class="o">=</span> <span class="p">[</span>
            <span class="sa">f</span><span class="s2">&quot;matplotlib.</span><span class="si">{</span><span class="n">c</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="nb">dir</span><span class="p">(</span><span class="n">palettable</span><span class="o">.</span><span class="n">matplotlib</span><span class="p">)[:</span><span class="o">-</span><span class="mi">16</span><span class="p">]</span>
        <span class="p">]</span>
        <span class="n">palettes</span> <span class="o">=</span> <span class="n">palettes</span> <span class="o">+</span> <span class="n">matplotlib_colors</span>

    <span class="k">if</span> <span class="s2">&quot;mycarta&quot;</span> <span class="ow">in</span> <span class="n">types</span><span class="p">:</span>
        <span class="n">mycarta</span> <span class="o">=</span> <span class="p">[</span><span class="sa">f</span><span class="s2">&quot;mycarta.</span><span class="si">{</span><span class="n">c</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="nb">dir</span><span class="p">(</span><span class="n">palettable</span><span class="o">.</span><span class="n">mycarta</span><span class="p">)[:</span><span class="o">-</span><span class="mi">16</span><span class="p">]]</span>
        <span class="n">palettes</span> <span class="o">=</span> <span class="n">palettes</span> <span class="o">+</span> <span class="n">mycarta</span>

    <span class="k">if</span> <span class="s2">&quot;scientific&quot;</span> <span class="ow">in</span> <span class="n">types</span><span class="p">:</span>
        <span class="n">scientific_diverging</span> <span class="o">=</span> <span class="p">[</span>
            <span class="sa">f</span><span class="s2">&quot;scientific.diverging.</span><span class="si">{</span><span class="n">c</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="nb">dir</span><span class="p">(</span><span class="n">palettable</span><span class="o">.</span><span class="n">scientific</span><span class="o">.</span><span class="n">diverging</span><span class="p">)[:</span><span class="o">-</span><span class="mi">19</span><span class="p">]</span>
        <span class="p">]</span>
        <span class="n">scientific_sequential</span> <span class="o">=</span> <span class="p">[</span>
            <span class="sa">f</span><span class="s2">&quot;scientific.sequential.</span><span class="si">{</span><span class="n">c</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="nb">dir</span><span class="p">(</span><span class="n">palettable</span><span class="o">.</span><span class="n">scientific</span><span class="o">.</span><span class="n">sequential</span><span class="p">)[:</span><span class="o">-</span><span class="mi">19</span><span class="p">]</span>
        <span class="p">]</span>

        <span class="n">palettes</span> <span class="o">=</span> <span class="n">palettes</span> <span class="o">+</span> <span class="n">scientific_diverging</span> <span class="o">+</span> <span class="n">scientific_sequential</span>

    <span class="k">if</span> <span class="s2">&quot;tableau&quot;</span> <span class="ow">in</span> <span class="n">types</span><span class="p">:</span>
        <span class="n">tableau</span> <span class="o">=</span> <span class="p">[</span><span class="sa">f</span><span class="s2">&quot;tableau.</span><span class="si">{</span><span class="n">c</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="nb">dir</span><span class="p">(</span><span class="n">palettable</span><span class="o">.</span><span class="n">tableau</span><span class="p">)[:</span><span class="o">-</span><span class="mi">14</span><span class="p">]]</span>
        <span class="n">palettes</span> <span class="o">=</span> <span class="n">palettes</span> <span class="o">+</span> <span class="n">tableau</span>

    <span class="k">return</span> <span class="n">palettes</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.get_palette_colors" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_palette_colors</span><span class="p">(</span><span class="n">cmap_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">n_class</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">hashtag</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>


<a href="#geemap.common.get_palette_colors" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Get a palette from a matplotlib colormap. See the list of colormaps at https://matplotlib.org/stable/tutorials/colors/colormaps.html.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>cmap_name</code></td>
        <td><code>str</code></td>
        <td><p>The name of the matplotlib colormap. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>n_class</code></td>
        <td><code>int</code></td>
        <td><p>The number of colors. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>hashtag</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to return a list of hex colors. Defaults to False.</p></td>
        <td><code>False</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>list</code></td>
      <td><p>A list of hex colors.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_palette_colors</span><span class="p">(</span><span class="n">cmap_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">n_class</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">hashtag</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get a palette from a matplotlib colormap. See the list of colormaps at https://matplotlib.org/stable/tutorials/colors/colormaps.html.</span>

<span class="sd">    Args:</span>
<span class="sd">        cmap_name (str, optional): The name of the matplotlib colormap. Defaults to None.</span>
<span class="sd">        n_class (int, optional): The number of colors. Defaults to None.</span>
<span class="sd">        hashtag (bool, optional): Whether to return a list of hex colors. Defaults to False.</span>

<span class="sd">    Returns:</span>
<span class="sd">        list: A list of hex colors.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">matplotlib</span> <span class="k">as</span> <span class="nn">mpl</span>
    <span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

    <span class="n">cmap</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">cm</span><span class="o">.</span><span class="n">get_cmap</span><span class="p">(</span><span class="n">cmap_name</span><span class="p">,</span> <span class="n">n_class</span><span class="p">)</span>
    <span class="n">colors</span> <span class="o">=</span> <span class="p">[</span><span class="n">mpl</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">rgb2hex</span><span class="p">(</span><span class="n">cmap</span><span class="p">(</span><span class="n">i</span><span class="p">))[</span><span class="mi">1</span><span class="p">:]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">cmap</span><span class="o">.</span><span class="n">N</span><span class="p">)]</span>
    <span class="k">if</span> <span class="n">hashtag</span><span class="p">:</span>
        <span class="n">colors</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;#&quot;</span> <span class="o">+</span> <span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">colors</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">colors</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.get_wms_layers" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_wms_layers</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">return_titles</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>


<a href="#geemap.common.get_wms_layers" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Returns a list of WMS layers from a WMS service.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>url</code></td>
        <td><code>str</code></td>
        <td><p>The URL of the WMS service.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>return_titles</code></td>
        <td><code>bool</code></td>
        <td><p>If True, the titles of the layers will be returned. Defaults to False.</p></td>
        <td><code>False</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>list</code></td>
      <td><p>A list of WMS layers.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_wms_layers</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">return_titles</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Returns a list of WMS layers from a WMS service.</span>

<span class="sd">    Args:</span>
<span class="sd">        url (str): The URL of the WMS service.</span>
<span class="sd">        return_titles (bool, optional): If True, the titles of the layers will be returned. Defaults to False.</span>

<span class="sd">    Returns:</span>
<span class="sd">        list: A list of WMS layers.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span> <span class="nn">owslib.wms</span> <span class="kn">import</span> <span class="n">WebMapService</span>

    <span class="n">wms</span> <span class="o">=</span> <span class="n">WebMapService</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
    <span class="n">layers</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">wms</span><span class="o">.</span><span class="n">contents</span><span class="p">)</span>
    <span class="n">layers</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">return_titles</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">layers</span><span class="p">,</span> <span class="p">[</span><span class="n">wms</span><span class="p">[</span><span class="n">layer</span><span class="p">]</span><span class="o">.</span><span class="n">title</span> <span class="k">for</span> <span class="n">layer</span> <span class="ow">in</span> <span class="n">layers</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">layers</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.github_raw_url" class="doc doc-heading">
<code class="highlight language-python"><span class="n">github_raw_url</span><span class="p">(</span><span class="n">url</span><span class="p">)</span></code>


<a href="#geemap.common.github_raw_url" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Get the raw URL for a GitHub file.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>url</code></td>
        <td><code>str</code></td>
        <td><p>The GitHub URL.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>str</code></td>
      <td><p>The raw URL.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">github_raw_url</span><span class="p">(</span><span class="n">url</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get the raw URL for a GitHub file.</span>

<span class="sd">    Args:</span>
<span class="sd">        url (str): The GitHub URL.</span>
<span class="sd">    Returns:</span>
<span class="sd">        str: The raw URL.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="n">url</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;https://github.com/&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="s2">&quot;blob&quot;</span> <span class="ow">in</span> <span class="n">url</span><span class="p">:</span>
        <span class="n">url</span> <span class="o">=</span> <span class="n">url</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;github.com&quot;</span><span class="p">,</span> <span class="s2">&quot;raw.githubusercontent.com&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span>
            <span class="s2">&quot;blob/&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="mi">1</span>
        <span class="p">)</span>
    <span class="k">return</span> <span class="n">url</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.has_transparency" class="doc doc-heading">
<code class="highlight language-python"><span class="n">has_transparency</span><span class="p">(</span><span class="n">img</span><span class="p">)</span></code>


<a href="#geemap.common.has_transparency" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Checks whether an image has transparency.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>img</code></td>
        <td><code>object</code></td>
        <td><p>a PIL Image object.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>bool</code></td>
      <td><p>True if it has transparency, False otherwise.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">has_transparency</span><span class="p">(</span><span class="n">img</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Checks whether an image has transparency.</span>

<span class="sd">    Args:</span>
<span class="sd">        img (object):  a PIL Image object.</span>

<span class="sd">    Returns:</span>
<span class="sd">        bool: True if it has transparency, False otherwise.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">img</span><span class="o">.</span><span class="n">mode</span> <span class="o">==</span> <span class="s2">&quot;P&quot;</span><span class="p">:</span>
        <span class="n">transparent</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">info</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;transparency&quot;</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">index</span> <span class="ow">in</span> <span class="n">img</span><span class="o">.</span><span class="n">getcolors</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">index</span> <span class="o">==</span> <span class="n">transparent</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">True</span>
    <span class="k">elif</span> <span class="n">img</span><span class="o">.</span><span class="n">mode</span> <span class="o">==</span> <span class="s2">&quot;RGBA&quot;</span><span class="p">:</span>
        <span class="n">extrema</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">getextrema</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">extrema</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">255</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>

    <span class="k">return</span> <span class="kc">False</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.hex_to_rgb" class="doc doc-heading">
<code class="highlight language-python"><span class="n">hex_to_rgb</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="s1">&#39;FFFFFF&#39;</span><span class="p">)</span></code>


<a href="#geemap.common.hex_to_rgb" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Converts hex color to RGB color.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>value</code></td>
        <td><code>str</code></td>
        <td><p>Hex color code as a string. Defaults to 'FFFFFF'.</p></td>
        <td><code>&#39;FFFFFF&#39;</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>tuple</code></td>
      <td><p>RGB color as a tuple.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">hex_to_rgb</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="s2">&quot;FFFFFF&quot;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Converts hex color to RGB color.</span>

<span class="sd">    Args:</span>
<span class="sd">        value (str, optional): Hex color code as a string. Defaults to &#39;FFFFFF&#39;.</span>

<span class="sd">    Returns:</span>
<span class="sd">        tuple: RGB color as a tuple.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">lstrip</span><span class="p">(</span><span class="s2">&quot;#&quot;</span><span class="p">)</span>
    <span class="n">lv</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">value</span><span class="p">[</span><span class="n">i</span> <span class="p">:</span> <span class="n">i</span> <span class="o">+</span> <span class="n">lv</span> <span class="o">//</span> <span class="mi">3</span><span class="p">],</span> <span class="mi">16</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">lv</span><span class="p">,</span> <span class="n">lv</span> <span class="o">//</span> <span class="mi">3</span><span class="p">))</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.html_to_streamlit" class="doc doc-heading">
<code class="highlight language-python"><span class="n">html_to_streamlit</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">scrolling</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">replace_dict</span><span class="o">=</span><span class="p">{})</span></code>


<a href="#geemap.common.html_to_streamlit" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Renders an HTML file as a Streamlit component.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>filename</code></td>
        <td><code>str</code></td>
        <td><p>The filename of the HTML file.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>width</code></td>
        <td><code>int</code></td>
        <td><p>Width of the map. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>height</code></td>
        <td><code>int</code></td>
        <td><p>Height of the map. Defaults to 600.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>scrolling</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to allow the map to scroll. Defaults to False.</p></td>
        <td><code>False</code></td>
      </tr>
      <tr>
        <td><code>replace_dict</code></td>
        <td><code>dict</code></td>
        <td><p>A dictionary of strings to replace in the HTML file. Defaults to {}.</p></td>
        <td><code>{}</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>ValueError</code></td>
        <td><p>If the filename does not exist.</p></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>streamlit.components</code></td>
      <td><p>components.html object.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">html_to_streamlit</span><span class="p">(</span>
    <span class="n">filename</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">scrolling</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">replace_dict</span><span class="o">=</span><span class="p">{}</span>
<span class="p">):</span>

    <span class="sd">&quot;&quot;&quot;Renders an HTML file as a Streamlit component.</span>
<span class="sd">    Args:</span>
<span class="sd">        filename (str): The filename of the HTML file.</span>
<span class="sd">        width (int, optional): Width of the map. Defaults to None.</span>
<span class="sd">        height (int, optional): Height of the map. Defaults to 600.</span>
<span class="sd">        scrolling (bool, optional): Whether to allow the map to scroll. Defaults to False.</span>
<span class="sd">        replace_dict (dict, optional): A dictionary of strings to replace in the HTML file. Defaults to {}.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If the filename does not exist.</span>

<span class="sd">    Returns:</span>
<span class="sd">        streamlit.components: components.html object.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="kn">import</span> <span class="nn">streamlit.components.v1</span> <span class="k">as</span> <span class="nn">components</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;filename must exist.&quot;</span><span class="p">)</span>

    <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span>

    <span class="n">html</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>

    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">replace_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">html</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">components</span><span class="o">.</span><span class="n">html</span><span class="p">(</span><span class="n">html</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="n">height</span><span class="p">,</span> <span class="n">scrolling</span><span class="o">=</span><span class="n">scrolling</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.image_area" class="doc doc-heading">
<code class="highlight language-python"><span class="n">image_area</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">region</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">denominator</span><span class="o">=</span><span class="mf">1.0</span><span class="p">)</span></code>


<a href="#geemap.common.image_area" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Calculates the area of an image.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>img</code></td>
        <td><code>object</code></td>
        <td><p>ee.Image</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>region</code></td>
        <td><code>object</code></td>
        <td><p>The region over which to reduce data. Defaults to the footprint of the image's first band.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>scale</code></td>
        <td><code>float</code></td>
        <td><p>A nominal scale in meters of the projection to work in. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>denominator</code></td>
        <td><code>float</code></td>
        <td><p>The denominator to use for converting size from square meters to other units. Defaults to 1.0.</p></td>
        <td><code>1.0</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>object</code></td>
      <td><p>ee.Dictionary</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">image_area</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">region</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">denominator</span><span class="o">=</span><span class="mf">1.0</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Calculates the area of an image.</span>

<span class="sd">    Args:</span>
<span class="sd">        img (object): ee.Image</span>
<span class="sd">        region (object, optional): The region over which to reduce data. Defaults to the footprint of the image&#39;s first band.</span>
<span class="sd">        scale (float, optional): A nominal scale in meters of the projection to work in. Defaults to None.</span>
<span class="sd">        denominator (float, optional): The denominator to use for converting size from square meters to other units. Defaults to 1.0.</span>

<span class="sd">    Returns:</span>
<span class="sd">        object: ee.Dictionary</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">region</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">region</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">geometry</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">scale</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">scale</span> <span class="o">=</span> <span class="n">image_scale</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>

    <span class="n">pixel_area</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">img</span><span class="o">.</span><span class="n">unmask</span><span class="p">()</span><span class="o">.</span><span class="n">neq</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span><span class="o">.</span><span class="n">multiply</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="o">.</span><span class="n">pixelArea</span><span class="p">())</span><span class="o">.</span><span class="n">divide</span><span class="p">(</span><span class="n">denominator</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="n">img_area</span> <span class="o">=</span> <span class="n">pixel_area</span><span class="o">.</span><span class="n">reduceRegion</span><span class="p">(</span>
        <span class="o">**</span><span class="p">{</span>
            <span class="s2">&quot;geometry&quot;</span><span class="p">:</span> <span class="n">region</span><span class="p">,</span>
            <span class="s2">&quot;reducer&quot;</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">sum</span><span class="p">(),</span>
            <span class="s2">&quot;scale&quot;</span><span class="p">:</span> <span class="n">scale</span><span class="p">,</span>
            <span class="s2">&quot;maxPixels&quot;</span><span class="p">:</span> <span class="mf">1e12</span><span class="p">,</span>
        <span class="p">}</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">img_area</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.image_area_by_group" class="doc doc-heading">
<code class="highlight language-python"><span class="n">image_area_by_group</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">groups</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">region</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">denominator</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">out_csv</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">labels</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">decimal_places</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>


<a href="#geemap.common.image_area_by_group" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Calculates the area of each class of an image.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>img</code></td>
        <td><code>object</code></td>
        <td><p>ee.Image</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>groups</code></td>
        <td><code>object</code></td>
        <td><p>The groups to use for the area calculation. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>region</code></td>
        <td><code>object</code></td>
        <td><p>The region over which to reduce data. Defaults to the footprint of the image's first band.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>scale</code></td>
        <td><code>float</code></td>
        <td><p>A nominal scale in meters of the projection to work in. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>denominator</code></td>
        <td><code>float</code></td>
        <td><p>The denominator to use for converting size from square meters to other units. Defaults to 1.0.</p></td>
        <td><code>1.0</code></td>
      </tr>
      <tr>
        <td><code>out_csv</code></td>
        <td><code>str</code></td>
        <td><p>The path to the output CSV file. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>labels</code></td>
        <td><code>object</code></td>
        <td><p>The class labels to use in the output CSV file. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>decimal_places</code></td>
        <td><code>int</code></td>
        <td><p>The number of decimal places to use for the output. Defaults to 2.</p></td>
        <td><code>4</code></td>
      </tr>
      <tr>
        <td><code>verbose</code></td>
        <td><code>bool</code></td>
        <td><p>If True, print the progress. Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>object</code></td>
      <td><p>pandas.DataFrame</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">image_area_by_group</span><span class="p">(</span>
    <span class="n">img</span><span class="p">,</span>
    <span class="n">groups</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">region</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">denominator</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
    <span class="n">out_csv</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">labels</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">decimal_places</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span>
    <span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Calculates the area of each class of an image.</span>

<span class="sd">    Args:</span>
<span class="sd">        img (object): ee.Image</span>
<span class="sd">        groups (object, optional): The groups to use for the area calculation. Defaults to None.</span>
<span class="sd">        region (object, optional): The region over which to reduce data. Defaults to the footprint of the image&#39;s first band.</span>
<span class="sd">        scale (float, optional): A nominal scale in meters of the projection to work in. Defaults to None.</span>
<span class="sd">        denominator (float, optional): The denominator to use for converting size from square meters to other units. Defaults to 1.0.</span>
<span class="sd">        out_csv (str, optional): The path to the output CSV file. Defaults to None.</span>
<span class="sd">        labels (object, optional): The class labels to use in the output CSV file. Defaults to None.</span>
<span class="sd">        decimal_places (int, optional): The number of decimal places to use for the output. Defaults to 2.</span>
<span class="sd">        verbose (bool, optional): If True, print the progress. Defaults to True.</span>

<span class="sd">    Returns:</span>
<span class="sd">        object: pandas.DataFrame</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

    <span class="n">values</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="n">region</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">region</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Geometry</span><span class="o">.</span><span class="n">BBox</span><span class="p">(</span><span class="o">-</span><span class="mf">179.9</span><span class="p">,</span> <span class="o">-</span><span class="mf">89.5</span><span class="p">,</span> <span class="mf">179.9</span><span class="p">,</span> <span class="mf">89.5</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">groups</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">groups</span> <span class="o">=</span> <span class="n">image_value_list</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">region</span><span class="p">,</span> <span class="n">scale</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">groups</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
        <span class="n">groups</span> <span class="o">=</span> <span class="n">groups</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()</span>

    <span class="n">groups</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="nb">int</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">group</span> <span class="ow">in</span> <span class="n">groups</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">verbose</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Calculating area for group </span><span class="si">{</span><span class="n">group</span><span class="si">}</span><span class="s2"> ...&quot;</span><span class="p">)</span>
        <span class="n">area</span> <span class="o">=</span> <span class="n">image_area</span><span class="p">(</span><span class="n">img</span><span class="o">.</span><span class="n">eq</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">group</span><span class="p">)),</span> <span class="n">region</span><span class="p">,</span> <span class="n">scale</span><span class="p">,</span> <span class="n">denominator</span><span class="p">)</span>
        <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">area</span><span class="o">.</span><span class="n">values</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">getInfo</span><span class="p">())</span>

    <span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;group&quot;</span><span class="p">:</span> <span class="n">groups</span><span class="p">,</span> <span class="s2">&quot;area&quot;</span><span class="p">:</span> <span class="n">values</span><span class="p">}</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">d</span><span class="p">)</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">&quot;group&quot;</span><span class="p">)</span>
    <span class="n">df</span><span class="p">[</span><span class="s2">&quot;percentage&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;area&quot;</span><span class="p">]</span> <span class="o">/</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;area&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">decimal_places</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">labels</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">labels</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">values</span><span class="p">):</span>
        <span class="n">df</span><span class="p">[</span><span class="s2">&quot;labels&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">labels</span>

    <span class="k">if</span> <span class="n">out_csv</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">df</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">out_csv</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">df</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.image_band_names" class="doc doc-heading">
<code class="highlight language-python"><span class="n">image_band_names</span><span class="p">(</span><span class="n">img</span><span class="p">)</span></code>


<a href="#geemap.common.image_band_names" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Gets image band names.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>img</code></td>
        <td><code>ee.Image</code></td>
        <td><p>The input image.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>ee.List</code></td>
      <td><p>The returned list of image band names.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">image_band_names</span><span class="p">(</span><span class="n">img</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Gets image band names.</span>

<span class="sd">    Args:</span>
<span class="sd">        img (ee.Image): The input image.</span>

<span class="sd">    Returns:</span>
<span class="sd">        ee.List: The returned list of image band names.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">img</span><span class="o">.</span><span class="n">bandNames</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.image_cell_size" class="doc doc-heading">
<code class="highlight language-python"><span class="n">image_cell_size</span><span class="p">(</span><span class="n">img</span><span class="p">)</span></code>


<a href="#geemap.common.image_cell_size" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Retrieves the image cell size (e.g., spatial resolution)</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>img</code></td>
        <td><code>object</code></td>
        <td><p>ee.Image</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>float</code></td>
      <td><p>The nominal scale in meters.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">image_cell_size</span><span class="p">(</span><span class="n">img</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Retrieves the image cell size (e.g., spatial resolution)</span>

<span class="sd">    Args:</span>
<span class="sd">        img (object): ee.Image</span>

<span class="sd">    Returns:</span>
<span class="sd">        float: The nominal scale in meters.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">bands</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">bandNames</span><span class="p">()</span>
    <span class="n">scales</span> <span class="o">=</span> <span class="n">bands</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">b</span><span class="p">:</span> <span class="n">img</span><span class="o">.</span><span class="n">select</span><span class="p">([</span><span class="n">b</span><span class="p">])</span><span class="o">.</span><span class="n">projection</span><span class="p">()</span><span class="o">.</span><span class="n">nominalScale</span><span class="p">())</span>
    <span class="n">scale</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Algorithms</span><span class="o">.</span><span class="n">If</span><span class="p">(</span>
        <span class="n">scales</span><span class="o">.</span><span class="n">distinct</span><span class="p">()</span><span class="o">.</span><span class="n">size</span><span class="p">()</span><span class="o">.</span><span class="n">gt</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span>
        <span class="n">ee</span><span class="o">.</span><span class="n">Dictionary</span><span class="o">.</span><span class="n">fromLists</span><span class="p">(</span><span class="n">bands</span><span class="o">.</span><span class="n">getInfo</span><span class="p">(),</span> <span class="n">scales</span><span class="p">),</span>
        <span class="n">scales</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">scale</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.image_convolution" class="doc doc-heading">
<code class="highlight language-python"><span class="n">image_convolution</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">kernel</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">resample</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">projection</span><span class="o">=</span><span class="s1">&#39;EPSG:3857&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.common.image_convolution" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Performs a convolution on an image.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>image</code></td>
        <td><code>ee.Image | ee.ImageCollection</code></td>
        <td><p>The image to convolve.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>kernel</code></td>
        <td><code>ee.Kernel</code></td>
        <td><p>The kernel to convolve with. Defaults to None, a 7x7 gaussian kernel.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>resample</code></td>
        <td><code>str</code></td>
        <td><p>The resample method to use. It can be either 'bilinear' or 'bicubic'". Defaults to None, which uses the image's resample method.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>projection</code></td>
        <td><code>str</code></td>
        <td><p>The projection to use. Defaults to 'EPSG:3857'.</p></td>
        <td><code>&#39;EPSG:3857&#39;</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>ee.Image</code></td>
      <td><p>The convolved image.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">image_convolution</span><span class="p">(</span>
    <span class="n">image</span><span class="p">,</span> <span class="n">kernel</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">resample</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">projection</span><span class="o">=</span><span class="s2">&quot;EPSG:3857&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Performs a convolution on an image.</span>

<span class="sd">    Args:</span>
<span class="sd">        image (ee.Image | ee.ImageCollection): The image to convolve.</span>
<span class="sd">        kernel (ee.Kernel, optional): The kernel to convolve with. Defaults to None, a 7x7 gaussian kernel.</span>
<span class="sd">        resample (str, optional): The resample method to use. It can be either &#39;bilinear&#39; or &#39;bicubic&#39;&quot;. Defaults to None, which uses the image&#39;s resample method.</span>
<span class="sd">        projection (str, optional): The projection to use. Defaults to &#39;EPSG:3857&#39;.</span>

<span class="sd">    Returns:</span>
<span class="sd">        ee.Image: The convolved image.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">):</span>
        <span class="n">image</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">mosaic</span><span class="p">()</span>
    <span class="k">elif</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;image must be an ee.Image or ee.ImageCollection.&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">kernel</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">kernel</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Kernel</span><span class="o">.</span><span class="n">gaussian</span><span class="p">(</span><span class="n">radius</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">sigma</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s2">&quot;pixels&quot;</span><span class="p">,</span> <span class="n">normalize</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">elif</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">kernel</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Kernel</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;kernel must be an ee.Kernel.&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">resample</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">resample</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;bilinear&quot;</span><span class="p">,</span> <span class="s2">&quot;bicubic&quot;</span><span class="p">]:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;resample must be one of &#39;bilinear&#39; or &#39;bicubic&#39;&quot;</span><span class="p">)</span>

    <span class="n">result</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">convolve</span><span class="p">(</span><span class="n">kernel</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">resample</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="n">resample</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">result</span><span class="o">.</span><span class="n">setDefaultProjection</span><span class="p">(</span><span class="n">projection</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.image_count" class="doc doc-heading">
<code class="highlight language-python"><span class="n">image_count</span><span class="p">(</span><span class="n">collection</span><span class="p">,</span> <span class="n">region</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">band</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">start_date</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">end_date</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">clip</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>


<a href="#geemap.common.image_count" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Create an image with the number of available images for a specific region.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>collection</code></td>
        <td><code>ee.ImageCollection</code></td>
        <td><p>The collection to be queried.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>region</code></td>
        <td><code>ee.Geometry | ee.FeatureCollection</code></td>
        <td><p>The region to be queried.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>start_date</code></td>
        <td><code>str | ee.Date</code></td>
        <td><p>The start date of the query.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>band</code></td>
        <td><code>str</code></td>
        <td><p>The band to be queried.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>end_date</code></td>
        <td><code>str | ee.Date</code></td>
        <td><p>The end date of the query.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>clip</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to clip the image to the region.</p></td>
        <td><code>False</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>ee.Image</code></td>
      <td><p>The image with each pixel value representing the number of available images.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">image_count</span><span class="p">(</span>
    <span class="n">collection</span><span class="p">,</span> <span class="n">region</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">band</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">start_date</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">end_date</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">clip</span><span class="o">=</span><span class="kc">False</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Create an image with the number of available images for a specific region.</span>
<span class="sd">    Args:</span>
<span class="sd">        collection (ee.ImageCollection): The collection to be queried.</span>
<span class="sd">        region (ee.Geometry | ee.FeatureCollection, optional): The region to be queried.</span>
<span class="sd">        start_date (str | ee.Date, optional): The start date of the query.</span>
<span class="sd">        band (str, optional): The band to be queried.</span>
<span class="sd">        end_date (str | ee.Date, optional): The end date of the query.</span>
<span class="sd">        clip (bool, optional): Whether to clip the image to the region.</span>

<span class="sd">    Returns:</span>
<span class="sd">        ee.Image: The image with each pixel value representing the number of available images.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">collection</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;collection must be an ee.ImageCollection.&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">region</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">region</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Geometry</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">region</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">):</span>
            <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;region must be an ee.Geometry or ee.FeatureCollection.&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">start_date</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">end_date</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">):</span>
        <span class="k">pass</span>
    <span class="k">elif</span> <span class="p">(</span><span class="n">start_date</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">end_date</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
        <span class="k">pass</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;start_date and end_date must be provided.&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">band</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">first_image</span> <span class="o">=</span> <span class="n">collection</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
        <span class="n">band</span> <span class="o">=</span> <span class="n">first_image</span><span class="o">.</span><span class="n">bandNames</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">region</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">collection</span> <span class="o">=</span> <span class="n">collection</span><span class="o">.</span><span class="n">filterBounds</span><span class="p">(</span><span class="n">region</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">start_date</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">end_date</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">collection</span> <span class="o">=</span> <span class="n">collection</span><span class="o">.</span><span class="n">filterDate</span><span class="p">(</span><span class="n">start_date</span><span class="p">,</span> <span class="n">end_date</span><span class="p">)</span>

    <span class="n">image</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">collection</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">Filter</span><span class="o">.</span><span class="n">listContains</span><span class="p">(</span><span class="s2">&quot;system:band_names&quot;</span><span class="p">,</span> <span class="n">band</span><span class="p">))</span>
        <span class="o">.</span><span class="n">select</span><span class="p">([</span><span class="n">band</span><span class="p">])</span>
        <span class="o">.</span><span class="n">reduce</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">count</span><span class="p">())</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">clip</span><span class="p">:</span>
        <span class="n">image</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">clip</span><span class="p">(</span><span class="n">region</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">image</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.image_date" class="doc doc-heading">
<code class="highlight language-python"><span class="n">image_date</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">date_format</span><span class="o">=</span><span class="s1">&#39;YYYY-MM-dd&#39;</span><span class="p">)</span></code>


<a href="#geemap.common.image_date" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Retrieves the image acquisition date.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>img</code></td>
        <td><code>object</code></td>
        <td><p>ee.Image</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>date_format</code></td>
        <td><code>str</code></td>
        <td><p>The date format to use. Defaults to 'YYYY-MM-dd'.</p></td>
        <td><code>&#39;YYYY-MM-dd&#39;</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>str</code></td>
      <td><p>A string representing the acquisition of the image.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">image_date</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">date_format</span><span class="o">=</span><span class="s2">&quot;YYYY-MM-dd&quot;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Retrieves the image acquisition date.</span>

<span class="sd">    Args:</span>
<span class="sd">        img (object): ee.Image</span>
<span class="sd">        date_format (str, optional): The date format to use. Defaults to &#39;YYYY-MM-dd&#39;.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: A string representing the acquisition of the image.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">ee</span><span class="o">.</span><span class="n">Date</span><span class="p">(</span><span class="n">img</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;system:time_start&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">date_format</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.image_dates" class="doc doc-heading">
<code class="highlight language-python"><span class="n">image_dates</span><span class="p">(</span><span class="n">img_col</span><span class="p">,</span> <span class="n">date_format</span><span class="o">=</span><span class="s1">&#39;YYYY-MM-dd&#39;</span><span class="p">)</span></code>


<a href="#geemap.common.image_dates" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Get image dates of all images in an ImageCollection.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>img_col</code></td>
        <td><code>object</code></td>
        <td><p>ee.ImageCollection</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>date_format</code></td>
        <td><code>str</code></td>
        <td><p>A pattern, as described at http://joda-time.sourceforge.net/apidocs/org/joda/time/format/DateTimeFormat.html; if omitted will use ISO standard date formatting. Defaults to 'YYYY-MM-dd'.</p></td>
        <td><code>&#39;YYYY-MM-dd&#39;</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>object</code></td>
      <td><p>ee.List</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">image_dates</span><span class="p">(</span><span class="n">img_col</span><span class="p">,</span> <span class="n">date_format</span><span class="o">=</span><span class="s2">&quot;YYYY-MM-dd&quot;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get image dates of all images in an ImageCollection.</span>

<span class="sd">    Args:</span>
<span class="sd">        img_col (object): ee.ImageCollection</span>
<span class="sd">        date_format (str, optional): A pattern, as described at http://joda-time.sourceforge.net/apidocs/org/joda/time/format/DateTimeFormat.html; if omitted will use ISO standard date formatting. Defaults to &#39;YYYY-MM-dd&#39;.</span>

<span class="sd">    Returns:</span>
<span class="sd">        object: ee.List</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">dates</span> <span class="o">=</span> <span class="n">img_col</span><span class="o">.</span><span class="n">aggregate_array</span><span class="p">(</span><span class="s2">&quot;system:time_start&quot;</span><span class="p">)</span>
    <span class="n">new_dates</span> <span class="o">=</span> <span class="n">dates</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">d</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Date</span><span class="p">(</span><span class="n">d</span><span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">date_format</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">new_dates</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.image_histogram" class="doc doc-heading">
<code class="highlight language-python"><span class="n">image_histogram</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">region</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">x_label</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">y_label</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">plot_args</span><span class="o">=</span><span class="p">{},</span> <span class="n">layout_args</span><span class="o">=</span><span class="p">{},</span> <span class="n">return_df</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.common.image_histogram" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Create a histogram of an image.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>img</code></td>
        <td><code>ee.Image</code></td>
        <td><p>The image to calculate the histogram.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>region</code></td>
        <td><code>ee.Geometry | ee.FeatureCollection</code></td>
        <td><p>The region over which to reduce data. Defaults to the footprint of the image's first band.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>scale</code></td>
        <td><code>float</code></td>
        <td><p>A nominal scale in meters of the projection to work in. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>x_label</code></td>
        <td><code>str</code></td>
        <td><p>Label for the x axis. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>y_label</code></td>
        <td><code>str</code></td>
        <td><p>Label for the y axis. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>title</code></td>
        <td><code>str</code></td>
        <td><p>Title for the plot. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>width</code></td>
        <td><code>int</code></td>
        <td><p>Width of the plot in pixels. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>height</code></td>
        <td><code>int</code></td>
        <td><p>Height of the plot in pixels. Defaults to 500.</p></td>
        <td><code>500</code></td>
      </tr>
      <tr>
        <td><code>layout_args</code></td>
        <td><code>dict</code></td>
        <td><p>Layout arguments for the plot to be passed to fig.update_layout(),</p></td>
        <td><code>{}</code></td>
      </tr>
      <tr>
        <td><code>return_df</code></td>
        <td><code>bool</code></td>
        <td><p>If True, return a pandas dataframe. Defaults to False.</p></td>
        <td><code>False</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>pandas DataFrame | plotly figure object</code></td>
      <td><p>A dataframe or plotly figure object.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">image_histogram</span><span class="p">(</span>
    <span class="n">img</span><span class="p">,</span>
    <span class="n">region</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">x_label</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">y_label</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">title</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">width</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">height</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span>
    <span class="n">plot_args</span><span class="o">=</span><span class="p">{},</span>
    <span class="n">layout_args</span><span class="o">=</span><span class="p">{},</span>
    <span class="n">return_df</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Create a histogram of an image.</span>

<span class="sd">    Args:</span>
<span class="sd">        img (ee.Image): The image to calculate the histogram.</span>
<span class="sd">        region (ee.Geometry | ee.FeatureCollection, optional): The region over which to reduce data. Defaults to the footprint of the image&#39;s first band.</span>
<span class="sd">        scale (float, optional): A nominal scale in meters of the projection to work in. Defaults to None.</span>
<span class="sd">        x_label (str, optional): Label for the x axis. Defaults to None.</span>
<span class="sd">        y_label (str, optional): Label for the y axis. Defaults to None.</span>
<span class="sd">        title (str, optional): Title for the plot. Defaults to None.</span>
<span class="sd">        width (int, optional): Width of the plot in pixels. Defaults to None.</span>
<span class="sd">        height (int, optional): Height of the plot in pixels. Defaults to 500.</span>
<span class="sd">        layout_args (dict, optional): Layout arguments for the plot to be passed to fig.update_layout(),</span>
<span class="sd">        return_df (bool, optional): If True, return a pandas dataframe. Defaults to False.</span>

<span class="sd">    Returns:</span>
<span class="sd">        pandas DataFrame | plotly figure object: A dataframe or plotly figure object.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
    <span class="kn">import</span> <span class="nn">plotly.express</span> <span class="k">as</span> <span class="nn">px</span>

    <span class="n">hist</span> <span class="o">=</span> <span class="n">image_value_list</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">region</span><span class="p">,</span> <span class="n">scale</span><span class="p">,</span> <span class="n">return_hist</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()</span>
    <span class="n">keys</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">hist</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="nb">int</span><span class="p">)</span>
    <span class="n">values</span> <span class="o">=</span> <span class="p">[</span><span class="n">hist</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">keys</span><span class="p">]</span>

    <span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">&quot;key&quot;</span><span class="p">:</span> <span class="n">keys</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="n">values</span><span class="p">})</span>

    <span class="k">if</span> <span class="n">return_df</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">data</span>
    <span class="k">else</span><span class="p">:</span>

        <span class="n">labels</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">if</span> <span class="n">x_label</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">labels</span><span class="p">[</span><span class="s2">&quot;key&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">x_label</span>
        <span class="k">if</span> <span class="n">y_label</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">labels</span><span class="p">[</span><span class="s2">&quot;value&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">y_label</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">fig</span> <span class="o">=</span> <span class="n">px</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span>
                <span class="n">data</span><span class="p">,</span>
                <span class="n">x</span><span class="o">=</span><span class="s2">&quot;key&quot;</span><span class="p">,</span>
                <span class="n">y</span><span class="o">=</span><span class="s2">&quot;value&quot;</span><span class="p">,</span>
                <span class="n">labels</span><span class="o">=</span><span class="n">labels</span><span class="p">,</span>
                <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">,</span>
                <span class="n">width</span><span class="o">=</span><span class="n">width</span><span class="p">,</span>
                <span class="n">height</span><span class="o">=</span><span class="n">height</span><span class="p">,</span>
                <span class="o">**</span><span class="n">plot_args</span><span class="p">,</span>
            <span class="p">)</span>

            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">layout_args</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
                <span class="n">fig</span><span class="o">.</span><span class="n">update_layout</span><span class="p">(</span><span class="o">**</span><span class="n">layout_args</span><span class="p">)</span>

            <span class="k">return</span> <span class="n">fig</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.image_max_value" class="doc doc-heading">
<code class="highlight language-python"><span class="n">image_max_value</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">region</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


<a href="#geemap.common.image_max_value" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Retrieves the maximum value of an image.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>img</code></td>
        <td><code>object</code></td>
        <td><p>The image to calculate the maximum value.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>region</code></td>
        <td><code>object</code></td>
        <td><p>The region over which to reduce data. Defaults to the footprint of the image's first band.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>scale</code></td>
        <td><code>float</code></td>
        <td><p>A nominal scale in meters of the projection to work in. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>object</code></td>
      <td><p>ee.Number</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">image_max_value</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">region</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Retrieves the maximum value of an image.</span>

<span class="sd">    Args:</span>
<span class="sd">        img (object): The image to calculate the maximum value.</span>
<span class="sd">        region (object, optional): The region over which to reduce data. Defaults to the footprint of the image&#39;s first band.</span>
<span class="sd">        scale (float, optional): A nominal scale in meters of the projection to work in. Defaults to None.</span>

<span class="sd">    Returns:</span>
<span class="sd">        object: ee.Number</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">region</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">region</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">geometry</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">scale</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">scale</span> <span class="o">=</span> <span class="n">image_scale</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>

    <span class="n">max_value</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">reduceRegion</span><span class="p">(</span>
        <span class="o">**</span><span class="p">{</span>
            <span class="s2">&quot;reducer&quot;</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">max</span><span class="p">(),</span>
            <span class="s2">&quot;geometry&quot;</span><span class="p">:</span> <span class="n">region</span><span class="p">,</span>
            <span class="s2">&quot;scale&quot;</span><span class="p">:</span> <span class="n">scale</span><span class="p">,</span>
            <span class="s2">&quot;maxPixels&quot;</span><span class="p">:</span> <span class="mf">1e12</span><span class="p">,</span>
            <span class="s2">&quot;bestEffort&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
        <span class="p">}</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">max_value</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.image_mean_value" class="doc doc-heading">
<code class="highlight language-python"><span class="n">image_mean_value</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">region</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


<a href="#geemap.common.image_mean_value" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Retrieves the mean value of an image.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>img</code></td>
        <td><code>object</code></td>
        <td><p>The image to calculate the mean value.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>region</code></td>
        <td><code>object</code></td>
        <td><p>The region over which to reduce data. Defaults to the footprint of the image's first band.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>scale</code></td>
        <td><code>float</code></td>
        <td><p>A nominal scale in meters of the projection to work in. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>object</code></td>
      <td><p>ee.Number</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">image_mean_value</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">region</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Retrieves the mean value of an image.</span>

<span class="sd">    Args:</span>
<span class="sd">        img (object): The image to calculate the mean value.</span>
<span class="sd">        region (object, optional): The region over which to reduce data. Defaults to the footprint of the image&#39;s first band.</span>
<span class="sd">        scale (float, optional): A nominal scale in meters of the projection to work in. Defaults to None.</span>

<span class="sd">    Returns:</span>
<span class="sd">        object: ee.Number</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">region</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">region</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">geometry</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">scale</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">scale</span> <span class="o">=</span> <span class="n">image_scale</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>

    <span class="n">mean_value</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">reduceRegion</span><span class="p">(</span>
        <span class="o">**</span><span class="p">{</span>
            <span class="s2">&quot;reducer&quot;</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">mean</span><span class="p">(),</span>
            <span class="s2">&quot;geometry&quot;</span><span class="p">:</span> <span class="n">region</span><span class="p">,</span>
            <span class="s2">&quot;scale&quot;</span><span class="p">:</span> <span class="n">scale</span><span class="p">,</span>
            <span class="s2">&quot;maxPixels&quot;</span><span class="p">:</span> <span class="mf">1e12</span><span class="p">,</span>
            <span class="s2">&quot;bestEffort&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
        <span class="p">}</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">mean_value</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.image_min_value" class="doc doc-heading">
<code class="highlight language-python"><span class="n">image_min_value</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">region</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


<a href="#geemap.common.image_min_value" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Retrieves the minimum value of an image.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>img</code></td>
        <td><code>object</code></td>
        <td><p>The image to calculate the minimum value.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>region</code></td>
        <td><code>object</code></td>
        <td><p>The region over which to reduce data. Defaults to the footprint of the image's first band.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>scale</code></td>
        <td><code>float</code></td>
        <td><p>A nominal scale in meters of the projection to work in. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>object</code></td>
      <td><p>ee.Number</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">image_min_value</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">region</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Retrieves the minimum value of an image.</span>

<span class="sd">    Args:</span>
<span class="sd">        img (object): The image to calculate the minimum value.</span>
<span class="sd">        region (object, optional): The region over which to reduce data. Defaults to the footprint of the image&#39;s first band.</span>
<span class="sd">        scale (float, optional): A nominal scale in meters of the projection to work in. Defaults to None.</span>

<span class="sd">    Returns:</span>
<span class="sd">        object: ee.Number</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">region</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">region</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">geometry</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">scale</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">scale</span> <span class="o">=</span> <span class="n">image_scale</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>

    <span class="n">min_value</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">reduceRegion</span><span class="p">(</span>
        <span class="o">**</span><span class="p">{</span>
            <span class="s2">&quot;reducer&quot;</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span>
            <span class="s2">&quot;geometry&quot;</span><span class="p">:</span> <span class="n">region</span><span class="p">,</span>
            <span class="s2">&quot;scale&quot;</span><span class="p">:</span> <span class="n">scale</span><span class="p">,</span>
            <span class="s2">&quot;maxPixels&quot;</span><span class="p">:</span> <span class="mf">1e12</span><span class="p">,</span>
            <span class="s2">&quot;bestEffort&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
        <span class="p">}</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">min_value</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.image_props" class="doc doc-heading">
<code class="highlight language-python"><span class="n">image_props</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">date_format</span><span class="o">=</span><span class="s1">&#39;YYYY-MM-dd&#39;</span><span class="p">)</span></code>


<a href="#geemap.common.image_props" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Gets image properties.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>img</code></td>
        <td><code>ee.Image</code></td>
        <td><p>The input image.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>date_format</code></td>
        <td><code>str</code></td>
        <td><p>The output date format. Defaults to 'YYYY-MM-dd HH:mm:ss'.</p></td>
        <td><code>&#39;YYYY-MM-dd&#39;</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>dd.Dictionary</code></td>
      <td><p>The dictionary containing image properties.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">image_props</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">date_format</span><span class="o">=</span><span class="s2">&quot;YYYY-MM-dd&quot;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Gets image properties.</span>

<span class="sd">    Args:</span>
<span class="sd">        img (ee.Image): The input image.</span>
<span class="sd">        date_format (str, optional): The output date format. Defaults to &#39;YYYY-MM-dd HH:mm:ss&#39;.</span>

<span class="sd">    Returns:</span>
<span class="sd">        dd.Dictionary: The dictionary containing image properties.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The input object must be an ee.Image&quot;</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="n">keys</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">propertyNames</span><span class="p">()</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s2">&quot;system:footprint&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s2">&quot;system:bands&quot;</span><span class="p">)</span>
    <span class="n">values</span> <span class="o">=</span> <span class="n">keys</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">p</span><span class="p">:</span> <span class="n">img</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">p</span><span class="p">))</span>
    <span class="n">props</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Dictionary</span><span class="o">.</span><span class="n">fromLists</span><span class="p">(</span><span class="n">keys</span><span class="p">,</span> <span class="n">values</span><span class="p">)</span>

    <span class="n">names</span> <span class="o">=</span> <span class="n">keys</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()</span>

    <span class="n">bands</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">bandNames</span><span class="p">()</span>
    <span class="n">scales</span> <span class="o">=</span> <span class="n">bands</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">b</span><span class="p">:</span> <span class="n">img</span><span class="o">.</span><span class="n">select</span><span class="p">([</span><span class="n">b</span><span class="p">])</span><span class="o">.</span><span class="n">projection</span><span class="p">()</span><span class="o">.</span><span class="n">nominalScale</span><span class="p">())</span>
    <span class="n">scale</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Algorithms</span><span class="o">.</span><span class="n">If</span><span class="p">(</span>
        <span class="n">scales</span><span class="o">.</span><span class="n">distinct</span><span class="p">()</span><span class="o">.</span><span class="n">size</span><span class="p">()</span><span class="o">.</span><span class="n">gt</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span>
        <span class="n">ee</span><span class="o">.</span><span class="n">Dictionary</span><span class="o">.</span><span class="n">fromLists</span><span class="p">(</span><span class="n">bands</span><span class="o">.</span><span class="n">getInfo</span><span class="p">(),</span> <span class="n">scales</span><span class="p">),</span>
        <span class="n">scales</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">props</span> <span class="o">=</span> <span class="n">props</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;NOMINAL_SCALE&quot;</span><span class="p">,</span> <span class="n">scale</span><span class="p">)</span>

    <span class="k">if</span> <span class="s2">&quot;system:time_start&quot;</span> <span class="ow">in</span> <span class="n">names</span><span class="p">:</span>
        <span class="n">image_date</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Date</span><span class="p">(</span><span class="n">img</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;system:time_start&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">date_format</span><span class="p">)</span>
        <span class="n">time_start</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Date</span><span class="p">(</span><span class="n">img</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;system:time_start&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">&quot;YYYY-MM-dd HH:mm:ss&quot;</span><span class="p">)</span>
        <span class="c1"># time_end = ee.Date(img.get(&#39;system:time_end&#39;)).format(&#39;YYYY-MM-dd HH:mm:ss&#39;)</span>
        <span class="n">time_end</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Algorithms</span><span class="o">.</span><span class="n">If</span><span class="p">(</span>
            <span class="n">ee</span><span class="o">.</span><span class="n">List</span><span class="p">(</span><span class="n">img</span><span class="o">.</span><span class="n">propertyNames</span><span class="p">())</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s2">&quot;system:time_end&quot;</span><span class="p">),</span>
            <span class="n">ee</span><span class="o">.</span><span class="n">Date</span><span class="p">(</span><span class="n">img</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;system:time_end&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">&quot;YYYY-MM-dd HH:mm:ss&quot;</span><span class="p">),</span>
            <span class="n">time_start</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">props</span> <span class="o">=</span> <span class="n">props</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;system:time_start&quot;</span><span class="p">,</span> <span class="n">time_start</span><span class="p">)</span>
        <span class="n">props</span> <span class="o">=</span> <span class="n">props</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;system:time_end&quot;</span><span class="p">,</span> <span class="n">time_end</span><span class="p">)</span>
        <span class="n">props</span> <span class="o">=</span> <span class="n">props</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;IMAGE_DATE&quot;</span><span class="p">,</span> <span class="n">image_date</span><span class="p">)</span>

    <span class="k">if</span> <span class="s2">&quot;system:asset_size&quot;</span> <span class="ow">in</span> <span class="n">names</span><span class="p">:</span>
        <span class="n">asset_size</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">ee</span><span class="o">.</span><span class="n">Number</span><span class="p">(</span><span class="n">img</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;system:asset_size&quot;</span><span class="p">))</span>
            <span class="o">.</span><span class="n">divide</span><span class="p">(</span><span class="mf">1e6</span><span class="p">)</span>
            <span class="o">.</span><span class="n">format</span><span class="p">()</span>
            <span class="o">.</span><span class="n">cat</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="s2">&quot; MB&quot;</span><span class="p">))</span>
        <span class="p">)</span>

        <span class="n">props</span> <span class="o">=</span> <span class="n">props</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;system:asset_size&quot;</span><span class="p">,</span> <span class="n">asset_size</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">props</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.image_reclassify" class="doc doc-heading">
<code class="highlight language-python"><span class="n">image_reclassify</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">in_list</span><span class="p">,</span> <span class="n">out_list</span><span class="p">)</span></code>


<a href="#geemap.common.image_reclassify" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Reclassify an image.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>img</code></td>
        <td><code>object</code></td>
        <td><p>The image to which the remapping is applied.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>in_list</code></td>
        <td><code>list</code></td>
        <td><p>The source values (numbers or EEArrays). All values in this list will be mapped to the corresponding value in 'out_list'.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>out_list</code></td>
        <td><code>list</code></td>
        <td><p>The destination values (numbers or EEArrays). These are used to replace the corresponding values in 'from'. Must have the same number of values as 'in_list'.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>object</code></td>
      <td><p>ee.Image</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">image_reclassify</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">in_list</span><span class="p">,</span> <span class="n">out_list</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Reclassify an image.</span>

<span class="sd">    Args:</span>
<span class="sd">        img (object): The image to which the remapping is applied.</span>
<span class="sd">        in_list (list): The source values (numbers or EEArrays). All values in this list will be mapped to the corresponding value in &#39;out_list&#39;.</span>
<span class="sd">        out_list (list): The destination values (numbers or EEArrays). These are used to replace the corresponding values in &#39;from&#39;. Must have the same number of values as &#39;in_list&#39;.</span>

<span class="sd">    Returns:</span>
<span class="sd">        object: ee.Image</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">image</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">remap</span><span class="p">(</span><span class="n">in_list</span><span class="p">,</span> <span class="n">out_list</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">image</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.image_scale" class="doc doc-heading">
<code class="highlight language-python"><span class="n">image_scale</span><span class="p">(</span><span class="n">img</span><span class="p">)</span></code>


<a href="#geemap.common.image_scale" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Retrieves the image cell size (e.g., spatial resolution)</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>img</code></td>
        <td><code>object</code></td>
        <td><p>ee.Image</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>float</code></td>
      <td><p>The nominal scale in meters.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">image_scale</span><span class="p">(</span><span class="n">img</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Retrieves the image cell size (e.g., spatial resolution)</span>

<span class="sd">    Args:</span>
<span class="sd">        img (object): ee.Image</span>

<span class="sd">    Returns:</span>
<span class="sd">        float: The nominal scale in meters.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># bands = img.bandNames()</span>
    <span class="c1"># scales = bands.map(lambda b: img.select([b]).projection().nominalScale())</span>
    <span class="c1"># scale = ee.Algorithms.If(scales.distinct().size().gt(1), ee.Dictionary.fromLists(bands.getInfo(), scales), scales.get(0))</span>
    <span class="k">return</span> <span class="n">img</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">projection</span><span class="p">()</span><span class="o">.</span><span class="n">nominalScale</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.image_smoothing" class="doc doc-heading">
<code class="highlight language-python"><span class="n">image_smoothing</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">reducer</span><span class="p">,</span> <span class="n">kernel</span><span class="p">)</span></code>


<a href="#geemap.common.image_smoothing" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Smooths an image.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>img</code></td>
        <td><code>object</code></td>
        <td><p>The image to be smoothed.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>reducer</code></td>
        <td><code>object</code></td>
        <td><p>ee.Reducer</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>kernel</code></td>
        <td><code>object</code></td>
        <td><p>ee.Kernel</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>object</code></td>
      <td><p>ee.Image</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">image_smoothing</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">reducer</span><span class="p">,</span> <span class="n">kernel</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Smooths an image.</span>

<span class="sd">    Args:</span>
<span class="sd">        img (object): The image to be smoothed.</span>
<span class="sd">        reducer (object): ee.Reducer</span>
<span class="sd">        kernel (object): ee.Kernel</span>

<span class="sd">    Returns:</span>
<span class="sd">        object: ee.Image</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">image</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">reduceNeighborhood</span><span class="p">(</span>
        <span class="o">**</span><span class="p">{</span>
            <span class="s2">&quot;reducer&quot;</span><span class="p">:</span> <span class="n">reducer</span><span class="p">,</span>
            <span class="s2">&quot;kernel&quot;</span><span class="p">:</span> <span class="n">kernel</span><span class="p">,</span>
        <span class="p">}</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">image</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.image_stats" class="doc doc-heading">
<code class="highlight language-python"><span class="n">image_stats</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">region</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


<a href="#geemap.common.image_stats" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Gets image descriptive statistics.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>img</code></td>
        <td><code>ee.Image</code></td>
        <td><p>The input image to calculate descriptive statistics.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>region</code></td>
        <td><code>object</code></td>
        <td><p>The region over which to reduce data. Defaults to the footprint of the image's first band.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>scale</code></td>
        <td><code>float</code></td>
        <td><p>A nominal scale in meters of the projection to work in. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>ee.Dictionary</code></td>
      <td><p>A dictionary containing the description statistics of the input image.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">image_stats</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">region</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Gets image descriptive statistics.</span>

<span class="sd">    Args:</span>
<span class="sd">        img (ee.Image): The input image to calculate descriptive statistics.</span>
<span class="sd">        region (object, optional): The region over which to reduce data. Defaults to the footprint of the image&#39;s first band.</span>
<span class="sd">        scale (float, optional): A nominal scale in meters of the projection to work in. Defaults to None.</span>

<span class="sd">    Returns:</span>
<span class="sd">        ee.Dictionary: A dictionary containing the description statistics of the input image.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The input object must be an ee.Image&quot;</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="n">stat_types</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;min&quot;</span><span class="p">,</span> <span class="s2">&quot;max&quot;</span><span class="p">,</span> <span class="s2">&quot;mean&quot;</span><span class="p">,</span> <span class="s2">&quot;std&quot;</span><span class="p">,</span> <span class="s2">&quot;sum&quot;</span><span class="p">]</span>

    <span class="n">image_min</span> <span class="o">=</span> <span class="n">image_min_value</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">region</span><span class="p">,</span> <span class="n">scale</span><span class="p">)</span>
    <span class="n">image_max</span> <span class="o">=</span> <span class="n">image_max_value</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">region</span><span class="p">,</span> <span class="n">scale</span><span class="p">)</span>
    <span class="n">image_mean</span> <span class="o">=</span> <span class="n">image_mean_value</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">region</span><span class="p">,</span> <span class="n">scale</span><span class="p">)</span>
    <span class="n">image_std</span> <span class="o">=</span> <span class="n">image_std_value</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">region</span><span class="p">,</span> <span class="n">scale</span><span class="p">)</span>
    <span class="n">image_sum</span> <span class="o">=</span> <span class="n">image_sum_value</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">region</span><span class="p">,</span> <span class="n">scale</span><span class="p">)</span>

    <span class="n">stat_results</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">List</span><span class="p">([</span><span class="n">image_min</span><span class="p">,</span> <span class="n">image_max</span><span class="p">,</span> <span class="n">image_mean</span><span class="p">,</span> <span class="n">image_std</span><span class="p">,</span> <span class="n">image_sum</span><span class="p">])</span>

    <span class="n">stats</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Dictionary</span><span class="o">.</span><span class="n">fromLists</span><span class="p">(</span><span class="n">stat_types</span><span class="p">,</span> <span class="n">stat_results</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">stats</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.image_stats_by_zone" class="doc doc-heading">
<code class="highlight language-python"><span class="n">image_stats_by_zone</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">zones</span><span class="p">,</span> <span class="n">out_csv</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">labels</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">region</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">reducer</span><span class="o">=</span><span class="s1">&#39;MEAN&#39;</span><span class="p">,</span> <span class="n">bestEffort</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.common.image_stats_by_zone" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Calculate statistics for an image by zone.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>image</code></td>
        <td><code>ee.Image</code></td>
        <td><p>The image to calculate statistics for.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>zones</code></td>
        <td><code>ee.Image</code></td>
        <td><p>The zones to calculate statistics for.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>out_csv</code></td>
        <td><code>str</code></td>
        <td><p>The path to the output CSV file. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>labels</code></td>
        <td><code>list</code></td>
        <td><p>The list of zone labels to use for the output CSV. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>region</code></td>
        <td><code>ee.Geometry</code></td>
        <td><p>The region over which to reduce data. Defaults to the footprint of zone image.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>scale</code></td>
        <td><code>float</code></td>
        <td><p>A nominal scale in meters of the projection to work in. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>reducer</code></td>
        <td><code>str | ee.Reducer</code></td>
        <td><p>The reducer to use. It can be one of MEAN, MAXIMUM, MINIMUM, MODE, STD, MIN_MAX, SUM, VARIANCE. Defaults to MEAN.</p></td>
        <td><code>&#39;MEAN&#39;</code></td>
      </tr>
      <tr>
        <td><code>bestEffort</code></td>
        <td><code>bool</code></td>
        <td><p>If the polygon would contain too many pixels at the given scale, compute and use a larger scale which would allow the operation to succeed. Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>str | pd.DataFrame</code></td>
      <td><p>The path to the output CSV file or a pandas DataFrame.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">image_stats_by_zone</span><span class="p">(</span>
    <span class="n">image</span><span class="p">,</span>
    <span class="n">zones</span><span class="p">,</span>
    <span class="n">out_csv</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">labels</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">region</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">reducer</span><span class="o">=</span><span class="s2">&quot;MEAN&quot;</span><span class="p">,</span>
    <span class="n">bestEffort</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Calculate statistics for an image by zone.</span>

<span class="sd">    Args:</span>
<span class="sd">        image (ee.Image): The image to calculate statistics for.</span>
<span class="sd">        zones (ee.Image): The zones to calculate statistics for.</span>
<span class="sd">        out_csv (str, optional): The path to the output CSV file. Defaults to None.</span>
<span class="sd">        labels (list, optional): The list of zone labels to use for the output CSV. Defaults to None.</span>
<span class="sd">        region (ee.Geometry, optional): The region over which to reduce data. Defaults to the footprint of zone image.</span>
<span class="sd">        scale (float, optional): A nominal scale in meters of the projection to work in. Defaults to None.</span>
<span class="sd">        reducer (str | ee.Reducer, optional): The reducer to use. It can be one of MEAN, MAXIMUM, MINIMUM, MODE, STD, MIN_MAX, SUM, VARIANCE. Defaults to MEAN.</span>
<span class="sd">        bestEffort (bool, optional): If the polygon would contain too many pixels at the given scale, compute and use a larger scale which would allow the operation to succeed. Defaults to True.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str | pd.DataFrame: The path to the output CSV file or a pandas DataFrame.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

    <span class="k">if</span> <span class="n">region</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">region</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Geometry</span><span class="p">):</span>
            <span class="k">pass</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">region</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">):</span>
            <span class="n">region</span> <span class="o">=</span> <span class="n">region</span><span class="o">.</span><span class="n">geometry</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;region must be an ee.Geometry or ee.FeatureCollection&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">scale</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">scale</span> <span class="o">=</span> <span class="n">image_scale</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>

    <span class="n">allowed_stats</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;MEAN&quot;</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">mean</span><span class="p">(),</span>
        <span class="s2">&quot;MAXIMUM&quot;</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">max</span><span class="p">(),</span>
        <span class="s2">&quot;MEDIAN&quot;</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">median</span><span class="p">(),</span>
        <span class="s2">&quot;MINIMUM&quot;</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span>
        <span class="s2">&quot;MODE&quot;</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">mode</span><span class="p">(),</span>
        <span class="s2">&quot;STD&quot;</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">stdDev</span><span class="p">(),</span>
        <span class="s2">&quot;MIN_MAX&quot;</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">minMax</span><span class="p">(),</span>
        <span class="s2">&quot;SUM&quot;</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">sum</span><span class="p">(),</span>
        <span class="s2">&quot;VARIANCE&quot;</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">variance</span><span class="p">(),</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">reducer</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">reducer</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">allowed_stats</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;reducer must be one of: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">allowed_stats</span><span class="o">.</span><span class="n">keys</span><span class="p">()))</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">reducer</span> <span class="o">=</span> <span class="n">allowed_stats</span><span class="p">[</span><span class="n">reducer</span><span class="o">.</span><span class="n">upper</span><span class="p">()]</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">reducer</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="p">):</span>
        <span class="k">pass</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="s2">&quot;reducer must be one of: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">allowed_stats</span><span class="o">.</span><span class="n">keys</span><span class="p">()))</span>
        <span class="p">)</span>

    <span class="n">values</span> <span class="o">=</span> <span class="n">image_value_list</span><span class="p">(</span><span class="n">zones</span><span class="p">,</span> <span class="n">region</span><span class="o">=</span><span class="n">region</span><span class="p">)</span>
    <span class="n">values</span> <span class="o">=</span> <span class="n">values</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Number</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">get_stats</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
        <span class="n">img</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">updateMask</span><span class="p">(</span><span class="n">zones</span><span class="o">.</span><span class="n">eq</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">Number</span><span class="p">(</span><span class="n">value</span><span class="p">)))</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;reducer&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">reducer</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;scale&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">scale</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;geometry&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">region</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;bestEffort&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">bestEffort</span>
        <span class="n">stat</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">reduceRegion</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">()</span><span class="o">.</span><span class="n">set</span><span class="p">({</span><span class="s2">&quot;zone&quot;</span><span class="p">:</span> <span class="n">value</span><span class="p">})</span><span class="o">.</span><span class="n">set</span><span class="p">({</span><span class="s2">&quot;stat&quot;</span><span class="p">:</span> <span class="n">stat</span><span class="o">.</span><span class="n">values</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="mi">0</span><span class="p">)})</span>

    <span class="n">collection</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">(</span><span class="n">values</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">get_stats</span><span class="p">(</span><span class="n">x</span><span class="p">)))</span>
    <span class="n">keys</span> <span class="o">=</span> <span class="n">collection</span><span class="o">.</span><span class="n">aggregate_array</span><span class="p">(</span><span class="s2">&quot;zone&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()</span>
    <span class="n">values</span> <span class="o">=</span> <span class="n">collection</span><span class="o">.</span><span class="n">aggregate_array</span><span class="p">(</span><span class="s2">&quot;stat&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">labels</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">labels</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">labels</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">keys</span><span class="p">):</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s2">&quot;labels are not the same length as keys, ignoring labels.&quot;</span><span class="p">)</span>
            <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">&quot;zone&quot;</span><span class="p">:</span> <span class="n">keys</span><span class="p">,</span> <span class="s2">&quot;stat&quot;</span><span class="p">:</span> <span class="n">values</span><span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">&quot;zone&quot;</span><span class="p">:</span> <span class="n">keys</span><span class="p">,</span> <span class="s2">&quot;label&quot;</span><span class="p">:</span> <span class="n">labels</span><span class="p">,</span> <span class="s2">&quot;stat&quot;</span><span class="p">:</span> <span class="n">values</span><span class="p">})</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">&quot;zone&quot;</span><span class="p">:</span> <span class="n">keys</span><span class="p">,</span> <span class="s2">&quot;stat&quot;</span><span class="p">:</span> <span class="n">values</span><span class="p">})</span>

    <span class="k">if</span> <span class="n">out_csv</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">check_file_path</span><span class="p">(</span><span class="n">out_csv</span><span class="p">)</span>
        <span class="n">df</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">out_csv</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">out_csv</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">df</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.image_std_value" class="doc doc-heading">
<code class="highlight language-python"><span class="n">image_std_value</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">region</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


<a href="#geemap.common.image_std_value" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Retrieves the standard deviation of an image.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>img</code></td>
        <td><code>object</code></td>
        <td><p>The image to calculate the standard deviation.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>region</code></td>
        <td><code>object</code></td>
        <td><p>The region over which to reduce data. Defaults to the footprint of the image's first band.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>scale</code></td>
        <td><code>float</code></td>
        <td><p>A nominal scale in meters of the projection to work in. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>object</code></td>
      <td><p>ee.Number</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">image_std_value</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">region</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Retrieves the standard deviation of an image.</span>

<span class="sd">    Args:</span>
<span class="sd">        img (object): The image to calculate the standard deviation.</span>
<span class="sd">        region (object, optional): The region over which to reduce data. Defaults to the footprint of the image&#39;s first band.</span>
<span class="sd">        scale (float, optional): A nominal scale in meters of the projection to work in. Defaults to None.</span>

<span class="sd">    Returns:</span>
<span class="sd">        object: ee.Number</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">region</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">region</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">geometry</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">scale</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">scale</span> <span class="o">=</span> <span class="n">image_scale</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>

    <span class="n">std_value</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">reduceRegion</span><span class="p">(</span>
        <span class="o">**</span><span class="p">{</span>
            <span class="s2">&quot;reducer&quot;</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">stdDev</span><span class="p">(),</span>
            <span class="s2">&quot;geometry&quot;</span><span class="p">:</span> <span class="n">region</span><span class="p">,</span>
            <span class="s2">&quot;scale&quot;</span><span class="p">:</span> <span class="n">scale</span><span class="p">,</span>
            <span class="s2">&quot;maxPixels&quot;</span><span class="p">:</span> <span class="mf">1e12</span><span class="p">,</span>
            <span class="s2">&quot;bestEffort&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
        <span class="p">}</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">std_value</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.image_sum_value" class="doc doc-heading">
<code class="highlight language-python"><span class="n">image_sum_value</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">region</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


<a href="#geemap.common.image_sum_value" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Retrieves the sum of an image.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>img</code></td>
        <td><code>object</code></td>
        <td><p>The image to calculate the standard deviation.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>region</code></td>
        <td><code>object</code></td>
        <td><p>The region over which to reduce data. Defaults to the footprint of the image's first band.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>scale</code></td>
        <td><code>float</code></td>
        <td><p>A nominal scale in meters of the projection to work in. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>object</code></td>
      <td><p>ee.Number</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">image_sum_value</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">region</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Retrieves the sum of an image.</span>

<span class="sd">    Args:</span>
<span class="sd">        img (object): The image to calculate the standard deviation.</span>
<span class="sd">        region (object, optional): The region over which to reduce data. Defaults to the footprint of the image&#39;s first band.</span>
<span class="sd">        scale (float, optional): A nominal scale in meters of the projection to work in. Defaults to None.</span>

<span class="sd">    Returns:</span>
<span class="sd">        object: ee.Number</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">region</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">region</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">geometry</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">scale</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">scale</span> <span class="o">=</span> <span class="n">image_scale</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>

    <span class="n">sum_value</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">reduceRegion</span><span class="p">(</span>
        <span class="o">**</span><span class="p">{</span>
            <span class="s2">&quot;reducer&quot;</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">sum</span><span class="p">(),</span>
            <span class="s2">&quot;geometry&quot;</span><span class="p">:</span> <span class="n">region</span><span class="p">,</span>
            <span class="s2">&quot;scale&quot;</span><span class="p">:</span> <span class="n">scale</span><span class="p">,</span>
            <span class="s2">&quot;maxPixels&quot;</span><span class="p">:</span> <span class="mf">1e12</span><span class="p">,</span>
            <span class="s2">&quot;bestEffort&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
        <span class="p">}</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">sum_value</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.image_to_cog" class="doc doc-heading">
<code class="highlight language-python"><span class="n">image_to_cog</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">dst_path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">profile</span><span class="o">=</span><span class="s1">&#39;deflate&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.common.image_to_cog" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Converts an image to a COG file.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>source</code></td>
        <td><code>str</code></td>
        <td><p>A dataset path, URL or rasterio.io.DatasetReader object.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>dst_path</code></td>
        <td><code>str</code></td>
        <td><p>An output dataset path or or PathLike object. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>profile</code></td>
        <td><code>str</code></td>
        <td><p>COG profile. More at https://cogeotiff.github.io/rio-cogeo/profile. Defaults to "deflate".</p></td>
        <td><code>&#39;deflate&#39;</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>ImportError</code></td>
        <td><p>If rio-cogeo is not installed.</p></td>
      </tr>
      <tr>
        <td><code>FileNotFoundError</code></td>
        <td><p>If the source file could not be found.</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">image_to_cog</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">dst_path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">profile</span><span class="o">=</span><span class="s2">&quot;deflate&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Converts an image to a COG file.</span>

<span class="sd">    Args:</span>
<span class="sd">        source (str): A dataset path, URL or rasterio.io.DatasetReader object.</span>
<span class="sd">        dst_path (str, optional): An output dataset path or or PathLike object. Defaults to None.</span>
<span class="sd">        profile (str, optional): COG profile. More at https://cogeotiff.github.io/rio-cogeo/profile. Defaults to &quot;deflate&quot;.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ImportError: If rio-cogeo is not installed.</span>
<span class="sd">        FileNotFoundError: If the source file could not be found.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="kn">from</span> <span class="nn">rio_cogeo.cogeo</span> <span class="kn">import</span> <span class="n">cog_translate</span>
        <span class="kn">from</span> <span class="nn">rio_cogeo.profiles</span> <span class="kn">import</span> <span class="n">cog_profiles</span>

    <span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ImportError</span><span class="p">(</span>
            <span class="s2">&quot;The rio-cogeo package is not installed. Please install it with `pip install rio-cogeo` or `conda install rio-cogeo -c conda-forge`.&quot;</span>
        <span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">source</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;http&quot;</span><span class="p">):</span>
        <span class="n">source</span> <span class="o">=</span> <span class="n">check_file_path</span><span class="p">(</span><span class="n">source</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">source</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span><span class="s2">&quot;The provided input file could not be found.&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">dst_path</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">source</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;http&quot;</span><span class="p">):</span>
            <span class="n">dst_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">source</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;_cog.tif&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">dst_path</span> <span class="o">=</span> <span class="n">temp_file_path</span><span class="p">(</span><span class="n">extension</span><span class="o">=</span><span class="s2">&quot;.tif&quot;</span><span class="p">)</span>

    <span class="n">dst_path</span> <span class="o">=</span> <span class="n">check_file_path</span><span class="p">(</span><span class="n">dst_path</span><span class="p">)</span>

    <span class="n">dst_profile</span> <span class="o">=</span> <span class="n">cog_profiles</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">profile</span><span class="p">)</span>
    <span class="n">cog_translate</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">dst_path</span><span class="p">,</span> <span class="n">dst_profile</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.image_to_numpy" class="doc doc-heading">
<code class="highlight language-python"><span class="n">image_to_numpy</span><span class="p">(</span><span class="n">image</span><span class="p">)</span></code>


<a href="#geemap.common.image_to_numpy" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Converts an image to a numpy array.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>image</code></td>
        <td><code>str</code></td>
        <td><p>A dataset path, URL or rasterio.io.DatasetReader object.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>FileNotFoundError</code></td>
        <td><p>If the provided file could not be found.</p></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>np.array</code></td>
      <td><p>A numpy array.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">image_to_numpy</span><span class="p">(</span><span class="n">image</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Converts an image to a numpy array.</span>

<span class="sd">    Args:</span>
<span class="sd">        image (str): A dataset path, URL or rasterio.io.DatasetReader object.</span>

<span class="sd">    Raises:</span>
<span class="sd">        FileNotFoundError: If the provided file could not be found.</span>

<span class="sd">    Returns:</span>
<span class="sd">        np.array: A numpy array.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">rasterio</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">image</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span><span class="s2">&quot;The provided input file could not be found.&quot;</span><span class="p">)</span>

    <span class="k">with</span> <span class="n">rasterio</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">ds</span><span class="p">:</span>
        <span class="n">arr</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>  <span class="c1"># read all raster values</span>

    <span class="k">return</span> <span class="n">arr</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.image_value_list" class="doc doc-heading">
<code class="highlight language-python"><span class="n">image_value_list</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">region</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">return_hist</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.common.image_value_list" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Get the unique values of an image.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>img</code></td>
        <td><code>ee.Image</code></td>
        <td><p>The image to calculate the unique values.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>region</code></td>
        <td><code>ee.Geometry | ee.FeatureCollection</code></td>
        <td><p>The region over which to reduce data. Defaults to the footprint of the image's first band.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>scale</code></td>
        <td><code>float</code></td>
        <td><p>A nominal scale in meters of the projection to work in. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>return_hist</code></td>
        <td><code>bool</code></td>
        <td><p>If True, return a histogram of the values. Defaults to False.</p></td>
        <td><code>False</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>ee.List | ee.Dictionary</code></td>
      <td><p>A list of unique values or a dictionary containing a list of unique values and a histogram.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">image_value_list</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">region</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">return_hist</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get the unique values of an image.</span>

<span class="sd">    Args:</span>
<span class="sd">        img (ee.Image): The image to calculate the unique values.</span>
<span class="sd">        region (ee.Geometry | ee.FeatureCollection, optional): The region over which to reduce data. Defaults to the footprint of the image&#39;s first band.</span>
<span class="sd">        scale (float, optional): A nominal scale in meters of the projection to work in. Defaults to None.</span>
<span class="sd">        return_hist (bool, optional): If True, return a histogram of the values. Defaults to False.</span>

<span class="sd">    Returns:</span>
<span class="sd">        ee.List | ee.Dictionary: A list of unique values or a dictionary containing a list of unique values and a histogram.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">region</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">geom</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">geometry</span><span class="p">()</span><span class="o">.</span><span class="n">bounds</span><span class="p">()</span>
        <span class="n">region</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">([</span><span class="n">ee</span><span class="o">.</span><span class="n">Feature</span><span class="p">(</span><span class="n">geom</span><span class="p">)])</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">region</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Geometry</span><span class="p">):</span>
        <span class="n">region</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">([</span><span class="n">ee</span><span class="o">.</span><span class="n">Feature</span><span class="p">(</span><span class="n">region</span><span class="p">)])</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">region</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">):</span>
        <span class="k">pass</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;region must be an ee.Geometry or ee.FeatureCollection&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">scale</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">scale</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">projection</span><span class="p">()</span><span class="o">.</span><span class="n">nominalScale</span><span class="p">()</span><span class="o">.</span><span class="n">multiply</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>

    <span class="n">reducer</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">frequencyHistogram</span><span class="p">()</span>
    <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;scale&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">scale</span>
    <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;reducer&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">reducer</span>
    <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;collection&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">region</span>

    <span class="n">result</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">reduceRegions</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="n">hist</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Dictionary</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">first</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;histogram&quot;</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">return_hist</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">hist</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">hist</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.in_colab_shell" class="doc doc-heading">
<code class="highlight language-python"><span class="n">in_colab_shell</span><span class="p">()</span></code>


<a href="#geemap.common.in_colab_shell" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Tests if the code is being executed within Google Colab.</p>

        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">in_colab_shell</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Tests if the code is being executed within Google Colab.&quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">sys</span>

    <span class="k">if</span> <span class="s2">&quot;google.colab&quot;</span> <span class="ow">in</span> <span class="n">sys</span><span class="o">.</span><span class="n">modules</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">True</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.install_from_github" class="doc doc-heading">
<code class="highlight language-python"><span class="n">install_from_github</span><span class="p">(</span><span class="n">url</span><span class="p">)</span></code>


<a href="#geemap.common.install_from_github" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Install a package from a GitHub repository.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>url</code></td>
        <td><code>str</code></td>
        <td><p>The URL of the GitHub repository.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">install_from_github</span><span class="p">(</span><span class="n">url</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Install a package from a GitHub repository.</span>

<span class="sd">    Args:</span>
<span class="sd">        url (str): The URL of the GitHub repository.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">download_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="s2">&quot;~&quot;</span><span class="p">),</span> <span class="s2">&quot;Downloads&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">download_dir</span><span class="p">):</span>
            <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">download_dir</span><span class="p">)</span>

        <span class="n">repo_name</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
        <span class="n">zip_url</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="s2">&quot;archive/master.zip&quot;</span><span class="p">)</span>
        <span class="n">filename</span> <span class="o">=</span> <span class="n">repo_name</span> <span class="o">+</span> <span class="s2">&quot;-master.zip&quot;</span>
        <span class="n">download_from_url</span><span class="p">(</span>
            <span class="n">url</span><span class="o">=</span><span class="n">zip_url</span><span class="p">,</span> <span class="n">out_file_name</span><span class="o">=</span><span class="n">filename</span><span class="p">,</span> <span class="n">out_dir</span><span class="o">=</span><span class="n">download_dir</span><span class="p">,</span> <span class="n">unzip</span><span class="o">=</span><span class="kc">True</span>
        <span class="p">)</span>

        <span class="n">pkg_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">download_dir</span><span class="p">,</span> <span class="n">repo_name</span> <span class="o">+</span> <span class="s2">&quot;-master&quot;</span><span class="p">)</span>
        <span class="n">pkg_name</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
        <span class="n">work_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span>
        <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="n">pkg_dir</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Installing </span><span class="si">{</span><span class="n">pkg_name</span><span class="si">}</span><span class="s2">...&quot;</span><span class="p">)</span>
        <span class="n">cmd</span> <span class="o">=</span> <span class="s2">&quot;pip install .&quot;</span>
        <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="n">cmd</span><span class="p">)</span>
        <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="n">work_dir</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">pkg_name</span><span class="si">}</span><span class="s2"> has been installed successfully.&quot;</span><span class="p">)</span>
        <span class="c1"># print(&quot;\nPlease comment out &#39;install_from_github()&#39; and restart the kernel to take effect:\nJupyter menu -&gt; Kernel -&gt; Restart &amp; Clear Output&quot;)</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>




  <div class="doc doc-object doc-function">



<h2 id="geemap.common.is_arcpy" class="doc doc-heading">
<code class="highlight language-python"><span class="n">is_arcpy</span><span class="p">()</span></code>


<a href="#geemap.common.is_arcpy" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Check if arcpy is available.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>book</code></td>
      <td><p>True if arcpy is available, False otherwise.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">is_arcpy</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Check if arcpy is available.</span>

<span class="sd">    Returns:</span>
<span class="sd">        book: True if arcpy is available, False otherwise.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">sys</span>

    <span class="k">if</span> <span class="s2">&quot;arcpy&quot;</span> <span class="ow">in</span> <span class="n">sys</span><span class="o">.</span><span class="n">modules</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">True</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.is_drive_mounted" class="doc doc-heading">
<code class="highlight language-python"><span class="n">is_drive_mounted</span><span class="p">()</span></code>


<a href="#geemap.common.is_drive_mounted" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Checks whether Google Drive is mounted in Google Colab.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>bool</code></td>
      <td><p>Returns True if Google Drive is mounted, False otherwise.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">is_drive_mounted</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Checks whether Google Drive is mounted in Google Colab.</span>

<span class="sd">    Returns:</span>
<span class="sd">        bool: Returns True if Google Drive is mounted, False otherwise.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">drive_path</span> <span class="o">=</span> <span class="s2">&quot;/content/drive/My Drive&quot;</span>
    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">drive_path</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">True</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.is_latlon_valid" class="doc doc-heading">
<code class="highlight language-python"><span class="n">is_latlon_valid</span><span class="p">(</span><span class="n">location</span><span class="p">)</span></code>


<a href="#geemap.common.is_latlon_valid" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Checks whether a pair of coordinates is valid.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>location</code></td>
        <td><code>str</code></td>
        <td><p>A pair of latlon coordinates separated by comma or space.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>bool</code></td>
      <td><p>Returns True if valid.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">is_latlon_valid</span><span class="p">(</span><span class="n">location</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Checks whether a pair of coordinates is valid.</span>

<span class="sd">    Args:</span>
<span class="sd">        location (str): A pair of latlon coordinates separated by comma or space.</span>

<span class="sd">    Returns:</span>
<span class="sd">        bool: Returns True if valid.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">latlon</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="s2">&quot;,&quot;</span> <span class="ow">in</span> <span class="n">location</span><span class="p">:</span>
        <span class="n">latlon</span> <span class="o">=</span> <span class="p">[</span><span class="nb">float</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">location</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">)]</span>
    <span class="k">elif</span> <span class="s2">&quot; &quot;</span> <span class="ow">in</span> <span class="n">location</span><span class="p">:</span>
        <span class="n">latlon</span> <span class="o">=</span> <span class="p">[</span><span class="nb">float</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">location</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">)]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span>
            <span class="s2">&quot;The coordinates should be numbers only and separated by comma or space, such as 40.2, -100.3&quot;</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">lat</span><span class="p">,</span> <span class="n">lon</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">latlon</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="nb">float</span><span class="p">(</span><span class="n">latlon</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">if</span> <span class="n">lat</span> <span class="o">&gt;=</span> <span class="o">-</span><span class="mi">90</span> <span class="ow">and</span> <span class="n">lat</span> <span class="o">&lt;=</span> <span class="mi">90</span> <span class="ow">and</span> <span class="n">lon</span> <span class="o">&gt;=</span> <span class="o">-</span><span class="mi">180</span> <span class="ow">and</span> <span class="n">lon</span> <span class="o">&lt;=</span> <span class="mi">180</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">False</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.is_tool" class="doc doc-heading">
<code class="highlight language-python"><span class="n">is_tool</span><span class="p">(</span><span class="n">name</span><span class="p">)</span></code>


<a href="#geemap.common.is_tool" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Check whether <code>name</code> is on PATH and marked as executable.</p>

        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">is_tool</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Check whether `name` is on PATH and marked as executable.&quot;&quot;&quot;</span>

    <span class="c1"># from shutil import which</span>

    <span class="k">return</span> <span class="n">shutil</span><span class="o">.</span><span class="n">which</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.jrc_hist_monthly_history" class="doc doc-heading">
<code class="highlight language-python"><span class="n">jrc_hist_monthly_history</span><span class="p">(</span><span class="n">collection</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">region</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">start_date</span><span class="o">=</span><span class="s1">&#39;1984-03-16&#39;</span><span class="p">,</span> <span class="n">end_date</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">start_month</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">end_month</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">frequency</span><span class="o">=</span><span class="s1">&#39;year&#39;</span><span class="p">,</span> <span class="n">reducer</span><span class="o">=</span><span class="s1">&#39;mean&#39;</span><span class="p">,</span> <span class="n">denominator</span><span class="o">=</span><span class="mf">10000.0</span><span class="p">,</span> <span class="n">x_label</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">y_label</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">layout_args</span><span class="o">=</span><span class="p">{},</span> <span class="n">return_df</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.common.jrc_hist_monthly_history" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Create a JRC monthly history plot.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>collection</code></td>
        <td><code>ee.ImageCollection</code></td>
        <td><p>The image collection of JRC surface water monthly history.
Default to ee.ImageCollection('JRC/GSW1_3/MonthlyHistory')</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>region</code></td>
        <td><code>ee.Geometry | ee.FeatureCollection</code></td>
        <td><p>The region to plot. Default to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>start_date</code></td>
        <td><code>str</code></td>
        <td><p>The start date of the plot. Default to '1984-03-16'.</p></td>
        <td><code>&#39;1984-03-16&#39;</code></td>
      </tr>
      <tr>
        <td><code>end_date</code></td>
        <td><code>str</code></td>
        <td><p>The end date of the plot. Default to the current date.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>start_month</code></td>
        <td><code>int</code></td>
        <td><p>The start month of the plot. Default to 1.</p></td>
        <td><code>1</code></td>
      </tr>
      <tr>
        <td><code>end_month</code></td>
        <td><code>int</code></td>
        <td><p>The end month of the plot. Default to 12.</p></td>
        <td><code>12</code></td>
      </tr>
      <tr>
        <td><code>scale</code></td>
        <td><code>float</code></td>
        <td><p>The scale to compute the statistics. Default to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>frequency</code></td>
        <td><code>str</code></td>
        <td><p>The frequency of the plot. Can be either 'year' or 'month', Default to 'year'.</p></td>
        <td><code>&#39;year&#39;</code></td>
      </tr>
      <tr>
        <td><code>reducer</code></td>
        <td><code>str</code></td>
        <td><p>The reducer to compute the statistics. Can be either 'mean', 'min', 'max', 'median', etc. Default to 'mean'.</p></td>
        <td><code>&#39;mean&#39;</code></td>
      </tr>
      <tr>
        <td><code>denominator</code></td>
        <td><code>int</code></td>
        <td><p>The denominator to convert area from square meters to other units. Default to 1e4, converting to hectares.</p></td>
        <td><code>10000.0</code></td>
      </tr>
      <tr>
        <td><code>x_label</code></td>
        <td><code>str</code></td>
        <td><p>Label for the x axis. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>y_label</code></td>
        <td><code>str</code></td>
        <td><p>Label for the y axis. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>title</code></td>
        <td><code>str</code></td>
        <td><p>Title for the plot. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>width</code></td>
        <td><code>int</code></td>
        <td><p>Width of the plot in pixels. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>height</code></td>
        <td><code>int</code></td>
        <td><p>Height of the plot in pixels. Defaults to 500.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>layout_args</code></td>
        <td><code>dict</code></td>
        <td><p>Layout arguments for the plot to be passed to fig.update_layout(),</p></td>
        <td><code>{}</code></td>
      </tr>
      <tr>
        <td><code>return_df</code></td>
        <td><code>bool</code></td>
        <td><p><em>description</em>. Defaults to False.</p></td>
        <td><code>False</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>pd.DataFrame</code></td>
      <td><p>Pandas dataframe of the plot.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">jrc_hist_monthly_history</span><span class="p">(</span>
    <span class="n">collection</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">region</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">start_date</span><span class="o">=</span><span class="s2">&quot;1984-03-16&quot;</span><span class="p">,</span>
    <span class="n">end_date</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">start_month</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
    <span class="n">end_month</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span>
    <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">frequency</span><span class="o">=</span><span class="s2">&quot;year&quot;</span><span class="p">,</span>
    <span class="n">reducer</span><span class="o">=</span><span class="s2">&quot;mean&quot;</span><span class="p">,</span>
    <span class="n">denominator</span><span class="o">=</span><span class="mf">1e4</span><span class="p">,</span>
    <span class="n">x_label</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">y_label</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">title</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">width</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">height</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">layout_args</span><span class="o">=</span><span class="p">{},</span>
    <span class="n">return_df</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Create a JRC monthly history plot.</span>

<span class="sd">    Args:</span>
<span class="sd">        collection (ee.ImageCollection, optional): The image collection of JRC surface water monthly history.</span>
<span class="sd">            Default to ee.ImageCollection(&#39;JRC/GSW1_3/MonthlyHistory&#39;)</span>
<span class="sd">        region (ee.Geometry | ee.FeatureCollection, optional): The region to plot. Default to None.</span>
<span class="sd">        start_date (str, optional): The start date of the plot. Default to &#39;1984-03-16&#39;.</span>
<span class="sd">        end_date (str, optional): The end date of the plot. Default to the current date.</span>
<span class="sd">        start_month (int, optional): The start month of the plot. Default to 1.</span>
<span class="sd">        end_month (int, optional): The end month of the plot. Default to 12.</span>
<span class="sd">        scale (float, optional): The scale to compute the statistics. Default to None.</span>
<span class="sd">        frequency (str, optional): The frequency of the plot. Can be either &#39;year&#39; or &#39;month&#39;, Default to &#39;year&#39;.</span>
<span class="sd">        reducer (str, optional): The reducer to compute the statistics. Can be either &#39;mean&#39;, &#39;min&#39;, &#39;max&#39;, &#39;median&#39;, etc. Default to &#39;mean&#39;.</span>
<span class="sd">        denominator (int, optional): The denominator to convert area from square meters to other units. Default to 1e4, converting to hectares.</span>
<span class="sd">        x_label (str, optional): Label for the x axis. Defaults to None.</span>
<span class="sd">        y_label (str, optional): Label for the y axis. Defaults to None.</span>
<span class="sd">        title (str, optional): Title for the plot. Defaults to None.</span>
<span class="sd">        width (int, optional): Width of the plot in pixels. Defaults to None.</span>
<span class="sd">        height (int, optional): Height of the plot in pixels. Defaults to 500.</span>
<span class="sd">        layout_args (dict, optional): Layout arguments for the plot to be passed to fig.update_layout(),</span>
<span class="sd">        return_df (bool, optional): _description_. Defaults to False.</span>

<span class="sd">    Returns:</span>
<span class="sd">        pd.DataFrame: Pandas dataframe of the plot.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">date</span>
    <span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
    <span class="kn">import</span> <span class="nn">plotly.express</span> <span class="k">as</span> <span class="nn">px</span>

    <span class="k">if</span> <span class="n">end_date</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">end_date</span> <span class="o">=</span> <span class="n">date</span><span class="o">.</span><span class="n">today</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">collection</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">collection</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">(</span><span class="s2">&quot;JRC/GSW1_3/MonthlyHistory&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">frequency</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;year&quot;</span><span class="p">,</span> <span class="s2">&quot;month&quot;</span><span class="p">]:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;frequency must be &#39;year&#39; or &#39;month&#39;.&quot;</span><span class="p">)</span>

    <span class="n">images</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">collection</span><span class="o">.</span><span class="n">filterDate</span><span class="p">(</span><span class="n">start_date</span><span class="p">,</span> <span class="n">end_date</span><span class="p">)</span>
        <span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">Filter</span><span class="o">.</span><span class="n">calendarRange</span><span class="p">(</span><span class="n">start_month</span><span class="p">,</span> <span class="n">end_month</span><span class="p">,</span> <span class="s2">&quot;month&quot;</span><span class="p">))</span>
        <span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">img</span><span class="p">:</span> <span class="n">img</span><span class="o">.</span><span class="n">eq</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">selfMask</span><span class="p">())</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="nf">cal_area</span><span class="p">(</span><span class="n">img</span><span class="p">):</span>
        <span class="n">pixel_area</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">multiply</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="o">.</span><span class="n">pixelArea</span><span class="p">())</span><span class="o">.</span><span class="n">divide</span><span class="p">(</span><span class="n">denominator</span><span class="p">)</span>
        <span class="n">img_area</span> <span class="o">=</span> <span class="n">pixel_area</span><span class="o">.</span><span class="n">reduceRegion</span><span class="p">(</span>
            <span class="o">**</span><span class="p">{</span>
                <span class="s2">&quot;geometry&quot;</span><span class="p">:</span> <span class="n">region</span><span class="p">,</span>
                <span class="s2">&quot;reducer&quot;</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">sum</span><span class="p">(),</span>
                <span class="s2">&quot;scale&quot;</span><span class="p">:</span> <span class="n">scale</span><span class="p">,</span>
                <span class="s2">&quot;maxPixels&quot;</span><span class="p">:</span> <span class="mf">1e12</span><span class="p">,</span>
                <span class="s2">&quot;bestEffort&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
            <span class="p">}</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">img</span><span class="o">.</span><span class="n">set</span><span class="p">({</span><span class="s2">&quot;area&quot;</span><span class="p">:</span> <span class="n">img_area</span><span class="p">})</span>

    <span class="n">areas</span> <span class="o">=</span> <span class="n">images</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">cal_area</span><span class="p">)</span>
    <span class="n">stats</span> <span class="o">=</span> <span class="n">areas</span><span class="o">.</span><span class="n">aggregate_array</span><span class="p">(</span><span class="s2">&quot;area&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()</span>
    <span class="n">values</span> <span class="o">=</span> <span class="p">[</span><span class="n">item</span><span class="p">[</span><span class="s2">&quot;water&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">stats</span><span class="p">]</span>
    <span class="n">labels</span> <span class="o">=</span> <span class="n">areas</span><span class="o">.</span><span class="n">aggregate_array</span><span class="p">(</span><span class="s2">&quot;system:index&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()</span>
    <span class="n">months</span> <span class="o">=</span> <span class="p">[</span><span class="n">label</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">label</span> <span class="ow">in</span> <span class="n">labels</span><span class="p">]</span>

    <span class="k">if</span> <span class="n">frequency</span> <span class="o">==</span> <span class="s2">&quot;month&quot;</span><span class="p">:</span>
        <span class="n">area_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">&quot;Month&quot;</span><span class="p">:</span> <span class="n">labels</span><span class="p">,</span> <span class="s2">&quot;Area&quot;</span><span class="p">:</span> <span class="n">values</span><span class="p">,</span> <span class="s2">&quot;month&quot;</span><span class="p">:</span> <span class="n">months</span><span class="p">})</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">dates</span> <span class="o">=</span> <span class="p">[</span><span class="n">d</span><span class="p">[:</span><span class="mi">4</span><span class="p">]</span> <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">labels</span><span class="p">]</span>
        <span class="n">data_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;Date&quot;</span><span class="p">:</span> <span class="n">labels</span><span class="p">,</span> <span class="s2">&quot;Year&quot;</span><span class="p">:</span> <span class="n">dates</span><span class="p">,</span> <span class="s2">&quot;Area&quot;</span><span class="p">:</span> <span class="n">values</span><span class="p">}</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data_dict</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">&quot;Year&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">(</span><span class="n">reducer</span><span class="p">)</span>
        <span class="n">area_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">&quot;Year&quot;</span><span class="p">:</span> <span class="n">result</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="s2">&quot;Area&quot;</span><span class="p">:</span> <span class="n">result</span><span class="p">[</span><span class="s2">&quot;Area&quot;</span><span class="p">]})</span>
        <span class="n">area_df</span> <span class="o">=</span> <span class="n">area_df</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">return_df</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">area_df</span>
    <span class="k">else</span><span class="p">:</span>

        <span class="n">labels</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">if</span> <span class="n">x_label</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">labels</span><span class="p">[</span><span class="n">frequency</span><span class="o">.</span><span class="n">title</span><span class="p">()]</span> <span class="o">=</span> <span class="n">x_label</span>
        <span class="k">if</span> <span class="n">y_label</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">labels</span><span class="p">[</span><span class="s2">&quot;Area&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">y_label</span>

        <span class="n">fig</span> <span class="o">=</span> <span class="n">px</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span>
            <span class="n">area_df</span><span class="p">,</span>
            <span class="n">x</span><span class="o">=</span><span class="n">frequency</span><span class="o">.</span><span class="n">title</span><span class="p">(),</span>
            <span class="n">y</span><span class="o">=</span><span class="s2">&quot;Area&quot;</span><span class="p">,</span>
            <span class="n">labels</span><span class="o">=</span><span class="n">labels</span><span class="p">,</span>
            <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">,</span>
            <span class="n">width</span><span class="o">=</span><span class="n">width</span><span class="p">,</span>
            <span class="n">height</span><span class="o">=</span><span class="n">height</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">fig</span><span class="o">.</span><span class="n">update_layout</span><span class="p">(</span><span class="o">**</span><span class="n">layout_args</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">fig</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.kml_to_ee" class="doc doc-heading">
<code class="highlight language-python"><span class="n">kml_to_ee</span><span class="p">(</span><span class="n">in_kml</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.common.kml_to_ee" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Converts a KML to ee.FeatureColleciton.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>in_kml</code></td>
        <td><code>str</code></td>
        <td><p>The file path to the input KML.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>FileNotFoundError</code></td>
        <td><p>The input KML could not be found.</p></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>object</code></td>
      <td><p>ee.FeatureCollection</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">kml_to_ee</span><span class="p">(</span><span class="n">in_kml</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Converts a KML to ee.FeatureColleciton.</span>

<span class="sd">    Args:</span>
<span class="sd">        in_kml (str): The file path to the input KML.</span>

<span class="sd">    Raises:</span>
<span class="sd">        FileNotFoundError: The input KML could not be found.</span>

<span class="sd">    Returns:</span>
<span class="sd">        object: ee.FeatureCollection</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s2">&quot;ignore&quot;</span><span class="p">)</span>

    <span class="n">in_kml</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">in_kml</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">in_kml</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span><span class="s2">&quot;The input KML could not be found.&quot;</span><span class="p">)</span>

    <span class="n">out_json</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">(),</span> <span class="s2">&quot;tmp.geojson&quot;</span><span class="p">)</span>

    <span class="n">check_package</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;geopandas&quot;</span><span class="p">,</span> <span class="n">URL</span><span class="o">=</span><span class="s2">&quot;https://geopandas.org&quot;</span><span class="p">)</span>

    <span class="n">kml_to_geojson</span><span class="p">(</span><span class="n">in_kml</span><span class="p">,</span> <span class="n">out_json</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="n">ee_object</span> <span class="o">=</span> <span class="n">geojson_to_ee</span><span class="p">(</span><span class="n">out_json</span><span class="p">)</span>
    <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">out_json</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ee_object</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.kml_to_geojson" class="doc doc-heading">
<code class="highlight language-python"><span class="n">kml_to_geojson</span><span class="p">(</span><span class="n">in_kml</span><span class="p">,</span> <span class="n">out_geojson</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.common.kml_to_geojson" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Converts a KML to GeoJSON.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>in_kml</code></td>
        <td><code>str</code></td>
        <td><p>The file path to the input KML.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>out_geojson</code></td>
        <td><code>str</code></td>
        <td><p>The file path to the output GeoJSON. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>FileNotFoundError</code></td>
        <td><p>The input KML could not be found.</p></td>
      </tr>
      <tr>
        <td><code>TypeError</code></td>
        <td><p>The output must be a GeoJSON.</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">kml_to_geojson</span><span class="p">(</span><span class="n">in_kml</span><span class="p">,</span> <span class="n">out_geojson</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Converts a KML to GeoJSON.</span>

<span class="sd">    Args:</span>
<span class="sd">        in_kml (str): The file path to the input KML.</span>
<span class="sd">        out_geojson (str): The file path to the output GeoJSON. Defaults to None.</span>

<span class="sd">    Raises:</span>
<span class="sd">        FileNotFoundError: The input KML could not be found.</span>
<span class="sd">        TypeError: The output must be a GeoJSON.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s2">&quot;ignore&quot;</span><span class="p">)</span>

    <span class="n">in_kml</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">in_kml</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">in_kml</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span><span class="s2">&quot;The input KML could not be found.&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">out_geojson</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">out_geojson</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">out_geojson</span><span class="p">)</span>
        <span class="n">ext</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">out_geojson</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">ext</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;.json&quot;</span><span class="p">,</span> <span class="s2">&quot;.geojson&quot;</span><span class="p">]:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;The output file must be a GeoJSON.&quot;</span><span class="p">)</span>

        <span class="n">out_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">out_geojson</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">out_dir</span><span class="p">):</span>
            <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">out_dir</span><span class="p">)</span>

    <span class="n">check_package</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;geopandas&quot;</span><span class="p">,</span> <span class="n">URL</span><span class="o">=</span><span class="s2">&quot;https://geopandas.org&quot;</span><span class="p">)</span>

    <span class="kn">import</span> <span class="nn">geopandas</span> <span class="k">as</span> <span class="nn">gpd</span>
    <span class="kn">import</span> <span class="nn">fiona</span>

    <span class="c1"># print(fiona.supported_drivers)</span>
    <span class="n">fiona</span><span class="o">.</span><span class="n">drvsupport</span><span class="o">.</span><span class="n">supported_drivers</span><span class="p">[</span><span class="s2">&quot;KML&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;rw&quot;</span>
    <span class="n">gdf</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">in_kml</span><span class="p">,</span> <span class="n">driver</span><span class="o">=</span><span class="s2">&quot;KML&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">out_geojson</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">gdf</span><span class="o">.</span><span class="n">to_file</span><span class="p">(</span><span class="n">out_geojson</span><span class="p">,</span> <span class="n">driver</span><span class="o">=</span><span class="s2">&quot;GeoJSON&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">gdf</span><span class="o">.</span><span class="n">__geo_interface__</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.kml_to_shp" class="doc doc-heading">
<code class="highlight language-python"><span class="n">kml_to_shp</span><span class="p">(</span><span class="n">in_kml</span><span class="p">,</span> <span class="n">out_shp</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.common.kml_to_shp" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Converts a KML to shapefile.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>in_kml</code></td>
        <td><code>str</code></td>
        <td><p>The file path to the input KML.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>out_shp</code></td>
        <td><code>str</code></td>
        <td><p>The file path to the output shapefile.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>FileNotFoundError</code></td>
        <td><p>The input KML could not be found.</p></td>
      </tr>
      <tr>
        <td><code>TypeError</code></td>
        <td><p>The output must be a shapefile.</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">kml_to_shp</span><span class="p">(</span><span class="n">in_kml</span><span class="p">,</span> <span class="n">out_shp</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Converts a KML to shapefile.</span>

<span class="sd">    Args:</span>
<span class="sd">        in_kml (str): The file path to the input KML.</span>
<span class="sd">        out_shp (str): The file path to the output shapefile.</span>

<span class="sd">    Raises:</span>
<span class="sd">        FileNotFoundError: The input KML could not be found.</span>
<span class="sd">        TypeError: The output must be a shapefile.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s2">&quot;ignore&quot;</span><span class="p">)</span>

    <span class="n">in_kml</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">in_kml</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">in_kml</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span><span class="s2">&quot;The input KML could not be found.&quot;</span><span class="p">)</span>

    <span class="n">out_shp</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">out_shp</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">out_shp</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.shp&quot;</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;The output must be a shapefile.&quot;</span><span class="p">)</span>

    <span class="n">out_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">out_shp</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">out_dir</span><span class="p">):</span>
        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">out_dir</span><span class="p">)</span>

    <span class="n">check_package</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;geopandas&quot;</span><span class="p">,</span> <span class="n">URL</span><span class="o">=</span><span class="s2">&quot;https://geopandas.org&quot;</span><span class="p">)</span>

    <span class="kn">import</span> <span class="nn">geopandas</span> <span class="k">as</span> <span class="nn">gpd</span>
    <span class="kn">import</span> <span class="nn">fiona</span>

    <span class="c1"># import fiona</span>
    <span class="c1"># print(fiona.supported_drivers)</span>
    <span class="n">fiona</span><span class="o">.</span><span class="n">drvsupport</span><span class="o">.</span><span class="n">supported_drivers</span><span class="p">[</span><span class="s2">&quot;KML&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;rw&quot;</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">in_kml</span><span class="p">,</span> <span class="n">driver</span><span class="o">=</span><span class="s2">&quot;KML&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="n">df</span><span class="o">.</span><span class="n">to_file</span><span class="p">(</span><span class="n">out_shp</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.kmz_to_ee" class="doc doc-heading">
<code class="highlight language-python"><span class="n">kmz_to_ee</span><span class="p">(</span><span class="n">in_kmz</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.common.kmz_to_ee" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Converts a KMZ to ee.FeatureColleciton.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>in_kmz</code></td>
        <td><code>str</code></td>
        <td><p>The file path to the input KMZ.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>FileNotFoundError</code></td>
        <td><p>The input KMZ could not be found.</p></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>object</code></td>
      <td><p>ee.FeatureCollection</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">kmz_to_ee</span><span class="p">(</span><span class="n">in_kmz</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Converts a KMZ to ee.FeatureColleciton.</span>

<span class="sd">    Args:</span>
<span class="sd">        in_kmz (str): The file path to the input KMZ.</span>

<span class="sd">    Raises:</span>
<span class="sd">        FileNotFoundError: The input KMZ could not be found.</span>

<span class="sd">    Returns:</span>
<span class="sd">        object: ee.FeatureCollection</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">in_kmz</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">in_kmz</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">in_kmz</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span><span class="s2">&quot;The input KMZ could not be found.&quot;</span><span class="p">)</span>

    <span class="n">out_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">in_kmz</span><span class="p">)</span>
    <span class="n">out_kml</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">out_dir</span><span class="p">,</span> <span class="s2">&quot;doc.kml&quot;</span><span class="p">)</span>
    <span class="k">with</span> <span class="n">zipfile</span><span class="o">.</span><span class="n">ZipFile</span><span class="p">(</span><span class="n">in_kmz</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">zip_ref</span><span class="p">:</span>
        <span class="n">zip_ref</span><span class="o">.</span><span class="n">extractall</span><span class="p">(</span><span class="n">out_dir</span><span class="p">)</span>

    <span class="n">fc</span> <span class="o">=</span> <span class="n">kml_to_ee</span><span class="p">(</span><span class="n">out_kml</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">out_kml</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">fc</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.latitude_grid" class="doc doc-heading">
<code class="highlight language-python"><span class="n">latitude_grid</span><span class="p">(</span><span class="n">step</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">west</span><span class="o">=-</span><span class="mi">180</span><span class="p">,</span> <span class="n">east</span><span class="o">=</span><span class="mi">180</span><span class="p">,</span> <span class="n">south</span><span class="o">=-</span><span class="mi">85</span><span class="p">,</span> <span class="n">north</span><span class="o">=</span><span class="mi">85</span><span class="p">)</span></code>


<a href="#geemap.common.latitude_grid" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Create a latitude grid.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>step</code></td>
        <td><code>float</code></td>
        <td><p>The step size in degrees. Defaults to 1.0.</p></td>
        <td><code>1.0</code></td>
      </tr>
      <tr>
        <td><code>west</code></td>
        <td><code>int</code></td>
        <td><p>The west boundary in degrees. Defaults to -180.</p></td>
        <td><code>-180</code></td>
      </tr>
      <tr>
        <td><code>east</code></td>
        <td><code>int</code></td>
        <td><p>The east boundary in degrees. Defaults to 180.</p></td>
        <td><code>180</code></td>
      </tr>
      <tr>
        <td><code>south</code></td>
        <td><code>int</code></td>
        <td><p>The south boundary in degrees. Defaults to -85.</p></td>
        <td><code>-85</code></td>
      </tr>
      <tr>
        <td><code>north</code></td>
        <td><code>int</code></td>
        <td><p>The north boundary in degrees. Defaults to 85.</p></td>
        <td><code>85</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>ee.FeatureColleciton</code></td>
      <td><p>A feature collection of latitude grids.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">latitude_grid</span><span class="p">(</span><span class="n">step</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">west</span><span class="o">=-</span><span class="mi">180</span><span class="p">,</span> <span class="n">east</span><span class="o">=</span><span class="mi">180</span><span class="p">,</span> <span class="n">south</span><span class="o">=-</span><span class="mi">85</span><span class="p">,</span> <span class="n">north</span><span class="o">=</span><span class="mi">85</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Create a latitude grid.</span>

<span class="sd">    Args:</span>
<span class="sd">        step (float, optional): The step size in degrees. Defaults to 1.0.</span>
<span class="sd">        west (int, optional): The west boundary in degrees. Defaults to -180.</span>
<span class="sd">        east (int, optional): The east boundary in degrees. Defaults to 180.</span>
<span class="sd">        south (int, optional): The south boundary in degrees. Defaults to -85.</span>
<span class="sd">        north (int, optional): The north boundary in degrees. Defaults to 85.</span>

<span class="sd">    Returns:</span>
<span class="sd">        ee.FeatureColleciton: A feature collection of latitude grids.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">values</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">List</span><span class="o">.</span><span class="n">sequence</span><span class="p">(</span><span class="n">south</span><span class="p">,</span> <span class="n">north</span> <span class="o">-</span> <span class="n">step</span><span class="p">,</span> <span class="n">step</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">create_feature</span><span class="p">(</span><span class="n">lat</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">ee</span><span class="o">.</span><span class="n">Feature</span><span class="p">(</span>
            <span class="n">ee</span><span class="o">.</span><span class="n">Geometry</span><span class="o">.</span><span class="n">BBox</span><span class="p">(</span><span class="n">west</span><span class="p">,</span> <span class="n">lat</span><span class="p">,</span> <span class="n">east</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Number</span><span class="p">(</span><span class="n">lat</span><span class="p">)</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">step</span><span class="p">))</span>
        <span class="p">)</span><span class="o">.</span><span class="n">set</span><span class="p">(</span>
            <span class="p">{</span>
                <span class="s2">&quot;south&quot;</span><span class="p">:</span> <span class="n">lat</span><span class="p">,</span>
                <span class="s2">&quot;west&quot;</span><span class="p">:</span> <span class="n">west</span><span class="p">,</span>
                <span class="s2">&quot;north&quot;</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Number</span><span class="p">(</span><span class="n">lat</span><span class="p">)</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">step</span><span class="p">),</span>
                <span class="s2">&quot;east&quot;</span><span class="p">:</span> <span class="n">east</span><span class="p">,</span>
            <span class="p">}</span>
        <span class="p">)</span>

    <span class="n">features</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">(</span><span class="n">values</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">create_feature</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">features</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.latlon_from_text" class="doc doc-heading">
<code class="highlight language-python"><span class="n">latlon_from_text</span><span class="p">(</span><span class="n">location</span><span class="p">)</span></code>


<a href="#geemap.common.latlon_from_text" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Extracts latlon from text.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>location</code></td>
        <td><code>str</code></td>
        <td><p>A pair of latlon coordinates separated by comma or space.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>bool</code></td>
      <td><p>Returns (lat, lon) if valid.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">latlon_from_text</span><span class="p">(</span><span class="n">location</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Extracts latlon from text.</span>

<span class="sd">    Args:</span>
<span class="sd">        location (str): A pair of latlon coordinates separated by comma or space.</span>

<span class="sd">    Returns:</span>
<span class="sd">        bool: Returns (lat, lon) if valid.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">latlon</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">if</span> <span class="s2">&quot;,&quot;</span> <span class="ow">in</span> <span class="n">location</span><span class="p">:</span>
            <span class="n">latlon</span> <span class="o">=</span> <span class="p">[</span><span class="nb">float</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">location</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">)]</span>
        <span class="k">elif</span> <span class="s2">&quot; &quot;</span> <span class="ow">in</span> <span class="n">location</span><span class="p">:</span>
            <span class="n">latlon</span> <span class="o">=</span> <span class="p">[</span><span class="nb">float</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">location</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">)]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span>
                <span class="s2">&quot;The lat-lon coordinates should be numbers only and separated by comma or space, such as 40.2, -100.3&quot;</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>

        <span class="n">lat</span><span class="p">,</span> <span class="n">lon</span> <span class="o">=</span> <span class="n">latlon</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">latlon</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">lat</span> <span class="o">&gt;=</span> <span class="o">-</span><span class="mi">90</span> <span class="ow">and</span> <span class="n">lat</span> <span class="o">&lt;=</span> <span class="mi">90</span> <span class="ow">and</span> <span class="n">lon</span> <span class="o">&gt;=</span> <span class="o">-</span><span class="mi">180</span> <span class="ow">and</span> <span class="n">lon</span> <span class="o">&lt;=</span> <span class="mi">180</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">lat</span><span class="p">,</span> <span class="n">lon</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span>
            <span class="s2">&quot;The lat-lon coordinates should be numbers only and separated by comma or space, such as 40.2, -100.3&quot;</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.latlon_grid" class="doc doc-heading">
<code class="highlight language-python"><span class="n">latlon_grid</span><span class="p">(</span><span class="n">lat_step</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">lon_step</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">west</span><span class="o">=-</span><span class="mi">180</span><span class="p">,</span> <span class="n">east</span><span class="o">=</span><span class="mi">180</span><span class="p">,</span> <span class="n">south</span><span class="o">=-</span><span class="mi">85</span><span class="p">,</span> <span class="n">north</span><span class="o">=</span><span class="mi">85</span><span class="p">)</span></code>


<a href="#geemap.common.latlon_grid" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Create a retangular grid of latitude and longitude.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>lat_step</code></td>
        <td><code>float</code></td>
        <td><p>The step size in degrees. Defaults to 1.0.</p></td>
        <td><code>1.0</code></td>
      </tr>
      <tr>
        <td><code>lon_step</code></td>
        <td><code>float</code></td>
        <td><p>The step size in degrees. Defaults to 1.0.</p></td>
        <td><code>1.0</code></td>
      </tr>
      <tr>
        <td><code>west</code></td>
        <td><code>int</code></td>
        <td><p>The west boundary in degrees. Defaults to -180.</p></td>
        <td><code>-180</code></td>
      </tr>
      <tr>
        <td><code>east</code></td>
        <td><code>int</code></td>
        <td><p>The east boundary in degrees. Defaults to 180.</p></td>
        <td><code>180</code></td>
      </tr>
      <tr>
        <td><code>south</code></td>
        <td><code>int</code></td>
        <td><p>The south boundary in degrees. Defaults to -85.</p></td>
        <td><code>-85</code></td>
      </tr>
      <tr>
        <td><code>north</code></td>
        <td><code>int</code></td>
        <td><p>The north boundary in degrees. Defaults to 85.</p></td>
        <td><code>85</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>ee.FeatureCollection</code></td>
      <td><p>A feature collection of latitude and longitude grids.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">latlon_grid</span><span class="p">(</span><span class="n">lat_step</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">lon_step</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">west</span><span class="o">=-</span><span class="mi">180</span><span class="p">,</span> <span class="n">east</span><span class="o">=</span><span class="mi">180</span><span class="p">,</span> <span class="n">south</span><span class="o">=-</span><span class="mi">85</span><span class="p">,</span> <span class="n">north</span><span class="o">=</span><span class="mi">85</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Create a retangular grid of latitude and longitude.</span>

<span class="sd">    Args:</span>
<span class="sd">        lat_step (float, optional): The step size in degrees. Defaults to 1.0.</span>
<span class="sd">        lon_step (float, optional): The step size in degrees. Defaults to 1.0.</span>
<span class="sd">        west (int, optional): The west boundary in degrees. Defaults to -180.</span>
<span class="sd">        east (int, optional): The east boundary in degrees. Defaults to 180.</span>
<span class="sd">        south (int, optional): The south boundary in degrees. Defaults to -85.</span>
<span class="sd">        north (int, optional): The north boundary in degrees. Defaults to 85.</span>

<span class="sd">    Returns:</span>
<span class="sd">        ee.FeatureCollection: A feature collection of latitude and longitude grids.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">longitudes</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">List</span><span class="o">.</span><span class="n">sequence</span><span class="p">(</span><span class="n">west</span><span class="p">,</span> <span class="n">east</span> <span class="o">-</span> <span class="n">lon_step</span><span class="p">,</span> <span class="n">lon_step</span><span class="p">)</span>
    <span class="n">latitudes</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">List</span><span class="o">.</span><span class="n">sequence</span><span class="p">(</span><span class="n">south</span><span class="p">,</span> <span class="n">north</span> <span class="o">-</span> <span class="n">lat_step</span><span class="p">,</span> <span class="n">lat_step</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">create_lat_feature</span><span class="p">(</span><span class="n">lat</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">create_lon_features</span><span class="p">(</span><span class="n">lon</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">ee</span><span class="o">.</span><span class="n">Feature</span><span class="p">(</span>
                <span class="n">ee</span><span class="o">.</span><span class="n">Geometry</span><span class="o">.</span><span class="n">BBox</span><span class="p">(</span>
                    <span class="n">lon</span><span class="p">,</span> <span class="n">lat</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Number</span><span class="p">(</span><span class="n">lon</span><span class="p">)</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">lon_step</span><span class="p">),</span> <span class="n">ee</span><span class="o">.</span><span class="n">Number</span><span class="p">(</span><span class="n">lat</span><span class="p">)</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">lat_step</span><span class="p">)</span>
                <span class="p">)</span>
            <span class="p">)</span><span class="o">.</span><span class="n">set</span><span class="p">(</span>
                <span class="p">{</span>
                    <span class="s2">&quot;south&quot;</span><span class="p">:</span> <span class="n">lat</span><span class="p">,</span>
                    <span class="s2">&quot;west&quot;</span><span class="p">:</span> <span class="n">lon</span><span class="p">,</span>
                    <span class="s2">&quot;north&quot;</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Number</span><span class="p">(</span><span class="n">lat</span><span class="p">)</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">lat_step</span><span class="p">),</span>
                    <span class="s2">&quot;east&quot;</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Number</span><span class="p">(</span><span class="n">lon</span><span class="p">)</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">lon_step</span><span class="p">),</span>
                <span class="p">}</span>
            <span class="p">)</span>

        <span class="k">return</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">(</span><span class="n">longitudes</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">create_lon_features</span><span class="p">))</span>

    <span class="k">return</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">(</span><span class="n">latitudes</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">create_lat_feature</span><span class="p">))</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.legend_from_ee" class="doc doc-heading">
<code class="highlight language-python"><span class="n">legend_from_ee</span><span class="p">(</span><span class="n">ee_class_table</span><span class="p">)</span></code>


<a href="#geemap.common.legend_from_ee" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Extract legend from an Earth Engine class table on the Earth Engine Data Catalog page
such as https://developers.google.com/earth-engine/datasets/catalog/MODIS_051_MCD12Q1</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>ee_class_table</code></td>
        <td><code>str</code></td>
        <td><p>An Earth Engine class table with triple quotes.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>dict</code></td>
      <td><p>Returns a legend dictionary that can be used to create a legend.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">legend_from_ee</span><span class="p">(</span><span class="n">ee_class_table</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Extract legend from an Earth Engine class table on the Earth Engine Data Catalog page</span>
<span class="sd">    such as https://developers.google.com/earth-engine/datasets/catalog/MODIS_051_MCD12Q1</span>

<span class="sd">    Args:</span>
<span class="sd">        ee_class_table (str): An Earth Engine class table with triple quotes.</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict: Returns a legend dictionary that can be used to create a legend.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">ee_class_table</span> <span class="o">=</span> <span class="n">ee_class_table</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="n">lines</span> <span class="o">=</span> <span class="n">ee_class_table</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)[</span><span class="mi">1</span><span class="p">:]</span>

        <span class="k">if</span> <span class="n">lines</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;Value</span><span class="se">\t</span><span class="s2">Color</span><span class="se">\t</span><span class="s2">Description&quot;</span><span class="p">:</span>
            <span class="n">lines</span> <span class="o">=</span> <span class="n">lines</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>

        <span class="n">legend_dict</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">line</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">lines</span><span class="p">):</span>
            <span class="n">items</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">items</span> <span class="o">=</span> <span class="p">[</span><span class="n">item</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">items</span><span class="p">]</span>
            <span class="n">color</span> <span class="o">=</span> <span class="n">items</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">key</span> <span class="o">=</span> <span class="n">items</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="n">items</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
            <span class="n">legend_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">color</span>

        <span class="k">return</span> <span class="n">legend_dict</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.list_vars" class="doc doc-heading">
<code class="highlight language-python"><span class="n">list_vars</span><span class="p">(</span><span class="n">var_type</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


<a href="#geemap.common.list_vars" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Lists all defined avariables.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>var_type</code></td>
        <td><code>object</code></td>
        <td><p>The object type of variables to list. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>list</code></td>
      <td><p>A list of all defined variables.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">list_vars</span><span class="p">(</span><span class="n">var_type</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Lists all defined avariables.</span>

<span class="sd">    Args:</span>
<span class="sd">        var_type (object, optional): The object type of variables to list. Defaults to None.</span>

<span class="sd">    Returns:</span>
<span class="sd">        list: A list of all defined variables.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">for</span> <span class="n">var</span> <span class="ow">in</span> <span class="nb">globals</span><span class="p">():</span>

        <span class="n">reserved_vars</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">&quot;In&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Out&quot;</span><span class="p">,</span>
            <span class="s2">&quot;get_ipython&quot;</span><span class="p">,</span>
            <span class="s2">&quot;exit&quot;</span><span class="p">,</span>
            <span class="s2">&quot;quit&quot;</span><span class="p">,</span>
            <span class="s2">&quot;json&quot;</span><span class="p">,</span>
            <span class="s2">&quot;getsizeof&quot;</span><span class="p">,</span>
            <span class="s2">&quot;NamespaceMagics&quot;</span><span class="p">,</span>
            <span class="s2">&quot;np&quot;</span><span class="p">,</span>
            <span class="s2">&quot;var_dic_list&quot;</span><span class="p">,</span>
            <span class="s2">&quot;list_vars&quot;</span><span class="p">,</span>
            <span class="s2">&quot;ee&quot;</span><span class="p">,</span>
            <span class="s2">&quot;geemap&quot;</span><span class="p">,</span>
        <span class="p">]</span>

        <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="n">var</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">))</span> <span class="ow">and</span> <span class="p">(</span><span class="n">var</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">reserved_vars</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">var_type</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="nb">eval</span><span class="p">(</span><span class="n">var</span><span class="p">),</span> <span class="n">var_type</span><span class="p">):</span>
                <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">var</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">var_type</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">var</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">result</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.load_GeoTIFF" class="doc doc-heading">
<code class="highlight language-python"><span class="n">load_GeoTIFF</span><span class="p">(</span><span class="n">URL</span><span class="p">)</span></code>


<a href="#geemap.common.load_GeoTIFF" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Loads a Cloud Optimized GeoTIFF (COG) as an Image. Only Google Cloud Storage is supported. The URL can be one of the following formats:
Option 1: gs://pdd-stac/disasters/hurricane-harvey/0831/20170831_172754_101c_3B_AnalyticMS.tif
Option 2: https://storage.googleapis.com/pdd-stac/disasters/hurricane-harvey/0831/20170831_172754_101c_3B_AnalyticMS.tif
Option 3: https://storage.cloud.google.com/gcp-public-data-landsat/LC08/01/044/034/LC08_L1TP_044034_20131228_20170307_01_T1/LC08_L1TP_044034_20131228_20170307_01_T1_B5.TIF</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>URL</code></td>
        <td><code>str</code></td>
        <td><p>The Cloud Storage URL of the GeoTIFF to load.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>ee.Image</code></td>
      <td><p>an Earth Engine image.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">load_GeoTIFF</span><span class="p">(</span><span class="n">URL</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Loads a Cloud Optimized GeoTIFF (COG) as an Image. Only Google Cloud Storage is supported. The URL can be one of the following formats:</span>
<span class="sd">    Option 1: gs://pdd-stac/disasters/hurricane-harvey/0831/20170831_172754_101c_3B_AnalyticMS.tif</span>
<span class="sd">    Option 2: https://storage.googleapis.com/pdd-stac/disasters/hurricane-harvey/0831/20170831_172754_101c_3B_AnalyticMS.tif</span>
<span class="sd">    Option 3: https://storage.cloud.google.com/gcp-public-data-landsat/LC08/01/044/034/LC08_L1TP_044034_20131228_20170307_01_T1/LC08_L1TP_044034_20131228_20170307_01_T1_B5.TIF</span>

<span class="sd">    Args:</span>
<span class="sd">        URL (str): The Cloud Storage URL of the GeoTIFF to load.</span>

<span class="sd">    Returns:</span>
<span class="sd">        ee.Image: an Earth Engine image.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">uri</span> <span class="o">=</span> <span class="n">URL</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">uri</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;http&quot;</span><span class="p">):</span>
        <span class="n">uri</span> <span class="o">=</span> <span class="n">get_direct_url</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">uri</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;https://storage.googleapis.com/&quot;</span><span class="p">):</span>
        <span class="n">uri</span> <span class="o">=</span> <span class="n">uri</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;https://storage.googleapis.com/&quot;</span><span class="p">,</span> <span class="s2">&quot;gs://&quot;</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">uri</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;https://storage.cloud.google.com/&quot;</span><span class="p">):</span>
        <span class="n">uri</span> <span class="o">=</span> <span class="n">uri</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;https://storage.cloud.google.com/&quot;</span><span class="p">,</span> <span class="s2">&quot;gs://&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">uri</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;gs://&quot;</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
            <span class="sa">f</span><span class="s1">&#39;Invalid GCS URL: </span><span class="si">{</span><span class="n">uri</span><span class="si">}</span><span class="s1">. Expected something of the form &quot;gs://bucket/path/to/object.tif&quot;.&#39;</span>
        <span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">uri</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.tif&quot;</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
            <span class="sa">f</span><span class="s1">&#39;Invalid GCS URL: </span><span class="si">{</span><span class="n">uri</span><span class="si">}</span><span class="s1">. Expected something of the form &quot;gs://bucket/path/to/object.tif&quot;.&#39;</span>
        <span class="p">)</span>

    <span class="n">cloud_image</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="o">.</span><span class="n">loadGeoTIFF</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">cloud_image</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.load_GeoTIFFs" class="doc doc-heading">
<code class="highlight language-python"><span class="n">load_GeoTIFFs</span><span class="p">(</span><span class="n">URLs</span><span class="p">)</span></code>


<a href="#geemap.common.load_GeoTIFFs" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Loads a list of Cloud Optimized GeoTIFFs (COG) as an ImageCollection. URLs is a list of URL, which can be one of the following formats:
Option 1: gs://pdd-stac/disasters/hurricane-harvey/0831/20170831_172754_101c_3B_AnalyticMS.tif
Option 2: https://storage.googleapis.com/pdd-stac/disasters/hurricane-harvey/0831/20170831_172754_101c_3B_AnalyticMS.tif
Option 3: https://storage.cloud.google.com/gcp-public-data-landsat/LC08/01/044/034/LC08_L1TP_044034_20131228_20170307_01_T1/LC08_L1TP_044034_20131228_20170307_01_T1_B5.TIF</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>URLs</code></td>
        <td><code>list</code></td>
        <td><p>A list of Cloud Storage URL of the GeoTIFF to load.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>ee.ImageCollection</code></td>
      <td><p>An Earth Engine ImageCollection.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">load_GeoTIFFs</span><span class="p">(</span><span class="n">URLs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Loads a list of Cloud Optimized GeoTIFFs (COG) as an ImageCollection. URLs is a list of URL, which can be one of the following formats:</span>
<span class="sd">    Option 1: gs://pdd-stac/disasters/hurricane-harvey/0831/20170831_172754_101c_3B_AnalyticMS.tif</span>
<span class="sd">    Option 2: https://storage.googleapis.com/pdd-stac/disasters/hurricane-harvey/0831/20170831_172754_101c_3B_AnalyticMS.tif</span>
<span class="sd">    Option 3: https://storage.cloud.google.com/gcp-public-data-landsat/LC08/01/044/034/LC08_L1TP_044034_20131228_20170307_01_T1/LC08_L1TP_044034_20131228_20170307_01_T1_B5.TIF</span>

<span class="sd">    Args:</span>
<span class="sd">        URLs (list): A list of Cloud Storage URL of the GeoTIFF to load.</span>

<span class="sd">    Returns:</span>
<span class="sd">        ee.ImageCollection: An Earth Engine ImageCollection.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">URLs</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;The URLs argument must be a list.&quot;</span><span class="p">)</span>

    <span class="n">URIs</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">URL</span> <span class="ow">in</span> <span class="n">URLs</span><span class="p">:</span>
        <span class="n">uri</span> <span class="o">=</span> <span class="n">URL</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">uri</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;http&quot;</span><span class="p">):</span>
            <span class="n">uri</span> <span class="o">=</span> <span class="n">get_direct_url</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">uri</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;https://storage.googleapis.com/&quot;</span><span class="p">):</span>
            <span class="n">uri</span> <span class="o">=</span> <span class="n">uri</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;https://storage.googleapis.com/&quot;</span><span class="p">,</span> <span class="s2">&quot;gs://&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">uri</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;https://storage.cloud.google.com/&quot;</span><span class="p">):</span>
            <span class="n">uri</span> <span class="o">=</span> <span class="n">uri</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;https://storage.cloud.google.com/&quot;</span><span class="p">,</span> <span class="s2">&quot;gs://&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">uri</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;gs://&quot;</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="sa">f</span><span class="s1">&#39;Invalid GCS URL: </span><span class="si">{</span><span class="n">uri</span><span class="si">}</span><span class="s1">. Expected something of the form &quot;gs://bucket/path/to/object.tif&quot;.&#39;</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">uri</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.tif&quot;</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="sa">f</span><span class="s1">&#39;Invalid GCS URL: </span><span class="si">{</span><span class="n">uri</span><span class="si">}</span><span class="s1">. Expected something of the form &quot;gs://bucket/path/to/object.tif&quot;.&#39;</span>
            <span class="p">)</span>

        <span class="n">URIs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span>

    <span class="n">URIs</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">List</span><span class="p">(</span><span class="n">URIs</span><span class="p">)</span>
    <span class="n">collection</span> <span class="o">=</span> <span class="n">URIs</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">uri</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="o">.</span><span class="n">loadGeoTIFF</span><span class="p">(</span><span class="n">uri</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">(</span><span class="n">collection</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.local_tile_bands" class="doc doc-heading">
<code class="highlight language-python"><span class="n">local_tile_bands</span><span class="p">(</span><span class="n">source</span><span class="p">)</span></code>


<a href="#geemap.common.local_tile_bands" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Get band names from COG.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>source</code></td>
        <td><code>str | TileClient</code></td>
        <td><p>A local COG file path or TileClient</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>list</code></td>
      <td><p>A list of band names.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">local_tile_bands</span><span class="p">(</span><span class="n">source</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get band names from COG.</span>

<span class="sd">    Args:</span>
<span class="sd">        source (str | TileClient): A local COG file path or TileClient</span>

<span class="sd">    Returns:</span>
<span class="sd">        list: A list of band names.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">check_package</span><span class="p">(</span><span class="s2">&quot;localtileserver&quot;</span><span class="p">,</span> <span class="s2">&quot;https://github.com/banesullivan/localtileserver&quot;</span><span class="p">)</span>
    <span class="kn">from</span> <span class="nn">localtileserver</span> <span class="kn">import</span> <span class="n">TileClient</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">tile_client</span> <span class="o">=</span> <span class="n">TileClient</span><span class="p">(</span><span class="n">source</span><span class="p">)</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">TileClient</span><span class="p">):</span>
        <span class="n">tile_client</span> <span class="o">=</span> <span class="n">source</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;source must be a string or TileClient object.&quot;</span><span class="p">)</span>

    <span class="n">bandnames</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">tile_client</span><span class="o">.</span><span class="n">metadata</span><span class="p">()[</span><span class="s2">&quot;bands&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
    <span class="k">return</span> <span class="n">bandnames</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.local_tile_pixel_value" class="doc doc-heading">
<code class="highlight language-python"><span class="n">local_tile_pixel_value</span><span class="p">(</span><span class="n">lon</span><span class="p">,</span> <span class="n">lat</span><span class="p">,</span> <span class="n">tile_client</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.common.local_tile_pixel_value" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Get pixel value from COG.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>lon</code></td>
        <td><code>float</code></td>
        <td><p>Longitude of the pixel.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>lat</code></td>
        <td><code>float</code></td>
        <td><p>Latitude of the pixel.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>url</code></td>
        <td><code>str</code></td>
        <td><p>HTTP URL to a COG, e.g., 'https://opendata.digitalglobe.com/events/california-fire-2020/pre-event/2018-02-16/pine-gulch-fire20/1030010076004E00.tif'</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>bidx</code></td>
        <td><code>str</code></td>
        <td><p>Dataset band indexes (e.g bidx=1, bidx=1&amp;bidx=2&amp;bidx=3). Defaults to None.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>titiler_endpoint</code></td>
        <td><code>str</code></td>
        <td><p>Titiler endpoint, e.g., "https://titiler.xyz", "planetary-computer", "pc". Defaults to None.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>verbose</code></td>
        <td><code>bool</code></td>
        <td><p>Print status messages. Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>list</code></td>
      <td><p>A dictionary of band info.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">local_tile_pixel_value</span><span class="p">(</span>
    <span class="n">lon</span><span class="p">,</span>
    <span class="n">lat</span><span class="p">,</span>
    <span class="n">tile_client</span><span class="p">,</span>
    <span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get pixel value from COG.</span>

<span class="sd">    Args:</span>
<span class="sd">        lon (float): Longitude of the pixel.</span>
<span class="sd">        lat (float): Latitude of the pixel.</span>
<span class="sd">        url (str): HTTP URL to a COG, e.g., &#39;https://opendata.digitalglobe.com/events/california-fire-2020/pre-event/2018-02-16/pine-gulch-fire20/1030010076004E00.tif&#39;</span>
<span class="sd">        bidx (str, optional): Dataset band indexes (e.g bidx=1, bidx=1&amp;bidx=2&amp;bidx=3). Defaults to None.</span>
<span class="sd">        titiler_endpoint (str, optional): Titiler endpoint, e.g., &quot;https://titiler.xyz&quot;, &quot;planetary-computer&quot;, &quot;pc&quot;. Defaults to None.</span>
<span class="sd">        verbose (bool, optional): Print status messages. Defaults to True.</span>

<span class="sd">    Returns:</span>
<span class="sd">        list: A dictionary of band info.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">r</span> <span class="o">=</span> <span class="n">tile_client</span><span class="o">.</span><span class="n">pixel</span><span class="p">(</span><span class="n">lat</span><span class="p">,</span> <span class="n">lon</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s2">&quot;EPSG:4326&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">if</span> <span class="s2">&quot;bands&quot;</span> <span class="ow">in</span> <span class="n">r</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">r</span><span class="p">[</span><span class="s2">&quot;bands&quot;</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">verbose</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;No pixel value found.&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.local_tile_vmin_vmax" class="doc doc-heading">
<code class="highlight language-python"><span class="n">local_tile_vmin_vmax</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">bands</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.common.local_tile_vmin_vmax" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Get vmin and vmax from COG.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>source</code></td>
        <td><code>str | TileClient</code></td>
        <td><p>A local COG file path or TileClient object.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>bands</code></td>
        <td><code>str | list</code></td>
        <td><p>A list of band names. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>ValueError</code></td>
        <td><p>If source is not a TileClient object or a local COG file path.</p></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>tuple</code></td>
      <td><p>A tuple of vmin and vmax.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">local_tile_vmin_vmax</span><span class="p">(</span>
    <span class="n">source</span><span class="p">,</span>
    <span class="n">bands</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get vmin and vmax from COG.</span>

<span class="sd">    Args:</span>
<span class="sd">        source (str | TileClient): A local COG file path or TileClient object.</span>
<span class="sd">        bands (str | list, optional): A list of band names. Defaults to None.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If source is not a TileClient object or a local COG file path.</span>

<span class="sd">    Returns:</span>
<span class="sd">        tuple: A tuple of vmin and vmax.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">check_package</span><span class="p">(</span><span class="s2">&quot;localtileserver&quot;</span><span class="p">,</span> <span class="s2">&quot;https://github.com/banesullivan/localtileserver&quot;</span><span class="p">)</span>
    <span class="kn">from</span> <span class="nn">localtileserver</span> <span class="kn">import</span> <span class="n">TileClient</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">tile_client</span> <span class="o">=</span> <span class="n">TileClient</span><span class="p">(</span><span class="n">source</span><span class="p">)</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">TileClient</span><span class="p">):</span>
        <span class="n">tile_client</span> <span class="o">=</span> <span class="n">source</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;source must be a string or TileClient object.&quot;</span><span class="p">)</span>

    <span class="n">stats</span> <span class="o">=</span> <span class="n">tile_client</span><span class="o">.</span><span class="n">metadata</span><span class="p">()[</span><span class="s2">&quot;bands&quot;</span><span class="p">]</span>
    <span class="n">bandnames</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">stats</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">bands</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">bands</span> <span class="o">=</span> <span class="p">[</span><span class="n">bands</span><span class="p">]</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">bands</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
        <span class="k">pass</span>
    <span class="k">elif</span> <span class="n">bands</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">bands</span> <span class="o">=</span> <span class="n">bandnames</span>

    <span class="k">if</span> <span class="nb">all</span><span class="p">(</span><span class="n">b</span> <span class="ow">in</span> <span class="n">bandnames</span> <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">bands</span><span class="p">):</span>
        <span class="n">vmin</span> <span class="o">=</span> <span class="nb">min</span><span class="p">([</span><span class="n">stats</span><span class="p">[</span><span class="n">b</span><span class="p">][</span><span class="s2">&quot;min&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">bands</span><span class="p">])</span>
        <span class="n">vmax</span> <span class="o">=</span> <span class="nb">max</span><span class="p">([</span><span class="n">stats</span><span class="p">[</span><span class="n">b</span><span class="p">][</span><span class="s2">&quot;max&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">bands</span><span class="p">])</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">vmin</span> <span class="o">=</span> <span class="nb">min</span><span class="p">([</span><span class="n">stats</span><span class="p">[</span><span class="n">b</span><span class="p">][</span><span class="s2">&quot;min&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">bandnames</span><span class="p">])</span>
        <span class="n">vmax</span> <span class="o">=</span> <span class="nb">max</span><span class="p">([</span><span class="n">stats</span><span class="p">[</span><span class="n">b</span><span class="p">][</span><span class="s2">&quot;max&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">bandnames</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.longitude_grid" class="doc doc-heading">
<code class="highlight language-python"><span class="n">longitude_grid</span><span class="p">(</span><span class="n">step</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">west</span><span class="o">=-</span><span class="mi">180</span><span class="p">,</span> <span class="n">east</span><span class="o">=</span><span class="mi">180</span><span class="p">,</span> <span class="n">south</span><span class="o">=-</span><span class="mi">85</span><span class="p">,</span> <span class="n">north</span><span class="o">=</span><span class="mi">85</span><span class="p">)</span></code>


<a href="#geemap.common.longitude_grid" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Create a longitude grid.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>step</code></td>
        <td><code>float</code></td>
        <td><p>The step size in degrees. Defaults to 1.0.</p></td>
        <td><code>1.0</code></td>
      </tr>
      <tr>
        <td><code>west</code></td>
        <td><code>int</code></td>
        <td><p>The west boundary in degrees. Defaults to -180.</p></td>
        <td><code>-180</code></td>
      </tr>
      <tr>
        <td><code>east</code></td>
        <td><code>int</code></td>
        <td><p>The east boundary in degrees. Defaults to 180.</p></td>
        <td><code>180</code></td>
      </tr>
      <tr>
        <td><code>south</code></td>
        <td><code>int</code></td>
        <td><p>The south boundary in degrees. Defaults to -85.</p></td>
        <td><code>-85</code></td>
      </tr>
      <tr>
        <td><code>north</code></td>
        <td><code>int</code></td>
        <td><p>The north boundary in degrees. Defaults to 85.</p></td>
        <td><code>85</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>ee.FeatureColleciton</code></td>
      <td><p>A feature collection of longitude grids.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">longitude_grid</span><span class="p">(</span><span class="n">step</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">west</span><span class="o">=-</span><span class="mi">180</span><span class="p">,</span> <span class="n">east</span><span class="o">=</span><span class="mi">180</span><span class="p">,</span> <span class="n">south</span><span class="o">=-</span><span class="mi">85</span><span class="p">,</span> <span class="n">north</span><span class="o">=</span><span class="mi">85</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Create a longitude grid.</span>

<span class="sd">    Args:</span>
<span class="sd">        step (float, optional): The step size in degrees. Defaults to 1.0.</span>
<span class="sd">        west (int, optional): The west boundary in degrees. Defaults to -180.</span>
<span class="sd">        east (int, optional): The east boundary in degrees. Defaults to 180.</span>
<span class="sd">        south (int, optional): The south boundary in degrees. Defaults to -85.</span>
<span class="sd">        north (int, optional): The north boundary in degrees. Defaults to 85.</span>

<span class="sd">    Returns:</span>
<span class="sd">        ee.FeatureColleciton: A feature collection of longitude grids.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">values</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">List</span><span class="o">.</span><span class="n">sequence</span><span class="p">(</span><span class="n">west</span><span class="p">,</span> <span class="n">east</span> <span class="o">-</span> <span class="n">step</span><span class="p">,</span> <span class="n">step</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">create_feature</span><span class="p">(</span><span class="n">lon</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">ee</span><span class="o">.</span><span class="n">Feature</span><span class="p">(</span>
            <span class="n">ee</span><span class="o">.</span><span class="n">Geometry</span><span class="o">.</span><span class="n">BBox</span><span class="p">(</span><span class="n">lon</span><span class="p">,</span> <span class="n">south</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Number</span><span class="p">(</span><span class="n">lon</span><span class="p">)</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">step</span><span class="p">),</span> <span class="n">north</span><span class="p">)</span>
        <span class="p">)</span><span class="o">.</span><span class="n">set</span><span class="p">(</span>
            <span class="p">{</span>
                <span class="s2">&quot;south&quot;</span><span class="p">:</span> <span class="n">south</span><span class="p">,</span>
                <span class="s2">&quot;west&quot;</span><span class="p">:</span> <span class="n">lon</span><span class="p">,</span>
                <span class="s2">&quot;north&quot;</span><span class="p">:</span> <span class="n">north</span><span class="p">,</span>
                <span class="s2">&quot;east&quot;</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Number</span><span class="p">(</span><span class="n">lon</span><span class="p">)</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">step</span><span class="p">),</span>
            <span class="p">}</span>
        <span class="p">)</span>

    <span class="n">features</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">(</span><span class="n">values</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">create_feature</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">features</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.minimum_bounding_box" class="doc doc-heading">
<code class="highlight language-python"><span class="n">minimum_bounding_box</span><span class="p">(</span><span class="n">geojson</span><span class="p">)</span></code>


<a href="#geemap.common.minimum_bounding_box" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Gets the minimum bounding box for a geojson polygon.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>geojson</code></td>
        <td><code>dict</code></td>
        <td><p>A geojson dictionary.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>tuple</code></td>
      <td><p>Returns a tuple containing the minimum bounding box in the format of (lower_left(lat, lon), upper_right(lat, lon)), such as ((13, -130), (32, -120)).</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">minimum_bounding_box</span><span class="p">(</span><span class="n">geojson</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Gets the minimum bounding box for a geojson polygon.</span>

<span class="sd">    Args:</span>
<span class="sd">        geojson (dict): A geojson dictionary.</span>

<span class="sd">    Returns:</span>
<span class="sd">        tuple: Returns a tuple containing the minimum bounding box in the format of (lower_left(lat, lon), upper_right(lat, lon)), such as ((13, -130), (32, -120)).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">coordinates</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">if</span> <span class="s2">&quot;geometry&quot;</span> <span class="ow">in</span> <span class="n">geojson</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">coordinates</span> <span class="o">=</span> <span class="n">geojson</span><span class="p">[</span><span class="s2">&quot;geometry&quot;</span><span class="p">][</span><span class="s2">&quot;coordinates&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">coordinates</span> <span class="o">=</span> <span class="n">geojson</span><span class="p">[</span><span class="s2">&quot;coordinates&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">lower_left</span> <span class="o">=</span> <span class="nb">min</span><span class="p">([</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">coordinates</span><span class="p">]),</span> <span class="nb">min</span><span class="p">(</span>
            <span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">coordinates</span><span class="p">]</span>
        <span class="p">)</span>  <span class="c1"># (lat, lon)</span>
        <span class="n">upper_right</span> <span class="o">=</span> <span class="nb">max</span><span class="p">([</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">coordinates</span><span class="p">]),</span> <span class="nb">max</span><span class="p">(</span>
            <span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">coordinates</span><span class="p">]</span>
        <span class="p">)</span>  <span class="c1"># (lat, lon)</span>
        <span class="n">bounds</span> <span class="o">=</span> <span class="p">(</span><span class="n">lower_left</span><span class="p">,</span> <span class="n">upper_right</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">bounds</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.mosaic" class="doc doc-heading">
<code class="highlight language-python"><span class="n">mosaic</span><span class="p">(</span><span class="n">images</span><span class="p">,</span> <span class="n">output</span><span class="p">,</span> <span class="n">merge_args</span><span class="o">=</span><span class="p">{},</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.common.mosaic" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Mosaics a list of images into a single image. Inspired by https://bit.ly/3A6roDK.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>images</code></td>
        <td><code>str | list</code></td>
        <td><p>An input directory containing images or a list of images.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>output</code></td>
        <td><code>str</code></td>
        <td><p>The output image filepath.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>merge_args</code></td>
        <td><code>dict</code></td>
        <td><p>A dictionary of arguments to pass to the rasterio.merge function. Defaults to {}.</p></td>
        <td><code>{}</code></td>
      </tr>
      <tr>
        <td><code>verbose</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to print progress. Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">mosaic</span><span class="p">(</span><span class="n">images</span><span class="p">,</span> <span class="n">output</span><span class="p">,</span> <span class="n">merge_args</span><span class="o">=</span><span class="p">{},</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Mosaics a list of images into a single image. Inspired by https://bit.ly/3A6roDK.</span>

<span class="sd">    Args:</span>
<span class="sd">        images (str | list): An input directory containing images or a list of images.</span>
<span class="sd">        output (str): The output image filepath.</span>
<span class="sd">        merge_args (dict, optional): A dictionary of arguments to pass to the rasterio.merge function. Defaults to {}.</span>
<span class="sd">        verbose (bool, optional): Whether to print progress. Defaults to True.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span> <span class="nn">rasterio.merge</span> <span class="kn">import</span> <span class="n">merge</span>
    <span class="kn">import</span> <span class="nn">rasterio</span> <span class="k">as</span> <span class="nn">rio</span>
    <span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>

    <span class="n">output</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">output</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">images</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">images</span><span class="p">)</span>
        <span class="n">raster_files</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">path</span><span class="o">.</span><span class="n">iterdir</span><span class="p">())</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">images</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
        <span class="n">raster_files</span> <span class="o">=</span> <span class="n">images</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;images must be a list of raster files.&quot;</span><span class="p">)</span>

    <span class="n">raster_to_mosiac</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">output</span><span class="p">)):</span>
        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">output</span><span class="p">))</span>

    <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">p</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">raster_files</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">verbose</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Reading </span><span class="si">{</span><span class="n">index</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">raster_files</span><span class="p">)</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">p</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">raster</span> <span class="o">=</span> <span class="n">rio</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">raster_to_mosiac</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">raster</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">verbose</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Merging rasters...&quot;</span><span class="p">)</span>
    <span class="n">arr</span><span class="p">,</span> <span class="n">transform</span> <span class="o">=</span> <span class="n">merge</span><span class="p">(</span><span class="n">raster_to_mosiac</span><span class="p">,</span> <span class="o">**</span><span class="n">merge_args</span><span class="p">)</span>

    <span class="n">output_meta</span> <span class="o">=</span> <span class="n">raster</span><span class="o">.</span><span class="n">meta</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="n">output_meta</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
        <span class="p">{</span>
            <span class="s2">&quot;driver&quot;</span><span class="p">:</span> <span class="s2">&quot;GTiff&quot;</span><span class="p">,</span>
            <span class="s2">&quot;height&quot;</span><span class="p">:</span> <span class="n">arr</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
            <span class="s2">&quot;width&quot;</span><span class="p">:</span> <span class="n">arr</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span>
            <span class="s2">&quot;transform&quot;</span><span class="p">:</span> <span class="n">transform</span><span class="p">,</span>
        <span class="p">}</span>
    <span class="p">)</span>

    <span class="k">with</span> <span class="n">rio</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">output</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">output_meta</span><span class="p">)</span> <span class="k">as</span> <span class="n">m</span><span class="p">:</span>
        <span class="n">m</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.netcdf_tile_layer" class="doc doc-heading">
<code class="highlight language-python"><span class="n">netcdf_tile_layer</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">variables</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">palette</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">vmin</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">nodata</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="s1">&#39;default&#39;</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">projection</span><span class="o">=</span><span class="s1">&#39;EPSG:3857&#39;</span><span class="p">,</span> <span class="n">attribution</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">tile_format</span><span class="o">=</span><span class="s1">&#39;ipyleaflet&#39;</span><span class="p">,</span> <span class="n">layer_name</span><span class="o">=</span><span class="s1">&#39;NetCDF layer&#39;</span><span class="p">,</span> <span class="n">return_client</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">shift_lon</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">lat</span><span class="o">=</span><span class="s1">&#39;lat&#39;</span><span class="p">,</span> <span class="n">lon</span><span class="o">=</span><span class="s1">&#39;lon&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.common.netcdf_tile_layer" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Generate an ipyleaflet/folium TileLayer from a netCDF file.
    If you are using this function in JupyterHub on a remote server (e.g., Binder, Microsoft Planetary Computer),
    try adding to following two lines to the beginning of the notebook if the raster does not render properly.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code>import os
os.environ[&#39;LOCALTILESERVER_CLIENT_PREFIX&#39;] = f&#39;{os.environ[&#39;JUPYTERHUB_SERVICE_PREFIX&#39;].lstrip(&#39;/&#39;)}/proxy/{{port}}&#39;
</code></pre></div></td></tr></table></div>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>filename</code></td>
        <td><code>str</code></td>
        <td><p>File path or HTTP URL to the netCDF file.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>variables</code></td>
        <td><code>int</code></td>
        <td><p>The variable/band names to extract data from the netCDF file. Defaults to None. If None, all variables will be extracted.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>port</code></td>
        <td><code>str</code></td>
        <td><p>The port to use for the server. Defaults to "default".</p></td>
        <td><code>&#39;default&#39;</code></td>
      </tr>
      <tr>
        <td><code>palette</code></td>
        <td><code>str</code></td>
        <td><p>The name of the color palette from <code>palettable</code> to use when plotting a single band. See https://jiffyclub.github.io/palettable. Default is greyscale</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>vmin</code></td>
        <td><code>float</code></td>
        <td><p>The minimum value to use when colormapping the palette when plotting a single band. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>vmax</code></td>
        <td><code>float</code></td>
        <td><p>The maximum value to use when colormapping the palette when plotting a single band. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>nodata</code></td>
        <td><code>float</code></td>
        <td><p>The value from the band to use to interpret as not valid data. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>debug</code></td>
        <td><code>bool</code></td>
        <td><p>If True, the server will be started in debug mode. Defaults to False.</p></td>
        <td><code>False</code></td>
      </tr>
      <tr>
        <td><code>projection</code></td>
        <td><code>str</code></td>
        <td><p>The projection of the GeoTIFF. Defaults to "EPSG:3857".</p></td>
        <td><code>&#39;EPSG:3857&#39;</code></td>
      </tr>
      <tr>
        <td><code>attribution</code></td>
        <td><code>str</code></td>
        <td><p>Attribution for the source raster. This defaults to a message about it being a local file.. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>tile_format</code></td>
        <td><code>str</code></td>
        <td><p>The tile layer format. Can be either ipyleaflet or folium. Defaults to "ipyleaflet".</p></td>
        <td><code>&#39;ipyleaflet&#39;</code></td>
      </tr>
      <tr>
        <td><code>layer_name</code></td>
        <td><code>str</code></td>
        <td><p>The layer name to use. Defaults to "NetCDF layer".</p></td>
        <td><code>&#39;NetCDF layer&#39;</code></td>
      </tr>
      <tr>
        <td><code>return_client</code></td>
        <td><code>bool</code></td>
        <td><p>If True, the tile client will be returned. Defaults to False.</p></td>
        <td><code>False</code></td>
      </tr>
      <tr>
        <td><code>shift_lon</code></td>
        <td><code>bool</code></td>
        <td><p>Flag to shift longitude values from [0, 360] to the range [-180, 180]. Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
      <tr>
        <td><code>lat</code></td>
        <td><code>str</code></td>
        <td><p>Name of the latitude variable. Defaults to 'lat'.</p></td>
        <td><code>&#39;lat&#39;</code></td>
      </tr>
      <tr>
        <td><code>lon</code></td>
        <td><code>str</code></td>
        <td><p>Name of the longitude variable. Defaults to 'lon'.</p></td>
        <td><code>&#39;lon&#39;</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>ipyleaflet.TileLayer | folium.TileLayer</code></td>
      <td><p>An ipyleaflet.TileLayer or folium.TileLayer.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">netcdf_tile_layer</span><span class="p">(</span>
    <span class="n">filename</span><span class="p">,</span>
    <span class="n">variables</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">palette</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">vmin</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">vmax</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">nodata</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">port</span><span class="o">=</span><span class="s2">&quot;default&quot;</span><span class="p">,</span>
    <span class="n">debug</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">projection</span><span class="o">=</span><span class="s2">&quot;EPSG:3857&quot;</span><span class="p">,</span>
    <span class="n">attribution</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">tile_format</span><span class="o">=</span><span class="s2">&quot;ipyleaflet&quot;</span><span class="p">,</span>
    <span class="n">layer_name</span><span class="o">=</span><span class="s2">&quot;NetCDF layer&quot;</span><span class="p">,</span>
    <span class="n">return_client</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">shift_lon</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">lat</span><span class="o">=</span><span class="s2">&quot;lat&quot;</span><span class="p">,</span>
    <span class="n">lon</span><span class="o">=</span><span class="s2">&quot;lon&quot;</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Generate an ipyleaflet/folium TileLayer from a netCDF file.</span>
<span class="sd">        If you are using this function in JupyterHub on a remote server (e.g., Binder, Microsoft Planetary Computer),</span>
<span class="sd">        try adding to following two lines to the beginning of the notebook if the raster does not render properly.</span>

<span class="sd">        import os</span>
<span class="sd">        os.environ[&#39;LOCALTILESERVER_CLIENT_PREFIX&#39;] = f&#39;{os.environ[&#39;JUPYTERHUB_SERVICE_PREFIX&#39;].lstrip(&#39;/&#39;)}/proxy/{{port}}&#39;</span>

<span class="sd">    Args:</span>
<span class="sd">        filename (str): File path or HTTP URL to the netCDF file.</span>
<span class="sd">        variables (int, optional): The variable/band names to extract data from the netCDF file. Defaults to None. If None, all variables will be extracted.</span>
<span class="sd">        port (str, optional): The port to use for the server. Defaults to &quot;default&quot;.</span>
<span class="sd">        palette (str, optional): The name of the color palette from `palettable` to use when plotting a single band. See https://jiffyclub.github.io/palettable. Default is greyscale</span>
<span class="sd">        vmin (float, optional): The minimum value to use when colormapping the palette when plotting a single band. Defaults to None.</span>
<span class="sd">        vmax (float, optional): The maximum value to use when colormapping the palette when plotting a single band. Defaults to None.</span>
<span class="sd">        nodata (float, optional): The value from the band to use to interpret as not valid data. Defaults to None.</span>
<span class="sd">        debug (bool, optional): If True, the server will be started in debug mode. Defaults to False.</span>
<span class="sd">        projection (str, optional): The projection of the GeoTIFF. Defaults to &quot;EPSG:3857&quot;.</span>
<span class="sd">        attribution (str, optional): Attribution for the source raster. This defaults to a message about it being a local file.. Defaults to None.</span>
<span class="sd">        tile_format (str, optional): The tile layer format. Can be either ipyleaflet or folium. Defaults to &quot;ipyleaflet&quot;.</span>
<span class="sd">        layer_name (str, optional): The layer name to use. Defaults to &quot;NetCDF layer&quot;.</span>
<span class="sd">        return_client (bool, optional): If True, the tile client will be returned. Defaults to False.</span>
<span class="sd">        shift_lon (bool, optional): Flag to shift longitude values from [0, 360] to the range [-180, 180]. Defaults to True.</span>
<span class="sd">        lat (str, optional): Name of the latitude variable. Defaults to &#39;lat&#39;.</span>
<span class="sd">        lon (str, optional): Name of the longitude variable. Defaults to &#39;lon&#39;.</span>

<span class="sd">    Returns:</span>
<span class="sd">        ipyleaflet.TileLayer | folium.TileLayer: An ipyleaflet.TileLayer or folium.TileLayer.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">check_package</span><span class="p">(</span>
        <span class="s2">&quot;localtileserver&quot;</span><span class="p">,</span> <span class="n">URL</span><span class="o">=</span><span class="s2">&quot;https://github.com/banesullivan/localtileserver&quot;</span>
    <span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="kn">import</span> <span class="nn">xarray</span> <span class="k">as</span> <span class="nn">xr</span>
    <span class="k">except</span> <span class="ne">ImportError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ImportError</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">filename</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;http&quot;</span><span class="p">):</span>
        <span class="n">filename</span> <span class="o">=</span> <span class="n">download_file</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">filename</span><span class="si">}</span><span class="s2"> does not exist.&quot;</span><span class="p">)</span>

    <span class="n">output</span> <span class="o">=</span> <span class="n">filename</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;.nc&quot;</span><span class="p">,</span> <span class="s2">&quot;.tif&quot;</span><span class="p">)</span>

    <span class="n">xds</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">open_dataset</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">shift_lon</span><span class="p">:</span>
        <span class="n">xds</span><span class="o">.</span><span class="n">coords</span><span class="p">[</span><span class="n">lon</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">xds</span><span class="o">.</span><span class="n">coords</span><span class="p">[</span><span class="n">lon</span><span class="p">]</span> <span class="o">+</span> <span class="mi">180</span><span class="p">)</span> <span class="o">%</span> <span class="mi">360</span> <span class="o">-</span> <span class="mi">180</span>
        <span class="n">xds</span> <span class="o">=</span> <span class="n">xds</span><span class="o">.</span><span class="n">sortby</span><span class="p">(</span><span class="n">xds</span><span class="o">.</span><span class="n">lon</span><span class="p">)</span>

    <span class="n">allowed_vars</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">xds</span><span class="o">.</span><span class="n">data_vars</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">variables</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">variables</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">allowed_vars</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">variables</span><span class="si">}</span><span class="s2"> is not a subset of </span><span class="si">{</span><span class="n">allowed_vars</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>
        <span class="n">variables</span> <span class="o">=</span> <span class="p">[</span><span class="n">variables</span><span class="p">]</span>

    <span class="k">if</span> <span class="n">variables</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">variables</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">3</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Only 3 variables can be plotted at a time.&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">variables</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="p">(</span><span class="ow">not</span> <span class="nb">set</span><span class="p">(</span><span class="n">variables</span><span class="p">)</span><span class="o">.</span><span class="n">issubset</span><span class="p">(</span><span class="n">allowed_vars</span><span class="p">)):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">variables</span><span class="si">}</span><span class="s2"> must be a subset of </span><span class="si">{</span><span class="n">allowed_vars</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>

    <span class="n">xds</span><span class="o">.</span><span class="n">rio</span><span class="o">.</span><span class="n">set_spatial_dims</span><span class="p">(</span><span class="n">x_dim</span><span class="o">=</span><span class="n">lon</span><span class="p">,</span> <span class="n">y_dim</span><span class="o">=</span><span class="n">lat</span><span class="p">)</span><span class="o">.</span><span class="n">rio</span><span class="o">.</span><span class="n">to_raster</span><span class="p">(</span><span class="n">output</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">variables</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">allowed_vars</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">3</span><span class="p">:</span>
            <span class="n">band_idx</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">band_idx</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">band_idx</span> <span class="o">=</span> <span class="p">[</span><span class="n">allowed_vars</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">var</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span> <span class="k">for</span> <span class="n">var</span> <span class="ow">in</span> <span class="n">variables</span><span class="p">]</span>

    <span class="n">tile_layer</span> <span class="o">=</span> <span class="n">get_local_tile_layer</span><span class="p">(</span>
        <span class="n">output</span><span class="p">,</span>
        <span class="n">port</span><span class="o">=</span><span class="n">port</span><span class="p">,</span>
        <span class="n">debug</span><span class="o">=</span><span class="n">debug</span><span class="p">,</span>
        <span class="n">projection</span><span class="o">=</span><span class="n">projection</span><span class="p">,</span>
        <span class="n">band</span><span class="o">=</span><span class="n">band_idx</span><span class="p">,</span>
        <span class="n">palette</span><span class="o">=</span><span class="n">palette</span><span class="p">,</span>
        <span class="n">vmin</span><span class="o">=</span><span class="n">vmin</span><span class="p">,</span>
        <span class="n">vmax</span><span class="o">=</span><span class="n">vmax</span><span class="p">,</span>
        <span class="n">nodata</span><span class="o">=</span><span class="n">nodata</span><span class="p">,</span>
        <span class="n">attribution</span><span class="o">=</span><span class="n">attribution</span><span class="p">,</span>
        <span class="n">tile_format</span><span class="o">=</span><span class="n">tile_format</span><span class="p">,</span>
        <span class="n">layer_name</span><span class="o">=</span><span class="n">layer_name</span><span class="p">,</span>
        <span class="n">return_client</span><span class="o">=</span><span class="n">return_client</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">tile_layer</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.netcdf_to_ee" class="doc doc-heading">
<code class="highlight language-python"><span class="n">netcdf_to_ee</span><span class="p">(</span><span class="n">nc_file</span><span class="p">,</span> <span class="n">var_names</span><span class="p">,</span> <span class="n">band_names</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">lon</span><span class="o">=</span><span class="s1">&#39;lon&#39;</span><span class="p">,</span> <span class="n">lat</span><span class="o">=</span><span class="s1">&#39;lat&#39;</span><span class="p">)</span></code>


<a href="#geemap.common.netcdf_to_ee" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Creates an ee.Image from netCDF variables band_names that are read from nc_file. Currently only supports variables in a regular longitude/latitude grid (EPSG:4326).</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>nc_file</code></td>
        <td><code>str</code></td>
        <td><p>the name of the netCDF file to read</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>var_names</code></td>
        <td><code>str or list</code></td>
        <td><p>the name(s) of the variable(s) to read</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>band_names</code></td>
        <td><code>list</code></td>
        <td><p>if given, the bands are renamed to band_names. Defaults to the original var_names</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>lon</code></td>
        <td><code>str</code></td>
        <td><p>the name of the longitude variable in the netCDF file. Defaults to "lon"</p></td>
        <td><code>&#39;lon&#39;</code></td>
      </tr>
      <tr>
        <td><code>lat</code></td>
        <td><code>str</code></td>
        <td><p>the name of the latitude variable in the netCDF file. Defaults to "lat"</p></td>
        <td><code>&#39;lat&#39;</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>image</code></td>
      <td><p>An ee.Image</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">netcdf_to_ee</span><span class="p">(</span><span class="n">nc_file</span><span class="p">,</span> <span class="n">var_names</span><span class="p">,</span> <span class="n">band_names</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">lon</span><span class="o">=</span><span class="s2">&quot;lon&quot;</span><span class="p">,</span> <span class="n">lat</span><span class="o">=</span><span class="s2">&quot;lat&quot;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Creates an ee.Image from netCDF variables band_names that are read from nc_file. Currently only supports variables in a regular longitude/latitude grid (EPSG:4326).</span>

<span class="sd">    Args:</span>
<span class="sd">        nc_file (str): the name of the netCDF file to read</span>
<span class="sd">        var_names (str or list): the name(s) of the variable(s) to read</span>
<span class="sd">        band_names (list, optional): if given, the bands are renamed to band_names. Defaults to the original var_names</span>
<span class="sd">        lon (str, optional): the name of the longitude variable in the netCDF file. Defaults to &quot;lon&quot;</span>
<span class="sd">        lat (str, optional): the name of the latitude variable in the netCDF file. Defaults to &quot;lat&quot;</span>

<span class="sd">    Returns:</span>
<span class="sd">        image: An ee.Image</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="kn">import</span> <span class="nn">xarray</span> <span class="k">as</span> <span class="nn">xr</span>

    <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ImportError</span><span class="p">(</span>
            <span class="s2">&quot;You need to install xarray first. See https://github.com/pydata/xarray&quot;</span>
        <span class="p">)</span>

    <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

    <span class="k">try</span><span class="p">:</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">nc_file</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The input file must be a string.&quot;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="n">band_names</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">band_names</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">str</span><span class="p">)):</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Band names must be a string or list.&quot;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">lon</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">or</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">lat</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The longitude and latitude variable names must be a string.&quot;</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="n">ds</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">open_dataset</span><span class="p">(</span><span class="n">nc_file</span><span class="p">)</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">ds</span><span class="p">[</span><span class="n">var_names</span><span class="p">]</span>

        <span class="n">lon_data</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">lon</span><span class="p">]</span>
        <span class="n">lat_data</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">lat</span><span class="p">]</span>

        <span class="n">dim_lon</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ediff1d</span><span class="p">(</span><span class="n">lon_data</span><span class="p">))</span>
        <span class="n">dim_lat</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ediff1d</span><span class="p">(</span><span class="n">lat_data</span><span class="p">))</span>

        <span class="k">if</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">dim_lon</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">dim_lat</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The netCDF file is not a regular longitude/latitude grid&quot;</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">to_array</span><span class="p">()</span>
            <span class="c1"># ^ this is only needed (and works) if we have more than 1 variable</span>
            <span class="c1"># axis_for_roll will be used in case we need to use np.roll</span>
            <span class="c1"># and should be 1 for the case with more than 1 variable</span>
            <span class="n">axis_for_roll</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="n">axis_for_roll</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="c1"># .to_array() does not work (and is not needed!) if there is only 1 variable</span>
            <span class="c1"># in this case, the axis_for_roll needs to be 0</span>

        <span class="n">data_np</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

        <span class="n">do_transpose</span> <span class="o">=</span> <span class="kc">True</span>  <span class="c1"># To do: figure out if we need to tranpose the data or not</span>
        <span class="k">if</span> <span class="n">do_transpose</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">data_np</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">transpose</span><span class="p">(</span><span class="n">data_np</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
            <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
                <span class="n">data_np</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">transpose</span><span class="p">(</span><span class="n">data_np</span><span class="p">)</span>

        <span class="c1"># Figure out if we need to roll the data or not</span>
        <span class="c1"># (see https://github.com/giswqs/geemap/issues/285#issuecomment-791385176)</span>
        <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">lon_data</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">180</span><span class="p">:</span>
            <span class="n">data_np</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">roll</span><span class="p">(</span><span class="n">data_np</span><span class="p">,</span> <span class="mi">180</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="n">axis_for_roll</span><span class="p">)</span>
            <span class="n">west_lon</span> <span class="o">=</span> <span class="n">lon_data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="mi">180</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">west_lon</span> <span class="o">=</span> <span class="n">lon_data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

        <span class="n">transform</span> <span class="o">=</span> <span class="p">[</span><span class="n">dim_lon</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">float</span><span class="p">(</span><span class="n">west_lon</span><span class="p">),</span> <span class="mi">0</span><span class="p">,</span> <span class="n">dim_lat</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nb">float</span><span class="p">(</span><span class="n">lat_data</span><span class="p">[</span><span class="mi">0</span><span class="p">])]</span>

        <span class="k">if</span> <span class="n">band_names</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">band_names</span> <span class="o">=</span> <span class="n">var_names</span>

        <span class="n">image</span> <span class="o">=</span> <span class="n">numpy_to_ee</span><span class="p">(</span>
            <span class="n">data_np</span><span class="p">,</span> <span class="s2">&quot;EPSG:4326&quot;</span><span class="p">,</span> <span class="n">transform</span><span class="o">=</span><span class="n">transform</span><span class="p">,</span> <span class="n">band_names</span><span class="o">=</span><span class="n">band_names</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="n">image</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.netcdf_to_tif" class="doc doc-heading">
<code class="highlight language-python"><span class="n">netcdf_to_tif</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">output</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">variables</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">shift_lon</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">lat</span><span class="o">=</span><span class="s1">&#39;lat&#39;</span><span class="p">,</span> <span class="n">lon</span><span class="o">=</span><span class="s1">&#39;lon&#39;</span><span class="p">,</span> <span class="n">return_vars</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.common.netcdf_to_tif" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Convert a netcdf file to a GeoTIFF file.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>filename</code></td>
        <td><code>str</code></td>
        <td><p>Path to the netcdf file.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>output</code></td>
        <td><code>str</code></td>
        <td><p>Path to the output GeoTIFF file. Defaults to None. If None, the output file will be the same as the input file with the extension changed to .tif.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>variables</code></td>
        <td><code>str | list</code></td>
        <td><p>Name of the variable or a list of variables to extract. Defaults to None. If None, all variables will be extracted.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>shift_lon</code></td>
        <td><code>bool</code></td>
        <td><p>Flag to shift longitude values from [0, 360] to the range [-180, 180]. Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
      <tr>
        <td><code>lat</code></td>
        <td><code>str</code></td>
        <td><p>Name of the latitude variable. Defaults to 'lat'.</p></td>
        <td><code>&#39;lat&#39;</code></td>
      </tr>
      <tr>
        <td><code>lon</code></td>
        <td><code>str</code></td>
        <td><p>Name of the longitude variable. Defaults to 'lon'.</p></td>
        <td><code>&#39;lon&#39;</code></td>
      </tr>
      <tr>
        <td><code>return_vars</code></td>
        <td><code>bool</code></td>
        <td><p>Flag to return all variables. Defaults to False.</p></td>
        <td><code>False</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>ImportError</code></td>
        <td><p>If the xarray or rioxarray package is not installed.</p></td>
      </tr>
      <tr>
        <td><code>FileNotFoundError</code></td>
        <td><p>If the netcdf file is not found.</p></td>
      </tr>
      <tr>
        <td><code>ValueError</code></td>
        <td><p>If the variable is not found in the netcdf file.</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">netcdf_to_tif</span><span class="p">(</span>
    <span class="n">filename</span><span class="p">,</span>
    <span class="n">output</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">variables</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">shift_lon</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">lat</span><span class="o">=</span><span class="s2">&quot;lat&quot;</span><span class="p">,</span>
    <span class="n">lon</span><span class="o">=</span><span class="s2">&quot;lon&quot;</span><span class="p">,</span>
    <span class="n">return_vars</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Convert a netcdf file to a GeoTIFF file.</span>

<span class="sd">    Args:</span>
<span class="sd">        filename (str): Path to the netcdf file.</span>
<span class="sd">        output (str, optional): Path to the output GeoTIFF file. Defaults to None. If None, the output file will be the same as the input file with the extension changed to .tif.</span>
<span class="sd">        variables (str | list, optional): Name of the variable or a list of variables to extract. Defaults to None. If None, all variables will be extracted.</span>
<span class="sd">        shift_lon (bool, optional): Flag to shift longitude values from [0, 360] to the range [-180, 180]. Defaults to True.</span>
<span class="sd">        lat (str, optional): Name of the latitude variable. Defaults to &#39;lat&#39;.</span>
<span class="sd">        lon (str, optional): Name of the longitude variable. Defaults to &#39;lon&#39;.</span>
<span class="sd">        return_vars (bool, optional): Flag to return all variables. Defaults to False.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ImportError: If the xarray or rioxarray package is not installed.</span>
<span class="sd">        FileNotFoundError: If the netcdf file is not found.</span>
<span class="sd">        ValueError: If the variable is not found in the netcdf file.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="kn">import</span> <span class="nn">xarray</span> <span class="k">as</span> <span class="nn">xr</span>
    <span class="k">except</span> <span class="ne">ImportError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ImportError</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">filename</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;http&quot;</span><span class="p">):</span>
        <span class="n">filename</span> <span class="o">=</span> <span class="n">download_file</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">filename</span><span class="si">}</span><span class="s2"> does not exist.&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">output</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">output</span> <span class="o">=</span> <span class="n">filename</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;.nc&quot;</span><span class="p">,</span> <span class="s2">&quot;.tif&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">output</span> <span class="o">=</span> <span class="n">check_file_path</span><span class="p">(</span><span class="n">output</span><span class="p">)</span>

    <span class="n">xds</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">open_dataset</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">shift_lon</span><span class="p">:</span>
        <span class="n">xds</span><span class="o">.</span><span class="n">coords</span><span class="p">[</span><span class="n">lon</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">xds</span><span class="o">.</span><span class="n">coords</span><span class="p">[</span><span class="n">lon</span><span class="p">]</span> <span class="o">+</span> <span class="mi">180</span><span class="p">)</span> <span class="o">%</span> <span class="mi">360</span> <span class="o">-</span> <span class="mi">180</span>
        <span class="n">xds</span> <span class="o">=</span> <span class="n">xds</span><span class="o">.</span><span class="n">sortby</span><span class="p">(</span><span class="n">xds</span><span class="o">.</span><span class="n">lon</span><span class="p">)</span>

    <span class="n">allowed_vars</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">xds</span><span class="o">.</span><span class="n">data_vars</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">variables</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">variables</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">allowed_vars</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">variables</span><span class="si">}</span><span class="s2"> is not a valid variable.&quot;</span><span class="p">)</span>
        <span class="n">variables</span> <span class="o">=</span> <span class="p">[</span><span class="n">variables</span><span class="p">]</span>

    <span class="k">if</span> <span class="n">variables</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="p">(</span><span class="ow">not</span> <span class="nb">set</span><span class="p">(</span><span class="n">variables</span><span class="p">)</span><span class="o">.</span><span class="n">issubset</span><span class="p">(</span><span class="n">allowed_vars</span><span class="p">)):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">variables</span><span class="si">}</span><span class="s2"> must be a subset of </span><span class="si">{</span><span class="n">allowed_vars</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">variables</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">xds</span><span class="o">.</span><span class="n">rio</span><span class="o">.</span><span class="n">set_spatial_dims</span><span class="p">(</span><span class="n">x_dim</span><span class="o">=</span><span class="n">lon</span><span class="p">,</span> <span class="n">y_dim</span><span class="o">=</span><span class="n">lat</span><span class="p">)</span><span class="o">.</span><span class="n">rio</span><span class="o">.</span><span class="n">to_raster</span><span class="p">(</span><span class="n">output</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">xds</span><span class="p">[</span><span class="n">variables</span><span class="p">]</span><span class="o">.</span><span class="n">rio</span><span class="o">.</span><span class="n">set_spatial_dims</span><span class="p">(</span><span class="n">x_dim</span><span class="o">=</span><span class="n">lon</span><span class="p">,</span> <span class="n">y_dim</span><span class="o">=</span><span class="n">lat</span><span class="p">)</span><span class="o">.</span><span class="n">rio</span><span class="o">.</span><span class="n">to_raster</span><span class="p">(</span><span class="n">output</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">return_vars</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">output</span><span class="p">,</span> <span class="n">allowed_vars</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">output</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.num_round" class="doc doc-heading">
<code class="highlight language-python"><span class="n">num_round</span><span class="p">(</span><span class="n">num</span><span class="p">,</span> <span class="n">decimal</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span></code>


<a href="#geemap.common.num_round" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Rounds a number to a specified number of decimal places.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>num</code></td>
        <td><code>float</code></td>
        <td><p>The number to round.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>decimal</code></td>
        <td><code>int</code></td>
        <td><p>The number of decimal places to round. Defaults to 2.</p></td>
        <td><code>2</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>float</code></td>
      <td><p>The number with the specified decimal places rounded.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">num_round</span><span class="p">(</span><span class="n">num</span><span class="p">,</span> <span class="n">decimal</span><span class="o">=</span><span class="mi">2</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Rounds a number to a specified number of decimal places.</span>

<span class="sd">    Args:</span>
<span class="sd">        num (float): The number to round.</span>
<span class="sd">        decimal (int, optional): The number of decimal places to round. Defaults to 2.</span>

<span class="sd">    Returns:</span>
<span class="sd">        float: The number with the specified decimal places rounded.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">round</span><span class="p">(</span><span class="n">num</span><span class="p">,</span> <span class="n">decimal</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.numpy_to_cog" class="doc doc-heading">
<code class="highlight language-python"><span class="n">numpy_to_cog</span><span class="p">(</span><span class="n">np_array</span><span class="p">,</span> <span class="n">out_cog</span><span class="p">,</span> <span class="n">bounds</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">profile</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">crs</span><span class="o">=</span><span class="s1">&#39;epsg:4326&#39;</span><span class="p">)</span></code>


<a href="#geemap.common.numpy_to_cog" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Converts a numpy array to a COG file.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>np_array</code></td>
        <td><code>np.array</code></td>
        <td><p>A numpy array representing the image.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>out_cog</code></td>
        <td><code>str</code></td>
        <td><p>The output COG file path.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>bounds</code></td>
        <td><code>tuple</code></td>
        <td><p>The bounds of the image in the format of (minx, miny, maxx, maxy). Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>profile</code></td>
        <td><code>str | dict</code></td>
        <td><p>File path to an existing COG file or a dictionary representing the profile. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>dtype</code></td>
        <td><code>str</code></td>
        <td><p>The data type of the output COG file. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>crs</code></td>
        <td><code>str</code></td>
        <td><p>The coordinate reference system of the output COG file. Defaults to "epsg:4326".</p></td>
        <td><code>&#39;epsg:4326&#39;</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">numpy_to_cog</span><span class="p">(</span>
    <span class="n">np_array</span><span class="p">,</span> <span class="n">out_cog</span><span class="p">,</span> <span class="n">bounds</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">profile</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">crs</span><span class="o">=</span><span class="s2">&quot;epsg:4326&quot;</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Converts a numpy array to a COG file.</span>

<span class="sd">    Args:</span>
<span class="sd">        np_array (np.array): A numpy array representing the image.</span>
<span class="sd">        out_cog (str): The output COG file path.</span>
<span class="sd">        bounds (tuple, optional): The bounds of the image in the format of (minx, miny, maxx, maxy). Defaults to None.</span>
<span class="sd">        profile (str | dict, optional): File path to an existing COG file or a dictionary representing the profile. Defaults to None.</span>
<span class="sd">        dtype (str, optional): The data type of the output COG file. Defaults to None.</span>
<span class="sd">        crs (str, optional): The coordinate reference system of the output COG file. Defaults to &quot;epsg:4326&quot;.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
    <span class="kn">import</span> <span class="nn">rasterio</span>
    <span class="kn">from</span> <span class="nn">rasterio.io</span> <span class="kn">import</span> <span class="n">MemoryFile</span>
    <span class="kn">from</span> <span class="nn">rasterio.transform</span> <span class="kn">import</span> <span class="n">from_bounds</span>

    <span class="kn">from</span> <span class="nn">rio_cogeo.cogeo</span> <span class="kn">import</span> <span class="n">cog_translate</span>
    <span class="kn">from</span> <span class="nn">rio_cogeo.profiles</span> <span class="kn">import</span> <span class="n">cog_profiles</span>

    <span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s2">&quot;ignore&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">np_array</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;The input array must be a numpy array.&quot;</span><span class="p">)</span>

    <span class="n">out_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">out_cog</span><span class="p">)</span>
    <span class="n">check_dir</span><span class="p">(</span><span class="n">out_dir</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">profile</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">profile</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">profile</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span><span class="s2">&quot;The provided file could not be found.&quot;</span><span class="p">)</span>
            <span class="k">with</span> <span class="n">rasterio</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">profile</span><span class="p">)</span> <span class="k">as</span> <span class="n">ds</span><span class="p">:</span>
                <span class="n">bounds</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">bounds</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">profile</span><span class="p">,</span> <span class="n">rasterio</span><span class="o">.</span><span class="n">profiles</span><span class="o">.</span><span class="n">Profile</span><span class="p">):</span>
            <span class="n">profile</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">profile</span><span class="p">)</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">profile</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;The provided profile must be a file path or a dictionary.&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">bounds</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">bounds</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="mf">180.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">85.0511287798066</span><span class="p">,</span> <span class="mf">180.0</span><span class="p">,</span> <span class="mf">85.0511287798066</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">bounds</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">bounds</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">4</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;The provided bounds must be a tuple of length 4.&quot;</span><span class="p">)</span>

    <span class="c1"># Rasterio uses numpy array of shape of `(bands, height, width)`</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">np_array</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
        <span class="n">nbands</span> <span class="o">=</span> <span class="n">np_array</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">height</span> <span class="o">=</span> <span class="n">np_array</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">width</span> <span class="o">=</span> <span class="n">np_array</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
    <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">np_array</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
        <span class="n">nbands</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="n">height</span> <span class="o">=</span> <span class="n">np_array</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">width</span> <span class="o">=</span> <span class="n">np_array</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">np_array</span> <span class="o">=</span> <span class="n">np_array</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="n">width</span><span class="p">))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The input array must be a 2D or 3D numpy array.&quot;</span><span class="p">)</span>

    <span class="n">src_transform</span> <span class="o">=</span> <span class="n">from_bounds</span><span class="p">(</span><span class="o">*</span><span class="n">bounds</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="n">height</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">dtype</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">dtype</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">np_array</span><span class="o">.</span><span class="n">dtype</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">profile</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
        <span class="n">src_profile</span> <span class="o">=</span> <span class="n">profile</span>
        <span class="n">src_profile</span><span class="p">[</span><span class="s2">&quot;count&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">nbands</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">src_profile</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
            <span class="n">driver</span><span class="o">=</span><span class="s2">&quot;GTiff&quot;</span><span class="p">,</span>
            <span class="n">dtype</span><span class="o">=</span><span class="n">dtype</span><span class="p">,</span>
            <span class="n">count</span><span class="o">=</span><span class="n">nbands</span><span class="p">,</span>
            <span class="n">height</span><span class="o">=</span><span class="n">height</span><span class="p">,</span>
            <span class="n">width</span><span class="o">=</span><span class="n">width</span><span class="p">,</span>
            <span class="n">crs</span><span class="o">=</span><span class="n">crs</span><span class="p">,</span>
            <span class="n">transform</span><span class="o">=</span><span class="n">src_transform</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">with</span> <span class="n">MemoryFile</span><span class="p">()</span> <span class="k">as</span> <span class="n">memfile</span><span class="p">:</span>
        <span class="k">with</span> <span class="n">memfile</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="o">**</span><span class="n">src_profile</span><span class="p">)</span> <span class="k">as</span> <span class="n">mem</span><span class="p">:</span>
            <span class="c1"># Populate the input file with numpy array</span>
            <span class="n">mem</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">np_array</span><span class="p">)</span>

            <span class="n">dst_profile</span> <span class="o">=</span> <span class="n">cog_profiles</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;deflate&quot;</span><span class="p">)</span>
            <span class="n">cog_translate</span><span class="p">(</span>
                <span class="n">mem</span><span class="p">,</span>
                <span class="n">out_cog</span><span class="p">,</span>
                <span class="n">dst_profile</span><span class="p">,</span>
                <span class="n">in_memory</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                <span class="n">quiet</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.numpy_to_ee" class="doc doc-heading">
<code class="highlight language-python"><span class="n">numpy_to_ee</span><span class="p">(</span><span class="n">np_array</span><span class="p">,</span> <span class="n">crs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">transform</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">transformWkt</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">band_names</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


<a href="#geemap.common.numpy_to_ee" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Creates an ee.Image from a 3D numpy array where each 2D numpy slice is added to a band, and a geospatial transform that indicates where to put the data. If the np_array is already 2D only, then it is only a one-band image.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>np_array</code></td>
        <td><code>np.array</code></td>
        <td><p>the 3D (or 2D) numpy array to add to an image</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>crs</code></td>
        <td><code>str</code></td>
        <td><p>The base coordinate reference system of this Projection, given as a well-known authority code (e.g. 'EPSG:4326') or a WKT string.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>transform</code></td>
        <td><code>list</code></td>
        <td><p>The transform between projected coordinates and the base coordinate system, specified as a 2x3 affine transform matrix in row-major order: [xScale, xShearing, xTranslation, yShearing, yScale, yTranslation]. May not specify both this and 'transformWkt'.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>transformWkt</code></td>
        <td><code>str</code></td>
        <td><p>The transform between projected coordinates and the base coordinate system, specified as a WKT string. May not specify both this and 'transform'.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>band_names</code></td>
        <td><code>str or list</code></td>
        <td><p>The list of names for the bands. The default names are 'constant', and 'constant_1', 'constant_2', etc.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>image</code></td>
      <td><p>An ee.Image</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">numpy_to_ee</span><span class="p">(</span><span class="n">np_array</span><span class="p">,</span> <span class="n">crs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">transform</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">transformWkt</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">band_names</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Creates an ee.Image from a 3D numpy array where each 2D numpy slice is added to a band, and a geospatial transform that indicates where to put the data. If the np_array is already 2D only, then it is only a one-band image.</span>

<span class="sd">    Args:</span>
<span class="sd">        np_array (np.array): the 3D (or 2D) numpy array to add to an image</span>
<span class="sd">        crs (str): The base coordinate reference system of this Projection, given as a well-known authority code (e.g. &#39;EPSG:4326&#39;) or a WKT string.</span>
<span class="sd">        transform (list): The transform between projected coordinates and the base coordinate system, specified as a 2x3 affine transform matrix in row-major order: [xScale, xShearing, xTranslation, yShearing, yScale, yTranslation]. May not specify both this and &#39;transformWkt&#39;.</span>
<span class="sd">        transformWkt (str): The transform between projected coordinates and the base coordinate system, specified as a WKT string. May not specify both this and &#39;transform&#39;.</span>
<span class="sd">        band_names (str or list, optional): The list of names for the bands. The default names are &#39;constant&#39;, and &#39;constant_1&#39;, &#39;constant_2&#39;, etc.</span>

<span class="sd">    Returns:</span>
<span class="sd">        image: An ee.Image</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">np_array</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The input must be a numpy.ndarray.&quot;</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">len</span><span class="p">(</span><span class="n">np_array</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The input must have 2 or 3 dimensions&quot;</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="k">if</span> <span class="n">band_names</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">band_names</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">str</span><span class="p">)):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Band names must be a str or list&quot;</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">try</span><span class="p">:</span>

        <span class="n">projection</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Projection</span><span class="p">(</span><span class="n">crs</span><span class="p">,</span> <span class="n">transform</span><span class="p">,</span> <span class="n">transformWkt</span><span class="p">)</span>
        <span class="n">coords</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="o">.</span><span class="n">pixelCoordinates</span><span class="p">(</span><span class="n">projection</span><span class="p">)</span><span class="o">.</span><span class="n">floor</span><span class="p">()</span><span class="o">.</span><span class="n">int32</span><span class="p">()</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">coords</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">)</span>
        <span class="n">y</span> <span class="o">=</span> <span class="n">coords</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">=</span> <span class="n">np_array</span><span class="o">.</span><span class="n">shape</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">:</span>
            <span class="n">dimx</span> <span class="o">=</span> <span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">dimy</span> <span class="o">=</span> <span class="n">s</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">dimx</span> <span class="o">=</span> <span class="n">s</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">dimy</span> <span class="o">=</span> <span class="n">s</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
            <span class="n">dimz</span> <span class="o">=</span> <span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

        <span class="n">coord_mask</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">gte</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">And</span><span class="p">(</span><span class="n">y</span><span class="o">.</span><span class="n">gte</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span><span class="o">.</span><span class="n">And</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">lt</span><span class="p">(</span><span class="n">dimx</span><span class="p">))</span><span class="o">.</span><span class="n">And</span><span class="p">(</span><span class="n">y</span><span class="o">.</span><span class="n">lt</span><span class="p">(</span><span class="n">dimy</span><span class="p">))</span>
        <span class="n">coords</span> <span class="o">=</span> <span class="n">coords</span><span class="o">.</span><span class="n">updateMask</span><span class="p">(</span><span class="n">coord_mask</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">list_to_ee</span><span class="p">(</span><span class="n">a_list</span><span class="p">):</span>
            <span class="n">ee_data</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Array</span><span class="p">(</span><span class="n">a_list</span><span class="p">)</span>
            <span class="n">image</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">(</span><span class="n">ee_data</span><span class="p">)</span><span class="o">.</span><span class="n">arrayGet</span><span class="p">(</span><span class="n">coords</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">image</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">:</span>
            <span class="n">image</span> <span class="o">=</span> <span class="n">list_to_ee</span><span class="p">(</span><span class="n">np_array</span><span class="o">.</span><span class="n">tolist</span><span class="p">())</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">image</span> <span class="o">=</span> <span class="n">list_to_ee</span><span class="p">(</span><span class="n">np_array</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">())</span>
            <span class="k">for</span> <span class="n">z</span> <span class="ow">in</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">dimz</span><span class="p">):</span>
                <span class="n">image</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">addBands</span><span class="p">(</span><span class="n">list_to_ee</span><span class="p">(</span><span class="n">np_array</span><span class="p">[</span><span class="n">z</span><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">()))</span>

        <span class="k">if</span> <span class="n">band_names</span><span class="p">:</span>
            <span class="n">image</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">band_names</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">image</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.nwi_add_color" class="doc doc-heading">
<code class="highlight language-python"><span class="n">nwi_add_color</span><span class="p">(</span><span class="n">fc</span><span class="p">)</span></code>


<a href="#geemap.common.nwi_add_color" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Converts NWI vector dataset to image and add color to it.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>fc</code></td>
        <td><code>object</code></td>
        <td><p>ee.FeatureCollection</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>object</code></td>
      <td><p>ee.Image</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">nwi_add_color</span><span class="p">(</span><span class="n">fc</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Converts NWI vector dataset to image and add color to it.</span>

<span class="sd">    Args:</span>
<span class="sd">        fc (object): ee.FeatureCollection</span>

<span class="sd">    Returns:</span>
<span class="sd">        object: ee.Image</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">emergent</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">(</span>
        <span class="n">fc</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">Filter</span><span class="o">.</span><span class="n">eq</span><span class="p">(</span><span class="s2">&quot;WETLAND_TY&quot;</span><span class="p">,</span> <span class="s2">&quot;Freshwater Emergent Wetland&quot;</span><span class="p">))</span>
    <span class="p">)</span>
    <span class="n">emergent</span> <span class="o">=</span> <span class="n">emergent</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">f</span><span class="p">:</span> <span class="n">f</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;R&quot;</span><span class="p">,</span> <span class="mi">127</span><span class="p">)</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;G&quot;</span><span class="p">,</span> <span class="mi">195</span><span class="p">)</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;B&quot;</span><span class="p">,</span> <span class="mi">28</span><span class="p">))</span>
    <span class="c1"># print(emergent.first())</span>

    <span class="n">forested</span> <span class="o">=</span> <span class="n">fc</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span>
        <span class="n">ee</span><span class="o">.</span><span class="n">Filter</span><span class="o">.</span><span class="n">eq</span><span class="p">(</span><span class="s2">&quot;WETLAND_TY&quot;</span><span class="p">,</span> <span class="s2">&quot;Freshwater Forested/Shrub Wetland&quot;</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="n">forested</span> <span class="o">=</span> <span class="n">forested</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">f</span><span class="p">:</span> <span class="n">f</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;R&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;G&quot;</span><span class="p">,</span> <span class="mi">136</span><span class="p">)</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;B&quot;</span><span class="p">,</span> <span class="mi">55</span><span class="p">))</span>

    <span class="n">pond</span> <span class="o">=</span> <span class="n">fc</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">Filter</span><span class="o">.</span><span class="n">eq</span><span class="p">(</span><span class="s2">&quot;WETLAND_TY&quot;</span><span class="p">,</span> <span class="s2">&quot;Freshwater Pond&quot;</span><span class="p">))</span>
    <span class="n">pond</span> <span class="o">=</span> <span class="n">pond</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">f</span><span class="p">:</span> <span class="n">f</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;R&quot;</span><span class="p">,</span> <span class="mi">104</span><span class="p">)</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;G&quot;</span><span class="p">,</span> <span class="mi">140</span><span class="p">)</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;B&quot;</span><span class="p">,</span> <span class="mi">192</span><span class="p">))</span>

    <span class="n">lake</span> <span class="o">=</span> <span class="n">fc</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">Filter</span><span class="o">.</span><span class="n">eq</span><span class="p">(</span><span class="s2">&quot;WETLAND_TY&quot;</span><span class="p">,</span> <span class="s2">&quot;Lake&quot;</span><span class="p">))</span>
    <span class="n">lake</span> <span class="o">=</span> <span class="n">lake</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">f</span><span class="p">:</span> <span class="n">f</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;R&quot;</span><span class="p">,</span> <span class="mi">19</span><span class="p">)</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;G&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;B&quot;</span><span class="p">,</span> <span class="mi">124</span><span class="p">))</span>

    <span class="n">riverine</span> <span class="o">=</span> <span class="n">fc</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">Filter</span><span class="o">.</span><span class="n">eq</span><span class="p">(</span><span class="s2">&quot;WETLAND_TY&quot;</span><span class="p">,</span> <span class="s2">&quot;Riverine&quot;</span><span class="p">))</span>
    <span class="n">riverine</span> <span class="o">=</span> <span class="n">riverine</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">f</span><span class="p">:</span> <span class="n">f</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;R&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;G&quot;</span><span class="p">,</span> <span class="mi">144</span><span class="p">)</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;B&quot;</span><span class="p">,</span> <span class="mi">191</span><span class="p">))</span>

    <span class="n">fc</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">(</span>
        <span class="n">emergent</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">forested</span><span class="p">)</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">pond</span><span class="p">)</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">lake</span><span class="p">)</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">riverine</span><span class="p">)</span>
    <span class="p">)</span>

    <span class="c1">#   base = ee.Image(0).mask(0).toInt8()</span>
    <span class="n">base</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">()</span><span class="o">.</span><span class="n">byte</span><span class="p">()</span>
    <span class="n">img</span> <span class="o">=</span> <span class="n">base</span><span class="o">.</span><span class="n">paint</span><span class="p">(</span><span class="n">fc</span><span class="p">,</span> <span class="s2">&quot;R&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">addBands</span><span class="p">(</span>
        <span class="n">base</span><span class="o">.</span><span class="n">paint</span><span class="p">(</span><span class="n">fc</span><span class="p">,</span> <span class="s2">&quot;G&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">addBands</span><span class="p">(</span><span class="n">base</span><span class="o">.</span><span class="n">paint</span><span class="p">(</span><span class="n">fc</span><span class="p">,</span> <span class="s2">&quot;B&quot;</span><span class="p">))</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="n">img</span>
</code></pre></div>
        </details>
    </div>

  </div>




  <div class="doc doc-object doc-function">



<h2 id="geemap.common.open_github" class="doc doc-heading">
<code class="highlight language-python"><span class="n">open_github</span><span class="p">(</span><span class="n">subdir</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


<a href="#geemap.common.open_github" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Opens the GitHub repository for this package.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>subdir</code></td>
        <td><code>str</code></td>
        <td><p>Sub-directory of the repository. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">open_github</span><span class="p">(</span><span class="n">subdir</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Opens the GitHub repository for this package.</span>

<span class="sd">    Args:</span>
<span class="sd">        subdir (str, optional): Sub-directory of the repository. Defaults to None.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">webbrowser</span>

    <span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;https://github.com/giswqs/geemap&quot;</span>

    <span class="k">if</span> <span class="n">subdir</span> <span class="o">==</span> <span class="s2">&quot;source&quot;</span><span class="p">:</span>
        <span class="n">url</span> <span class="o">+=</span> <span class="s2">&quot;/tree/master/geemap/&quot;</span>
    <span class="k">elif</span> <span class="n">subdir</span> <span class="o">==</span> <span class="s2">&quot;examples&quot;</span><span class="p">:</span>
        <span class="n">url</span> <span class="o">+=</span> <span class="s2">&quot;/tree/master/examples&quot;</span>
    <span class="k">elif</span> <span class="n">subdir</span> <span class="o">==</span> <span class="s2">&quot;tutorials&quot;</span><span class="p">:</span>
        <span class="n">url</span> <span class="o">+=</span> <span class="s2">&quot;/tree/master/tutorials&quot;</span>

    <span class="n">webbrowser</span><span class="o">.</span><span class="n">open_new_tab</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.open_image_from_url" class="doc doc-heading">
<code class="highlight language-python"><span class="n">open_image_from_url</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="n">proxies</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


<a href="#geemap.common.open_image_from_url" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Loads an image from the specified URL.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>url</code></td>
        <td><code>str</code></td>
        <td><p>URL of the image.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>timeout</code></td>
        <td><code>int</code></td>
        <td><p>Timeout in seconds. Defaults to 300.</p></td>
        <td><code>300</code></td>
      </tr>
      <tr>
        <td><code>proxies</code></td>
        <td><code>dict</code></td>
        <td><p>Dictionary of proxies. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>object</code></td>
      <td><p>Image object.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">open_image_from_url</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="n">proxies</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Loads an image from the specified URL.</span>

<span class="sd">    Args:</span>
<span class="sd">        url (str): URL of the image.</span>
<span class="sd">        timeout (int, optional): Timeout in seconds. Defaults to 300.</span>
<span class="sd">        proxies (dict, optional): Dictionary of proxies. Defaults to None.</span>

<span class="sd">    Returns:</span>
<span class="sd">        object: Image object.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">Image</span>

    <span class="c1"># from io import BytesIO</span>
    <span class="c1"># from urllib.parse import urlparse</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">url</span> <span class="o">=</span> <span class="n">get_direct_url</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span> <span class="n">proxies</span><span class="o">=</span><span class="n">proxies</span><span class="p">)</span>
        <span class="n">img</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">content</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">img</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.open_youtube" class="doc doc-heading">
<code class="highlight language-python"><span class="n">open_youtube</span><span class="p">()</span></code>


<a href="#geemap.common.open_youtube" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Opens the YouTube tutorials for geemap.</p>

        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">open_youtube</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Opens the YouTube tutorials for geemap.&quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">webbrowser</span>

    <span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;https://www.youtube.com/playlist?list=PLAxJ4-o7ZoPccOFv1dCwvGI6TYnirRTg3&quot;</span>
    <span class="n">webbrowser</span><span class="o">.</span><span class="n">open_new_tab</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.osm_to_ee" class="doc doc-heading">
<code class="highlight language-python"><span class="n">osm_to_ee</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">which_result</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">by_osmid</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">buffer_dist</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">geodesic</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>


<a href="#geemap.common.osm_to_ee" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Retrieves place(s) by name or ID from the Nominatim API as an ee.FeatureCollection.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>query</code></td>
        <td><code>str | dict | list</code></td>
        <td><p>Query string(s) or structured dict(s) to geocode.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>which_result</code></td>
        <td><code>INT</code></td>
        <td><p>Which geocoding result to use. if None, auto-select the first (Multi)Polygon or raise an error if OSM doesn't return one. to get the top match regardless of geometry type, set which_result=1. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>by_osmid</code></td>
        <td><code>bool</code></td>
        <td><p>If True, handle query as an OSM ID for lookup rather than text search. Defaults to False.</p></td>
        <td><code>False</code></td>
      </tr>
      <tr>
        <td><code>buffer_dist</code></td>
        <td><code>float</code></td>
        <td><p>Distance to buffer around the place geometry, in meters. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>geodesic</code></td>
        <td><code>bool</code></td>
        <td><p>Whether line segments should be interpreted as spherical geodesics. If false, indicates that line segments should be interpreted as planar lines in the specified CRS. If absent, defaults to true if the CRS is geographic (including the default EPSG:4326), or to false if the CRS is projected.</p></td>
        <td><code>True</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>ee.FeatureCollection</code></td>
      <td><p>An Earth Engine FeatureCollection.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">osm_to_ee</span><span class="p">(</span>
    <span class="n">query</span><span class="p">,</span> <span class="n">which_result</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">by_osmid</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">buffer_dist</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">geodesic</span><span class="o">=</span><span class="kc">True</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Retrieves place(s) by name or ID from the Nominatim API as an ee.FeatureCollection.</span>

<span class="sd">    Args:</span>
<span class="sd">        query (str | dict | list): Query string(s) or structured dict(s) to geocode.</span>
<span class="sd">        which_result (INT, optional): Which geocoding result to use. if None, auto-select the first (Multi)Polygon or raise an error if OSM doesn&#39;t return one. to get the top match regardless of geometry type, set which_result=1. Defaults to None.</span>
<span class="sd">        by_osmid (bool, optional): If True, handle query as an OSM ID for lookup rather than text search. Defaults to False.</span>
<span class="sd">        buffer_dist (float, optional): Distance to buffer around the place geometry, in meters. Defaults to None.</span>
<span class="sd">        geodesic (bool, optional): Whether line segments should be interpreted as spherical geodesics. If false, indicates that line segments should be interpreted as planar lines in the specified CRS. If absent, defaults to true if the CRS is geographic (including the default EPSG:4326), or to false if the CRS is projected.</span>

<span class="sd">    Returns:</span>
<span class="sd">        ee.FeatureCollection: An Earth Engine FeatureCollection.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">gdf</span> <span class="o">=</span> <span class="n">osm_to_gdf</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">which_result</span><span class="p">,</span> <span class="n">by_osmid</span><span class="p">,</span> <span class="n">buffer_dist</span><span class="p">)</span>
    <span class="n">fc</span> <span class="o">=</span> <span class="n">gdf_to_ee</span><span class="p">(</span><span class="n">gdf</span><span class="p">,</span> <span class="n">geodesic</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">fc</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.osm_to_gdf" class="doc doc-heading">
<code class="highlight language-python"><span class="n">osm_to_gdf</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">which_result</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">by_osmid</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">buffer_dist</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


<a href="#geemap.common.osm_to_gdf" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Retrieves place(s) by name or ID from the Nominatim API as a GeoDataFrame.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>query</code></td>
        <td><code>str | dict | list</code></td>
        <td><p>Query string(s) or structured dict(s) to geocode.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>which_result</code></td>
        <td><code>INT</code></td>
        <td><p>Which geocoding result to use. if None, auto-select the first (Multi)Polygon or raise an error if OSM doesn't return one. to get the top match regardless of geometry type, set which_result=1. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>by_osmid</code></td>
        <td><code>bool</code></td>
        <td><p>If True, handle query as an OSM ID for lookup rather than text search. Defaults to False.</p></td>
        <td><code>False</code></td>
      </tr>
      <tr>
        <td><code>buffer_dist</code></td>
        <td><code>float</code></td>
        <td><p>Distance to buffer around the place geometry, in meters. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>GeoDataFrame</code></td>
      <td><p>A GeoPandas GeoDataFrame.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">osm_to_gdf</span><span class="p">(</span>
    <span class="n">query</span><span class="p">,</span>
    <span class="n">which_result</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">by_osmid</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">buffer_dist</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Retrieves place(s) by name or ID from the Nominatim API as a GeoDataFrame.</span>

<span class="sd">    Args:</span>
<span class="sd">        query (str | dict | list): Query string(s) or structured dict(s) to geocode.</span>
<span class="sd">        which_result (INT, optional): Which geocoding result to use. if None, auto-select the first (Multi)Polygon or raise an error if OSM doesn&#39;t return one. to get the top match regardless of geometry type, set which_result=1. Defaults to None.</span>
<span class="sd">        by_osmid (bool, optional): If True, handle query as an OSM ID for lookup rather than text search. Defaults to False.</span>
<span class="sd">        buffer_dist (float, optional): Distance to buffer around the place geometry, in meters. Defaults to None.</span>

<span class="sd">    Returns:</span>
<span class="sd">        GeoDataFrame: A GeoPandas GeoDataFrame.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">check_package</span><span class="p">(</span>
        <span class="s2">&quot;geopandas&quot;</span><span class="p">,</span> <span class="s2">&quot;https://geopandas.org/getting_started.html#installation&quot;</span>
    <span class="p">)</span>
    <span class="n">check_package</span><span class="p">(</span><span class="s2">&quot;osmnx&quot;</span><span class="p">,</span> <span class="s2">&quot;https://osmnx.readthedocs.io/en/stable/&quot;</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="kn">import</span> <span class="nn">osmnx</span> <span class="k">as</span> <span class="nn">ox</span>

        <span class="n">gdf</span> <span class="o">=</span> <span class="n">ox</span><span class="o">.</span><span class="n">geocode_to_gdf</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">which_result</span><span class="p">,</span> <span class="n">by_osmid</span><span class="p">,</span> <span class="n">buffer_dist</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">gdf</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.osm_to_geojson" class="doc doc-heading">
<code class="highlight language-python"><span class="n">osm_to_geojson</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">which_result</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">by_osmid</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">buffer_dist</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


<a href="#geemap.common.osm_to_geojson" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Retrieves place(s) by name or ID from the Nominatim API as an ee.FeatureCollection.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>query</code></td>
        <td><code>str | dict | list</code></td>
        <td><p>Query string(s) or structured dict(s) to geocode.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>which_result</code></td>
        <td><code>INT</code></td>
        <td><p>Which geocoding result to use. if None, auto-select the first (Multi)Polygon or raise an error if OSM doesn't return one. to get the top match regardless of geometry type, set which_result=1. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>by_osmid</code></td>
        <td><code>bool</code></td>
        <td><p>If True, handle query as an OSM ID for lookup rather than text search. Defaults to False.</p></td>
        <td><code>False</code></td>
      </tr>
      <tr>
        <td><code>buffer_dist</code></td>
        <td><code>float</code></td>
        <td><p>Distance to buffer around the place geometry, in meters. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>ee.FeatureCollection</code></td>
      <td><p>An Earth Engine FeatureCollection.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">osm_to_geojson</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">which_result</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">by_osmid</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">buffer_dist</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Retrieves place(s) by name or ID from the Nominatim API as an ee.FeatureCollection.</span>

<span class="sd">    Args:</span>
<span class="sd">        query (str | dict | list): Query string(s) or structured dict(s) to geocode.</span>
<span class="sd">        which_result (INT, optional): Which geocoding result to use. if None, auto-select the first (Multi)Polygon or raise an error if OSM doesn&#39;t return one. to get the top match regardless of geometry type, set which_result=1. Defaults to None.</span>
<span class="sd">        by_osmid (bool, optional): If True, handle query as an OSM ID for lookup rather than text search. Defaults to False.</span>
<span class="sd">        buffer_dist (float, optional): Distance to buffer around the place geometry, in meters. Defaults to None.</span>

<span class="sd">    Returns:</span>
<span class="sd">        ee.FeatureCollection: An Earth Engine FeatureCollection.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">gdf</span> <span class="o">=</span> <span class="n">osm_to_gdf</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">which_result</span><span class="p">,</span> <span class="n">by_osmid</span><span class="p">,</span> <span class="n">buffer_dist</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">gdf</span><span class="o">.</span><span class="n">__geo_interface__</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.osm_to_geopandas" class="doc doc-heading">
<code class="highlight language-python"><span class="n">osm_to_geopandas</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">which_result</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">by_osmid</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">buffer_dist</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


<a href="#geemap.common.osm_to_geopandas" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Retrieves place(s) by name or ID from the Nominatim API as a GeoDataFrame.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>query</code></td>
        <td><code>str | dict | list</code></td>
        <td><p>Query string(s) or structured dict(s) to geocode.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>which_result</code></td>
        <td><code>INT</code></td>
        <td><p>Which geocoding result to use. if None, auto-select the first (Multi)Polygon or raise an error if OSM doesn't return one. to get the top match regardless of geometry type, set which_result=1. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>by_osmid</code></td>
        <td><code>bool</code></td>
        <td><p>If True, handle query as an OSM ID for lookup rather than text search. Defaults to False.</p></td>
        <td><code>False</code></td>
      </tr>
      <tr>
        <td><code>buffer_dist</code></td>
        <td><code>float</code></td>
        <td><p>Distance to buffer around the place geometry, in meters. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>GeoDataFrame</code></td>
      <td><p>A GeoPandas GeoDataFrame.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">osm_to_gdf</span><span class="p">(</span>
    <span class="n">query</span><span class="p">,</span>
    <span class="n">which_result</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">by_osmid</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">buffer_dist</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Retrieves place(s) by name or ID from the Nominatim API as a GeoDataFrame.</span>

<span class="sd">    Args:</span>
<span class="sd">        query (str | dict | list): Query string(s) or structured dict(s) to geocode.</span>
<span class="sd">        which_result (INT, optional): Which geocoding result to use. if None, auto-select the first (Multi)Polygon or raise an error if OSM doesn&#39;t return one. to get the top match regardless of geometry type, set which_result=1. Defaults to None.</span>
<span class="sd">        by_osmid (bool, optional): If True, handle query as an OSM ID for lookup rather than text search. Defaults to False.</span>
<span class="sd">        buffer_dist (float, optional): Distance to buffer around the place geometry, in meters. Defaults to None.</span>

<span class="sd">    Returns:</span>
<span class="sd">        GeoDataFrame: A GeoPandas GeoDataFrame.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">check_package</span><span class="p">(</span>
        <span class="s2">&quot;geopandas&quot;</span><span class="p">,</span> <span class="s2">&quot;https://geopandas.org/getting_started.html#installation&quot;</span>
    <span class="p">)</span>
    <span class="n">check_package</span><span class="p">(</span><span class="s2">&quot;osmnx&quot;</span><span class="p">,</span> <span class="s2">&quot;https://osmnx.readthedocs.io/en/stable/&quot;</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="kn">import</span> <span class="nn">osmnx</span> <span class="k">as</span> <span class="nn">ox</span>

        <span class="n">gdf</span> <span class="o">=</span> <span class="n">ox</span><span class="o">.</span><span class="n">geocode_to_gdf</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">which_result</span><span class="p">,</span> <span class="n">by_osmid</span><span class="p">,</span> <span class="n">buffer_dist</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">gdf</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.pandas_to_ee" class="doc doc-heading">
<code class="highlight language-python"><span class="n">pandas_to_ee</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">latitude</span><span class="o">=</span><span class="s1">&#39;latitude&#39;</span><span class="p">,</span> <span class="n">longitude</span><span class="o">=</span><span class="s1">&#39;longitude&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.common.pandas_to_ee" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Converts a pandas DataFrame to ee.FeatureCollection.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>df</code></td>
        <td><code>pandas.DataFrame</code></td>
        <td><p>An input pandas.DataFrame.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>latitude</code></td>
        <td><code>str</code></td>
        <td><p>Column name for the latitude column. Defaults to 'latitude'.</p></td>
        <td><code>&#39;latitude&#39;</code></td>
      </tr>
      <tr>
        <td><code>longitude</code></td>
        <td><code>str</code></td>
        <td><p>Column name for the longitude column. Defaults to 'longitude'.</p></td>
        <td><code>&#39;longitude&#39;</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>TypeError</code></td>
        <td><p>The input data type must be pandas.DataFrame.</p></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>ee.FeatureCollection</code></td>
      <td><p>The ee.FeatureCollection converted from the input pandas DataFrame.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">df_to_ee</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">latitude</span><span class="o">=</span><span class="s2">&quot;latitude&quot;</span><span class="p">,</span> <span class="n">longitude</span><span class="o">=</span><span class="s2">&quot;longitude&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Converts a pandas DataFrame to ee.FeatureCollection.</span>

<span class="sd">    Args:</span>
<span class="sd">        df (pandas.DataFrame): An input pandas.DataFrame.</span>
<span class="sd">        latitude (str, optional): Column name for the latitude column. Defaults to &#39;latitude&#39;.</span>
<span class="sd">        longitude (str, optional): Column name for the longitude column. Defaults to &#39;longitude&#39;.</span>

<span class="sd">    Raises:</span>
<span class="sd">        TypeError: The input data type must be pandas.DataFrame.</span>

<span class="sd">    Returns:</span>
<span class="sd">        ee.FeatureCollection: The ee.FeatureCollection converted from the input pandas DataFrame.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;The input data type must be pandas.DataFrame.&quot;</span><span class="p">)</span>

    <span class="n">geojson</span> <span class="o">=</span> <span class="n">df_to_geojson</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">latitude</span><span class="o">=</span><span class="n">latitude</span><span class="p">,</span> <span class="n">longitude</span><span class="o">=</span><span class="n">longitude</span><span class="p">)</span>
    <span class="n">fc</span> <span class="o">=</span> <span class="n">geojson_to_ee</span><span class="p">(</span><span class="n">geojson</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">fc</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.planet_biannual_tiles_tropical" class="doc doc-heading">
<code class="highlight language-python"><span class="n">planet_biannual_tiles_tropical</span><span class="p">(</span><span class="n">api_key</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">token_name</span><span class="o">=</span><span class="s1">&#39;PLANET_API_KEY&#39;</span><span class="p">,</span> <span class="n">tile_format</span><span class="o">=</span><span class="s1">&#39;ipyleaflet&#39;</span><span class="p">)</span></code>


<a href="#geemap.common.planet_biannual_tiles_tropical" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Generates Planet  bi-annual imagery TileLayer based on an API key. See https://assets.planet.com/docs/NICFI_UserGuidesFAQ.pdf</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>api_key</code></td>
        <td><code>str</code></td>
        <td><p>The Planet API key. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>token_name</code></td>
        <td><code>str</code></td>
        <td><p>The environment variable name of the API key. Defaults to "PLANET_API_KEY".</p></td>
        <td><code>&#39;PLANET_API_KEY&#39;</code></td>
      </tr>
      <tr>
        <td><code>tile_format</code></td>
        <td><code>str</code></td>
        <td><p>The TileLayer format, can be either ipyleaflet or folium. Defaults to "ipyleaflet".</p></td>
        <td><code>&#39;ipyleaflet&#39;</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>ValueError</code></td>
        <td><p>If the tile layer format is invalid.</p></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>dict</code></td>
      <td><p>A dictionary of TileLayer.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">planet_biannual_tiles_tropical</span><span class="p">(</span>
    <span class="n">api_key</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">token_name</span><span class="o">=</span><span class="s2">&quot;PLANET_API_KEY&quot;</span><span class="p">,</span> <span class="n">tile_format</span><span class="o">=</span><span class="s2">&quot;ipyleaflet&quot;</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Generates Planet  bi-annual imagery TileLayer based on an API key. See https://assets.planet.com/docs/NICFI_UserGuidesFAQ.pdf</span>

<span class="sd">    Args:</span>
<span class="sd">        api_key (str, optional): The Planet API key. Defaults to None.</span>
<span class="sd">        token_name (str, optional): The environment variable name of the API key. Defaults to &quot;PLANET_API_KEY&quot;.</span>
<span class="sd">        tile_format (str, optional): The TileLayer format, can be either ipyleaflet or folium. Defaults to &quot;ipyleaflet&quot;.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If the tile layer format is invalid.</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict: A dictionary of TileLayer.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="kn">import</span> <span class="nn">folium</span>
    <span class="kn">import</span> <span class="nn">ipyleaflet</span>

    <span class="k">if</span> <span class="n">tile_format</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;ipyleaflet&quot;</span><span class="p">,</span> <span class="s2">&quot;folium&quot;</span><span class="p">]:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The tile format must be either ipyleaflet or folium.&quot;</span><span class="p">)</span>

    <span class="n">tiles</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">link</span> <span class="o">=</span> <span class="n">planet_biannual_tropical</span><span class="p">(</span><span class="n">api_key</span><span class="p">,</span> <span class="n">token_name</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">url</span> <span class="ow">in</span> <span class="n">link</span><span class="p">:</span>
        <span class="n">index</span> <span class="o">=</span> <span class="n">url</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;20&quot;</span><span class="p">)</span>
        <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;Planet_&quot;</span> <span class="o">+</span> <span class="n">url</span><span class="p">[</span><span class="n">index</span> <span class="p">:</span> <span class="n">index</span> <span class="o">+</span> <span class="mi">15</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">tile_format</span> <span class="o">==</span> <span class="s2">&quot;ipyleaflet&quot;</span><span class="p">:</span>
            <span class="n">tile</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">TileLayer</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">attribution</span><span class="o">=</span><span class="s2">&quot;Planet&quot;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">tile</span> <span class="o">=</span> <span class="n">folium</span><span class="o">.</span><span class="n">TileLayer</span><span class="p">(</span>
                <span class="n">tiles</span><span class="o">=</span><span class="n">url</span><span class="p">,</span>
                <span class="n">attr</span><span class="o">=</span><span class="s2">&quot;Planet&quot;</span><span class="p">,</span>
                <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
                <span class="n">overlay</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                <span class="n">control</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="n">tiles</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">tile</span>

    <span class="k">return</span> <span class="n">tiles</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.planet_biannual_tropical" class="doc doc-heading">
<code class="highlight language-python"><span class="n">planet_biannual_tropical</span><span class="p">(</span><span class="n">api_key</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">token_name</span><span class="o">=</span><span class="s1">&#39;PLANET_API_KEY&#39;</span><span class="p">)</span></code>


<a href="#geemap.common.planet_biannual_tropical" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Generates Planet bi-annual imagery URLs based on an API key. See https://assets.planet.com/docs/NICFI_UserGuidesFAQ.pdf</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>api_key</code></td>
        <td><code>str</code></td>
        <td><p>The Planet API key. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>token_name</code></td>
        <td><code>str</code></td>
        <td><p>The environment variable name of the API key. Defaults to "PLANET_API_KEY".</p></td>
        <td><code>&#39;PLANET_API_KEY&#39;</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>ValueError</code></td>
        <td><p>If the API key could not be found.</p></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>list</code></td>
      <td><p>A list of tile URLs.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">planet_biannual_tropical</span><span class="p">(</span><span class="n">api_key</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">token_name</span><span class="o">=</span><span class="s2">&quot;PLANET_API_KEY&quot;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Generates Planet bi-annual imagery URLs based on an API key. See https://assets.planet.com/docs/NICFI_UserGuidesFAQ.pdf</span>

<span class="sd">    Args:</span>
<span class="sd">        api_key (str, optional): The Planet API key. Defaults to None.</span>
<span class="sd">        token_name (str, optional): The environment variable name of the API key. Defaults to &quot;PLANET_API_KEY&quot;.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If the API key could not be found.</span>

<span class="sd">    Returns:</span>
<span class="sd">        list: A list of tile URLs.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">api_key</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">api_key</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">token_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">api_key</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The Planet API Key must be provided.&quot;</span><span class="p">)</span>

    <span class="n">dates</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s2">&quot;2015-12_2016-05&quot;</span><span class="p">,</span>
        <span class="s2">&quot;2016-06_2016-11&quot;</span><span class="p">,</span>
        <span class="s2">&quot;2016-12_2017-05&quot;</span><span class="p">,</span>
        <span class="s2">&quot;2017-06_2017-11&quot;</span><span class="p">,</span>
        <span class="s2">&quot;2017-12_2018-05&quot;</span><span class="p">,</span>
        <span class="s2">&quot;2018-06_2018-11&quot;</span><span class="p">,</span>
        <span class="s2">&quot;2018-12_2019-05&quot;</span><span class="p">,</span>
        <span class="s2">&quot;2019-06_2019-11&quot;</span><span class="p">,</span>
        <span class="s2">&quot;2019-12_2020-05&quot;</span><span class="p">,</span>
        <span class="s2">&quot;2020-06_2020-08&quot;</span><span class="p">,</span>
    <span class="p">]</span>

    <span class="n">link</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">prefix</span> <span class="o">=</span> <span class="s2">&quot;https://tiles.planet.com/basemaps/v1/planet-tiles/planet_medres_normalized_analytic_&quot;</span>
    <span class="n">subfix</span> <span class="o">=</span> <span class="s2">&quot;_mosaic/gmap/</span><span class="si">{z}</span><span class="s2">/</span><span class="si">{x}</span><span class="s2">/</span><span class="si">{y}</span><span class="s2">.png?api_key=&quot;</span>

    <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">dates</span><span class="p">:</span>
        <span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">prefix</span><span class="si">}{</span><span class="n">d</span><span class="si">}{</span><span class="n">subfix</span><span class="si">}{</span><span class="n">api_key</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="n">link</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">link</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.planet_by_month" class="doc doc-heading">
<code class="highlight language-python"><span class="n">planet_by_month</span><span class="p">(</span><span class="n">year</span><span class="o">=</span><span class="mi">2016</span><span class="p">,</span> <span class="n">month</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">api_key</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">token_name</span><span class="o">=</span><span class="s1">&#39;PLANET_API_KEY&#39;</span><span class="p">)</span></code>


<a href="#geemap.common.planet_by_month" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Gets Planet global mosaic tile url by month. To get a Planet API key, see https://developers.planet.com/quickstart/apis/</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>year</code></td>
        <td><code>int</code></td>
        <td><p>The year of Planet global mosaic, must be &gt;=2016. Defaults to 2016.</p></td>
        <td><code>2016</code></td>
      </tr>
      <tr>
        <td><code>month</code></td>
        <td><code>int</code></td>
        <td><p>The month of Planet global mosaic, must be 1-12. Defaults to 1.</p></td>
        <td><code>1</code></td>
      </tr>
      <tr>
        <td><code>api_key</code></td>
        <td><code>str</code></td>
        <td><p>The Planet API key. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>token_name</code></td>
        <td><code>str</code></td>
        <td><p>The environment variable name of the API key. Defaults to "PLANET_API_KEY".</p></td>
        <td><code>&#39;PLANET_API_KEY&#39;</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>ValueError</code></td>
        <td><p>The Planet API key is not provided.</p></td>
      </tr>
      <tr>
        <td><code>ValueError</code></td>
        <td><p>The year is invalid.</p></td>
      </tr>
      <tr>
        <td><code>ValueError</code></td>
        <td><p>The month is invalid.</p></td>
      </tr>
      <tr>
        <td><code>ValueError</code></td>
        <td><p>The month is invalid.</p></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>str</code></td>
      <td><p>A Planet global mosaic tile url.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">planet_by_month</span><span class="p">(</span>
    <span class="n">year</span><span class="o">=</span><span class="mi">2016</span><span class="p">,</span>
    <span class="n">month</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
    <span class="n">api_key</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">token_name</span><span class="o">=</span><span class="s2">&quot;PLANET_API_KEY&quot;</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Gets Planet global mosaic tile url by month. To get a Planet API key, see https://developers.planet.com/quickstart/apis/</span>

<span class="sd">    Args:</span>
<span class="sd">        year (int, optional): The year of Planet global mosaic, must be &gt;=2016. Defaults to 2016.</span>
<span class="sd">        month (int, optional): The month of Planet global mosaic, must be 1-12. Defaults to 1.</span>
<span class="sd">        api_key (str, optional): The Planet API key. Defaults to None.</span>
<span class="sd">        token_name (str, optional): The environment variable name of the API key. Defaults to &quot;PLANET_API_KEY&quot;.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: The Planet API key is not provided.</span>
<span class="sd">        ValueError: The year is invalid.</span>
<span class="sd">        ValueError: The month is invalid.</span>
<span class="sd">        ValueError: The month is invalid.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: A Planet global mosaic tile url.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># from datetime import date</span>

    <span class="k">if</span> <span class="n">api_key</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">api_key</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">token_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">api_key</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The Planet API Key must be provided.&quot;</span><span class="p">)</span>

    <span class="n">today</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">today</span><span class="p">()</span>
    <span class="n">year_now</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">today</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y&quot;</span><span class="p">))</span>
    <span class="n">month_now</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">today</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%m&quot;</span><span class="p">))</span>
    <span class="c1"># quarter_now = (month_now - 1) // 3 + 1</span>

    <span class="k">if</span> <span class="n">year</span> <span class="o">&gt;</span> <span class="n">year_now</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Year must be between 2016 and </span><span class="si">{</span><span class="n">year_now</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">year</span> <span class="o">==</span> <span class="n">year_now</span> <span class="ow">and</span> <span class="n">month</span> <span class="o">&gt;=</span> <span class="n">month_now</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Month must be less than </span><span class="si">{</span><span class="n">month_now</span><span class="si">}</span><span class="s2"> for year </span><span class="si">{</span><span class="n">year_now</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">month</span> <span class="o">&lt;</span> <span class="mi">1</span> <span class="ow">or</span> <span class="n">month</span> <span class="o">&gt;</span> <span class="mi">12</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Month must be between 1 and 12.&quot;</span><span class="p">)</span>

    <span class="n">prefix</span> <span class="o">=</span> <span class="s2">&quot;https://tiles.planet.com/basemaps/v1/planet-tiles/global_monthly_&quot;</span>
    <span class="n">subfix</span> <span class="o">=</span> <span class="s2">&quot;_mosaic/gmap/</span><span class="si">{z}</span><span class="s2">/</span><span class="si">{x}</span><span class="s2">/</span><span class="si">{y}</span><span class="s2">.png?api_key=&quot;</span>

    <span class="n">m_str</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">year</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;_&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">month</span><span class="p">)</span><span class="o">.</span><span class="n">zfill</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">prefix</span><span class="si">}{</span><span class="n">m_str</span><span class="si">}{</span><span class="n">subfix</span><span class="si">}{</span><span class="n">api_key</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="k">return</span> <span class="n">url</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.planet_by_quarter" class="doc doc-heading">
<code class="highlight language-python"><span class="n">planet_by_quarter</span><span class="p">(</span><span class="n">year</span><span class="o">=</span><span class="mi">2016</span><span class="p">,</span> <span class="n">quarter</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">api_key</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">token_name</span><span class="o">=</span><span class="s1">&#39;PLANET_API_KEY&#39;</span><span class="p">)</span></code>


<a href="#geemap.common.planet_by_quarter" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Gets Planet global mosaic tile url by quarter. To get a Planet API key, see https://developers.planet.com/quickstart/apis/</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>year</code></td>
        <td><code>int</code></td>
        <td><p>The year of Planet global mosaic, must be &gt;=2016. Defaults to 2016.</p></td>
        <td><code>2016</code></td>
      </tr>
      <tr>
        <td><code>quarter</code></td>
        <td><code>int</code></td>
        <td><p>The quarter of Planet global mosaic, must be 1-4. Defaults to 1.</p></td>
        <td><code>1</code></td>
      </tr>
      <tr>
        <td><code>api_key</code></td>
        <td><code>str</code></td>
        <td><p>The Planet API key. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>token_name</code></td>
        <td><code>str</code></td>
        <td><p>The environment variable name of the API key. Defaults to "PLANET_API_KEY".</p></td>
        <td><code>&#39;PLANET_API_KEY&#39;</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>ValueError</code></td>
        <td><p>The Planet API key is not provided.</p></td>
      </tr>
      <tr>
        <td><code>ValueError</code></td>
        <td><p>The year is invalid.</p></td>
      </tr>
      <tr>
        <td><code>ValueError</code></td>
        <td><p>The quarter is invalid.</p></td>
      </tr>
      <tr>
        <td><code>ValueError</code></td>
        <td><p>The quarter is invalid.</p></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>str</code></td>
      <td><p>A Planet global mosaic tile url.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">planet_by_quarter</span><span class="p">(</span>
    <span class="n">year</span><span class="o">=</span><span class="mi">2016</span><span class="p">,</span>
    <span class="n">quarter</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
    <span class="n">api_key</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">token_name</span><span class="o">=</span><span class="s2">&quot;PLANET_API_KEY&quot;</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Gets Planet global mosaic tile url by quarter. To get a Planet API key, see https://developers.planet.com/quickstart/apis/</span>

<span class="sd">    Args:</span>
<span class="sd">        year (int, optional): The year of Planet global mosaic, must be &gt;=2016. Defaults to 2016.</span>
<span class="sd">        quarter (int, optional): The quarter of Planet global mosaic, must be 1-4. Defaults to 1.</span>
<span class="sd">        api_key (str, optional): The Planet API key. Defaults to None.</span>
<span class="sd">        token_name (str, optional): The environment variable name of the API key. Defaults to &quot;PLANET_API_KEY&quot;.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: The Planet API key is not provided.</span>
<span class="sd">        ValueError: The year is invalid.</span>
<span class="sd">        ValueError: The quarter is invalid.</span>
<span class="sd">        ValueError: The quarter is invalid.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: A Planet global mosaic tile url.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># from datetime import date</span>

    <span class="k">if</span> <span class="n">api_key</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">api_key</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">token_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">api_key</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The Planet API Key must be provided.&quot;</span><span class="p">)</span>

    <span class="n">today</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">today</span><span class="p">()</span>
    <span class="n">year_now</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">today</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y&quot;</span><span class="p">))</span>
    <span class="n">month_now</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">today</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%m&quot;</span><span class="p">))</span>
    <span class="n">quarter_now</span> <span class="o">=</span> <span class="p">(</span><span class="n">month_now</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">//</span> <span class="mi">3</span> <span class="o">+</span> <span class="mi">1</span>

    <span class="k">if</span> <span class="n">year</span> <span class="o">&gt;</span> <span class="n">year_now</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Year must be between 2016 and </span><span class="si">{</span><span class="n">year_now</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">year</span> <span class="o">==</span> <span class="n">year_now</span> <span class="ow">and</span> <span class="n">quarter</span> <span class="o">&gt;=</span> <span class="n">quarter_now</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Quarter must be less than </span><span class="si">{</span><span class="n">quarter_now</span><span class="si">}</span><span class="s2"> for year </span><span class="si">{</span><span class="n">year_now</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">quarter</span> <span class="o">&lt;</span> <span class="mi">1</span> <span class="ow">or</span> <span class="n">quarter</span> <span class="o">&gt;</span> <span class="mi">4</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Quarter must be between 1 and 4.&quot;</span><span class="p">)</span>

    <span class="n">prefix</span> <span class="o">=</span> <span class="s2">&quot;https://tiles.planet.com/basemaps/v1/planet-tiles/global_quarterly_&quot;</span>
    <span class="n">subfix</span> <span class="o">=</span> <span class="s2">&quot;_mosaic/gmap/</span><span class="si">{z}</span><span class="s2">/</span><span class="si">{x}</span><span class="s2">/</span><span class="si">{y}</span><span class="s2">.png?api_key=&quot;</span>

    <span class="n">m_str</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">year</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;q&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">quarter</span><span class="p">)</span>
    <span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">prefix</span><span class="si">}{</span><span class="n">m_str</span><span class="si">}{</span><span class="n">subfix</span><span class="si">}{</span><span class="n">api_key</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="k">return</span> <span class="n">url</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.planet_catalog" class="doc doc-heading">
<code class="highlight language-python"><span class="n">planet_catalog</span><span class="p">(</span><span class="n">api_key</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">token_name</span><span class="o">=</span><span class="s1">&#39;PLANET_API_KEY&#39;</span><span class="p">)</span></code>


<a href="#geemap.common.planet_catalog" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Generates Planet bi-annual and monthly imagery URLs based on an API key. See https://assets.planet.com/docs/NICFI_UserGuidesFAQ.pdf</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>api_key</code></td>
        <td><code>str</code></td>
        <td><p>The Planet API key. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>token_name</code></td>
        <td><code>str</code></td>
        <td><p>The environment variable name of the API key. Defaults to "PLANET_API_KEY".</p></td>
        <td><code>&#39;PLANET_API_KEY&#39;</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>list</code></td>
      <td><p>A list of tile URLs.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">planet_catalog</span><span class="p">(</span><span class="n">api_key</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">token_name</span><span class="o">=</span><span class="s2">&quot;PLANET_API_KEY&quot;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Generates Planet bi-annual and monthly imagery URLs based on an API key. See https://assets.planet.com/docs/NICFI_UserGuidesFAQ.pdf</span>

<span class="sd">    Args:</span>
<span class="sd">        api_key (str, optional): The Planet API key. Defaults to None.</span>
<span class="sd">        token_name (str, optional): The environment variable name of the API key. Defaults to &quot;PLANET_API_KEY&quot;.</span>

<span class="sd">    Returns:</span>
<span class="sd">        list: A list of tile URLs.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">quarterly</span> <span class="o">=</span> <span class="n">planet_quarterly</span><span class="p">(</span><span class="n">api_key</span><span class="p">,</span> <span class="n">token_name</span><span class="p">)</span>
    <span class="n">monthly</span> <span class="o">=</span> <span class="n">planet_monthly</span><span class="p">(</span><span class="n">api_key</span><span class="p">,</span> <span class="n">token_name</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">quarterly</span> <span class="o">+</span> <span class="n">monthly</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.planet_catalog_tropical" class="doc doc-heading">
<code class="highlight language-python"><span class="n">planet_catalog_tropical</span><span class="p">(</span><span class="n">api_key</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">token_name</span><span class="o">=</span><span class="s1">&#39;PLANET_API_KEY&#39;</span><span class="p">)</span></code>


<a href="#geemap.common.planet_catalog_tropical" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Generates Planet bi-annual and monthly imagery URLs based on an API key. See https://assets.planet.com/docs/NICFI_UserGuidesFAQ.pdf</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>api_key</code></td>
        <td><code>str</code></td>
        <td><p>The Planet API key. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>token_name</code></td>
        <td><code>str</code></td>
        <td><p>The environment variable name of the API key. Defaults to "PLANET_API_KEY".</p></td>
        <td><code>&#39;PLANET_API_KEY&#39;</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>list</code></td>
      <td><p>A list of tile URLs.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">planet_catalog_tropical</span><span class="p">(</span><span class="n">api_key</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">token_name</span><span class="o">=</span><span class="s2">&quot;PLANET_API_KEY&quot;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Generates Planet bi-annual and monthly imagery URLs based on an API key. See https://assets.planet.com/docs/NICFI_UserGuidesFAQ.pdf</span>

<span class="sd">    Args:</span>
<span class="sd">        api_key (str, optional): The Planet API key. Defaults to None.</span>
<span class="sd">        token_name (str, optional): The environment variable name of the API key. Defaults to &quot;PLANET_API_KEY&quot;.</span>

<span class="sd">    Returns:</span>
<span class="sd">        list: A list of tile URLs.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">biannual</span> <span class="o">=</span> <span class="n">planet_biannual_tropical</span><span class="p">(</span><span class="n">api_key</span><span class="p">,</span> <span class="n">token_name</span><span class="p">)</span>
    <span class="n">monthly</span> <span class="o">=</span> <span class="n">planet_monthly_tropical</span><span class="p">(</span><span class="n">api_key</span><span class="p">,</span> <span class="n">token_name</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">biannual</span> <span class="o">+</span> <span class="n">monthly</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.planet_monthly" class="doc doc-heading">
<code class="highlight language-python"><span class="n">planet_monthly</span><span class="p">(</span><span class="n">api_key</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">token_name</span><span class="o">=</span><span class="s1">&#39;PLANET_API_KEY&#39;</span><span class="p">)</span></code>


<a href="#geemap.common.planet_monthly" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Generates Planet monthly imagery URLs based on an API key. To get a Planet API key, see https://developers.planet.com/quickstart/apis/</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>api_key</code></td>
        <td><code>str</code></td>
        <td><p>The Planet API key. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>token_name</code></td>
        <td><code>str</code></td>
        <td><p>The environment variable name of the API key. Defaults to "PLANET_API_KEY".</p></td>
        <td><code>&#39;PLANET_API_KEY&#39;</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>ValueError</code></td>
        <td><p>If the API key could not be found.</p></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>list</code></td>
      <td><p>A list of tile URLs.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">planet_monthly</span><span class="p">(</span><span class="n">api_key</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">token_name</span><span class="o">=</span><span class="s2">&quot;PLANET_API_KEY&quot;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Generates Planet monthly imagery URLs based on an API key. To get a Planet API key, see https://developers.planet.com/quickstart/apis/</span>

<span class="sd">    Args:</span>
<span class="sd">        api_key (str, optional): The Planet API key. Defaults to None.</span>
<span class="sd">        token_name (str, optional): The environment variable name of the API key. Defaults to &quot;PLANET_API_KEY&quot;.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If the API key could not be found.</span>

<span class="sd">    Returns:</span>
<span class="sd">        list: A list of tile URLs.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># from datetime import date</span>

    <span class="k">if</span> <span class="n">api_key</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">api_key</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">token_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">api_key</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The Planet API Key must be provided.&quot;</span><span class="p">)</span>

    <span class="n">today</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">today</span><span class="p">()</span>
    <span class="n">year_now</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">today</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y&quot;</span><span class="p">))</span>
    <span class="n">month_now</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">today</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%m&quot;</span><span class="p">))</span>

    <span class="n">link</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">prefix</span> <span class="o">=</span> <span class="s2">&quot;https://tiles.planet.com/basemaps/v1/planet-tiles/global_monthly_&quot;</span>
    <span class="n">subfix</span> <span class="o">=</span> <span class="s2">&quot;_mosaic/gmap/</span><span class="si">{z}</span><span class="s2">/</span><span class="si">{x}</span><span class="s2">/</span><span class="si">{y}</span><span class="s2">.png?api_key=&quot;</span>

    <span class="k">for</span> <span class="n">year</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2016</span><span class="p">,</span> <span class="n">year_now</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>

        <span class="k">for</span> <span class="n">month</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">13</span><span class="p">):</span>
            <span class="n">m_str</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">year</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;_&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">month</span><span class="p">)</span><span class="o">.</span><span class="n">zfill</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">year</span> <span class="o">==</span> <span class="n">year_now</span> <span class="ow">and</span> <span class="n">month</span> <span class="o">&gt;=</span> <span class="n">month_now</span><span class="p">:</span>
                <span class="k">break</span>

            <span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">prefix</span><span class="si">}{</span><span class="n">m_str</span><span class="si">}{</span><span class="n">subfix</span><span class="si">}{</span><span class="n">api_key</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="n">link</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">link</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.planet_monthly_tiles" class="doc doc-heading">
<code class="highlight language-python"><span class="n">planet_monthly_tiles</span><span class="p">(</span><span class="n">api_key</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">token_name</span><span class="o">=</span><span class="s1">&#39;PLANET_API_KEY&#39;</span><span class="p">,</span> <span class="n">tile_format</span><span class="o">=</span><span class="s1">&#39;ipyleaflet&#39;</span><span class="p">)</span></code>


<a href="#geemap.common.planet_monthly_tiles" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Generates Planet  monthly imagery TileLayer based on an API key. To get a Planet API key, see https://developers.planet.com/quickstart/apis/</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>api_key</code></td>
        <td><code>str</code></td>
        <td><p>The Planet API key. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>token_name</code></td>
        <td><code>str</code></td>
        <td><p>The environment variable name of the API key. Defaults to "PLANET_API_KEY".</p></td>
        <td><code>&#39;PLANET_API_KEY&#39;</code></td>
      </tr>
      <tr>
        <td><code>tile_format</code></td>
        <td><code>str</code></td>
        <td><p>The TileLayer format, can be either ipyleaflet or folium. Defaults to "ipyleaflet".</p></td>
        <td><code>&#39;ipyleaflet&#39;</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>ValueError</code></td>
        <td><p>If the tile layer format is invalid.</p></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>dict</code></td>
      <td><p>A dictionary of TileLayer.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">planet_monthly_tiles</span><span class="p">(</span>
    <span class="n">api_key</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">token_name</span><span class="o">=</span><span class="s2">&quot;PLANET_API_KEY&quot;</span><span class="p">,</span> <span class="n">tile_format</span><span class="o">=</span><span class="s2">&quot;ipyleaflet&quot;</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Generates Planet  monthly imagery TileLayer based on an API key. To get a Planet API key, see https://developers.planet.com/quickstart/apis/</span>

<span class="sd">    Args:</span>
<span class="sd">        api_key (str, optional): The Planet API key. Defaults to None.</span>
<span class="sd">        token_name (str, optional): The environment variable name of the API key. Defaults to &quot;PLANET_API_KEY&quot;.</span>
<span class="sd">        tile_format (str, optional): The TileLayer format, can be either ipyleaflet or folium. Defaults to &quot;ipyleaflet&quot;.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If the tile layer format is invalid.</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict: A dictionary of TileLayer.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">folium</span>
    <span class="kn">import</span> <span class="nn">ipyleaflet</span>

    <span class="k">if</span> <span class="n">tile_format</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;ipyleaflet&quot;</span><span class="p">,</span> <span class="s2">&quot;folium&quot;</span><span class="p">]:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The tile format must be either ipyleaflet or folium.&quot;</span><span class="p">)</span>

    <span class="n">tiles</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">link</span> <span class="o">=</span> <span class="n">planet_monthly</span><span class="p">(</span><span class="n">api_key</span><span class="p">,</span> <span class="n">token_name</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">url</span> <span class="ow">in</span> <span class="n">link</span><span class="p">:</span>
        <span class="n">index</span> <span class="o">=</span> <span class="n">url</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;20&quot;</span><span class="p">)</span>
        <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;Planet_&quot;</span> <span class="o">+</span> <span class="n">url</span><span class="p">[</span><span class="n">index</span> <span class="p">:</span> <span class="n">index</span> <span class="o">+</span> <span class="mi">7</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">tile_format</span> <span class="o">==</span> <span class="s2">&quot;ipyleaflet&quot;</span><span class="p">:</span>
            <span class="n">tile</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">TileLayer</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">attribution</span><span class="o">=</span><span class="s2">&quot;Planet&quot;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">tile</span> <span class="o">=</span> <span class="n">folium</span><span class="o">.</span><span class="n">TileLayer</span><span class="p">(</span>
                <span class="n">tiles</span><span class="o">=</span><span class="n">url</span><span class="p">,</span>
                <span class="n">attr</span><span class="o">=</span><span class="s2">&quot;Planet&quot;</span><span class="p">,</span>
                <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
                <span class="n">overlay</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                <span class="n">control</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="n">tiles</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">tile</span>

    <span class="k">return</span> <span class="n">tiles</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.planet_monthly_tiles_tropical" class="doc doc-heading">
<code class="highlight language-python"><span class="n">planet_monthly_tiles_tropical</span><span class="p">(</span><span class="n">api_key</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">token_name</span><span class="o">=</span><span class="s1">&#39;PLANET_API_KEY&#39;</span><span class="p">,</span> <span class="n">tile_format</span><span class="o">=</span><span class="s1">&#39;ipyleaflet&#39;</span><span class="p">)</span></code>


<a href="#geemap.common.planet_monthly_tiles_tropical" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Generates Planet  monthly imagery TileLayer based on an API key. See https://assets.planet.com/docs/NICFI_UserGuidesFAQ.pdf</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>api_key</code></td>
        <td><code>str</code></td>
        <td><p>The Planet API key. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>token_name</code></td>
        <td><code>str</code></td>
        <td><p>The environment variable name of the API key. Defaults to "PLANET_API_KEY".</p></td>
        <td><code>&#39;PLANET_API_KEY&#39;</code></td>
      </tr>
      <tr>
        <td><code>tile_format</code></td>
        <td><code>str</code></td>
        <td><p>The TileLayer format, can be either ipyleaflet or folium. Defaults to "ipyleaflet".</p></td>
        <td><code>&#39;ipyleaflet&#39;</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>ValueError</code></td>
        <td><p>If the tile layer format is invalid.</p></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>dict</code></td>
      <td><p>A dictionary of TileLayer.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">planet_monthly_tiles_tropical</span><span class="p">(</span>
    <span class="n">api_key</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">token_name</span><span class="o">=</span><span class="s2">&quot;PLANET_API_KEY&quot;</span><span class="p">,</span> <span class="n">tile_format</span><span class="o">=</span><span class="s2">&quot;ipyleaflet&quot;</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Generates Planet  monthly imagery TileLayer based on an API key. See https://assets.planet.com/docs/NICFI_UserGuidesFAQ.pdf</span>

<span class="sd">    Args:</span>
<span class="sd">        api_key (str, optional): The Planet API key. Defaults to None.</span>
<span class="sd">        token_name (str, optional): The environment variable name of the API key. Defaults to &quot;PLANET_API_KEY&quot;.</span>
<span class="sd">        tile_format (str, optional): The TileLayer format, can be either ipyleaflet or folium. Defaults to &quot;ipyleaflet&quot;.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If the tile layer format is invalid.</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict: A dictionary of TileLayer.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">folium</span>
    <span class="kn">import</span> <span class="nn">ipyleaflet</span>

    <span class="k">if</span> <span class="n">tile_format</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;ipyleaflet&quot;</span><span class="p">,</span> <span class="s2">&quot;folium&quot;</span><span class="p">]:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The tile format must be either ipyleaflet or folium.&quot;</span><span class="p">)</span>

    <span class="n">tiles</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">link</span> <span class="o">=</span> <span class="n">planet_monthly_tropical</span><span class="p">(</span><span class="n">api_key</span><span class="p">,</span> <span class="n">token_name</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">url</span> <span class="ow">in</span> <span class="n">link</span><span class="p">:</span>
        <span class="n">index</span> <span class="o">=</span> <span class="n">url</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;20&quot;</span><span class="p">)</span>
        <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;Planet_&quot;</span> <span class="o">+</span> <span class="n">url</span><span class="p">[</span><span class="n">index</span> <span class="p">:</span> <span class="n">index</span> <span class="o">+</span> <span class="mi">7</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">tile_format</span> <span class="o">==</span> <span class="s2">&quot;ipyleaflet&quot;</span><span class="p">:</span>
            <span class="n">tile</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">TileLayer</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">attribution</span><span class="o">=</span><span class="s2">&quot;Planet&quot;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">tile</span> <span class="o">=</span> <span class="n">folium</span><span class="o">.</span><span class="n">TileLayer</span><span class="p">(</span>
                <span class="n">tiles</span><span class="o">=</span><span class="n">url</span><span class="p">,</span>
                <span class="n">attr</span><span class="o">=</span><span class="s2">&quot;Planet&quot;</span><span class="p">,</span>
                <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
                <span class="n">overlay</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                <span class="n">control</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="n">tiles</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">tile</span>

    <span class="k">return</span> <span class="n">tiles</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.planet_monthly_tropical" class="doc doc-heading">
<code class="highlight language-python"><span class="n">planet_monthly_tropical</span><span class="p">(</span><span class="n">api_key</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">token_name</span><span class="o">=</span><span class="s1">&#39;PLANET_API_KEY&#39;</span><span class="p">)</span></code>


<a href="#geemap.common.planet_monthly_tropical" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Generates Planet monthly imagery URLs based on an API key. See https://assets.planet.com/docs/NICFI_UserGuidesFAQ.pdf</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>api_key</code></td>
        <td><code>str</code></td>
        <td><p>The Planet API key. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>token_name</code></td>
        <td><code>str</code></td>
        <td><p>The environment variable name of the API key. Defaults to "PLANET_API_KEY".</p></td>
        <td><code>&#39;PLANET_API_KEY&#39;</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>ValueError</code></td>
        <td><p>If the API key could not be found.</p></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>list</code></td>
      <td><p>A list of tile URLs.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">planet_monthly_tropical</span><span class="p">(</span><span class="n">api_key</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">token_name</span><span class="o">=</span><span class="s2">&quot;PLANET_API_KEY&quot;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Generates Planet monthly imagery URLs based on an API key. See https://assets.planet.com/docs/NICFI_UserGuidesFAQ.pdf</span>

<span class="sd">    Args:</span>
<span class="sd">        api_key (str, optional): The Planet API key. Defaults to None.</span>
<span class="sd">        token_name (str, optional): The environment variable name of the API key. Defaults to &quot;PLANET_API_KEY&quot;.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If the API key could not be found.</span>

<span class="sd">    Returns:</span>
<span class="sd">        list: A list of tile URLs.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># from datetime import date</span>

    <span class="k">if</span> <span class="n">api_key</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">api_key</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">token_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">api_key</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The Planet API Key must be provided.&quot;</span><span class="p">)</span>

    <span class="n">today</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">today</span><span class="p">()</span>
    <span class="n">year_now</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">today</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y&quot;</span><span class="p">))</span>
    <span class="n">month_now</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">today</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%m&quot;</span><span class="p">))</span>

    <span class="n">links</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">prefix</span> <span class="o">=</span> <span class="s2">&quot;https://tiles.planet.com/basemaps/v1/planet-tiles/planet_medres_normalized_analytic_&quot;</span>
    <span class="n">subfix</span> <span class="o">=</span> <span class="s2">&quot;_mosaic/gmap/</span><span class="si">{z}</span><span class="s2">/</span><span class="si">{x}</span><span class="s2">/</span><span class="si">{y}</span><span class="s2">.png?api_key=&quot;</span>

    <span class="k">for</span> <span class="n">year</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2020</span><span class="p">,</span> <span class="n">year_now</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>

        <span class="k">for</span> <span class="n">month</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">13</span><span class="p">):</span>
            <span class="n">m_str</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">year</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;-&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">month</span><span class="p">)</span><span class="o">.</span><span class="n">zfill</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">year</span> <span class="o">==</span> <span class="mi">2020</span> <span class="ow">and</span> <span class="n">month</span> <span class="o">&lt;</span> <span class="mi">9</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="k">if</span> <span class="n">year</span> <span class="o">==</span> <span class="n">year_now</span> <span class="ow">and</span> <span class="n">month</span> <span class="o">&gt;=</span> <span class="n">month_now</span><span class="p">:</span>
                <span class="k">break</span>

            <span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">prefix</span><span class="si">}{</span><span class="n">m_str</span><span class="si">}{</span><span class="n">subfix</span><span class="si">}{</span><span class="n">api_key</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="n">links</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">links</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.planet_quarterly" class="doc doc-heading">
<code class="highlight language-python"><span class="n">planet_quarterly</span><span class="p">(</span><span class="n">api_key</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">token_name</span><span class="o">=</span><span class="s1">&#39;PLANET_API_KEY&#39;</span><span class="p">)</span></code>


<a href="#geemap.common.planet_quarterly" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Generates Planet quarterly imagery URLs based on an API key. To get a Planet API key, see https://developers.planet.com/quickstart/apis/</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>api_key</code></td>
        <td><code>str</code></td>
        <td><p>The Planet API key. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>token_name</code></td>
        <td><code>str</code></td>
        <td><p>The environment variable name of the API key. Defaults to "PLANET_API_KEY".</p></td>
        <td><code>&#39;PLANET_API_KEY&#39;</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>ValueError</code></td>
        <td><p>If the API key could not be found.</p></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>list</code></td>
      <td><p>A list of tile URLs.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">planet_quarterly</span><span class="p">(</span><span class="n">api_key</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">token_name</span><span class="o">=</span><span class="s2">&quot;PLANET_API_KEY&quot;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Generates Planet quarterly imagery URLs based on an API key. To get a Planet API key, see https://developers.planet.com/quickstart/apis/</span>

<span class="sd">    Args:</span>
<span class="sd">        api_key (str, optional): The Planet API key. Defaults to None.</span>
<span class="sd">        token_name (str, optional): The environment variable name of the API key. Defaults to &quot;PLANET_API_KEY&quot;.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If the API key could not be found.</span>

<span class="sd">    Returns:</span>
<span class="sd">        list: A list of tile URLs.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># from datetime import date</span>

    <span class="k">if</span> <span class="n">api_key</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">api_key</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">token_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">api_key</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The Planet API Key must be provided.&quot;</span><span class="p">)</span>

    <span class="n">today</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">today</span><span class="p">()</span>
    <span class="n">year_now</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">today</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y&quot;</span><span class="p">))</span>
    <span class="n">month_now</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">today</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%m&quot;</span><span class="p">))</span>
    <span class="n">quarter_now</span> <span class="o">=</span> <span class="p">(</span><span class="n">month_now</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">//</span> <span class="mi">3</span> <span class="o">+</span> <span class="mi">1</span>

    <span class="n">link</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">prefix</span> <span class="o">=</span> <span class="s2">&quot;https://tiles.planet.com/basemaps/v1/planet-tiles/global_quarterly_&quot;</span>
    <span class="n">subfix</span> <span class="o">=</span> <span class="s2">&quot;_mosaic/gmap/</span><span class="si">{z}</span><span class="s2">/</span><span class="si">{x}</span><span class="s2">/</span><span class="si">{y}</span><span class="s2">.png?api_key=&quot;</span>

    <span class="k">for</span> <span class="n">year</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2016</span><span class="p">,</span> <span class="n">year_now</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>

        <span class="k">for</span> <span class="n">quarter</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">):</span>
            <span class="n">m_str</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">year</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;q&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">quarter</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">year</span> <span class="o">==</span> <span class="n">year_now</span> <span class="ow">and</span> <span class="n">quarter</span> <span class="o">&gt;=</span> <span class="n">quarter_now</span><span class="p">:</span>
                <span class="k">break</span>

            <span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">prefix</span><span class="si">}{</span><span class="n">m_str</span><span class="si">}{</span><span class="n">subfix</span><span class="si">}{</span><span class="n">api_key</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="n">link</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">link</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.planet_quarterly_tiles" class="doc doc-heading">
<code class="highlight language-python"><span class="n">planet_quarterly_tiles</span><span class="p">(</span><span class="n">api_key</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">token_name</span><span class="o">=</span><span class="s1">&#39;PLANET_API_KEY&#39;</span><span class="p">,</span> <span class="n">tile_format</span><span class="o">=</span><span class="s1">&#39;ipyleaflet&#39;</span><span class="p">)</span></code>


<a href="#geemap.common.planet_quarterly_tiles" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Generates Planet  quarterly imagery TileLayer based on an API key. To get a Planet API key, see https://developers.planet.com/quickstart/apis/</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>api_key</code></td>
        <td><code>str</code></td>
        <td><p>The Planet API key. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>token_name</code></td>
        <td><code>str</code></td>
        <td><p>The environment variable name of the API key. Defaults to "PLANET_API_KEY".</p></td>
        <td><code>&#39;PLANET_API_KEY&#39;</code></td>
      </tr>
      <tr>
        <td><code>tile_format</code></td>
        <td><code>str</code></td>
        <td><p>The TileLayer format, can be either ipyleaflet or folium. Defaults to "ipyleaflet".</p></td>
        <td><code>&#39;ipyleaflet&#39;</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>ValueError</code></td>
        <td><p>If the tile layer format is invalid.</p></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>dict</code></td>
      <td><p>A dictionary of TileLayer.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">planet_quarterly_tiles</span><span class="p">(</span>
    <span class="n">api_key</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">token_name</span><span class="o">=</span><span class="s2">&quot;PLANET_API_KEY&quot;</span><span class="p">,</span> <span class="n">tile_format</span><span class="o">=</span><span class="s2">&quot;ipyleaflet&quot;</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Generates Planet  quarterly imagery TileLayer based on an API key. To get a Planet API key, see https://developers.planet.com/quickstart/apis/</span>

<span class="sd">    Args:</span>
<span class="sd">        api_key (str, optional): The Planet API key. Defaults to None.</span>
<span class="sd">        token_name (str, optional): The environment variable name of the API key. Defaults to &quot;PLANET_API_KEY&quot;.</span>
<span class="sd">        tile_format (str, optional): The TileLayer format, can be either ipyleaflet or folium. Defaults to &quot;ipyleaflet&quot;.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If the tile layer format is invalid.</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict: A dictionary of TileLayer.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">folium</span>
    <span class="kn">import</span> <span class="nn">ipyleaflet</span>

    <span class="k">if</span> <span class="n">tile_format</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;ipyleaflet&quot;</span><span class="p">,</span> <span class="s2">&quot;folium&quot;</span><span class="p">]:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The tile format must be either ipyleaflet or folium.&quot;</span><span class="p">)</span>

    <span class="n">tiles</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">links</span> <span class="o">=</span> <span class="n">planet_quarterly</span><span class="p">(</span><span class="n">api_key</span><span class="p">,</span> <span class="n">token_name</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">url</span> <span class="ow">in</span> <span class="n">links</span><span class="p">:</span>
        <span class="n">index</span> <span class="o">=</span> <span class="n">url</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;20&quot;</span><span class="p">)</span>
        <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;Planet_&quot;</span> <span class="o">+</span> <span class="n">url</span><span class="p">[</span><span class="n">index</span> <span class="p">:</span> <span class="n">index</span> <span class="o">+</span> <span class="mi">6</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">tile_format</span> <span class="o">==</span> <span class="s2">&quot;ipyleaflet&quot;</span><span class="p">:</span>
            <span class="n">tile</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">TileLayer</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">attribution</span><span class="o">=</span><span class="s2">&quot;Planet&quot;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">tile</span> <span class="o">=</span> <span class="n">folium</span><span class="o">.</span><span class="n">TileLayer</span><span class="p">(</span>
                <span class="n">tiles</span><span class="o">=</span><span class="n">url</span><span class="p">,</span>
                <span class="n">attr</span><span class="o">=</span><span class="s2">&quot;Planet&quot;</span><span class="p">,</span>
                <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
                <span class="n">overlay</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                <span class="n">control</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="n">tiles</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">tile</span>

    <span class="k">return</span> <span class="n">tiles</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.planet_tile_by_month" class="doc doc-heading">
<code class="highlight language-python"><span class="n">planet_tile_by_month</span><span class="p">(</span><span class="n">year</span><span class="o">=</span><span class="mi">2016</span><span class="p">,</span> <span class="n">month</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">api_key</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">token_name</span><span class="o">=</span><span class="s1">&#39;PLANET_API_KEY&#39;</span><span class="p">,</span> <span class="n">tile_format</span><span class="o">=</span><span class="s1">&#39;ipyleaflet&#39;</span><span class="p">)</span></code>


<a href="#geemap.common.planet_tile_by_month" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Generates Planet monthly imagery TileLayer based on an API key. To get a Planet API key, see https://developers.planet.com/quickstart/apis</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>year</code></td>
        <td><code>int</code></td>
        <td><p>The year of Planet global mosaic, must be &gt;=2016. Defaults to 2016.</p></td>
        <td><code>2016</code></td>
      </tr>
      <tr>
        <td><code>month</code></td>
        <td><code>int</code></td>
        <td><p>The month of Planet global mosaic, must be 1-12. Defaults to 1.</p></td>
        <td><code>1</code></td>
      </tr>
      <tr>
        <td><code>name</code></td>
        <td><code>str</code></td>
        <td><p>The layer name to use. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>api_key</code></td>
        <td><code>str</code></td>
        <td><p>The Planet API key. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>token_name</code></td>
        <td><code>str</code></td>
        <td><p>The environment variable name of the API key. Defaults to "PLANET_API_KEY".</p></td>
        <td><code>&#39;PLANET_API_KEY&#39;</code></td>
      </tr>
      <tr>
        <td><code>tile_format</code></td>
        <td><code>str</code></td>
        <td><p>The TileLayer format, can be either ipyleaflet or folium. Defaults to "ipyleaflet".</p></td>
        <td><code>&#39;ipyleaflet&#39;</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>ValueError</code></td>
        <td><p>If the tile layer format is invalid.</p></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>dict</code></td>
      <td><p>A dictionary of TileLayer.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">planet_tile_by_month</span><span class="p">(</span>
    <span class="n">year</span><span class="o">=</span><span class="mi">2016</span><span class="p">,</span>
    <span class="n">month</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
    <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">api_key</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">token_name</span><span class="o">=</span><span class="s2">&quot;PLANET_API_KEY&quot;</span><span class="p">,</span>
    <span class="n">tile_format</span><span class="o">=</span><span class="s2">&quot;ipyleaflet&quot;</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Generates Planet monthly imagery TileLayer based on an API key. To get a Planet API key, see https://developers.planet.com/quickstart/apis</span>

<span class="sd">    Args:</span>
<span class="sd">        year (int, optional): The year of Planet global mosaic, must be &gt;=2016. Defaults to 2016.</span>
<span class="sd">        month (int, optional): The month of Planet global mosaic, must be 1-12. Defaults to 1.</span>
<span class="sd">        name (str, optional): The layer name to use. Defaults to None.</span>
<span class="sd">        api_key (str, optional): The Planet API key. Defaults to None.</span>
<span class="sd">        token_name (str, optional): The environment variable name of the API key. Defaults to &quot;PLANET_API_KEY&quot;.</span>
<span class="sd">        tile_format (str, optional): The TileLayer format, can be either ipyleaflet or folium. Defaults to &quot;ipyleaflet&quot;.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If the tile layer format is invalid.</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict: A dictionary of TileLayer.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">folium</span>
    <span class="kn">import</span> <span class="nn">ipyleaflet</span>

    <span class="k">if</span> <span class="n">tile_format</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;ipyleaflet&quot;</span><span class="p">,</span> <span class="s2">&quot;folium&quot;</span><span class="p">]:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The tile format must be either ipyleaflet or folium.&quot;</span><span class="p">)</span>

    <span class="n">url</span> <span class="o">=</span> <span class="n">planet_by_month</span><span class="p">(</span><span class="n">year</span><span class="p">,</span> <span class="n">month</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">token_name</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;Planet_&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">year</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;_&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">month</span><span class="p">)</span><span class="o">.</span><span class="n">zfill</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">tile_format</span> <span class="o">==</span> <span class="s2">&quot;ipyleaflet&quot;</span><span class="p">:</span>
        <span class="n">tile</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">TileLayer</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">attribution</span><span class="o">=</span><span class="s2">&quot;Planet&quot;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">tile</span> <span class="o">=</span> <span class="n">folium</span><span class="o">.</span><span class="n">TileLayer</span><span class="p">(</span>
            <span class="n">tiles</span><span class="o">=</span><span class="n">url</span><span class="p">,</span>
            <span class="n">attr</span><span class="o">=</span><span class="s2">&quot;Planet&quot;</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
            <span class="n">overlay</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">control</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">return</span> <span class="n">tile</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.planet_tile_by_quarter" class="doc doc-heading">
<code class="highlight language-python"><span class="n">planet_tile_by_quarter</span><span class="p">(</span><span class="n">year</span><span class="o">=</span><span class="mi">2016</span><span class="p">,</span> <span class="n">quarter</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">api_key</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">token_name</span><span class="o">=</span><span class="s1">&#39;PLANET_API_KEY&#39;</span><span class="p">,</span> <span class="n">tile_format</span><span class="o">=</span><span class="s1">&#39;ipyleaflet&#39;</span><span class="p">)</span></code>


<a href="#geemap.common.planet_tile_by_quarter" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Generates Planet quarterly imagery TileLayer based on an API key. To get a Planet API key, see https://developers.planet.com/quickstart/apis</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>year</code></td>
        <td><code>int</code></td>
        <td><p>The year of Planet global mosaic, must be &gt;=2016. Defaults to 2016.</p></td>
        <td><code>2016</code></td>
      </tr>
      <tr>
        <td><code>quarter</code></td>
        <td><code>int</code></td>
        <td><p>The quarter of Planet global mosaic, must be 1-4. Defaults to 1.</p></td>
        <td><code>1</code></td>
      </tr>
      <tr>
        <td><code>name</code></td>
        <td><code>str</code></td>
        <td><p>The layer name to use. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>api_key</code></td>
        <td><code>str</code></td>
        <td><p>The Planet API key. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>token_name</code></td>
        <td><code>str</code></td>
        <td><p>The environment variable name of the API key. Defaults to "PLANET_API_KEY".</p></td>
        <td><code>&#39;PLANET_API_KEY&#39;</code></td>
      </tr>
      <tr>
        <td><code>tile_format</code></td>
        <td><code>str</code></td>
        <td><p>The TileLayer format, can be either ipyleaflet or folium. Defaults to "ipyleaflet".</p></td>
        <td><code>&#39;ipyleaflet&#39;</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>ValueError</code></td>
        <td><p>If the tile layer format is invalid.</p></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>dict</code></td>
      <td><p>A dictionary of TileLayer.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">planet_tile_by_quarter</span><span class="p">(</span>
    <span class="n">year</span><span class="o">=</span><span class="mi">2016</span><span class="p">,</span>
    <span class="n">quarter</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
    <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">api_key</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">token_name</span><span class="o">=</span><span class="s2">&quot;PLANET_API_KEY&quot;</span><span class="p">,</span>
    <span class="n">tile_format</span><span class="o">=</span><span class="s2">&quot;ipyleaflet&quot;</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Generates Planet quarterly imagery TileLayer based on an API key. To get a Planet API key, see https://developers.planet.com/quickstart/apis</span>

<span class="sd">    Args:</span>
<span class="sd">        year (int, optional): The year of Planet global mosaic, must be &gt;=2016. Defaults to 2016.</span>
<span class="sd">        quarter (int, optional): The quarter of Planet global mosaic, must be 1-4. Defaults to 1.</span>
<span class="sd">        name (str, optional): The layer name to use. Defaults to None.</span>
<span class="sd">        api_key (str, optional): The Planet API key. Defaults to None.</span>
<span class="sd">        token_name (str, optional): The environment variable name of the API key. Defaults to &quot;PLANET_API_KEY&quot;.</span>
<span class="sd">        tile_format (str, optional): The TileLayer format, can be either ipyleaflet or folium. Defaults to &quot;ipyleaflet&quot;.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If the tile layer format is invalid.</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict: A dictionary of TileLayer.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="kn">import</span> <span class="nn">folium</span>
    <span class="kn">import</span> <span class="nn">ipyleaflet</span>

    <span class="k">if</span> <span class="n">tile_format</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;ipyleaflet&quot;</span><span class="p">,</span> <span class="s2">&quot;folium&quot;</span><span class="p">]:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The tile format must be either ipyleaflet or folium.&quot;</span><span class="p">)</span>

    <span class="n">url</span> <span class="o">=</span> <span class="n">planet_by_quarter</span><span class="p">(</span><span class="n">year</span><span class="p">,</span> <span class="n">quarter</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">token_name</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;Planet_&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">year</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;_q&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">quarter</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">tile_format</span> <span class="o">==</span> <span class="s2">&quot;ipyleaflet&quot;</span><span class="p">:</span>
        <span class="n">tile</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">TileLayer</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">attribution</span><span class="o">=</span><span class="s2">&quot;Planet&quot;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">tile</span> <span class="o">=</span> <span class="n">folium</span><span class="o">.</span><span class="n">TileLayer</span><span class="p">(</span>
            <span class="n">tiles</span><span class="o">=</span><span class="n">url</span><span class="p">,</span>
            <span class="n">attr</span><span class="o">=</span><span class="s2">&quot;Planet&quot;</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
            <span class="n">overlay</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">control</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">return</span> <span class="n">tile</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.planet_tiles" class="doc doc-heading">
<code class="highlight language-python"><span class="n">planet_tiles</span><span class="p">(</span><span class="n">api_key</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">token_name</span><span class="o">=</span><span class="s1">&#39;PLANET_API_KEY&#39;</span><span class="p">,</span> <span class="n">tile_format</span><span class="o">=</span><span class="s1">&#39;ipyleaflet&#39;</span><span class="p">)</span></code>


<a href="#geemap.common.planet_tiles" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Generates Planet imagery TileLayer based on an API key. To get a Planet API key, see https://developers.planet.com/quickstart/apis/</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>api_key</code></td>
        <td><code>str</code></td>
        <td><p>The Planet API key. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>token_name</code></td>
        <td><code>str</code></td>
        <td><p>The environment variable name of the API key. Defaults to "PLANET_API_KEY".</p></td>
        <td><code>&#39;PLANET_API_KEY&#39;</code></td>
      </tr>
      <tr>
        <td><code>tile_format</code></td>
        <td><code>str</code></td>
        <td><p>The TileLayer format, can be either ipyleaflet or folium. Defaults to "ipyleaflet".</p></td>
        <td><code>&#39;ipyleaflet&#39;</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>ValueError</code></td>
        <td><p>If the tile layer format is invalid.</p></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>dict</code></td>
      <td><p>A dictionary of TileLayer.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">planet_tiles</span><span class="p">(</span><span class="n">api_key</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">token_name</span><span class="o">=</span><span class="s2">&quot;PLANET_API_KEY&quot;</span><span class="p">,</span> <span class="n">tile_format</span><span class="o">=</span><span class="s2">&quot;ipyleaflet&quot;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Generates Planet imagery TileLayer based on an API key. To get a Planet API key, see https://developers.planet.com/quickstart/apis/</span>

<span class="sd">    Args:</span>
<span class="sd">        api_key (str, optional): The Planet API key. Defaults to None.</span>
<span class="sd">        token_name (str, optional): The environment variable name of the API key. Defaults to &quot;PLANET_API_KEY&quot;.</span>
<span class="sd">        tile_format (str, optional): The TileLayer format, can be either ipyleaflet or folium. Defaults to &quot;ipyleaflet&quot;.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If the tile layer format is invalid.</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict: A dictionary of TileLayer.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">catalog</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">quarterly</span> <span class="o">=</span> <span class="n">planet_quarterly_tiles</span><span class="p">(</span><span class="n">api_key</span><span class="p">,</span> <span class="n">token_name</span><span class="p">,</span> <span class="n">tile_format</span><span class="p">)</span>
    <span class="n">monthly</span> <span class="o">=</span> <span class="n">planet_monthly_tiles</span><span class="p">(</span><span class="n">api_key</span><span class="p">,</span> <span class="n">token_name</span><span class="p">,</span> <span class="n">tile_format</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">quarterly</span><span class="p">:</span>
        <span class="n">catalog</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">quarterly</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>

    <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">monthly</span><span class="p">:</span>
        <span class="n">catalog</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">monthly</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>

    <span class="k">return</span> <span class="n">catalog</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.planet_tiles_tropical" class="doc doc-heading">
<code class="highlight language-python"><span class="n">planet_tiles_tropical</span><span class="p">(</span><span class="n">api_key</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">token_name</span><span class="o">=</span><span class="s1">&#39;PLANET_API_KEY&#39;</span><span class="p">,</span> <span class="n">tile_format</span><span class="o">=</span><span class="s1">&#39;ipyleaflet&#39;</span><span class="p">)</span></code>


<a href="#geemap.common.planet_tiles_tropical" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Generates Planet  monthly imagery TileLayer based on an API key. See https://assets.planet.com/docs/NICFI_UserGuidesFAQ.pdf</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>api_key</code></td>
        <td><code>str</code></td>
        <td><p>The Planet API key. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>token_name</code></td>
        <td><code>str</code></td>
        <td><p>The environment variable name of the API key. Defaults to "PLANET_API_KEY".</p></td>
        <td><code>&#39;PLANET_API_KEY&#39;</code></td>
      </tr>
      <tr>
        <td><code>tile_format</code></td>
        <td><code>str</code></td>
        <td><p>The TileLayer format, can be either ipyleaflet or folium. Defaults to "ipyleaflet".</p></td>
        <td><code>&#39;ipyleaflet&#39;</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>ValueError</code></td>
        <td><p>If the tile layer format is invalid.</p></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>dict</code></td>
      <td><p>A dictionary of TileLayer.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">planet_tiles_tropical</span><span class="p">(</span>
    <span class="n">api_key</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">token_name</span><span class="o">=</span><span class="s2">&quot;PLANET_API_KEY&quot;</span><span class="p">,</span> <span class="n">tile_format</span><span class="o">=</span><span class="s2">&quot;ipyleaflet&quot;</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Generates Planet  monthly imagery TileLayer based on an API key. See https://assets.planet.com/docs/NICFI_UserGuidesFAQ.pdf</span>

<span class="sd">    Args:</span>
<span class="sd">        api_key (str, optional): The Planet API key. Defaults to None.</span>
<span class="sd">        token_name (str, optional): The environment variable name of the API key. Defaults to &quot;PLANET_API_KEY&quot;.</span>
<span class="sd">        tile_format (str, optional): The TileLayer format, can be either ipyleaflet or folium. Defaults to &quot;ipyleaflet&quot;.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If the tile layer format is invalid.</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict: A dictionary of TileLayer.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">catalog</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">biannul</span> <span class="o">=</span> <span class="n">planet_biannual_tiles_tropical</span><span class="p">(</span><span class="n">api_key</span><span class="p">,</span> <span class="n">token_name</span><span class="p">,</span> <span class="n">tile_format</span><span class="p">)</span>
    <span class="n">monthly</span> <span class="o">=</span> <span class="n">planet_monthly_tiles_tropical</span><span class="p">(</span><span class="n">api_key</span><span class="p">,</span> <span class="n">token_name</span><span class="p">,</span> <span class="n">tile_format</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">biannul</span><span class="p">:</span>
        <span class="n">catalog</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">biannul</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>

    <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">monthly</span><span class="p">:</span>
        <span class="n">catalog</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">monthly</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>

    <span class="k">return</span> <span class="n">catalog</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.plot_raster" class="doc doc-heading">
<code class="highlight language-python"><span class="n">plot_raster</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">band</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;terrain&#39;</span><span class="p">,</span> <span class="n">proj</span><span class="o">=</span><span class="s1">&#39;EPSG:3857&#39;</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">open_kwargs</span><span class="o">=</span><span class="p">{},</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.common.plot_raster" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Plot a raster image.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>image</code></td>
        <td><code>str | xarray.DataArray </code></td>
        <td><p>The input raster image, can be a file path, HTTP URL, or xarray.DataArray.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>band</code></td>
        <td><code>int</code></td>
        <td><p>The band index, starting from zero. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>cmap</code></td>
        <td><code>str</code></td>
        <td><p>The matplotlib colormap to use. Defaults to "terrain".</p></td>
        <td><code>&#39;terrain&#39;</code></td>
      </tr>
      <tr>
        <td><code>proj</code></td>
        <td><code>str</code></td>
        <td><p>The EPSG projection code. Defaults to "EPSG:3857".</p></td>
        <td><code>&#39;EPSG:3857&#39;</code></td>
      </tr>
      <tr>
        <td><code>figsize</code></td>
        <td><code>tuple</code></td>
        <td><p>The figure size as a tuple, such as (10, 8). Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>open_kwargs</code></td>
        <td><code>dict</code></td>
        <td><p>The keyword arguments to pass to rioxarray.open_rasterio. Defaults to {}.</p></td>
        <td><code>{}</code></td>
      </tr>
      <tr>
        <td><code>**kwargs</code></td>
        <td></td>
        <td><p>Additional keyword arguments to pass to xarray.DataArray.plot().</p></td>
        <td><code>{}</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">plot_raster</span><span class="p">(</span>
    <span class="n">image</span><span class="p">,</span>
    <span class="n">band</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">cmap</span><span class="o">=</span><span class="s2">&quot;terrain&quot;</span><span class="p">,</span>
    <span class="n">proj</span><span class="o">=</span><span class="s2">&quot;EPSG:3857&quot;</span><span class="p">,</span>
    <span class="n">figsize</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">open_kwargs</span><span class="o">=</span><span class="p">{},</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Plot a raster image.</span>

<span class="sd">    Args:</span>
<span class="sd">        image (str | xarray.DataArray ): The input raster image, can be a file path, HTTP URL, or xarray.DataArray.</span>
<span class="sd">        band (int, optional): The band index, starting from zero. Defaults to None.</span>
<span class="sd">        cmap (str, optional): The matplotlib colormap to use. Defaults to &quot;terrain&quot;.</span>
<span class="sd">        proj (str, optional): The EPSG projection code. Defaults to &quot;EPSG:3857&quot;.</span>
<span class="sd">        figsize (tuple, optional): The figure size as a tuple, such as (10, 8). Defaults to None.</span>
<span class="sd">        open_kwargs (dict, optional): The keyword arguments to pass to rioxarray.open_rasterio. Defaults to {}.</span>
<span class="sd">        **kwargs: Additional keyword arguments to pass to xarray.DataArray.plot().</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;USE_MKDOCS&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="n">in_colab_shell</span><span class="p">():</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The plot_raster_3d() function is not supported in Colab.&quot;</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="kn">import</span> <span class="nn">pvxarray</span>
        <span class="kn">import</span> <span class="nn">rioxarray</span>
        <span class="kn">import</span> <span class="nn">xarray</span>
    <span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ImportError</span><span class="p">(</span>
            <span class="s2">&quot;pyxarray and rioxarray are required for plotting. Please install them using &#39;pip install rioxarray pyvista-xarray&#39;.&quot;</span>
        <span class="p">)</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">da</span> <span class="o">=</span> <span class="n">rioxarray</span><span class="o">.</span><span class="n">open_rasterio</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="o">**</span><span class="n">open_kwargs</span><span class="p">)</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">xarray</span><span class="o">.</span><span class="n">DataArray</span><span class="p">):</span>
        <span class="n">da</span> <span class="o">=</span> <span class="n">image</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;image must be a string or xarray.Dataset.&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">band</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">da</span> <span class="o">=</span> <span class="n">da</span><span class="p">[</span><span class="nb">dict</span><span class="p">(</span><span class="n">band</span><span class="o">=</span><span class="n">band</span><span class="p">)]</span>

    <span class="n">da</span> <span class="o">=</span> <span class="n">da</span><span class="o">.</span><span class="n">rio</span><span class="o">.</span><span class="n">reproject</span><span class="p">(</span><span class="n">proj</span><span class="p">)</span>
    <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;cmap&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">cmap</span>
    <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;figsize&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">figsize</span>
    <span class="n">da</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.plot_raster_3d" class="doc doc-heading">
<code class="highlight language-python"><span class="n">plot_raster_3d</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">band</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;terrain&#39;</span><span class="p">,</span> <span class="n">factor</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">proj</span><span class="o">=</span><span class="s1">&#39;EPSG:3857&#39;</span><span class="p">,</span> <span class="n">background</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">component</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">open_kwargs</span><span class="o">=</span><span class="p">{},</span> <span class="n">mesh_kwargs</span><span class="o">=</span><span class="p">{},</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.common.plot_raster_3d" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Plot a raster image in 3D.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>image</code></td>
        <td><code>str | xarray.DataArray</code></td>
        <td><p>The input raster image, can be a file path, HTTP URL, or xarray.DataArray.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>band</code></td>
        <td><code>int</code></td>
        <td><p>The band index, starting from zero. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>cmap</code></td>
        <td><code>str</code></td>
        <td><p>The matplotlib colormap to use. Defaults to "terrain".</p></td>
        <td><code>&#39;terrain&#39;</code></td>
      </tr>
      <tr>
        <td><code>factor</code></td>
        <td><code>float</code></td>
        <td><p>The scaling factor for the raster. Defaults to 1.0.</p></td>
        <td><code>1.0</code></td>
      </tr>
      <tr>
        <td><code>proj</code></td>
        <td><code>str</code></td>
        <td><p>The EPSG projection code. Defaults to "EPSG:3857".</p></td>
        <td><code>&#39;EPSG:3857&#39;</code></td>
      </tr>
      <tr>
        <td><code>background</code></td>
        <td><code>str</code></td>
        <td><p>The background color. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>x</code></td>
        <td><code>str</code></td>
        <td><p>The x coordinate. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>y</code></td>
        <td><code>str</code></td>
        <td><p>The y coordinate. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>z</code></td>
        <td><code>str</code></td>
        <td><p>The z coordinate. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>order</code></td>
        <td><code>str</code></td>
        <td><p>The order of the coordinates. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>component</code></td>
        <td><code>str</code></td>
        <td><p>The component of the coordinates. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>open_kwargs</code></td>
        <td><code>dict</code></td>
        <td><p>The keyword arguments to pass to rioxarray.open_rasterio. Defaults to {}.</p></td>
        <td><code>{}</code></td>
      </tr>
      <tr>
        <td><code>mesh_kwargs</code></td>
        <td><code>dict</code></td>
        <td><p>The keyword arguments to pass to pyvista.mesh.warp_by_scalar(). Defaults to {}.</p></td>
        <td><code>{}</code></td>
      </tr>
      <tr>
        <td><code>**kwargs</code></td>
        <td></td>
        <td><p>Additional keyword arguments to pass to xarray.DataArray.plot().</p></td>
        <td><code>{}</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">plot_raster_3d</span><span class="p">(</span>
    <span class="n">image</span><span class="p">,</span>
    <span class="n">band</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">cmap</span><span class="o">=</span><span class="s2">&quot;terrain&quot;</span><span class="p">,</span>
    <span class="n">factor</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
    <span class="n">proj</span><span class="o">=</span><span class="s2">&quot;EPSG:3857&quot;</span><span class="p">,</span>
    <span class="n">background</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">x</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">y</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">z</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">order</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">component</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">open_kwargs</span><span class="o">=</span><span class="p">{},</span>
    <span class="n">mesh_kwargs</span><span class="o">=</span><span class="p">{},</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Plot a raster image in 3D.</span>

<span class="sd">    Args:</span>
<span class="sd">        image (str | xarray.DataArray): The input raster image, can be a file path, HTTP URL, or xarray.DataArray.</span>
<span class="sd">        band (int, optional): The band index, starting from zero. Defaults to None.</span>
<span class="sd">        cmap (str, optional): The matplotlib colormap to use. Defaults to &quot;terrain&quot;.</span>
<span class="sd">        factor (float, optional): The scaling factor for the raster. Defaults to 1.0.</span>
<span class="sd">        proj (str, optional): The EPSG projection code. Defaults to &quot;EPSG:3857&quot;.</span>
<span class="sd">        background (str, optional): The background color. Defaults to None.</span>
<span class="sd">        x (str, optional): The x coordinate. Defaults to None.</span>
<span class="sd">        y (str, optional): The y coordinate. Defaults to None.</span>
<span class="sd">        z (str, optional): The z coordinate. Defaults to None.</span>
<span class="sd">        order (str, optional): The order of the coordinates. Defaults to None.</span>
<span class="sd">        component (str, optional): The component of the coordinates. Defaults to None.</span>
<span class="sd">        open_kwargs (dict, optional): The keyword arguments to pass to rioxarray.open_rasterio. Defaults to {}.</span>
<span class="sd">        mesh_kwargs (dict, optional): The keyword arguments to pass to pyvista.mesh.warp_by_scalar(). Defaults to {}.</span>
<span class="sd">        **kwargs: Additional keyword arguments to pass to xarray.DataArray.plot().</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;USE_MKDOCS&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="kn">import</span> <span class="nn">pvxarray</span>
        <span class="kn">import</span> <span class="nn">pyvista</span>
        <span class="kn">import</span> <span class="nn">rioxarray</span>
        <span class="kn">import</span> <span class="nn">xarray</span>
    <span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ImportError</span><span class="p">(</span>
            <span class="s2">&quot;pyxarray and rioxarray are required for plotting. Please install them using &#39;pip install rioxarray pyvista-xarray&#39;.&quot;</span>
        <span class="p">)</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">background</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">pyvista</span><span class="o">.</span><span class="n">global_theme</span><span class="o">.</span><span class="n">background</span> <span class="o">=</span> <span class="n">background</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">da</span> <span class="o">=</span> <span class="n">rioxarray</span><span class="o">.</span><span class="n">open_rasterio</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="o">**</span><span class="n">open_kwargs</span><span class="p">)</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">xarray</span><span class="o">.</span><span class="n">DataArray</span><span class="p">):</span>
        <span class="n">da</span> <span class="o">=</span> <span class="n">image</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;image must be a string or xarray.Dataset.&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">band</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">da</span> <span class="o">=</span> <span class="n">da</span><span class="p">[</span><span class="nb">dict</span><span class="p">(</span><span class="n">band</span><span class="o">=</span><span class="n">band</span><span class="p">)]</span>

    <span class="n">da</span> <span class="o">=</span> <span class="n">da</span><span class="o">.</span><span class="n">rio</span><span class="o">.</span><span class="n">reproject</span><span class="p">(</span><span class="n">proj</span><span class="p">)</span>
    <span class="n">mesh_kwargs</span><span class="p">[</span><span class="s2">&quot;factor&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">factor</span>
    <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;cmap&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">cmap</span>

    <span class="n">coords</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">da</span><span class="o">.</span><span class="n">coords</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">x</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="s2">&quot;x&quot;</span> <span class="ow">in</span> <span class="n">coords</span><span class="p">:</span>
            <span class="n">x</span> <span class="o">=</span> <span class="s2">&quot;x&quot;</span>
        <span class="k">elif</span> <span class="s2">&quot;lon&quot;</span> <span class="ow">in</span> <span class="n">coords</span><span class="p">:</span>
            <span class="n">x</span> <span class="o">=</span> <span class="s2">&quot;lon&quot;</span>
    <span class="k">if</span> <span class="n">y</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="s2">&quot;y&quot;</span> <span class="ow">in</span> <span class="n">coords</span><span class="p">:</span>
            <span class="n">y</span> <span class="o">=</span> <span class="s2">&quot;y&quot;</span>
        <span class="k">elif</span> <span class="s2">&quot;lat&quot;</span> <span class="ow">in</span> <span class="n">coords</span><span class="p">:</span>
            <span class="n">y</span> <span class="o">=</span> <span class="s2">&quot;lat&quot;</span>
    <span class="k">if</span> <span class="n">z</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="s2">&quot;z&quot;</span> <span class="ow">in</span> <span class="n">coords</span><span class="p">:</span>
            <span class="n">z</span> <span class="o">=</span> <span class="s2">&quot;z&quot;</span>
        <span class="k">elif</span> <span class="s2">&quot;elevation&quot;</span> <span class="ow">in</span> <span class="n">coords</span><span class="p">:</span>
            <span class="n">z</span> <span class="o">=</span> <span class="s2">&quot;elevation&quot;</span>
        <span class="k">elif</span> <span class="s2">&quot;band&quot;</span> <span class="ow">in</span> <span class="n">coords</span><span class="p">:</span>
            <span class="n">z</span> <span class="o">=</span> <span class="s2">&quot;band&quot;</span>

    <span class="c1"># Grab the mesh object for use with PyVista</span>
    <span class="n">mesh</span> <span class="o">=</span> <span class="n">da</span><span class="o">.</span><span class="n">pyvista</span><span class="o">.</span><span class="n">mesh</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="n">z</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="n">order</span><span class="p">,</span> <span class="n">component</span><span class="o">=</span><span class="n">component</span><span class="p">)</span>

    <span class="c1"># Warp top and plot in 3D</span>
    <span class="n">mesh</span><span class="o">.</span><span class="n">warp_by_scalar</span><span class="p">(</span><span class="o">**</span><span class="n">mesh_kwargs</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.png_to_gif" class="doc doc-heading">
<code class="highlight language-python"><span class="n">png_to_gif</span><span class="p">(</span><span class="n">in_dir</span><span class="p">,</span> <span class="n">out_gif</span><span class="p">,</span> <span class="n">fps</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">loop</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span></code>


<a href="#geemap.common.png_to_gif" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Convert a list of png images to gif.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>in_dir</code></td>
        <td><code>str</code></td>
        <td><p>The input directory containing png images.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>out_gif</code></td>
        <td><code>str</code></td>
        <td><p>The output file path to the gif.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>fps</code></td>
        <td><code>int</code></td>
        <td><p>Frames per second. Defaults to 10.</p></td>
        <td><code>10</code></td>
      </tr>
      <tr>
        <td><code>loop</code></td>
        <td><code>bool</code></td>
        <td><p>controls how many times the animation repeats. 1 means that the animation will play once and then stop (displaying the last frame). A value of 0 means that the animation will repeat forever. Defaults to 0.</p></td>
        <td><code>0</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>FileNotFoundError</code></td>
        <td><p>No png images could be found.</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">png_to_gif</span><span class="p">(</span><span class="n">in_dir</span><span class="p">,</span> <span class="n">out_gif</span><span class="p">,</span> <span class="n">fps</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">loop</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Convert a list of png images to gif.</span>

<span class="sd">    Args:</span>
<span class="sd">        in_dir (str): The input directory containing png images.</span>
<span class="sd">        out_gif (str): The output file path to the gif.</span>
<span class="sd">        fps (int, optional): Frames per second. Defaults to 10.</span>
<span class="sd">        loop (bool, optional): controls how many times the animation repeats. 1 means that the animation will play once and then stop (displaying the last frame). A value of 0 means that the animation will repeat forever. Defaults to 0.</span>

<span class="sd">    Raises:</span>
<span class="sd">        FileNotFoundError: No png images could be found.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">glob</span>

    <span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">Image</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">out_gif</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.gif&quot;</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The out_gif must be a gif file.&quot;</span><span class="p">)</span>

    <span class="n">out_gif</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">out_gif</span><span class="p">)</span>

    <span class="n">out_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">out_gif</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">out_dir</span><span class="p">):</span>
        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">out_dir</span><span class="p">)</span>

    <span class="c1"># Create the frames</span>
    <span class="n">frames</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">imgs</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">in_dir</span><span class="p">,</span> <span class="s2">&quot;*.png&quot;</span><span class="p">)))</span>
    <span class="n">imgs</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">imgs</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No png could be found in </span><span class="si">{</span><span class="n">in_dir</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">imgs</span><span class="p">:</span>
        <span class="n">new_frame</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
        <span class="n">frames</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_frame</span><span class="p">)</span>

    <span class="c1"># Save into a GIF file that loops forever</span>
    <span class="n">frames</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">save</span><span class="p">(</span>
        <span class="n">out_gif</span><span class="p">,</span>
        <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;GIF&quot;</span><span class="p">,</span>
        <span class="n">append_images</span><span class="o">=</span><span class="n">frames</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span>
        <span class="n">save_all</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">duration</span><span class="o">=</span><span class="mi">1000</span> <span class="o">/</span> <span class="n">fps</span><span class="p">,</span>
        <span class="n">loop</span><span class="o">=</span><span class="n">loop</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.points_from_xy" class="doc doc-heading">
<code class="highlight language-python"><span class="n">points_from_xy</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s1">&#39;longitude&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;latitude&#39;</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">crs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.common.points_from_xy" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Create a GeoPandas GeoDataFrame from a csv or Pandas DataFrame containing x, y, z values.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>data</code></td>
        <td><code>str | pd.DataFrame</code></td>
        <td><p>A csv or Pandas DataFrame containing x, y, z values.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>x</code></td>
        <td><code>str</code></td>
        <td><p>The column name for the x values. Defaults to "longitude".</p></td>
        <td><code>&#39;longitude&#39;</code></td>
      </tr>
      <tr>
        <td><code>y</code></td>
        <td><code>str</code></td>
        <td><p>The column name for the y values. Defaults to "latitude".</p></td>
        <td><code>&#39;latitude&#39;</code></td>
      </tr>
      <tr>
        <td><code>z</code></td>
        <td><code>str</code></td>
        <td><p>The column name for the z values. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>crs</code></td>
        <td><code>str | int</code></td>
        <td><p>The coordinate reference system for the GeoDataFrame. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>geopandas.GeoDataFrame</code></td>
      <td><p>A GeoPandas GeoDataFrame containing x, y, z values.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">points_from_xy</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s2">&quot;longitude&quot;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">&quot;latitude&quot;</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">crs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Create a GeoPandas GeoDataFrame from a csv or Pandas DataFrame containing x, y, z values.</span>

<span class="sd">    Args:</span>
<span class="sd">        data (str | pd.DataFrame): A csv or Pandas DataFrame containing x, y, z values.</span>
<span class="sd">        x (str, optional): The column name for the x values. Defaults to &quot;longitude&quot;.</span>
<span class="sd">        y (str, optional): The column name for the y values. Defaults to &quot;latitude&quot;.</span>
<span class="sd">        z (str, optional): The column name for the z values. Defaults to None.</span>
<span class="sd">        crs (str | int, optional): The coordinate reference system for the GeoDataFrame. Defaults to None.</span>

<span class="sd">    Returns:</span>
<span class="sd">        geopandas.GeoDataFrame: A GeoPandas GeoDataFrame containing x, y, z values.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">check_package</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;geopandas&quot;</span><span class="p">,</span> <span class="n">URL</span><span class="o">=</span><span class="s2">&quot;https://geopandas.org&quot;</span><span class="p">)</span>
    <span class="kn">import</span> <span class="nn">geopandas</span> <span class="k">as</span> <span class="nn">gpd</span>
    <span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

    <span class="k">if</span> <span class="n">crs</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">crs</span> <span class="o">=</span> <span class="s2">&quot;epsg:4326&quot;</span>

    <span class="n">data</span> <span class="o">=</span> <span class="n">github_raw_url</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">):</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">data</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">data</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;http&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">data</span><span class="p">)):</span>
            <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span><span class="s2">&quot;The specified input csv does not exist.&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;The data must be a pandas DataFrame or a csv file path.&quot;</span><span class="p">)</span>

    <span class="n">gdf</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">GeoDataFrame</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">geometry</span><span class="o">=</span><span class="n">gpd</span><span class="o">.</span><span class="n">points_from_xy</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">x</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="n">y</span><span class="p">],</span> <span class="n">z</span><span class="o">=</span><span class="n">z</span><span class="p">,</span> <span class="n">crs</span><span class="o">=</span><span class="n">crs</span><span class="p">))</span>

    <span class="k">return</span> <span class="n">gdf</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.postgis_to_ee" class="doc doc-heading">
<code class="highlight language-python"><span class="n">postgis_to_ee</span><span class="p">(</span><span class="n">sql</span><span class="p">,</span> <span class="n">con</span><span class="p">,</span> <span class="n">geom_col</span><span class="o">=</span><span class="s1">&#39;geom&#39;</span><span class="p">,</span> <span class="n">crs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">geodestic</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.common.postgis_to_ee" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Reads data from a PostGIS database and returns a GeoDataFrame.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>sql</code></td>
        <td><code>str</code></td>
        <td><p>SQL query to execute in selecting entries from database, or name of the table to read from the database.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>con</code></td>
        <td><code>sqlalchemy.engine.Engine</code></td>
        <td><p>Active connection to the database to query.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>geom_col</code></td>
        <td><code>str</code></td>
        <td><p>Column name to convert to shapely geometries. Defaults to "geom".</p></td>
        <td><code>&#39;geom&#39;</code></td>
      </tr>
      <tr>
        <td><code>crs</code></td>
        <td><code>str | dict</code></td>
        <td><p>CRS to use for the returned GeoDataFrame; if not set, tries to determine CRS from the SRID associated with the first geometry in the database, and assigns that to all geometries. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>geodestic</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to use geodestic coordinates. Defaults to False.</p></td>
        <td><code>False</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>[type]</code></td>
      <td><p>[description]</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">postgis_to_ee</span><span class="p">(</span><span class="n">sql</span><span class="p">,</span> <span class="n">con</span><span class="p">,</span> <span class="n">geom_col</span><span class="o">=</span><span class="s2">&quot;geom&quot;</span><span class="p">,</span> <span class="n">crs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">geodestic</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Reads data from a PostGIS database and returns a GeoDataFrame.</span>

<span class="sd">    Args:</span>
<span class="sd">        sql (str): SQL query to execute in selecting entries from database, or name of the table to read from the database.</span>
<span class="sd">        con (sqlalchemy.engine.Engine): Active connection to the database to query.</span>
<span class="sd">        geom_col (str, optional): Column name to convert to shapely geometries. Defaults to &quot;geom&quot;.</span>
<span class="sd">        crs (str | dict, optional): CRS to use for the returned GeoDataFrame; if not set, tries to determine CRS from the SRID associated with the first geometry in the database, and assigns that to all geometries. Defaults to None.</span>
<span class="sd">        geodestic (bool, optional): Whether to use geodestic coordinates. Defaults to False.</span>

<span class="sd">    Returns:</span>
<span class="sd">        [type]: [description]</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">check_package</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;geopandas&quot;</span><span class="p">,</span> <span class="n">URL</span><span class="o">=</span><span class="s2">&quot;https://geopandas.org&quot;</span><span class="p">)</span>

    <span class="n">gdf</span> <span class="o">=</span> <span class="n">read_postgis</span><span class="p">(</span><span class="n">sql</span><span class="p">,</span> <span class="n">con</span><span class="p">,</span> <span class="n">geom_col</span><span class="p">,</span> <span class="n">crs</span><span class="o">=</span><span class="n">crs</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="n">fc</span> <span class="o">=</span> <span class="n">gdf_to_ee</span><span class="p">(</span><span class="n">gdf</span><span class="p">,</span> <span class="n">geodesic</span><span class="o">=</span><span class="n">geodestic</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">fc</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.random_sampling" class="doc doc-heading">
<code class="highlight language-python"><span class="n">random_sampling</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">region</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">projection</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">factor</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">numPixels</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">seed</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">dropNulls</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">tileScale</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">geometries</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">to_pandas</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>


<a href="#geemap.common.random_sampling" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Samples the pixels of an image, returning them as a FeatureCollection. Each feature will have 1 property per band in the input image. Note that the default behavior is to drop features that intersect masked pixels, which result in null-valued properties (see dropNulls argument).</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>image</code></td>
        <td><code>ee.Image</code></td>
        <td><p>The image to sample.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>region</code></td>
        <td><code>ee.Geometry</code></td>
        <td><p>The region to sample from. If unspecified, uses the image's whole footprint. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>scale</code></td>
        <td><code>float</code></td>
        <td><p>A nominal scale in meters of the projection to sample in.. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>projection</code></td>
        <td><code>ee.Projection</code></td>
        <td><p>The projection in which to sample. If unspecified, the projection of the image's first band is used. If specified in addition to scale, rescaled to the specified scale.. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>factor</code></td>
        <td><code>float</code></td>
        <td><p>A subsampling factor, within (0, 1]. If specified, 'numPixels' must not be specified. Defaults to no subsampling. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>numPixels</code></td>
        <td><code>int</code></td>
        <td><p>The approximate number of pixels to sample. If specified, 'factor' must not be specified. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>seed</code></td>
        <td><code>int</code></td>
        <td><p>A randomization seed to use for subsampling. Defaults to True. Defaults to 0.</p></td>
        <td><code>0</code></td>
      </tr>
      <tr>
        <td><code>dropNulls</code></td>
        <td><code>bool</code></td>
        <td><p>Post filter the result to drop features that have null-valued properties. Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
      <tr>
        <td><code>tileScale</code></td>
        <td><code>float</code></td>
        <td><p>Post filter the result to drop features that have null-valued properties. Defaults to 1.</p></td>
        <td><code>1.0</code></td>
      </tr>
      <tr>
        <td><code>geometries</code></td>
        <td><code>bool</code></td>
        <td><p>If true, adds the center of the sampled pixel as the geometry property of the output feature. Otherwise, geometries will be omitted (saving memory). Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
      <tr>
        <td><code>to_pandas</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to return the result as a pandas dataframe. Defaults to False.</p></td>
        <td><code>False</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>TypeError</code></td>
        <td><p>If the input image is not an ee.Image.</p></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>ee.FeatureCollection</code></td>
      <td><p>Random sampled points.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">random_sampling</span><span class="p">(</span>
    <span class="n">image</span><span class="p">,</span>
    <span class="n">region</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">projection</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">factor</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">numPixels</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">seed</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
    <span class="n">dropNulls</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">tileScale</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
    <span class="n">geometries</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">to_pandas</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Samples the pixels of an image, returning them as a FeatureCollection. Each feature will have 1 property per band in the input image. Note that the default behavior is to drop features that intersect masked pixels, which result in null-valued properties (see dropNulls argument).</span>

<span class="sd">    Args:</span>
<span class="sd">        image (ee.Image): The image to sample.</span>
<span class="sd">        region (ee.Geometry, optional): The region to sample from. If unspecified, uses the image&#39;s whole footprint. Defaults to None.</span>
<span class="sd">        scale (float, optional): A nominal scale in meters of the projection to sample in.. Defaults to None.</span>
<span class="sd">        projection (ee.Projection, optional): The projection in which to sample. If unspecified, the projection of the image&#39;s first band is used. If specified in addition to scale, rescaled to the specified scale.. Defaults to None.</span>
<span class="sd">        factor (float, optional): A subsampling factor, within (0, 1]. If specified, &#39;numPixels&#39; must not be specified. Defaults to no subsampling. Defaults to None.</span>
<span class="sd">        numPixels (int, optional): The approximate number of pixels to sample. If specified, &#39;factor&#39; must not be specified. Defaults to None.</span>
<span class="sd">        seed (int, optional): A randomization seed to use for subsampling. Defaults to True. Defaults to 0.</span>
<span class="sd">        dropNulls (bool, optional): Post filter the result to drop features that have null-valued properties. Defaults to True.</span>
<span class="sd">        tileScale (float, optional): Post filter the result to drop features that have null-valued properties. Defaults to 1.</span>
<span class="sd">        geometries (bool, optional): If true, adds the center of the sampled pixel as the geometry property of the output feature. Otherwise, geometries will be omitted (saving memory). Defaults to True.</span>
<span class="sd">        to_pandas (bool, optional): Whether to return the result as a pandas dataframe. Defaults to False.</span>

<span class="sd">    Raises:</span>
<span class="sd">        TypeError: If the input image is not an ee.Image.</span>

<span class="sd">    Returns:</span>
<span class="sd">        ee.FeatureCollection: Random sampled points.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;The image must be ee.Image&quot;</span><span class="p">)</span>

    <span class="n">points</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span>
        <span class="o">**</span><span class="p">{</span>
            <span class="s2">&quot;region&quot;</span><span class="p">:</span> <span class="n">region</span><span class="p">,</span>
            <span class="s2">&quot;scale&quot;</span><span class="p">:</span> <span class="n">scale</span><span class="p">,</span>
            <span class="s2">&quot;projection&quot;</span><span class="p">:</span> <span class="n">projection</span><span class="p">,</span>
            <span class="s2">&quot;factor&quot;</span><span class="p">:</span> <span class="n">factor</span><span class="p">,</span>
            <span class="s2">&quot;numPixels&quot;</span><span class="p">:</span> <span class="n">numPixels</span><span class="p">,</span>
            <span class="s2">&quot;seed&quot;</span><span class="p">:</span> <span class="n">seed</span><span class="p">,</span>
            <span class="s2">&quot;dropNulls&quot;</span><span class="p">:</span> <span class="n">dropNulls</span><span class="p">,</span>
            <span class="s2">&quot;tileScale&quot;</span><span class="p">:</span> <span class="n">tileScale</span><span class="p">,</span>
            <span class="s2">&quot;geometries&quot;</span><span class="p">:</span> <span class="n">geometries</span><span class="p">,</span>
        <span class="p">}</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">to_pandas</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">ee_to_df</span><span class="p">(</span><span class="n">points</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">points</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.random_string" class="doc doc-heading">
<code class="highlight language-python"><span class="n">random_string</span><span class="p">(</span><span class="n">string_length</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span></code>


<a href="#geemap.common.random_string" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Generates a random string of fixed length.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>string_length</code></td>
        <td><code>int</code></td>
        <td><p>Fixed length. Defaults to 3.</p></td>
        <td><code>3</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>str</code></td>
      <td><p>A random string</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">random_string</span><span class="p">(</span><span class="n">string_length</span><span class="o">=</span><span class="mi">3</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Generates a random string of fixed length.</span>

<span class="sd">    Args:</span>
<span class="sd">        string_length (int, optional): Fixed length. Defaults to 3.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: A random string</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">random</span>
    <span class="kn">import</span> <span class="nn">string</span>

    <span class="c1"># random.seed(1001)</span>
    <span class="n">letters</span> <span class="o">=</span> <span class="n">string</span><span class="o">.</span><span class="n">ascii_lowercase</span>
    <span class="k">return</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">letters</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">string_length</span><span class="p">))</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.read_api_csv" class="doc doc-heading">
<code class="highlight language-python"><span class="n">read_api_csv</span><span class="p">()</span></code>


<a href="#geemap.common.read_api_csv" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Extracts Earth Engine API from a csv file and returns a dictionary containing information about each function.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>dict</code></td>
      <td><p>The dictionary containing information about each function, including name, description, function form, return type, arguments, html.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">read_api_csv</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Extracts Earth Engine API from a csv file and returns a dictionary containing information about each function.</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict: The dictionary containing information about each function, including name, description, function form, return type, arguments, html.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">copy</span>

    <span class="kn">import</span> <span class="nn">pkg_resources</span>

    <span class="n">pkg_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">pkg_resources</span><span class="o">.</span><span class="n">resource_filename</span><span class="p">(</span><span class="s2">&quot;geemap&quot;</span><span class="p">,</span> <span class="s2">&quot;geemap.py&quot;</span><span class="p">))</span>
    <span class="n">data_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">pkg_dir</span><span class="p">,</span> <span class="s2">&quot;data&quot;</span><span class="p">)</span>
    <span class="n">template_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">data_dir</span><span class="p">,</span> <span class="s2">&quot;template&quot;</span><span class="p">)</span>
    <span class="n">csv_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">template_dir</span><span class="p">,</span> <span class="s2">&quot;ee_api_docs.csv&quot;</span><span class="p">)</span>
    <span class="n">html_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">template_dir</span><span class="p">,</span> <span class="s2">&quot;ee_api_docs.html&quot;</span><span class="p">)</span>

    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">html_file</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">in_html_lines</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">readlines</span><span class="p">()</span>

    <span class="n">api_dict</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">csv_file</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">csv_reader</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">DictReader</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">csv_reader</span><span class="p">:</span>

            <span class="n">out_html_lines</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">in_html_lines</span><span class="p">)</span>
            <span class="n">out_html_lines</span><span class="p">[</span><span class="mi">65</span><span class="p">]</span> <span class="o">=</span> <span class="n">in_html_lines</span><span class="p">[</span><span class="mi">65</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span>
                <span class="s2">&quot;function_name&quot;</span><span class="p">,</span> <span class="n">line</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span>
            <span class="p">)</span>
            <span class="n">out_html_lines</span><span class="p">[</span><span class="mi">66</span><span class="p">]</span> <span class="o">=</span> <span class="n">in_html_lines</span><span class="p">[</span><span class="mi">66</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span>
                <span class="s2">&quot;function_description&quot;</span><span class="p">,</span> <span class="n">line</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;description&quot;</span><span class="p">)</span>
            <span class="p">)</span>
            <span class="n">out_html_lines</span><span class="p">[</span><span class="mi">74</span><span class="p">]</span> <span class="o">=</span> <span class="n">in_html_lines</span><span class="p">[</span><span class="mi">74</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span>
                <span class="s2">&quot;function_usage&quot;</span><span class="p">,</span> <span class="n">line</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;function&quot;</span><span class="p">)</span>
            <span class="p">)</span>
            <span class="n">out_html_lines</span><span class="p">[</span><span class="mi">75</span><span class="p">]</span> <span class="o">=</span> <span class="n">in_html_lines</span><span class="p">[</span><span class="mi">75</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span>
                <span class="s2">&quot;function_returns&quot;</span><span class="p">,</span> <span class="n">line</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;returns&quot;</span><span class="p">)</span>
            <span class="p">)</span>

            <span class="n">arguments</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;argument&quot;</span><span class="p">)</span>
            <span class="n">types</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;type&quot;</span><span class="p">)</span>
            <span class="n">details</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;details&quot;</span><span class="p">)</span>

            <span class="k">if</span> <span class="s2">&quot;|&quot;</span> <span class="ow">in</span> <span class="n">arguments</span><span class="p">:</span>
                <span class="n">argument_items</span> <span class="o">=</span> <span class="n">arguments</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;|&quot;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">argument_items</span> <span class="o">=</span> <span class="p">[</span><span class="n">arguments</span><span class="p">]</span>

            <span class="k">if</span> <span class="s2">&quot;|&quot;</span> <span class="ow">in</span> <span class="n">types</span><span class="p">:</span>
                <span class="n">types_items</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;|&quot;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">types_items</span> <span class="o">=</span> <span class="p">[</span><span class="n">types</span><span class="p">]</span>

            <span class="k">if</span> <span class="s2">&quot;|&quot;</span> <span class="ow">in</span> <span class="n">details</span><span class="p">:</span>
                <span class="n">details_items</span> <span class="o">=</span> <span class="n">details</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;|&quot;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">details_items</span> <span class="o">=</span> <span class="p">[</span><span class="n">details</span><span class="p">]</span>

            <span class="n">out_argument_lines</span> <span class="o">=</span> <span class="p">[]</span>

            <span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">argument_items</span><span class="p">)):</span>
                <span class="n">in_argument_lines</span> <span class="o">=</span> <span class="n">in_html_lines</span><span class="p">[</span><span class="mi">87</span><span class="p">:</span><span class="mi">92</span><span class="p">]</span>
                <span class="n">in_argument_lines</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">in_argument_lines</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span>
                    <span class="s2">&quot;function_argument&quot;</span><span class="p">,</span> <span class="n">argument_items</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
                <span class="p">)</span>
                <span class="n">in_argument_lines</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">in_argument_lines</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span>
                    <span class="s2">&quot;function_type&quot;</span><span class="p">,</span> <span class="n">types_items</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
                <span class="p">)</span>
                <span class="n">in_argument_lines</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">in_argument_lines</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span>
                    <span class="s2">&quot;function_details&quot;</span><span class="p">,</span> <span class="n">details_items</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
                <span class="p">)</span>
                <span class="n">out_argument_lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">in_argument_lines</span><span class="p">))</span>

            <span class="n">out_html_lines</span> <span class="o">=</span> <span class="p">(</span>
                <span class="n">out_html_lines</span><span class="p">[:</span><span class="mi">87</span><span class="p">]</span> <span class="o">+</span> <span class="n">out_argument_lines</span> <span class="o">+</span> <span class="n">out_html_lines</span><span class="p">[</span><span class="mi">92</span><span class="p">:]</span>
            <span class="p">)</span>

            <span class="n">contents</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">out_html_lines</span><span class="p">)</span>

            <span class="n">api_dict</span><span class="p">[</span><span class="n">line</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="n">line</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;description&quot;</span><span class="p">),</span>
                <span class="s2">&quot;function&quot;</span><span class="p">:</span> <span class="n">line</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;function&quot;</span><span class="p">),</span>
                <span class="s2">&quot;returns&quot;</span><span class="p">:</span> <span class="n">line</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;returns&quot;</span><span class="p">),</span>
                <span class="s2">&quot;argument&quot;</span><span class="p">:</span> <span class="n">line</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;argument&quot;</span><span class="p">),</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="n">line</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;type&quot;</span><span class="p">),</span>
                <span class="s2">&quot;details&quot;</span><span class="p">:</span> <span class="n">line</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;details&quot;</span><span class="p">),</span>
                <span class="s2">&quot;html&quot;</span><span class="p">:</span> <span class="n">contents</span><span class="p">,</span>
            <span class="p">}</span>

    <span class="k">return</span> <span class="n">api_dict</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.read_file_from_url" class="doc doc-heading">
<code class="highlight language-python"><span class="n">read_file_from_url</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">return_type</span><span class="o">=</span><span class="s1">&#39;list&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span></code>


<a href="#geemap.common.read_file_from_url" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Reads a file from a URL.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>url</code></td>
        <td><code>str</code></td>
        <td><p>The URL of the file.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>return_type</code></td>
        <td><code>str</code></td>
        <td><p>The return type, can either be string or list. Defaults to "list".</p></td>
        <td><code>&#39;list&#39;</code></td>
      </tr>
      <tr>
        <td><code>encoding</code></td>
        <td><code>str</code></td>
        <td><p>The encoding of the file. Defaults to "utf-8".</p></td>
        <td><code>&#39;utf-8&#39;</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>ValueError</code></td>
        <td><p>The return type must be either list or string.</p></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>str | list</code></td>
      <td><p>The contents of the file.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">read_file_from_url</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">return_type</span><span class="o">=</span><span class="s2">&quot;list&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Reads a file from a URL.</span>

<span class="sd">    Args:</span>
<span class="sd">        url (str): The URL of the file.</span>
<span class="sd">        return_type (str, optional): The return type, can either be string or list. Defaults to &quot;list&quot;.</span>
<span class="sd">        encoding (str, optional): The encoding of the file. Defaults to &quot;utf-8&quot;.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: The return type must be either list or string.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str | list: The contents of the file.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span> <span class="nn">urllib.request</span> <span class="kn">import</span> <span class="n">urlopen</span>

    <span class="k">if</span> <span class="n">return_type</span> <span class="o">==</span> <span class="s2">&quot;list&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">line</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="n">encoding</span><span class="p">)</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span> <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">urlopen</span><span class="p">(</span><span class="n">url</span><span class="p">)</span><span class="o">.</span><span class="n">readlines</span><span class="p">()]</span>
    <span class="k">elif</span> <span class="n">return_type</span> <span class="o">==</span> <span class="s2">&quot;string&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">urlopen</span><span class="p">(</span><span class="n">url</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="n">encoding</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The return type must be either list or string.&quot;</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.read_lidar" class="doc doc-heading">
<code class="highlight language-python"><span class="n">read_lidar</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.common.read_lidar" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Read a LAS file.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>filename</code></td>
        <td><code>str</code></td>
        <td><p>A local file path or HTTP URL to a LAS file.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>LasData</code></td>
      <td><p>The LasData object return by laspy.read.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">read_lidar</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Read a LAS file.</span>

<span class="sd">    Args:</span>
<span class="sd">        filename (str): A local file path or HTTP URL to a LAS file.</span>

<span class="sd">    Returns:</span>
<span class="sd">        LasData: The LasData object return by laspy.read.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="kn">import</span> <span class="nn">laspy</span>
    <span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span>
            <span class="s2">&quot;The laspy package is required for this function. Use `pip install laspy[lazrs,laszip]` to install it.&quot;</span>
        <span class="p">)</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="p">(</span>
        <span class="nb">isinstance</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span>
        <span class="ow">and</span> <span class="n">filename</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;http&quot;</span><span class="p">)</span>
        <span class="ow">and</span> <span class="p">(</span><span class="n">filename</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.las&quot;</span><span class="p">)</span> <span class="ow">or</span> <span class="n">filename</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.laz&quot;</span><span class="p">))</span>
    <span class="p">):</span>
        <span class="n">filename</span> <span class="o">=</span> <span class="n">github_raw_url</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
        <span class="n">filename</span> <span class="o">=</span> <span class="n">download_file</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">laspy</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.read_netcdf" class="doc doc-heading">
<code class="highlight language-python"><span class="n">read_netcdf</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.common.read_netcdf" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Read a netcdf file.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>filename</code></td>
        <td><code>str</code></td>
        <td><p>File path or HTTP URL to the netcdf file.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>ImportError</code></td>
        <td><p>If the xarray or rioxarray package is not installed.</p></td>
      </tr>
      <tr>
        <td><code>FileNotFoundError</code></td>
        <td><p>If the netcdf file is not found.</p></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>xarray.Dataset</code></td>
      <td><p>The netcdf file as an xarray dataset.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">read_netcdf</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Read a netcdf file.</span>

<span class="sd">    Args:</span>
<span class="sd">        filename (str): File path or HTTP URL to the netcdf file.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ImportError: If the xarray or rioxarray package is not installed.</span>
<span class="sd">        FileNotFoundError: If the netcdf file is not found.</span>

<span class="sd">    Returns:</span>
<span class="sd">        xarray.Dataset: The netcdf file as an xarray dataset.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="kn">import</span> <span class="nn">xarray</span> <span class="k">as</span> <span class="nn">xr</span>
    <span class="k">except</span> <span class="ne">ImportError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ImportError</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">filename</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;http&quot;</span><span class="p">):</span>
        <span class="n">filename</span> <span class="o">=</span> <span class="n">download_file</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">filename</span><span class="si">}</span><span class="s2"> does not exist.&quot;</span><span class="p">)</span>

    <span class="n">xds</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">open_dataset</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">xds</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.read_postgis" class="doc doc-heading">
<code class="highlight language-python"><span class="n">read_postgis</span><span class="p">(</span><span class="n">sql</span><span class="p">,</span> <span class="n">con</span><span class="p">,</span> <span class="n">geom_col</span><span class="o">=</span><span class="s1">&#39;geom&#39;</span><span class="p">,</span> <span class="n">crs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.common.read_postgis" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Reads data from a PostGIS database and returns a GeoDataFrame.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>sql</code></td>
        <td><code>str</code></td>
        <td><p>SQL query to execute in selecting entries from database, or name of the table to read from the database.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>con</code></td>
        <td><code>sqlalchemy.engine.Engine</code></td>
        <td><p>Active connection to the database to query.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>geom_col</code></td>
        <td><code>str</code></td>
        <td><p>Column name to convert to shapely geometries. Defaults to "geom".</p></td>
        <td><code>&#39;geom&#39;</code></td>
      </tr>
      <tr>
        <td><code>crs</code></td>
        <td><code>str | dict</code></td>
        <td><p>CRS to use for the returned GeoDataFrame; if not set, tries to determine CRS from the SRID associated with the first geometry in the database, and assigns that to all geometries. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>[type]</code></td>
      <td><p>[description]</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">read_postgis</span><span class="p">(</span><span class="n">sql</span><span class="p">,</span> <span class="n">con</span><span class="p">,</span> <span class="n">geom_col</span><span class="o">=</span><span class="s2">&quot;geom&quot;</span><span class="p">,</span> <span class="n">crs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Reads data from a PostGIS database and returns a GeoDataFrame.</span>

<span class="sd">    Args:</span>
<span class="sd">        sql (str): SQL query to execute in selecting entries from database, or name of the table to read from the database.</span>
<span class="sd">        con (sqlalchemy.engine.Engine): Active connection to the database to query.</span>
<span class="sd">        geom_col (str, optional): Column name to convert to shapely geometries. Defaults to &quot;geom&quot;.</span>
<span class="sd">        crs (str | dict, optional): CRS to use for the returned GeoDataFrame; if not set, tries to determine CRS from the SRID associated with the first geometry in the database, and assigns that to all geometries. Defaults to None.</span>

<span class="sd">    Returns:</span>
<span class="sd">        [type]: [description]</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">check_package</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;geopandas&quot;</span><span class="p">,</span> <span class="n">URL</span><span class="o">=</span><span class="s2">&quot;https://geopandas.org&quot;</span><span class="p">)</span>

    <span class="kn">import</span> <span class="nn">geopandas</span> <span class="k">as</span> <span class="nn">gpd</span>

    <span class="n">gdf</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_postgis</span><span class="p">(</span><span class="n">sql</span><span class="p">,</span> <span class="n">con</span><span class="p">,</span> <span class="n">geom_col</span><span class="p">,</span> <span class="n">crs</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">gdf</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.remove_geometry" class="doc doc-heading">
<code class="highlight language-python"><span class="n">remove_geometry</span><span class="p">(</span><span class="n">fc</span><span class="p">)</span></code>


<a href="#geemap.common.remove_geometry" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Remove .geo coordinate field from a FeatureCollection</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>fc</code></td>
        <td><code>object</code></td>
        <td><p>The input FeatureCollection.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>object</code></td>
      <td><p>The output FeatureCollection without the geometry field.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">remove_geometry</span><span class="p">(</span><span class="n">fc</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Remove .geo coordinate field from a FeatureCollection</span>

<span class="sd">    Args:</span>
<span class="sd">        fc (object): The input FeatureCollection.</span>

<span class="sd">    Returns:</span>
<span class="sd">        object: The output FeatureCollection without the geometry field.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">fc</span><span class="o">.</span><span class="n">select</span><span class="p">([</span><span class="s2">&quot;.*&quot;</span><span class="p">],</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.rename_bands" class="doc doc-heading">
<code class="highlight language-python"><span class="n">rename_bands</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">in_band_names</span><span class="p">,</span> <span class="n">out_band_names</span><span class="p">)</span></code>


<a href="#geemap.common.rename_bands" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Renames image bands.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>img</code></td>
        <td><code>object</code></td>
        <td><p>The image to be renamed.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>in_band_names</code></td>
        <td><code>list</code></td>
        <td><p>The list of of input band names.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>out_band_names</code></td>
        <td><code>list</code></td>
        <td><p>The list of output band names.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>object</code></td>
      <td><p>The output image with the renamed bands.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">rename_bands</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">in_band_names</span><span class="p">,</span> <span class="n">out_band_names</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Renames image bands.</span>

<span class="sd">    Args:</span>
<span class="sd">        img (object): The image to be renamed.</span>
<span class="sd">        in_band_names (list): The list of of input band names.</span>
<span class="sd">        out_band_names (list): The list of output band names.</span>

<span class="sd">    Returns:</span>
<span class="sd">        object: The output image with the renamed bands.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">img</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">in_band_names</span><span class="p">,</span> <span class="n">out_band_names</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.reproject" class="doc doc-heading">
<code class="highlight language-python"><span class="n">reproject</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">output</span><span class="p">,</span> <span class="n">dst_crs</span><span class="o">=</span><span class="s1">&#39;EPSG:4326&#39;</span><span class="p">,</span> <span class="n">resampling</span><span class="o">=</span><span class="s1">&#39;nearest&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.common.reproject" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Reprojects an image.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>image</code></td>
        <td><code>str</code></td>
        <td><p>The input image filepath.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>output</code></td>
        <td><code>str</code></td>
        <td><p>The output image filepath.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>dst_crs</code></td>
        <td><code>str</code></td>
        <td><p>The destination CRS. Defaults to "EPSG:4326".</p></td>
        <td><code>&#39;EPSG:4326&#39;</code></td>
      </tr>
      <tr>
        <td><code>resampling</code></td>
        <td><code>Resampling</code></td>
        <td><p>The resampling method. Defaults to "nearest".</p></td>
        <td><code>&#39;nearest&#39;</code></td>
      </tr>
      <tr>
        <td><code>**kwargs</code></td>
        <td></td>
        <td><p>Additional keyword arguments to pass to rasterio.open.</p></td>
        <td><code>{}</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">reproject</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">output</span><span class="p">,</span> <span class="n">dst_crs</span><span class="o">=</span><span class="s2">&quot;EPSG:4326&quot;</span><span class="p">,</span> <span class="n">resampling</span><span class="o">=</span><span class="s2">&quot;nearest&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Reprojects an image.</span>

<span class="sd">    Args:</span>
<span class="sd">        image (str): The input image filepath.</span>
<span class="sd">        output (str): The output image filepath.</span>
<span class="sd">        dst_crs (str, optional): The destination CRS. Defaults to &quot;EPSG:4326&quot;.</span>
<span class="sd">        resampling (Resampling, optional): The resampling method. Defaults to &quot;nearest&quot;.</span>
<span class="sd">        **kwargs: Additional keyword arguments to pass to rasterio.open.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">rasterio</span> <span class="k">as</span> <span class="nn">rio</span>
    <span class="kn">from</span> <span class="nn">rasterio.warp</span> <span class="kn">import</span> <span class="n">calculate_default_transform</span><span class="p">,</span> <span class="n">reproject</span><span class="p">,</span> <span class="n">Resampling</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">resampling</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">resampling</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">Resampling</span><span class="p">,</span> <span class="n">resampling</span><span class="p">)</span>

    <span class="n">image</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>
    <span class="n">output</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">output</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">output</span><span class="p">)):</span>
        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">output</span><span class="p">))</span>

    <span class="k">with</span> <span class="n">rio</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="k">as</span> <span class="n">src</span><span class="p">:</span>
        <span class="n">transform</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span> <span class="o">=</span> <span class="n">calculate_default_transform</span><span class="p">(</span>
            <span class="n">src</span><span class="o">.</span><span class="n">crs</span><span class="p">,</span> <span class="n">dst_crs</span><span class="p">,</span> <span class="n">src</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="n">src</span><span class="o">.</span><span class="n">height</span><span class="p">,</span> <span class="o">*</span><span class="n">src</span><span class="o">.</span><span class="n">bounds</span>
        <span class="p">)</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="n">src</span><span class="o">.</span><span class="n">meta</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="n">kwargs</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
            <span class="p">{</span>
                <span class="s2">&quot;crs&quot;</span><span class="p">:</span> <span class="n">dst_crs</span><span class="p">,</span>
                <span class="s2">&quot;transform&quot;</span><span class="p">:</span> <span class="n">transform</span><span class="p">,</span>
                <span class="s2">&quot;width&quot;</span><span class="p">:</span> <span class="n">width</span><span class="p">,</span>
                <span class="s2">&quot;height&quot;</span><span class="p">:</span> <span class="n">height</span><span class="p">,</span>
            <span class="p">}</span>
        <span class="p">)</span>

        <span class="k">with</span> <span class="n">rio</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">output</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="k">as</span> <span class="n">dst</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">src</span><span class="o">.</span><span class="n">count</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
                <span class="n">reproject</span><span class="p">(</span>
                    <span class="n">source</span><span class="o">=</span><span class="n">rio</span><span class="o">.</span><span class="n">band</span><span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="n">i</span><span class="p">),</span>
                    <span class="n">destination</span><span class="o">=</span><span class="n">rio</span><span class="o">.</span><span class="n">band</span><span class="p">(</span><span class="n">dst</span><span class="p">,</span> <span class="n">i</span><span class="p">),</span>
                    <span class="n">src_transform</span><span class="o">=</span><span class="n">src</span><span class="o">.</span><span class="n">transform</span><span class="p">,</span>
                    <span class="n">src_crs</span><span class="o">=</span><span class="n">src</span><span class="o">.</span><span class="n">crs</span><span class="p">,</span>
                    <span class="n">dst_transform</span><span class="o">=</span><span class="n">transform</span><span class="p">,</span>
                    <span class="n">dst_crs</span><span class="o">=</span><span class="n">dst_crs</span><span class="p">,</span>
                    <span class="n">resampling</span><span class="o">=</span><span class="n">resampling</span><span class="p">,</span>
                    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
                <span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.requireJS" class="doc doc-heading">
<code class="highlight language-python"><span class="n">requireJS</span><span class="p">(</span><span class="n">lib_path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">Map</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


<a href="#geemap.common.requireJS" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Import Earth Engine JavaScript libraries. Based on the Open Earth Engine Library (OEEL).
    For more info, visit https://www.open-geocomputing.org/OpenEarthEngineLibrary.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>lib_path</code></td>
        <td><code>str</code></td>
        <td><p>A local file path or HTTP URL to a JavaScript library. It can also be in a format like 'users/gena/packages:grid'. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>Map</code></td>
        <td><code>geemap.Map</code></td>
        <td><p>An geemap.Map object. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>object</code></td>
      <td><p>oeel object.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">requireJS</span><span class="p">(</span><span class="n">lib_path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">Map</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Import Earth Engine JavaScript libraries. Based on the Open Earth Engine Library (OEEL).</span>
<span class="sd">        For more info, visit https://www.open-geocomputing.org/OpenEarthEngineLibrary.</span>

<span class="sd">    Args:</span>
<span class="sd">        lib_path (str, optional): A local file path or HTTP URL to a JavaScript library. It can also be in a format like &#39;users/gena/packages:grid&#39;. Defaults to None.</span>
<span class="sd">        Map (geemap.Map, optional): An geemap.Map object. Defaults to None.</span>

<span class="sd">    Returns:</span>
<span class="sd">        object: oeel object.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="kn">from</span> <span class="nn">oeel</span> <span class="kn">import</span> <span class="n">oeel</span>
    <span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ImportError</span><span class="p">(</span>
            <span class="s2">&quot;oeel is required for requireJS. Please install it using &#39;pip install oeel&#39;.&quot;</span>
        <span class="p">)</span>

    <span class="n">ee_initialize</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">lib_path</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">Map</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">oeel</span><span class="o">.</span><span class="n">setMap</span><span class="p">(</span><span class="n">Map</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">oeel</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">lib_path</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>

        <span class="k">if</span> <span class="n">lib_path</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;http&quot;</span><span class="p">):</span>
            <span class="n">lib_path</span> <span class="o">=</span> <span class="n">get_direct_url</span><span class="p">(</span><span class="n">lib_path</span><span class="p">)</span>

        <span class="n">lib_path</span> <span class="o">=</span> <span class="n">change_require</span><span class="p">(</span><span class="n">lib_path</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">Map</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">oeel</span><span class="o">.</span><span class="n">setMap</span><span class="p">(</span><span class="n">Map</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">oeel</span><span class="o">.</span><span class="n">requireJS</span><span class="p">(</span><span class="n">lib_path</span><span class="p">)</span>

    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;lib_path must be a string.&quot;</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.rgb_to_hex" class="doc doc-heading">
<code class="highlight language-python"><span class="n">rgb_to_hex</span><span class="p">(</span><span class="n">rgb</span><span class="o">=</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">))</span></code>


<a href="#geemap.common.rgb_to_hex" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Converts RGB to hex color. In RGB color R stands for Red, G stands for Green, and B stands for Blue, and it ranges from the decimal value of 0 – 255.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>rgb</code></td>
        <td><code>tuple</code></td>
        <td><p>RGB color code as a tuple of (red, green, blue). Defaults to (255, 255, 255).</p></td>
        <td><code>(255, 255, 255)</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>str</code></td>
      <td><p>hex color code</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">rgb_to_hex</span><span class="p">(</span><span class="n">rgb</span><span class="o">=</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">)):</span>
    <span class="sd">&quot;&quot;&quot;Converts RGB to hex color. In RGB color R stands for Red, G stands for Green, and B stands for Blue, and it ranges from the decimal value of 0 – 255.</span>

<span class="sd">    Args:</span>
<span class="sd">        rgb (tuple, optional): RGB color code as a tuple of (red, green, blue). Defaults to (255, 255, 255).</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: hex color code</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="s2">&quot;</span><span class="si">%02x%02x%02x</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">rgb</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.save_colorbar" class="doc doc-heading">
<code class="highlight language-python"><span class="n">save_colorbar</span><span class="p">(</span><span class="n">out_fig</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mf">6.0</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mf">0.4</span><span class="p">,</span> <span class="n">vmin</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">palette</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">vis_params</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;gray&#39;</span><span class="p">,</span> <span class="n">discrete</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">label_size</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span> <span class="n">label_weight</span><span class="o">=</span><span class="s1">&#39;normal&#39;</span><span class="p">,</span> <span class="n">tick_size</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">bg_color</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">orientation</span><span class="o">=</span><span class="s1">&#39;horizontal&#39;</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="s1">&#39;figure&#39;</span><span class="p">,</span> <span class="n">show_colorbar</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.common.save_colorbar" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Create a standalone colorbar and save it as an image.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>out_fig</code></td>
        <td><code>str</code></td>
        <td><p>Path to the output image.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>width</code></td>
        <td><code>float</code></td>
        <td><p>Width of the colorbar in inches. Default is 6.0.</p></td>
        <td><code>6.0</code></td>
      </tr>
      <tr>
        <td><code>height</code></td>
        <td><code>float</code></td>
        <td><p>Height of the colorbar in inches. Default is 0.4.</p></td>
        <td><code>0.4</code></td>
      </tr>
      <tr>
        <td><code>vmin</code></td>
        <td><code>float</code></td>
        <td><p>Minimum value of the colorbar. Default is 0.</p></td>
        <td><code>0</code></td>
      </tr>
      <tr>
        <td><code>vmax</code></td>
        <td><code>float</code></td>
        <td><p>Maximum value of the colorbar. Default is 1.0.</p></td>
        <td><code>1.0</code></td>
      </tr>
      <tr>
        <td><code>palette</code></td>
        <td><code>list</code></td>
        <td><p>List of colors to use for the colorbar. It can also be a cmap name, such as ndvi, ndwi, dem, coolwarm. Default is None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>vis_params</code></td>
        <td><code>dict</code></td>
        <td><p>Visualization parameters as a dictionary. See https://developers.google.com/earth-engine/guides/image_visualization for options.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>cmap</code></td>
        <td><code>str</code></td>
        <td><p>Matplotlib colormap. Defaults to "gray". See https://matplotlib.org/3.3.4/tutorials/colors/colormaps.html#sphx-glr-tutorials-colors-colormaps-py for options.</p></td>
        <td><code>&#39;gray&#39;</code></td>
      </tr>
      <tr>
        <td><code>discrete</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to create a discrete colorbar. Defaults to False.</p></td>
        <td><code>False</code></td>
      </tr>
      <tr>
        <td><code>label</code></td>
        <td><code>str</code></td>
        <td><p>Label for the colorbar. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>label_size</code></td>
        <td><code>int</code></td>
        <td><p>Font size for the colorbar label. Defaults to 12.</p></td>
        <td><code>12</code></td>
      </tr>
      <tr>
        <td><code>label_weight</code></td>
        <td><code>str</code></td>
        <td><p>Font weight for the colorbar label, can be "normal", "bold", etc. Defaults to "normal".</p></td>
        <td><code>&#39;normal&#39;</code></td>
      </tr>
      <tr>
        <td><code>tick_size</code></td>
        <td><code>int</code></td>
        <td><p>Font size for the colorbar tick labels. Defaults to 10.</p></td>
        <td><code>10</code></td>
      </tr>
      <tr>
        <td><code>bg_color</code></td>
        <td><code>str</code></td>
        <td><p>Background color for the colorbar. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>orientation</code></td>
        <td><code>str</code></td>
        <td><p>Orientation of the colorbar, such as "vertical" and "horizontal". Defaults to "horizontal".</p></td>
        <td><code>&#39;horizontal&#39;</code></td>
      </tr>
      <tr>
        <td><code>dpi</code></td>
        <td><code>float | str</code></td>
        <td><p>The resolution in dots per inch.  If 'figure', use the figure's dpi value.. Defaults to "figure".</p></td>
        <td><code>&#39;figure&#39;</code></td>
      </tr>
      <tr>
        <td><code>show_colorbar</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to show the colorbar. Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>str</code></td>
      <td><p>Path to the output image.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">save_colorbar</span><span class="p">(</span>
    <span class="n">out_fig</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">width</span><span class="o">=</span><span class="mf">6.0</span><span class="p">,</span>
    <span class="n">height</span><span class="o">=</span><span class="mf">0.4</span><span class="p">,</span>
    <span class="n">vmin</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
    <span class="n">vmax</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
    <span class="n">palette</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">vis_params</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">cmap</span><span class="o">=</span><span class="s2">&quot;gray&quot;</span><span class="p">,</span>
    <span class="n">discrete</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">label</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">label_size</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span>
    <span class="n">label_weight</span><span class="o">=</span><span class="s2">&quot;normal&quot;</span><span class="p">,</span>
    <span class="n">tick_size</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
    <span class="n">bg_color</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">orientation</span><span class="o">=</span><span class="s2">&quot;horizontal&quot;</span><span class="p">,</span>
    <span class="n">dpi</span><span class="o">=</span><span class="s2">&quot;figure&quot;</span><span class="p">,</span>
    <span class="n">show_colorbar</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Create a standalone colorbar and save it as an image.</span>

<span class="sd">    Args:</span>
<span class="sd">        out_fig (str): Path to the output image.</span>
<span class="sd">        width (float): Width of the colorbar in inches. Default is 6.0.</span>
<span class="sd">        height (float): Height of the colorbar in inches. Default is 0.4.</span>
<span class="sd">        vmin (float): Minimum value of the colorbar. Default is 0.</span>
<span class="sd">        vmax (float): Maximum value of the colorbar. Default is 1.0.</span>
<span class="sd">        palette (list): List of colors to use for the colorbar. It can also be a cmap name, such as ndvi, ndwi, dem, coolwarm. Default is None.</span>
<span class="sd">        vis_params (dict): Visualization parameters as a dictionary. See https://developers.google.com/earth-engine/guides/image_visualization for options.</span>
<span class="sd">        cmap (str, optional): Matplotlib colormap. Defaults to &quot;gray&quot;. See https://matplotlib.org/3.3.4/tutorials/colors/colormaps.html#sphx-glr-tutorials-colors-colormaps-py for options.</span>
<span class="sd">        discrete (bool, optional): Whether to create a discrete colorbar. Defaults to False.</span>
<span class="sd">        label (str, optional): Label for the colorbar. Defaults to None.</span>
<span class="sd">        label_size (int, optional): Font size for the colorbar label. Defaults to 12.</span>
<span class="sd">        label_weight (str, optional): Font weight for the colorbar label, can be &quot;normal&quot;, &quot;bold&quot;, etc. Defaults to &quot;normal&quot;.</span>
<span class="sd">        tick_size (int, optional): Font size for the colorbar tick labels. Defaults to 10.</span>
<span class="sd">        bg_color (str, optional): Background color for the colorbar. Defaults to None.</span>
<span class="sd">        orientation (str, optional): Orientation of the colorbar, such as &quot;vertical&quot; and &quot;horizontal&quot;. Defaults to &quot;horizontal&quot;.</span>
<span class="sd">        dpi (float | str, optional): The resolution in dots per inch.  If &#39;figure&#39;, use the figure&#39;s dpi value.. Defaults to &quot;figure&quot;.</span>
<span class="sd">        show_colorbar (bool, optional): Whether to show the colorbar. Defaults to True.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: Path to the output image.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">matplotlib</span> <span class="k">as</span> <span class="nn">mpl</span>
    <span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
    <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
    <span class="kn">from</span> <span class="nn">.colormaps</span> <span class="kn">import</span> <span class="n">palettes</span><span class="p">,</span> <span class="n">get_palette</span>

    <span class="k">if</span> <span class="n">out_fig</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">out_fig</span> <span class="o">=</span> <span class="n">temp_file_path</span><span class="p">(</span><span class="s2">&quot;png&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">out_fig</span> <span class="o">=</span> <span class="n">check_file_path</span><span class="p">(</span><span class="n">out_fig</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">vis_params</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">vis_params</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">elif</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">vis_params</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;The vis_params must be a dictionary.&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">palette</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">palette</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;ndvi&quot;</span><span class="p">,</span> <span class="s2">&quot;ndwi&quot;</span><span class="p">,</span> <span class="s2">&quot;dem&quot;</span><span class="p">]:</span>
            <span class="n">palette</span> <span class="o">=</span> <span class="n">palettes</span><span class="p">[</span><span class="n">palette</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">palette</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">palettes</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
            <span class="n">palette</span> <span class="o">=</span> <span class="n">get_palette</span><span class="p">(</span><span class="n">palette</span><span class="p">)</span>
        <span class="n">vis_params</span><span class="p">[</span><span class="s2">&quot;palette&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">palette</span>

    <span class="n">orientation</span> <span class="o">=</span> <span class="n">orientation</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">orientation</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;horizontal&quot;</span><span class="p">,</span> <span class="s2">&quot;vertical&quot;</span><span class="p">]:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The orientation must be either horizontal or vertical.&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="s2">&quot;opacity&quot;</span> <span class="ow">in</span> <span class="n">vis_params</span><span class="p">:</span>
        <span class="n">alpha</span> <span class="o">=</span> <span class="n">vis_params</span><span class="p">[</span><span class="s2">&quot;opacity&quot;</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">alpha</span><span class="p">)</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The provided opacity value must be type scalar.&quot;</span><span class="p">)</span>
    <span class="k">elif</span> <span class="s2">&quot;alpha&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
        <span class="n">alpha</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;alpha&quot;</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">alpha</span> <span class="o">=</span> <span class="mi">1</span>

    <span class="k">if</span> <span class="n">cmap</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>

        <span class="n">cmap</span> <span class="o">=</span> <span class="n">mpl</span><span class="o">.</span><span class="n">pyplot</span><span class="o">.</span><span class="n">get_cmap</span><span class="p">(</span><span class="n">cmap</span><span class="p">)</span>
        <span class="n">norm</span> <span class="o">=</span> <span class="n">mpl</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">Normalize</span><span class="p">(</span><span class="n">vmin</span><span class="o">=</span><span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="n">vmax</span><span class="p">)</span>

    <span class="k">if</span> <span class="s2">&quot;palette&quot;</span> <span class="ow">in</span> <span class="n">vis_params</span><span class="p">:</span>
        <span class="n">hexcodes</span> <span class="o">=</span> <span class="n">to_hex_colors</span><span class="p">(</span><span class="n">vis_params</span><span class="p">[</span><span class="s2">&quot;palette&quot;</span><span class="p">])</span>
        <span class="k">if</span> <span class="n">discrete</span><span class="p">:</span>
            <span class="n">cmap</span> <span class="o">=</span> <span class="n">mpl</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">ListedColormap</span><span class="p">(</span><span class="n">hexcodes</span><span class="p">)</span>
            <span class="n">vals</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span><span class="p">,</span> <span class="n">cmap</span><span class="o">.</span><span class="n">N</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
            <span class="n">norm</span> <span class="o">=</span> <span class="n">mpl</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">BoundaryNorm</span><span class="p">(</span><span class="n">vals</span><span class="p">,</span> <span class="n">cmap</span><span class="o">.</span><span class="n">N</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="n">cmap</span> <span class="o">=</span> <span class="n">mpl</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">LinearSegmentedColormap</span><span class="o">.</span><span class="n">from_list</span><span class="p">(</span>
                <span class="s2">&quot;custom&quot;</span><span class="p">,</span> <span class="n">hexcodes</span><span class="p">,</span> <span class="n">N</span><span class="o">=</span><span class="mi">256</span>
            <span class="p">)</span>
            <span class="n">norm</span> <span class="o">=</span> <span class="n">mpl</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">Normalize</span><span class="p">(</span><span class="n">vmin</span><span class="o">=</span><span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="n">vmax</span><span class="p">)</span>

    <span class="k">elif</span> <span class="n">cmap</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>

        <span class="n">cmap</span> <span class="o">=</span> <span class="n">mpl</span><span class="o">.</span><span class="n">pyplot</span><span class="o">.</span><span class="n">get_cmap</span><span class="p">(</span><span class="n">cmap</span><span class="p">)</span>
        <span class="n">norm</span> <span class="o">=</span> <span class="n">mpl</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">Normalize</span><span class="p">(</span><span class="n">vmin</span><span class="o">=</span><span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="n">vmax</span><span class="p">)</span>

    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="s1">&#39;cmap keyword or &quot;palette&quot; key in vis_params must be provided.&#39;</span>
        <span class="p">)</span>

    <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">))</span>
    <span class="n">cb</span> <span class="o">=</span> <span class="n">mpl</span><span class="o">.</span><span class="n">colorbar</span><span class="o">.</span><span class="n">ColorbarBase</span><span class="p">(</span>
        <span class="n">ax</span><span class="p">,</span> <span class="n">norm</span><span class="o">=</span><span class="n">norm</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="n">alpha</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="n">cmap</span><span class="p">,</span> <span class="n">orientation</span><span class="o">=</span><span class="n">orientation</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
    <span class="p">)</span>
    <span class="k">if</span> <span class="n">label</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">cb</span><span class="o">.</span><span class="n">set_label</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="n">label</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">label_size</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="n">label_weight</span><span class="p">)</span>
    <span class="n">cb</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">labelsize</span><span class="o">=</span><span class="n">tick_size</span><span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">out_fig</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="n">dpi</span><span class="p">,</span> <span class="n">facecolor</span><span class="o">=</span><span class="n">bg_color</span><span class="p">,</span> <span class="n">bbox_inches</span><span class="o">=</span><span class="s2">&quot;tight&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">show_colorbar</span><span class="p">:</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">out_fig</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.screen_capture" class="doc doc-heading">
<code class="highlight language-python"><span class="n">screen_capture</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">monitor</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span></code>


<a href="#geemap.common.screen_capture" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Takes a full screenshot of the selected monitor.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>filename</code></td>
        <td><code>str</code></td>
        <td><p>The output file path to the screenshot.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>monitor</code></td>
        <td><code>int</code></td>
        <td><p>The monitor to take the screenshot. Defaults to 1.</p></td>
        <td><code>1</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">screen_capture</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">monitor</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Takes a full screenshot of the selected monitor.</span>

<span class="sd">    Args:</span>
<span class="sd">        filename (str): The output file path to the screenshot.</span>
<span class="sd">        monitor (int, optional): The monitor to take the screenshot. Defaults to 1.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="kn">from</span> <span class="nn">mss</span> <span class="kn">import</span> <span class="n">mss</span>
    <span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ImportError</span><span class="p">(</span><span class="s2">&quot;Please install mss package using &#39;pip install mss&#39;&quot;</span><span class="p">)</span>

    <span class="n">out_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">out_dir</span><span class="p">):</span>
        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">out_dir</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">monitor</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The monitor number must be an integer.&quot;</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="k">with</span> <span class="n">mss</span><span class="p">()</span> <span class="k">as</span> <span class="n">sct</span><span class="p">:</span>
            <span class="n">sct</span><span class="o">.</span><span class="n">shot</span><span class="p">(</span><span class="n">output</span><span class="o">=</span><span class="n">filename</span><span class="p">,</span> <span class="n">mon</span><span class="o">=</span><span class="n">monitor</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">filename</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.search_api_tree" class="doc doc-heading">
<code class="highlight language-python"><span class="n">search_api_tree</span><span class="p">(</span><span class="n">keywords</span><span class="p">,</span> <span class="n">api_tree</span><span class="p">)</span></code>


<a href="#geemap.common.search_api_tree" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Search Earth Engine API and return functions containing the specified keywords</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>keywords</code></td>
        <td><code>str</code></td>
        <td><p>The keywords to search for.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>api_tree</code></td>
        <td><code>dict</code></td>
        <td><p>The dictionary containing the Earth Engine API tree.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>object</code></td>
      <td><p>An ipytree object/widget.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">search_api_tree</span><span class="p">(</span><span class="n">keywords</span><span class="p">,</span> <span class="n">api_tree</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Search Earth Engine API and return functions containing the specified keywords</span>

<span class="sd">    Args:</span>
<span class="sd">        keywords (str): The keywords to search for.</span>
<span class="sd">        api_tree (dict): The dictionary containing the Earth Engine API tree.</span>

<span class="sd">    Returns:</span>
<span class="sd">        object: An ipytree object/widget.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s2">&quot;ignore&quot;</span><span class="p">)</span>

    <span class="n">sub_tree</span> <span class="o">=</span> <span class="n">Tree</span><span class="p">()</span>

    <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">api_tree</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">keywords</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="n">key</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span>
            <span class="n">sub_tree</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="n">api_tree</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>

    <span class="k">return</span> <span class="n">sub_tree</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.search_ee_data" class="doc doc-heading">
<code class="highlight language-python"><span class="n">search_ee_data</span><span class="p">(</span><span class="n">keywords</span><span class="p">,</span> <span class="n">regex</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="s1">&#39;ee&#39;</span><span class="p">,</span> <span class="n">types</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">keys</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;provider&#39;</span><span class="p">,</span> <span class="s1">&#39;tags&#39;</span><span class="p">,</span> <span class="s1">&#39;title&#39;</span><span class="p">])</span></code>


<a href="#geemap.common.search_ee_data" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Searches Earth Engine data catalog.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>keywords</code></td>
        <td><code>str | list</code></td>
        <td><p>Keywords to search for can be id, provider, tag and so on. Split by space if string, e.g. "1 2" becomes ['1','2'].</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>regex</code></td>
        <td><code>bool</code></td>
        <td><p>Allow searching for regular expressions. Defaults to false.</p></td>
        <td><code>False</code></td>
      </tr>
      <tr>
        <td><code>source</code></td>
        <td><code>str</code></td>
        <td><p>Can be 'ee', 'community' or 'all'. Defaults to 'ee'. For more details, see https://github.com/samapriya/awesome-gee-community-datasets/blob/master/community_datasets.json</p></td>
        <td><code>&#39;ee&#39;</code></td>
      </tr>
      <tr>
        <td><code>types</code></td>
        <td><code>list</code></td>
        <td><p>List of valid collection types. Defaults to None so no filter is applied. A possible filter ['image_collection']</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>keys</code></td>
        <td><code>list</code></td>
        <td><p>List of metadata fields to search from.  Defaults to ['id','provider','tags','title']</p></td>
        <td><code>[&#39;id&#39;, &#39;provider&#39;, &#39;tags&#39;, &#39;title&#39;]</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>list</code></td>
      <td><p>Returns a list of assets.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">search_ee_data</span><span class="p">(</span>
    <span class="n">keywords</span><span class="p">,</span>
    <span class="n">regex</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">source</span><span class="o">=</span><span class="s2">&quot;ee&quot;</span><span class="p">,</span>
    <span class="n">types</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">keys</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="s2">&quot;provider&quot;</span><span class="p">,</span> <span class="s2">&quot;tags&quot;</span><span class="p">,</span> <span class="s2">&quot;title&quot;</span><span class="p">],</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Searches Earth Engine data catalog.</span>

<span class="sd">    Args:</span>
<span class="sd">        keywords (str | list): Keywords to search for can be id, provider, tag and so on. Split by space if string, e.g. &quot;1 2&quot; becomes [&#39;1&#39;,&#39;2&#39;].</span>
<span class="sd">        regex (bool, optional): Allow searching for regular expressions. Defaults to false.</span>
<span class="sd">        source (str, optional): Can be &#39;ee&#39;, &#39;community&#39; or &#39;all&#39;. Defaults to &#39;ee&#39;. For more details, see https://github.com/samapriya/awesome-gee-community-datasets/blob/master/community_datasets.json</span>
<span class="sd">        types (list, optional): List of valid collection types. Defaults to None so no filter is applied. A possible filter [&#39;image_collection&#39;]</span>
<span class="sd">        keys (list, optional): List of metadata fields to search from.  Defaults to [&#39;id&#39;,&#39;provider&#39;,&#39;tags&#39;,&#39;title&#39;]</span>

<span class="sd">    Returns:</span>
<span class="sd">        list: Returns a list of assets.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">keywords</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">keywords</span> <span class="o">=</span> <span class="n">keywords</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">)</span>

    <span class="kn">import</span> <span class="nn">re</span>
    <span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">reduce</span>

    <span class="k">def</span> <span class="nf">search_collection</span><span class="p">(</span><span class="n">pattern</span><span class="p">,</span> <span class="n">dict_</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">regex</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">pattern</span><span class="p">,</span> <span class="n">dict_</span><span class="p">[</span><span class="n">key</span><span class="p">])</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">keys</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">dict_</span>
        <span class="k">elif</span> <span class="nb">any</span><span class="p">(</span><span class="n">pattern</span> <span class="ow">in</span> <span class="n">dict_</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">keys</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">dict_</span>
        <span class="k">return</span> <span class="p">{}</span>

    <span class="k">def</span> <span class="nf">search_all</span><span class="p">(</span><span class="n">pattern</span><span class="p">):</span>
        <span class="c1"># updated daily</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s2">&quot;https://raw.githubusercontent.com/samapriya/Earth-Engine-Datasets-List/master/gee_catalog.json&quot;</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s2">&quot;https://raw.githubusercontent.com/samapriya/awesome-gee-community-datasets/master/community_datasets.json&quot;</span>
        <span class="n">sources</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;ee&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">a</span><span class="p">],</span> <span class="s2">&quot;community&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">b</span><span class="p">],</span> <span class="s2">&quot;all&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">]}</span>
        <span class="n">matches</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">link</span> <span class="ow">in</span> <span class="n">sources</span><span class="p">[</span><span class="n">source</span><span class="p">]:</span>
            <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">link</span><span class="p">)</span>
            <span class="n">catalog_list</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
            <span class="n">matches</span> <span class="o">+=</span> <span class="p">[</span><span class="n">search_collection</span><span class="p">(</span><span class="n">pattern</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">catalog_list</span><span class="p">]</span>
        <span class="n">matches</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">matches</span> <span class="k">if</span> <span class="n">x</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">types</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">matches</span> <span class="k">if</span> <span class="n">x</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span> <span class="ow">in</span> <span class="n">types</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">matches</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">assets</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span>
            <span class="p">{</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">match</span><span class="p">)</span> <span class="k">for</span> <span class="n">match</span> <span class="ow">in</span> <span class="n">search_all</span><span class="p">(</span><span class="n">pattern</span><span class="o">=</span><span class="n">k</span><span class="p">)}</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">keywords</span>
        <span class="p">)</span>
        <span class="n">assets</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">reduce</span><span class="p">(</span><span class="nb">set</span><span class="o">.</span><span class="n">intersection</span><span class="p">,</span> <span class="n">assets</span><span class="p">)))</span>
        <span class="n">assets</span> <span class="o">=</span> <span class="p">[</span><span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">assets</span><span class="p">]</span>

        <span class="n">results</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">asset</span> <span class="ow">in</span> <span class="n">assets</span><span class="p">:</span>
            <span class="n">asset_dates</span> <span class="o">=</span> <span class="p">(</span>
                <span class="n">asset</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;start_date&quot;</span><span class="p">,</span> <span class="s2">&quot;Unknown&quot;</span><span class="p">)</span>
                <span class="o">+</span> <span class="s2">&quot; - &quot;</span>
                <span class="o">+</span> <span class="n">asset</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;end_date&quot;</span><span class="p">,</span> <span class="s2">&quot;Unknown&quot;</span><span class="p">)</span>
            <span class="p">)</span>
            <span class="n">asset_snippet</span> <span class="o">=</span> <span class="n">asset</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span>
            <span class="k">if</span> <span class="s2">&quot;ee.&quot;</span> <span class="ow">in</span> <span class="n">asset_snippet</span><span class="p">:</span>
                <span class="n">start_index</span> <span class="o">=</span> <span class="n">asset_snippet</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s2">&quot;&#39;&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
                <span class="n">end_index</span> <span class="o">=</span> <span class="n">asset_snippet</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s2">&quot;&#39;&quot;</span><span class="p">,</span> <span class="n">start_index</span><span class="p">)</span>
                <span class="n">asset_id</span> <span class="o">=</span> <span class="n">asset_snippet</span><span class="p">[</span><span class="n">start_index</span><span class="p">:</span><span class="n">end_index</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">asset_id</span> <span class="o">=</span> <span class="n">asset_snippet</span>

            <span class="n">asset</span><span class="p">[</span><span class="s2">&quot;dates&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">asset_dates</span>
            <span class="n">asset</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">asset_id</span>
            <span class="n">asset</span><span class="p">[</span><span class="s2">&quot;uid&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">asset_id</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">,</span> <span class="s2">&quot;_&quot;</span><span class="p">)</span>

            <span class="n">results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">asset</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">results</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.search_qms" class="doc doc-heading">
<code class="highlight language-python"><span class="n">search_qms</span><span class="p">(</span><span class="n">keyword</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">list_only</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">add_prefix</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">300</span><span class="p">)</span></code>


<a href="#geemap.common.search_qms" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Search for QMS tile providers from Quick Map Services.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>keyword</code></td>
        <td><code>str</code></td>
        <td><p>The keyword to search for.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>limit</code></td>
        <td><code>int</code></td>
        <td><p>The maximum number of results to return. Defaults to 10.</p></td>
        <td><code>10</code></td>
      </tr>
      <tr>
        <td><code>list_only</code></td>
        <td><code>bool</code></td>
        <td><p>If True, only the list of services will be returned. Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
      <tr>
        <td><code>add_prefix</code></td>
        <td><code>bool</code></td>
        <td><p>If True, the prefix "qms." will be added to the service name. Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
      <tr>
        <td><code>timeout</code></td>
        <td><code>int</code></td>
        <td><p>The timeout in seconds. Defaults to 300.</p></td>
        <td><code>300</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>list</code></td>
      <td><p>A list of QMS tile providers.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">search_qms</span><span class="p">(</span><span class="n">keyword</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">list_only</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">add_prefix</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">300</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Search for QMS tile providers from Quick Map Services.</span>

<span class="sd">    Args:</span>
<span class="sd">        keyword (str): The keyword to search for.</span>
<span class="sd">        limit (int, optional): The maximum number of results to return. Defaults to 10.</span>
<span class="sd">        list_only (bool, optional): If True, only the list of services will be returned. Defaults to True.</span>
<span class="sd">        add_prefix (bool, optional): If True, the prefix &quot;qms.&quot; will be added to the service name. Defaults to True.</span>
<span class="sd">        timeout (int, optional): The timeout in seconds. Defaults to 300.</span>

<span class="sd">    Returns:</span>
<span class="sd">        list: A list of QMS tile providers.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">QMS_API</span> <span class="o">=</span> <span class="s2">&quot;https://qms.nextgis.com/api/v1/geoservices&quot;</span>
    <span class="n">services</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
        <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">QMS_API</span><span class="si">}</span><span class="s2">/?search=</span><span class="si">{</span><span class="n">keyword</span><span class="si">}</span><span class="s2">&amp;type=tms&amp;epsg=3857&amp;limit=</span><span class="si">{</span><span class="n">limit</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span>
    <span class="p">)</span>
    <span class="n">services</span> <span class="o">=</span> <span class="n">services</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">services</span><span class="p">[</span><span class="s2">&quot;results&quot;</span><span class="p">]:</span>
        <span class="n">providers</span> <span class="o">=</span> <span class="n">services</span><span class="p">[</span><span class="s2">&quot;results&quot;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">list_only</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">add_prefix</span><span class="p">:</span>
                <span class="k">return</span> <span class="p">[</span><span class="s2">&quot;qms.&quot;</span> <span class="o">+</span> <span class="n">provider</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">provider</span> <span class="ow">in</span> <span class="n">providers</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="p">[</span><span class="n">provider</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">provider</span> <span class="ow">in</span> <span class="n">providers</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">providers</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">None</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.search_xyz_services" class="doc doc-heading">
<code class="highlight language-python"><span class="n">search_xyz_services</span><span class="p">(</span><span class="n">keyword</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">list_only</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">add_prefix</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>


<a href="#geemap.common.search_xyz_services" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Search for XYZ tile providers from xyzservices.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>keyword</code></td>
        <td><code>str</code></td>
        <td><p>The keyword to search for.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>name</code></td>
        <td><code>str</code></td>
        <td><p>The name of the xyz tile. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>list_only</code></td>
        <td><code>bool</code></td>
        <td><p>If True, only the list of services will be returned. Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
      <tr>
        <td><code>add_prefix</code></td>
        <td><code>bool</code></td>
        <td><p>If True, the prefix "xyz." will be added to the service name. Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>list</code></td>
      <td><p>A list of XYZ tile providers.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">search_xyz_services</span><span class="p">(</span><span class="n">keyword</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">list_only</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">add_prefix</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Search for XYZ tile providers from xyzservices.</span>

<span class="sd">    Args:</span>
<span class="sd">        keyword (str): The keyword to search for.</span>
<span class="sd">        name (str, optional): The name of the xyz tile. Defaults to None.</span>
<span class="sd">        list_only (bool, optional): If True, only the list of services will be returned. Defaults to True.</span>
<span class="sd">        add_prefix (bool, optional): If True, the prefix &quot;xyz.&quot; will be added to the service name. Defaults to True.</span>

<span class="sd">    Returns:</span>
<span class="sd">        list: A list of XYZ tile providers.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="kn">import</span> <span class="nn">xyzservices.providers</span> <span class="k">as</span> <span class="nn">xyz</span>

    <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">providers</span> <span class="o">=</span> <span class="n">xyz</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">keyword</span><span class="o">=</span><span class="n">keyword</span><span class="p">)</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">providers</span> <span class="o">=</span> <span class="n">xyz</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">)</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">list_only</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">add_prefix</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span><span class="s2">&quot;xyz.&quot;</span> <span class="o">+</span> <span class="n">provider</span> <span class="k">for</span> <span class="n">provider</span> <span class="ow">in</span> <span class="n">providers</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span><span class="n">provider</span> <span class="k">for</span> <span class="n">provider</span> <span class="ow">in</span> <span class="n">providers</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">providers</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.set_api_key" class="doc doc-heading">
<code class="highlight language-python"><span class="n">set_api_key</span><span class="p">(</span><span class="n">token_name</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">m</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


<a href="#geemap.common.set_api_key" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Sets an API key as an environment variable.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>token_name</code></td>
        <td><code>str</code></td>
        <td><p>The token name.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>api_key</code></td>
        <td><code>str</code></td>
        <td><p>The API key.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>m</code></td>
        <td><code>ipyleaflet.Map | folium.Map</code></td>
        <td><p>A Map instance.. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">set_api_key</span><span class="p">(</span><span class="n">token_name</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">m</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Sets an API key as an environment variable.</span>

<span class="sd">    Args:</span>
<span class="sd">        token_name (str): The token name.</span>
<span class="sd">        api_key (str): The API key.</span>
<span class="sd">        m (ipyleaflet.Map | folium.Map, optional): A Map instance.. Defaults to None.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="n">token_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">api_key</span>
    <span class="k">if</span> <span class="n">m</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">m</span><span class="o">.</span><span class="n">api_keys</span><span class="p">[</span><span class="n">token_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">api_key</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.set_proxy" class="doc doc-heading">
<code class="highlight language-python"><span class="n">set_proxy</span><span class="p">(</span><span class="n">port</span><span class="o">=</span><span class="mi">1080</span><span class="p">,</span> <span class="n">ip</span><span class="o">=</span><span class="s1">&#39;http://127.0.0.1&#39;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">300</span><span class="p">)</span></code>


<a href="#geemap.common.set_proxy" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Sets proxy if needed. This is only needed for countries where Google services are not available.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>port</code></td>
        <td><code>int</code></td>
        <td><p>The proxy port number. Defaults to 1080.</p></td>
        <td><code>1080</code></td>
      </tr>
      <tr>
        <td><code>ip</code></td>
        <td><code>str</code></td>
        <td><p>The IP address. Defaults to 'http://127.0.0.1'.</p></td>
        <td><code>&#39;http://127.0.0.1&#39;</code></td>
      </tr>
      <tr>
        <td><code>timeout</code></td>
        <td><code>int</code></td>
        <td><p>The timeout in seconds. Defaults to 300.</p></td>
        <td><code>300</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">set_proxy</span><span class="p">(</span><span class="n">port</span><span class="o">=</span><span class="mi">1080</span><span class="p">,</span> <span class="n">ip</span><span class="o">=</span><span class="s2">&quot;http://127.0.0.1&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">300</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Sets proxy if needed. This is only needed for countries where Google services are not available.</span>

<span class="sd">    Args:</span>
<span class="sd">        port (int, optional): The proxy port number. Defaults to 1080.</span>
<span class="sd">        ip (str, optional): The IP address. Defaults to &#39;http://127.0.0.1&#39;.</span>
<span class="sd">        timeout (int, optional): The timeout in seconds. Defaults to 300.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">ip</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;http&quot;</span><span class="p">):</span>
            <span class="n">ip</span> <span class="o">=</span> <span class="s2">&quot;http://&quot;</span> <span class="o">+</span> <span class="n">ip</span>
        <span class="n">proxy</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{}</span><span class="s2">:</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ip</span><span class="p">,</span> <span class="n">port</span><span class="p">)</span>

        <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;HTTP_PROXY&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">proxy</span>
        <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;HTTPS_PROXY&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">proxy</span>

        <span class="n">a</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;https://earthengine.google.com/&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">a</span><span class="o">.</span><span class="n">status_code</span> <span class="o">!=</span> <span class="mi">200</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span>
                <span class="s2">&quot;Failed to connect to Earth Engine. Please double check the port number and ip address.&quot;</span>
            <span class="p">)</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.setupJS" class="doc doc-heading">
<code class="highlight language-python"><span class="n">setupJS</span><span class="p">()</span></code>


<a href="#geemap.common.setupJS" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Install npm packages for Earth Engine JavaScript libraries. Based on the Open Earth Engine Library (OEEL).</p>

        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">setupJS</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Install npm packages for Earth Engine JavaScript libraries. Based on the Open Earth Engine Library (OEEL).&quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;npm install @google/earthengine&quot;</span><span class="p">)</span>
        <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;npm install zeromq@6.0.0-beta.6&quot;</span><span class="p">)</span>
        <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;npm install request&quot;</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Error installing npm packages: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">. Make sure that you have installed nodejs. See https://nodejs.org/&quot;</span>
        <span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.show_html" class="doc doc-heading">
<code class="highlight language-python"><span class="n">show_html</span><span class="p">(</span><span class="n">html</span><span class="p">)</span></code>


<a href="#geemap.common.show_html" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Shows HTML within Jupyter notebook.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>html</code></td>
        <td><code>str</code></td>
        <td><p>File path or HTML string.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>FileNotFoundError</code></td>
        <td><p>If the file does not exist.</p></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>ipywidgets.HTML</code></td>
      <td><p>HTML widget.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">show_html</span><span class="p">(</span><span class="n">html</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Shows HTML within Jupyter notebook.</span>

<span class="sd">    Args:</span>
<span class="sd">        html (str): File path or HTML string.</span>

<span class="sd">    Raises:</span>
<span class="sd">        FileNotFoundError: If the file does not exist.</span>

<span class="sd">    Returns:</span>
<span class="sd">        ipywidgets.HTML: HTML widget.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">html</span><span class="p">):</span>

        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">html</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">content</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>

        <span class="n">widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">HTML</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">content</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">widget</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">HTML</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">html</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">widget</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.show_image" class="doc doc-heading">
<code class="highlight language-python"><span class="n">show_image</span><span class="p">(</span><span class="n">img_path</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


<a href="#geemap.common.show_image" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Shows an image within Jupyter notebook.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>img_path</code></td>
        <td><code>str</code></td>
        <td><p>The image file path.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>width</code></td>
        <td><code>int</code></td>
        <td><p>Width of the image in pixels. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>height</code></td>
        <td><code>int</code></td>
        <td><p>Height of the image in pixels. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">show_image</span><span class="p">(</span><span class="n">img_path</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Shows an image within Jupyter notebook.</span>

<span class="sd">    Args:</span>
<span class="sd">        img_path (str): The image file path.</span>
<span class="sd">        width (int, optional): Width of the image in pixels. Defaults to None.</span>
<span class="sd">        height (int, optional): Height of the image in pixels. Defaults to None.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">display</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">out</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Output</span><span class="p">()</span>
        <span class="c1"># layout={&#39;border&#39;: &#39;1px solid black&#39;})</span>
        <span class="c1"># layout={&#39;border&#39;: &#39;1px solid black&#39;, &#39;width&#39;: str(width + 20) + &#39;px&#39;, &#39;height&#39;: str(height + 10) + &#39;px&#39;},)</span>
        <span class="n">out</span><span class="o">.</span><span class="n">clear_output</span><span class="p">(</span><span class="n">wait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">display</span><span class="p">(</span><span class="n">out</span><span class="p">)</span>
        <span class="k">with</span> <span class="n">out</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">img_path</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="n">img_path</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;http&quot;</span><span class="p">):</span>
                <span class="n">file_path</span> <span class="o">=</span> <span class="n">download_file</span><span class="p">(</span><span class="n">img_path</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">file_path</span> <span class="o">=</span> <span class="n">img_path</span>
            <span class="n">file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="s2">&quot;rb&quot;</span><span class="p">)</span>
            <span class="n">image</span> <span class="o">=</span> <span class="n">file</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">width</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">height</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
                <span class="n">display</span><span class="p">(</span><span class="n">widgets</span><span class="o">.</span><span class="n">Image</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">image</span><span class="p">))</span>
            <span class="k">elif</span> <span class="p">(</span><span class="n">width</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">height</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">):</span>
                <span class="n">display</span><span class="p">(</span><span class="n">widgets</span><span class="o">.</span><span class="n">Image</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">image</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="n">height</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;You need set both width and height.&quot;</span><span class="p">)</span>
                <span class="k">return</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.show_youtube" class="doc doc-heading">
<code class="highlight language-python"><span class="n">show_youtube</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s1">&#39;h0pz3S6Tvx0&#39;</span><span class="p">)</span></code>


<a href="#geemap.common.show_youtube" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Displays a YouTube video within Jupyter notebooks.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>id</code></td>
        <td><code>str</code></td>
        <td><p>Unique ID of the video. Defaults to 'h0pz3S6Tvx0'.</p></td>
        <td><code>&#39;h0pz3S6Tvx0&#39;</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">show_youtube</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;h0pz3S6Tvx0&quot;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Displays a YouTube video within Jupyter notebooks.</span>

<span class="sd">    Args:</span>
<span class="sd">        id (str, optional): Unique ID of the video. Defaults to &#39;h0pz3S6Tvx0&#39;.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">YouTubeVideo</span><span class="p">,</span> <span class="n">display</span>

    <span class="k">if</span> <span class="s2">&quot;/&quot;</span> <span class="ow">in</span> <span class="nb">id</span><span class="p">:</span>
        <span class="nb">id</span> <span class="o">=</span> <span class="nb">id</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">out</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Output</span><span class="p">(</span><span class="n">layout</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;width&quot;</span><span class="p">:</span> <span class="s2">&quot;815px&quot;</span><span class="p">})</span>
        <span class="c1"># layout={&#39;border&#39;: &#39;1px solid black&#39;, &#39;width&#39;: &#39;815px&#39;})</span>
        <span class="n">out</span><span class="o">.</span><span class="n">clear_output</span><span class="p">(</span><span class="n">wait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">display</span><span class="p">(</span><span class="n">out</span><span class="p">)</span>
        <span class="k">with</span> <span class="n">out</span><span class="p">:</span>
            <span class="n">display</span><span class="p">(</span><span class="n">YouTubeVideo</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">800</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">450</span><span class="p">))</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.shp_to_ee" class="doc doc-heading">
<code class="highlight language-python"><span class="n">shp_to_ee</span><span class="p">(</span><span class="n">in_shp</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.common.shp_to_ee" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Converts a shapefile to Earth Engine objects. Note that the CRS of the shapefile must be EPSG:4326</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>in_shp</code></td>
        <td><code>str</code></td>
        <td><p>File path to a shapefile.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>object</code></td>
      <td><p>Earth Engine objects representing the shapefile.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">shp_to_ee</span><span class="p">(</span><span class="n">in_shp</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Converts a shapefile to Earth Engine objects. Note that the CRS of the shapefile must be EPSG:4326</span>

<span class="sd">    Args:</span>
<span class="sd">        in_shp (str): File path to a shapefile.</span>

<span class="sd">    Returns:</span>
<span class="sd">        object: Earth Engine objects representing the shapefile.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># ee_initialize()</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">if</span> <span class="s2">&quot;encoding&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="n">json_data</span> <span class="o">=</span> <span class="n">shp_to_geojson</span><span class="p">(</span><span class="n">in_shp</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;encoding&quot;</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">json_data</span> <span class="o">=</span> <span class="n">shp_to_geojson</span><span class="p">(</span><span class="n">in_shp</span><span class="p">)</span>
        <span class="n">ee_object</span> <span class="o">=</span> <span class="n">geojson_to_ee</span><span class="p">(</span><span class="n">json_data</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ee_object</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.shp_to_gdf" class="doc doc-heading">
<code class="highlight language-python"><span class="n">shp_to_gdf</span><span class="p">(</span><span class="n">in_shp</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.common.shp_to_gdf" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Converts a shapefile to Geopandas dataframe.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>in_shp</code></td>
        <td><code>str</code></td>
        <td><p>File path to the input shapefile.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>FileNotFoundError</code></td>
        <td><p>The provided shp could not be found.</p></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>gpd.GeoDataFrame</code></td>
      <td><p>geopandas.GeoDataFrame</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">shp_to_gdf</span><span class="p">(</span><span class="n">in_shp</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Converts a shapefile to Geopandas dataframe.</span>

<span class="sd">    Args:</span>
<span class="sd">        in_shp (str): File path to the input shapefile.</span>

<span class="sd">    Raises:</span>
<span class="sd">        FileNotFoundError: The provided shp could not be found.</span>

<span class="sd">    Returns:</span>
<span class="sd">        gpd.GeoDataFrame: geopandas.GeoDataFrame</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s2">&quot;ignore&quot;</span><span class="p">)</span>

    <span class="n">in_shp</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">in_shp</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">in_shp</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span><span class="s2">&quot;The provided shp could not be found.&quot;</span><span class="p">)</span>

    <span class="n">check_package</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;geopandas&quot;</span><span class="p">,</span> <span class="n">URL</span><span class="o">=</span><span class="s2">&quot;https://geopandas.org&quot;</span><span class="p">)</span>

    <span class="kn">import</span> <span class="nn">geopandas</span> <span class="k">as</span> <span class="nn">gpd</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">in_shp</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.shp_to_geojson" class="doc doc-heading">
<code class="highlight language-python"><span class="n">shp_to_geojson</span><span class="p">(</span><span class="n">in_shp</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.common.shp_to_geojson" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Converts a shapefile to GeoJSON.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>in_shp</code></td>
        <td><code>str</code></td>
        <td><p>File path of the input shapefile.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>filename</code></td>
        <td><code>str</code></td>
        <td><p>File path of the output GeoJSON. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>object</code></td>
      <td><p>The json object representing the shapefile.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">shp_to_geojson</span><span class="p">(</span><span class="n">in_shp</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Converts a shapefile to GeoJSON.</span>

<span class="sd">    Args:</span>
<span class="sd">        in_shp (str): File path of the input shapefile.</span>
<span class="sd">        filename (str, optional): File path of the output GeoJSON. Defaults to None.</span>

<span class="sd">    Returns:</span>
<span class="sd">        object: The json object representing the shapefile.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="kn">import</span> <span class="nn">shapefile</span>

        <span class="c1"># from datetime import date</span>

        <span class="n">in_shp</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">in_shp</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">filename</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">ext</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">filename</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">ext</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">ext</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;.json&quot;</span><span class="p">,</span> <span class="s2">&quot;.geojson&quot;</span><span class="p">]:</span>
                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;The output file extension must the .json or .geojson.&quot;</span><span class="p">)</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">filename</span><span class="p">)):</span>
                <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">filename</span><span class="p">))</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">is_GCS</span><span class="p">(</span><span class="n">in_shp</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="kn">import</span> <span class="nn">geopandas</span> <span class="k">as</span> <span class="nn">gpd</span>

            <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ImportError</span><span class="p">(</span>
                    <span class="s2">&quot;GeoPandas is required to perform reprojection of the data. See https://geopandas.org/install.html&quot;</span>
                <span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">in_gdf</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">in_shp</span><span class="p">)</span>
                <span class="n">out_gdf</span> <span class="o">=</span> <span class="n">in_gdf</span><span class="o">.</span><span class="n">to_crs</span><span class="p">(</span><span class="n">epsg</span><span class="o">=</span><span class="s2">&quot;4326&quot;</span><span class="p">)</span>
                <span class="n">out_shp</span> <span class="o">=</span> <span class="n">in_shp</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;.shp&quot;</span><span class="p">,</span> <span class="s2">&quot;_gcs.shp&quot;</span><span class="p">)</span>
                <span class="n">out_gdf</span><span class="o">.</span><span class="n">to_file</span><span class="p">(</span><span class="n">out_shp</span><span class="p">)</span>
                <span class="n">in_shp</span> <span class="o">=</span> <span class="n">out_shp</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

        <span class="k">if</span> <span class="s2">&quot;encoding&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="n">reader</span> <span class="o">=</span> <span class="n">shapefile</span><span class="o">.</span><span class="n">Reader</span><span class="p">(</span><span class="n">in_shp</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;encoding&quot;</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">reader</span> <span class="o">=</span> <span class="n">shapefile</span><span class="o">.</span><span class="n">Reader</span><span class="p">(</span><span class="n">in_shp</span><span class="p">)</span>
        <span class="n">out_dict</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">__geo_interface__</span>
        <span class="c1"># fields = reader.fields[1:]</span>
        <span class="c1"># field_names = [field[0] for field in fields]</span>
        <span class="c1"># # pyShp returns dates as `datetime.date` or as `bytes` when they are empty</span>
        <span class="c1"># # This is not JSON compatible, so we keep track of them to convert them to str</span>
        <span class="c1"># date_fields_names = [field[0] for field in fields if field[1] == &quot;D&quot;]</span>
        <span class="c1"># buffer = []</span>
        <span class="c1"># for sr in reader.shapeRecords():</span>
        <span class="c1">#     atr = dict(zip(field_names, sr.record))</span>
        <span class="c1">#     for date_field in date_fields_names:</span>
        <span class="c1">#         value = atr[date_field]</span>
        <span class="c1">#         # convert date to string, similar to pyShp writing</span>
        <span class="c1">#         # https://github.com/GeospatialPython/pyshp/blob/69c60f6d07c329f7d3ac2cba79bc03643bd424d8/shapefile.py#L1814</span>
        <span class="c1">#         if isinstance(value, date):</span>
        <span class="c1">#             value = &quot;{:04d}{:02d}{:02d}&quot;.format(</span>
        <span class="c1">#                 value.year, value.month, value.day</span>
        <span class="c1">#             )</span>
        <span class="c1">#         elif not value:  # empty bytes string</span>
        <span class="c1">#             value = &quot;0&quot; * 8  # QGIS NULL for date type</span>
        <span class="c1">#         atr[date_field] = value</span>
        <span class="c1">#     geom = sr.shape.__geo_interface__</span>
        <span class="c1">#     buffer.append(dict(type=&quot;Feature&quot;, geometry=geom, properties=atr))</span>

        <span class="c1"># out_dict = {&quot;type&quot;: &quot;FeatureCollection&quot;, &quot;features&quot;: buffer}</span>

        <span class="k">if</span> <span class="n">filename</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># from json import dumps</span>

            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">geojson</span><span class="p">:</span>
                <span class="n">geojson</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">out_dict</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">out_dict</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.shp_to_geopandas" class="doc doc-heading">
<code class="highlight language-python"><span class="n">shp_to_geopandas</span><span class="p">(</span><span class="n">in_shp</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.common.shp_to_geopandas" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Converts a shapefile to Geopandas dataframe.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>in_shp</code></td>
        <td><code>str</code></td>
        <td><p>File path to the input shapefile.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>FileNotFoundError</code></td>
        <td><p>The provided shp could not be found.</p></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>gpd.GeoDataFrame</code></td>
      <td><p>geopandas.GeoDataFrame</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">shp_to_gdf</span><span class="p">(</span><span class="n">in_shp</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Converts a shapefile to Geopandas dataframe.</span>

<span class="sd">    Args:</span>
<span class="sd">        in_shp (str): File path to the input shapefile.</span>

<span class="sd">    Raises:</span>
<span class="sd">        FileNotFoundError: The provided shp could not be found.</span>

<span class="sd">    Returns:</span>
<span class="sd">        gpd.GeoDataFrame: geopandas.GeoDataFrame</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s2">&quot;ignore&quot;</span><span class="p">)</span>

    <span class="n">in_shp</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">in_shp</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">in_shp</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span><span class="s2">&quot;The provided shp could not be found.&quot;</span><span class="p">)</span>

    <span class="n">check_package</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;geopandas&quot;</span><span class="p">,</span> <span class="n">URL</span><span class="o">=</span><span class="s2">&quot;https://geopandas.org&quot;</span><span class="p">)</span>

    <span class="kn">import</span> <span class="nn">geopandas</span> <span class="k">as</span> <span class="nn">gpd</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">in_shp</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.stac_assets" class="doc doc-heading">
<code class="highlight language-python"><span class="n">stac_assets</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">collection</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">item</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">titiler_endpoint</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.common.stac_assets" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Get all assets of a STAC item.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>url</code></td>
        <td><code>str</code></td>
        <td><p>HTTP URL to a STAC item, e.g., https://canada-spot-ortho.s3.amazonaws.com/canada_spot_orthoimages/canada_spot5_orthoimages/S5_2007/S5_11055_6057_20070622/S5_11055_6057_20070622.json</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>collection</code></td>
        <td><code>str</code></td>
        <td><p>The Microsoft Planetary Computer STAC collection ID, e.g., landsat-8-c2-l2.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>item</code></td>
        <td><code>str</code></td>
        <td><p>The Microsoft Planetary Computer STAC item ID, e.g., LC08_L2SP_047027_20201204_02_T1.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>titiler_endpoint</code></td>
        <td><code>str</code></td>
        <td><p>Titiler endpoint, e.g., "https://titiler.xyz", "planetary-computer", "pc". Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>timeout</code></td>
        <td><code>int</code></td>
        <td><p>Timeout in seconds. Defaults to 300.</p></td>
        <td><code>300</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>list</code></td>
      <td><p>A list of assets.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">stac_assets</span><span class="p">(</span>
    <span class="n">url</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">collection</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">item</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">titiler_endpoint</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get all assets of a STAC item.</span>

<span class="sd">    Args:</span>
<span class="sd">        url (str): HTTP URL to a STAC item, e.g., https://canada-spot-ortho.s3.amazonaws.com/canada_spot_orthoimages/canada_spot5_orthoimages/S5_2007/S5_11055_6057_20070622/S5_11055_6057_20070622.json</span>
<span class="sd">        collection (str): The Microsoft Planetary Computer STAC collection ID, e.g., landsat-8-c2-l2.</span>
<span class="sd">        item (str): The Microsoft Planetary Computer STAC item ID, e.g., LC08_L2SP_047027_20201204_02_T1.</span>
<span class="sd">        titiler_endpoint (str, optional): Titiler endpoint, e.g., &quot;https://titiler.xyz&quot;, &quot;planetary-computer&quot;, &quot;pc&quot;. Defaults to None.</span>
<span class="sd">        timeout (int, optional): Timeout in seconds. Defaults to 300.</span>

<span class="sd">    Returns:</span>
<span class="sd">        list: A list of assets.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">url</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">collection</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Either url or collection must be specified.&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">collection</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">titiler_endpoint</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">titiler_endpoint</span> <span class="o">=</span> <span class="s2">&quot;planetary-computer&quot;</span>

    <span class="k">if</span> <span class="n">url</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">url</span> <span class="o">=</span> <span class="n">get_direct_url</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;url&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">url</span>
    <span class="k">if</span> <span class="n">collection</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;collection&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">collection</span>
    <span class="k">if</span> <span class="n">item</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;item&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">item</span>

    <span class="n">titiler_endpoint</span> <span class="o">=</span> <span class="n">check_titiler_endpoint</span><span class="p">(</span><span class="n">titiler_endpoint</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">titiler_endpoint</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">titiler_endpoint</span><span class="si">}</span><span class="s2">/stac/assets&quot;</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">kwargs</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span>
        <span class="p">)</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
            <span class="n">titiler_endpoint</span><span class="o">.</span><span class="n">url_for_stac_assets</span><span class="p">(),</span> <span class="n">params</span><span class="o">=</span><span class="n">kwargs</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span>
        <span class="p">)</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>

    <span class="k">return</span> <span class="n">r</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.stac_bands" class="doc doc-heading">
<code class="highlight language-python"><span class="n">stac_bands</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">collection</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">item</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">titiler_endpoint</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.common.stac_bands" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Get band names of a single SpatialTemporal Asset Catalog (STAC) item.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>url</code></td>
        <td><code>str</code></td>
        <td><p>HTTP URL to a STAC item, e.g., https://canada-spot-ortho.s3.amazonaws.com/canada_spot_orthoimages/canada_spot5_orthoimages/S5_2007/S5_11055_6057_20070622/S5_11055_6057_20070622.json</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>collection</code></td>
        <td><code>str</code></td>
        <td><p>The Microsoft Planetary Computer STAC collection ID, e.g., landsat-8-c2-l2.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>item</code></td>
        <td><code>str</code></td>
        <td><p>The Microsoft Planetary Computer STAC item ID, e.g., LC08_L2SP_047027_20201204_02_T1.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>titiler_endpoint</code></td>
        <td><code>str</code></td>
        <td><p>Titiler endpoint, e.g., "https://titiler.xyz", "planetary-computer", "pc". Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>timeout</code></td>
        <td><code>int</code></td>
        <td><p>Timeout in seconds. Defaults to 300.</p></td>
        <td><code>300</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>list</code></td>
      <td><p>A list of band names</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">stac_bands</span><span class="p">(</span>
    <span class="n">url</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">collection</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">item</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">titiler_endpoint</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get band names of a single SpatialTemporal Asset Catalog (STAC) item.</span>

<span class="sd">    Args:</span>
<span class="sd">        url (str): HTTP URL to a STAC item, e.g., https://canada-spot-ortho.s3.amazonaws.com/canada_spot_orthoimages/canada_spot5_orthoimages/S5_2007/S5_11055_6057_20070622/S5_11055_6057_20070622.json</span>
<span class="sd">        collection (str): The Microsoft Planetary Computer STAC collection ID, e.g., landsat-8-c2-l2.</span>
<span class="sd">        item (str): The Microsoft Planetary Computer STAC item ID, e.g., LC08_L2SP_047027_20201204_02_T1.</span>
<span class="sd">        titiler_endpoint (str, optional): Titiler endpoint, e.g., &quot;https://titiler.xyz&quot;, &quot;planetary-computer&quot;, &quot;pc&quot;. Defaults to None.</span>
<span class="sd">        timeout (int, optional): Timeout in seconds. Defaults to 300.</span>

<span class="sd">    Returns:</span>
<span class="sd">        list: A list of band names</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">url</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">collection</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Either url or collection must be specified.&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">collection</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">titiler_endpoint</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">titiler_endpoint</span> <span class="o">=</span> <span class="s2">&quot;planetary-computer&quot;</span>

    <span class="k">if</span> <span class="n">url</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">url</span> <span class="o">=</span> <span class="n">get_direct_url</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;url&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">url</span>
    <span class="k">if</span> <span class="n">collection</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;collection&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">collection</span>
    <span class="k">if</span> <span class="n">item</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;item&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">item</span>

    <span class="n">titiler_endpoint</span> <span class="o">=</span> <span class="n">check_titiler_endpoint</span><span class="p">(</span><span class="n">titiler_endpoint</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">titiler_endpoint</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">titiler_endpoint</span><span class="si">}</span><span class="s2">/stac/assets&quot;</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">kwargs</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span>
        <span class="p">)</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
            <span class="n">titiler_endpoint</span><span class="o">.</span><span class="n">url_for_stac_assets</span><span class="p">(),</span> <span class="n">params</span><span class="o">=</span><span class="n">kwargs</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span>
        <span class="p">)</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>

    <span class="k">return</span> <span class="n">r</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.stac_bounds" class="doc doc-heading">
<code class="highlight language-python"><span class="n">stac_bounds</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">collection</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">item</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">titiler_endpoint</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.common.stac_bounds" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Get the bounding box of a single SpatialTemporal Asset Catalog (STAC) item.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>url</code></td>
        <td><code>str</code></td>
        <td><p>HTTP URL to a STAC item, e.g., https://canada-spot-ortho.s3.amazonaws.com/canada_spot_orthoimages/canada_spot5_orthoimages/S5_2007/S5_11055_6057_20070622/S5_11055_6057_20070622.json</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>collection</code></td>
        <td><code>str</code></td>
        <td><p>The Microsoft Planetary Computer STAC collection ID, e.g., landsat-8-c2-l2.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>item</code></td>
        <td><code>str</code></td>
        <td><p>The Microsoft Planetary Computer STAC item ID, e.g., LC08_L2SP_047027_20201204_02_T1.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>titiler_endpoint</code></td>
        <td><code>str</code></td>
        <td><p>Titiler endpoint, e.g., "https://titiler.xyz", "planetary-computer", "pc". Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>timeout</code></td>
        <td><code>int</code></td>
        <td><p>Timeout in seconds. Defaults to 300.</p></td>
        <td><code>300</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>list</code></td>
      <td><p>A list of values representing [left, bottom, right, top]</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">stac_bounds</span><span class="p">(</span>
    <span class="n">url</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">collection</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">item</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">titiler_endpoint</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get the bounding box of a single SpatialTemporal Asset Catalog (STAC) item.</span>

<span class="sd">    Args:</span>
<span class="sd">        url (str): HTTP URL to a STAC item, e.g., https://canada-spot-ortho.s3.amazonaws.com/canada_spot_orthoimages/canada_spot5_orthoimages/S5_2007/S5_11055_6057_20070622/S5_11055_6057_20070622.json</span>
<span class="sd">        collection (str): The Microsoft Planetary Computer STAC collection ID, e.g., landsat-8-c2-l2.</span>
<span class="sd">        item (str): The Microsoft Planetary Computer STAC item ID, e.g., LC08_L2SP_047027_20201204_02_T1.</span>
<span class="sd">        titiler_endpoint (str, optional): Titiler endpoint, e.g., &quot;https://titiler.xyz&quot;, &quot;planetary-computer&quot;, &quot;pc&quot;. Defaults to None.</span>
<span class="sd">        timeout (int, optional): Timeout in seconds. Defaults to 300.</span>

<span class="sd">    Returns:</span>
<span class="sd">        list: A list of values representing [left, bottom, right, top]</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">url</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">collection</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Either url or collection must be specified.&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">collection</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">titiler_endpoint</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">titiler_endpoint</span> <span class="o">=</span> <span class="s2">&quot;planetary-computer&quot;</span>

    <span class="k">if</span> <span class="n">url</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">url</span> <span class="o">=</span> <span class="n">get_direct_url</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;url&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">url</span>
    <span class="k">if</span> <span class="n">collection</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;collection&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">collection</span>
    <span class="k">if</span> <span class="n">item</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;item&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">item</span>

    <span class="n">titiler_endpoint</span> <span class="o">=</span> <span class="n">check_titiler_endpoint</span><span class="p">(</span><span class="n">titiler_endpoint</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">titiler_endpoint</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">titiler_endpoint</span><span class="si">}</span><span class="s2">/stac/bounds&quot;</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">kwargs</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span>
        <span class="p">)</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
            <span class="n">titiler_endpoint</span><span class="o">.</span><span class="n">url_for_stac_bounds</span><span class="p">(),</span> <span class="n">params</span><span class="o">=</span><span class="n">kwargs</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span>
        <span class="p">)</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>

    <span class="n">bounds</span> <span class="o">=</span> <span class="n">r</span><span class="p">[</span><span class="s2">&quot;bounds&quot;</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">bounds</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.stac_center" class="doc doc-heading">
<code class="highlight language-python"><span class="n">stac_center</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">collection</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">item</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">titiler_endpoint</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.common.stac_center" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Get the centroid of a single SpatialTemporal Asset Catalog (STAC) item.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>url</code></td>
        <td><code>str</code></td>
        <td><p>HTTP URL to a STAC item, e.g., https://canada-spot-ortho.s3.amazonaws.com/canada_spot_orthoimages/canada_spot5_orthoimages/S5_2007/S5_11055_6057_20070622/S5_11055_6057_20070622.json</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>collection</code></td>
        <td><code>str</code></td>
        <td><p>The Microsoft Planetary Computer STAC collection ID, e.g., landsat-8-c2-l2.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>item</code></td>
        <td><code>str</code></td>
        <td><p>The Microsoft Planetary Computer STAC item ID, e.g., LC08_L2SP_047027_20201204_02_T1.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>titiler_endpoint</code></td>
        <td><code>str</code></td>
        <td><p>Titiler endpoint, e.g., "https://titiler.xyz", "planetary-computer", "pc". Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>tuple</code></td>
      <td><p>A tuple representing (longitude, latitude)</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">stac_center</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">collection</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">item</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">titiler_endpoint</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get the centroid of a single SpatialTemporal Asset Catalog (STAC) item.</span>

<span class="sd">    Args:</span>
<span class="sd">        url (str): HTTP URL to a STAC item, e.g., https://canada-spot-ortho.s3.amazonaws.com/canada_spot_orthoimages/canada_spot5_orthoimages/S5_2007/S5_11055_6057_20070622/S5_11055_6057_20070622.json</span>
<span class="sd">        collection (str): The Microsoft Planetary Computer STAC collection ID, e.g., landsat-8-c2-l2.</span>
<span class="sd">        item (str): The Microsoft Planetary Computer STAC item ID, e.g., LC08_L2SP_047027_20201204_02_T1.</span>
<span class="sd">        titiler_endpoint (str, optional): Titiler endpoint, e.g., &quot;https://titiler.xyz&quot;, &quot;planetary-computer&quot;, &quot;pc&quot;. Defaults to None.</span>

<span class="sd">    Returns:</span>
<span class="sd">        tuple: A tuple representing (longitude, latitude)</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">url</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">collection</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Either url or collection must be specified.&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">url</span> <span class="o">=</span> <span class="n">get_direct_url</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
    <span class="n">bounds</span> <span class="o">=</span> <span class="n">stac_bounds</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">collection</span><span class="p">,</span> <span class="n">item</span><span class="p">,</span> <span class="n">titiler_endpoint</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="n">center</span> <span class="o">=</span> <span class="p">((</span><span class="n">bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="p">(</span><span class="n">bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>  <span class="c1"># (lon, lat)</span>
    <span class="k">return</span> <span class="n">center</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.stac_info" class="doc doc-heading">
<code class="highlight language-python"><span class="n">stac_info</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">collection</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">item</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">assets</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">titiler_endpoint</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.common.stac_info" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Get band info of a STAC item.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>url</code></td>
        <td><code>str</code></td>
        <td><p>HTTP URL to a STAC item, e.g., https://canada-spot-ortho.s3.amazonaws.com/canada_spot_orthoimages/canada_spot5_orthoimages/S5_2007/S5_11055_6057_20070622/S5_11055_6057_20070622.json</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>collection</code></td>
        <td><code>str</code></td>
        <td><p>The Microsoft Planetary Computer STAC collection ID, e.g., landsat-8-c2-l2.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>item</code></td>
        <td><code>str</code></td>
        <td><p>The Microsoft Planetary Computer STAC item ID, e.g., LC08_L2SP_047027_20201204_02_T1.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>assets</code></td>
        <td><code>str | list</code></td>
        <td><p>The Microsoft Planetary Computer STAC asset ID, e.g., ["SR_B7", "SR_B5", "SR_B4"].</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>titiler_endpoint</code></td>
        <td><code>str</code></td>
        <td><p>Titiler endpoint, e.g., "https://titiler.xyz", "planetary-computer", "pc". Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>timeout</code></td>
        <td><code>int</code></td>
        <td><p>Timeout in seconds. Defaults to 300.</p></td>
        <td><code>300</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>list</code></td>
      <td><p>A dictionary of band info.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">stac_info</span><span class="p">(</span>
    <span class="n">url</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">collection</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">item</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">assets</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">titiler_endpoint</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">timeout</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get band info of a STAC item.</span>

<span class="sd">    Args:</span>
<span class="sd">        url (str): HTTP URL to a STAC item, e.g., https://canada-spot-ortho.s3.amazonaws.com/canada_spot_orthoimages/canada_spot5_orthoimages/S5_2007/S5_11055_6057_20070622/S5_11055_6057_20070622.json</span>
<span class="sd">        collection (str): The Microsoft Planetary Computer STAC collection ID, e.g., landsat-8-c2-l2.</span>
<span class="sd">        item (str): The Microsoft Planetary Computer STAC item ID, e.g., LC08_L2SP_047027_20201204_02_T1.</span>
<span class="sd">        assets (str | list): The Microsoft Planetary Computer STAC asset ID, e.g., [&quot;SR_B7&quot;, &quot;SR_B5&quot;, &quot;SR_B4&quot;].</span>
<span class="sd">        titiler_endpoint (str, optional): Titiler endpoint, e.g., &quot;https://titiler.xyz&quot;, &quot;planetary-computer&quot;, &quot;pc&quot;. Defaults to None.</span>
<span class="sd">        timeout (int, optional): Timeout in seconds. Defaults to 300.</span>

<span class="sd">    Returns:</span>
<span class="sd">        list: A dictionary of band info.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">url</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">collection</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Either url or collection must be specified.&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">collection</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">titiler_endpoint</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">titiler_endpoint</span> <span class="o">=</span> <span class="s2">&quot;planetary-computer&quot;</span>

    <span class="k">if</span> <span class="n">url</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">url</span> <span class="o">=</span> <span class="n">get_direct_url</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;url&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">url</span>
    <span class="k">if</span> <span class="n">collection</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;collection&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">collection</span>
    <span class="k">if</span> <span class="n">item</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;item&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">item</span>
    <span class="k">if</span> <span class="n">assets</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;assets&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">assets</span>

    <span class="n">titiler_endpoint</span> <span class="o">=</span> <span class="n">check_titiler_endpoint</span><span class="p">(</span><span class="n">titiler_endpoint</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">titiler_endpoint</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">titiler_endpoint</span><span class="si">}</span><span class="s2">/stac/info&quot;</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">kwargs</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span>
        <span class="p">)</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
            <span class="n">titiler_endpoint</span><span class="o">.</span><span class="n">url_for_stac_info</span><span class="p">(),</span> <span class="n">params</span><span class="o">=</span><span class="n">kwargs</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span>
        <span class="p">)</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>

    <span class="k">return</span> <span class="n">r</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.stac_info_geojson" class="doc doc-heading">
<code class="highlight language-python"><span class="n">stac_info_geojson</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">collection</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">item</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">assets</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">titiler_endpoint</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.common.stac_info_geojson" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Get band info of a STAC item.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>url</code></td>
        <td><code>str</code></td>
        <td><p>HTTP URL to a STAC item, e.g., https://canada-spot-ortho.s3.amazonaws.com/canada_spot_orthoimages/canada_spot5_orthoimages/S5_2007/S5_11055_6057_20070622/S5_11055_6057_20070622.json</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>collection</code></td>
        <td><code>str</code></td>
        <td><p>The Microsoft Planetary Computer STAC collection ID, e.g., landsat-8-c2-l2.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>item</code></td>
        <td><code>str</code></td>
        <td><p>The Microsoft Planetary Computer STAC item ID, e.g., LC08_L2SP_047027_20201204_02_T1.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>assets</code></td>
        <td><code>str | list</code></td>
        <td><p>The Microsoft Planetary Computer STAC asset ID, e.g., ["SR_B7", "SR_B5", "SR_B4"].</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>titiler_endpoint</code></td>
        <td><code>str</code></td>
        <td><p>Titiler endpoint, e.g., "https://titiler.xyz", "planetary-computer", "pc". Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>timeout</code></td>
        <td><code>int</code></td>
        <td><p>Timeout in seconds. Defaults to 300.</p></td>
        <td><code>300</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>list</code></td>
      <td><p>A dictionary of band info.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">stac_info_geojson</span><span class="p">(</span>
    <span class="n">url</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">collection</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">item</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">assets</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">titiler_endpoint</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">timeout</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get band info of a STAC item.</span>

<span class="sd">    Args:</span>
<span class="sd">        url (str): HTTP URL to a STAC item, e.g., https://canada-spot-ortho.s3.amazonaws.com/canada_spot_orthoimages/canada_spot5_orthoimages/S5_2007/S5_11055_6057_20070622/S5_11055_6057_20070622.json</span>
<span class="sd">        collection (str): The Microsoft Planetary Computer STAC collection ID, e.g., landsat-8-c2-l2.</span>
<span class="sd">        item (str): The Microsoft Planetary Computer STAC item ID, e.g., LC08_L2SP_047027_20201204_02_T1.</span>
<span class="sd">        assets (str | list): The Microsoft Planetary Computer STAC asset ID, e.g., [&quot;SR_B7&quot;, &quot;SR_B5&quot;, &quot;SR_B4&quot;].</span>
<span class="sd">        titiler_endpoint (str, optional): Titiler endpoint, e.g., &quot;https://titiler.xyz&quot;, &quot;planetary-computer&quot;, &quot;pc&quot;. Defaults to None.</span>
<span class="sd">        timeout (int, optional): Timeout in seconds. Defaults to 300.</span>

<span class="sd">    Returns:</span>
<span class="sd">        list: A dictionary of band info.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">url</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">collection</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Either url or collection must be specified.&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">collection</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">titiler_endpoint</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">titiler_endpoint</span> <span class="o">=</span> <span class="s2">&quot;planetary-computer&quot;</span>

    <span class="k">if</span> <span class="n">url</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">url</span> <span class="o">=</span> <span class="n">get_direct_url</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;url&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">url</span>
    <span class="k">if</span> <span class="n">collection</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;collection&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">collection</span>
    <span class="k">if</span> <span class="n">item</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;item&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">item</span>
    <span class="k">if</span> <span class="n">assets</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;assets&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">assets</span>

    <span class="n">titiler_endpoint</span> <span class="o">=</span> <span class="n">check_titiler_endpoint</span><span class="p">(</span><span class="n">titiler_endpoint</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">titiler_endpoint</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">titiler_endpoint</span><span class="si">}</span><span class="s2">/stac/info.geojson&quot;</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">kwargs</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span>
        <span class="p">)</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
            <span class="n">titiler_endpoint</span><span class="o">.</span><span class="n">url_for_stac_info_geojson</span><span class="p">(),</span> <span class="n">params</span><span class="o">=</span><span class="n">kwargs</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span>
        <span class="p">)</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>

    <span class="k">return</span> <span class="n">r</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.stac_pixel_value" class="doc doc-heading">
<code class="highlight language-python"><span class="n">stac_pixel_value</span><span class="p">(</span><span class="n">lon</span><span class="p">,</span> <span class="n">lat</span><span class="p">,</span> <span class="n">url</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">collection</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">item</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">assets</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">titiler_endpoint</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.common.stac_pixel_value" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Get pixel value from STAC assets.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>lon</code></td>
        <td><code>float</code></td>
        <td><p>Longitude of the pixel.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>lat</code></td>
        <td><code>float</code></td>
        <td><p>Latitude of the pixel.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>url</code></td>
        <td><code>str</code></td>
        <td><p>HTTP URL to a STAC item, e.g., https://canada-spot-ortho.s3.amazonaws.com/canada_spot_orthoimages/canada_spot5_orthoimages/S5_2007/S5_11055_6057_20070622/S5_11055_6057_20070622.json</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>collection</code></td>
        <td><code>str</code></td>
        <td><p>The Microsoft Planetary Computer STAC collection ID, e.g., landsat-8-c2-l2.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>item</code></td>
        <td><code>str</code></td>
        <td><p>The Microsoft Planetary Computer STAC item ID, e.g., LC08_L2SP_047027_20201204_02_T1.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>assets</code></td>
        <td><code>str | list</code></td>
        <td><p>The Microsoft Planetary Computer STAC asset ID, e.g., ["SR_B7", "SR_B5", "SR_B4"].</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>titiler_endpoint</code></td>
        <td><code>str</code></td>
        <td><p>Titiler endpoint, e.g., "https://titiler.xyz", "planetary-computer", "pc". Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>verbose</code></td>
        <td><code>bool</code></td>
        <td><p>Print out the error message. Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
      <tr>
        <td><code>timeout</code></td>
        <td><code>int</code></td>
        <td><p>Timeout in seconds. Defaults to 300.</p></td>
        <td><code>300</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>list</code></td>
      <td><p>A dictionary of pixel values for each asset.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">stac_pixel_value</span><span class="p">(</span>
    <span class="n">lon</span><span class="p">,</span>
    <span class="n">lat</span><span class="p">,</span>
    <span class="n">url</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">collection</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">item</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">assets</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">titiler_endpoint</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">timeout</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get pixel value from STAC assets.</span>

<span class="sd">    Args:</span>
<span class="sd">        lon (float): Longitude of the pixel.</span>
<span class="sd">        lat (float): Latitude of the pixel.</span>
<span class="sd">        url (str): HTTP URL to a STAC item, e.g., https://canada-spot-ortho.s3.amazonaws.com/canada_spot_orthoimages/canada_spot5_orthoimages/S5_2007/S5_11055_6057_20070622/S5_11055_6057_20070622.json</span>
<span class="sd">        collection (str): The Microsoft Planetary Computer STAC collection ID, e.g., landsat-8-c2-l2.</span>
<span class="sd">        item (str): The Microsoft Planetary Computer STAC item ID, e.g., LC08_L2SP_047027_20201204_02_T1.</span>
<span class="sd">        assets (str | list): The Microsoft Planetary Computer STAC asset ID, e.g., [&quot;SR_B7&quot;, &quot;SR_B5&quot;, &quot;SR_B4&quot;].</span>
<span class="sd">        titiler_endpoint (str, optional): Titiler endpoint, e.g., &quot;https://titiler.xyz&quot;, &quot;planetary-computer&quot;, &quot;pc&quot;. Defaults to None.</span>
<span class="sd">        verbose (bool, optional): Print out the error message. Defaults to True.</span>
<span class="sd">        timeout (int, optional): Timeout in seconds. Defaults to 300.</span>

<span class="sd">    Returns:</span>
<span class="sd">        list: A dictionary of pixel values for each asset.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">url</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">collection</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Either url or collection must be specified.&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">collection</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">titiler_endpoint</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">titiler_endpoint</span> <span class="o">=</span> <span class="s2">&quot;planetary-computer&quot;</span>

    <span class="k">if</span> <span class="n">url</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">url</span> <span class="o">=</span> <span class="n">get_direct_url</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;url&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">url</span>
    <span class="k">if</span> <span class="n">collection</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;collection&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">collection</span>
    <span class="k">if</span> <span class="n">item</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;item&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">item</span>

    <span class="k">if</span> <span class="n">assets</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">assets</span> <span class="o">=</span> <span class="n">stac_assets</span><span class="p">(</span>
            <span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span>
            <span class="n">collection</span><span class="o">=</span><span class="n">collection</span><span class="p">,</span>
            <span class="n">item</span><span class="o">=</span><span class="n">item</span><span class="p">,</span>
            <span class="n">titiler_endpoint</span><span class="o">=</span><span class="n">titiler_endpoint</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">assets</span> <span class="o">=</span> <span class="s2">&quot;,&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">assets</span><span class="p">)</span>
    <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;assets&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">assets</span>

    <span class="n">titiler_endpoint</span> <span class="o">=</span> <span class="n">check_titiler_endpoint</span><span class="p">(</span><span class="n">titiler_endpoint</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">titiler_endpoint</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">titiler_endpoint</span><span class="si">}</span><span class="s2">/stac/</span><span class="si">{</span><span class="n">lon</span><span class="si">}</span><span class="s2">,</span><span class="si">{</span><span class="n">lat</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">kwargs</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span>
        <span class="p">)</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
            <span class="n">titiler_endpoint</span><span class="o">.</span><span class="n">url_for_stac_pixel_value</span><span class="p">(</span><span class="n">lon</span><span class="p">,</span> <span class="n">lat</span><span class="p">),</span>
            <span class="n">params</span><span class="o">=</span><span class="n">kwargs</span><span class="p">,</span>
            <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span>
        <span class="p">)</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>

    <span class="k">if</span> <span class="s2">&quot;detail&quot;</span> <span class="ow">in</span> <span class="n">r</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">verbose</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">r</span><span class="p">[</span><span class="s2">&quot;detail&quot;</span><span class="p">])</span>
        <span class="k">return</span> <span class="kc">None</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">values</span> <span class="o">=</span> <span class="p">[</span><span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">r</span><span class="p">[</span><span class="s2">&quot;values&quot;</span><span class="p">]]</span>
        <span class="n">result</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">assets</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">),</span> <span class="n">values</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">result</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.stac_stats" class="doc doc-heading">
<code class="highlight language-python"><span class="n">stac_stats</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">collection</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">item</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">assets</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">titiler_endpoint</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.common.stac_stats" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Get band statistics of a STAC item.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>url</code></td>
        <td><code>str</code></td>
        <td><p>HTTP URL to a STAC item, e.g., https://canada-spot-ortho.s3.amazonaws.com/canada_spot_orthoimages/canada_spot5_orthoimages/S5_2007/S5_11055_6057_20070622/S5_11055_6057_20070622.json</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>collection</code></td>
        <td><code>str</code></td>
        <td><p>The Microsoft Planetary Computer STAC collection ID, e.g., landsat-8-c2-l2.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>item</code></td>
        <td><code>str</code></td>
        <td><p>The Microsoft Planetary Computer STAC item ID, e.g., LC08_L2SP_047027_20201204_02_T1.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>assets</code></td>
        <td><code>str | list</code></td>
        <td><p>The Microsoft Planetary Computer STAC asset ID, e.g., ["SR_B7", "SR_B5", "SR_B4"].</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>titiler_endpoint</code></td>
        <td><code>str</code></td>
        <td><p>Titiler endpoint, e.g., "https://titiler.xyz", "planetary-computer", "pc". Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>timeout</code></td>
        <td><code>int</code></td>
        <td><p>Timeout in seconds. Defaults to 300.</p></td>
        <td><code>300</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>list</code></td>
      <td><p>A dictionary of band statistics.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">stac_stats</span><span class="p">(</span>
    <span class="n">url</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">collection</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">item</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">assets</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">titiler_endpoint</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">timeout</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get band statistics of a STAC item.</span>

<span class="sd">    Args:</span>
<span class="sd">        url (str): HTTP URL to a STAC item, e.g., https://canada-spot-ortho.s3.amazonaws.com/canada_spot_orthoimages/canada_spot5_orthoimages/S5_2007/S5_11055_6057_20070622/S5_11055_6057_20070622.json</span>
<span class="sd">        collection (str): The Microsoft Planetary Computer STAC collection ID, e.g., landsat-8-c2-l2.</span>
<span class="sd">        item (str): The Microsoft Planetary Computer STAC item ID, e.g., LC08_L2SP_047027_20201204_02_T1.</span>
<span class="sd">        assets (str | list): The Microsoft Planetary Computer STAC asset ID, e.g., [&quot;SR_B7&quot;, &quot;SR_B5&quot;, &quot;SR_B4&quot;].</span>
<span class="sd">        titiler_endpoint (str, optional): Titiler endpoint, e.g., &quot;https://titiler.xyz&quot;, &quot;planetary-computer&quot;, &quot;pc&quot;. Defaults to None.</span>
<span class="sd">        timeout (int, optional): Timeout in seconds. Defaults to 300.</span>

<span class="sd">    Returns:</span>
<span class="sd">        list: A dictionary of band statistics.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">url</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">collection</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Either url or collection must be specified.&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">collection</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">titiler_endpoint</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">titiler_endpoint</span> <span class="o">=</span> <span class="s2">&quot;planetary-computer&quot;</span>

    <span class="k">if</span> <span class="n">url</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">url</span> <span class="o">=</span> <span class="n">get_direct_url</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;url&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">url</span>
    <span class="k">if</span> <span class="n">collection</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;collection&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">collection</span>
    <span class="k">if</span> <span class="n">item</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;item&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">item</span>
    <span class="k">if</span> <span class="n">assets</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;assets&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">assets</span>

    <span class="n">titiler_endpoint</span> <span class="o">=</span> <span class="n">check_titiler_endpoint</span><span class="p">(</span><span class="n">titiler_endpoint</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">titiler_endpoint</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">titiler_endpoint</span><span class="si">}</span><span class="s2">/stac/statistics&quot;</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">kwargs</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span>
        <span class="p">)</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
            <span class="n">titiler_endpoint</span><span class="o">.</span><span class="n">url_for_stac_statistics</span><span class="p">(),</span> <span class="n">params</span><span class="o">=</span><span class="n">kwargs</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span>
        <span class="p">)</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>

    <span class="k">return</span> <span class="n">r</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.stac_tile" class="doc doc-heading">
<code class="highlight language-python"><span class="n">stac_tile</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">collection</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">item</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">assets</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">bands</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">titiler_endpoint</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.common.stac_tile" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Get a tile layer from a single SpatialTemporal Asset Catalog (STAC) item.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>url</code></td>
        <td><code>str</code></td>
        <td><p>HTTP URL to a STAC item, e.g., https://canada-spot-ortho.s3.amazonaws.com/canada_spot_orthoimages/canada_spot5_orthoimages/S5_2007/S5_11055_6057_20070622/S5_11055_6057_20070622.json</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>collection</code></td>
        <td><code>str</code></td>
        <td><p>The Microsoft Planetary Computer STAC collection ID, e.g., landsat-8-c2-l2.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>item</code></td>
        <td><code>str</code></td>
        <td><p>The Microsoft Planetary Computer STAC item ID, e.g., LC08_L2SP_047027_20201204_02_T1.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>assets</code></td>
        <td><code>str | list</code></td>
        <td><p>The Microsoft Planetary Computer STAC asset ID, e.g., ["SR_B7", "SR_B5", "SR_B4"].</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>bands</code></td>
        <td><code>list</code></td>
        <td><p>A list of band names, e.g., ["SR_B7", "SR_B5", "SR_B4"]</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>titiler_endpoint</code></td>
        <td><code>str</code></td>
        <td><p>Titiler endpoint, e.g., "https://titiler.xyz", "https://planetarycomputer.microsoft.com/api/data/v1", "planetary-computer", "pc". Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>timeout</code></td>
        <td><code>int</code></td>
        <td><p>Timeout in seconds. Defaults to 300.</p></td>
        <td><code>300</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>str</code></td>
      <td><p>Returns the STAC Tile layer URL.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">stac_tile</span><span class="p">(</span>
    <span class="n">url</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">collection</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">item</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">assets</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">bands</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">titiler_endpoint</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">timeout</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get a tile layer from a single SpatialTemporal Asset Catalog (STAC) item.</span>

<span class="sd">    Args:</span>
<span class="sd">        url (str): HTTP URL to a STAC item, e.g., https://canada-spot-ortho.s3.amazonaws.com/canada_spot_orthoimages/canada_spot5_orthoimages/S5_2007/S5_11055_6057_20070622/S5_11055_6057_20070622.json</span>
<span class="sd">        collection (str): The Microsoft Planetary Computer STAC collection ID, e.g., landsat-8-c2-l2.</span>
<span class="sd">        item (str): The Microsoft Planetary Computer STAC item ID, e.g., LC08_L2SP_047027_20201204_02_T1.</span>
<span class="sd">        assets (str | list): The Microsoft Planetary Computer STAC asset ID, e.g., [&quot;SR_B7&quot;, &quot;SR_B5&quot;, &quot;SR_B4&quot;].</span>
<span class="sd">        bands (list): A list of band names, e.g., [&quot;SR_B7&quot;, &quot;SR_B5&quot;, &quot;SR_B4&quot;]</span>
<span class="sd">        titiler_endpoint (str, optional): Titiler endpoint, e.g., &quot;https://titiler.xyz&quot;, &quot;https://planetarycomputer.microsoft.com/api/data/v1&quot;, &quot;planetary-computer&quot;, &quot;pc&quot;. Defaults to None.</span>
<span class="sd">        timeout (int, optional): Timeout in seconds. Defaults to 300.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: Returns the STAC Tile layer URL.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">url</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">collection</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Either url or collection must be specified.&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">collection</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">titiler_endpoint</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">titiler_endpoint</span> <span class="o">=</span> <span class="s2">&quot;planetary-computer&quot;</span>

    <span class="k">if</span> <span class="n">url</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">url</span> <span class="o">=</span> <span class="n">get_direct_url</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;url&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">url</span>
    <span class="k">if</span> <span class="n">collection</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;collection&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">collection</span>
    <span class="k">if</span> <span class="n">item</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;item&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">item</span>

    <span class="k">if</span> <span class="s2">&quot;palette&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;colormap_name&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;palette&quot;</span><span class="p">]</span>
        <span class="k">del</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;palette&quot;</span><span class="p">]</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">bands</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">bands</span><span class="p">))</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">bands</span> <span class="o">=</span> <span class="n">bands</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">assets</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">assets</span><span class="p">))</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">assets</span> <span class="o">=</span> <span class="n">assets</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

    <span class="n">titiler_endpoint</span> <span class="o">=</span> <span class="n">check_titiler_endpoint</span><span class="p">(</span><span class="n">titiler_endpoint</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">titiler_endpoint</span><span class="p">,</span> <span class="n">PlanetaryComputerEndpoint</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">bands</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">bands</span> <span class="o">=</span> <span class="n">bands</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">assets</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">assets</span> <span class="o">=</span> <span class="n">assets</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">assets</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="p">(</span><span class="n">bands</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">):</span>
            <span class="n">assets</span> <span class="o">=</span> <span class="n">bands</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;bidx&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">bands</span>

        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;assets&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">assets</span>

        <span class="c1"># if (&quot;expression&quot; in kwargs) and (&quot;rescale&quot; not in kwargs):</span>
        <span class="c1">#     stats = stac_stats(</span>
        <span class="c1">#         collection=collection,</span>
        <span class="c1">#         item=item,</span>
        <span class="c1">#         expression=kwargs[&quot;expression&quot;],</span>
        <span class="c1">#         titiler_endpoint=titiler_endpoint,</span>
        <span class="c1">#     )</span>
        <span class="c1">#     kwargs[</span>
        <span class="c1">#         &quot;rescale&quot;</span>
        <span class="c1">#     ] = f&quot;{stats[0][&#39;percentile_2&#39;]},{stats[0][&#39;percentile_98&#39;]}&quot;</span>

        <span class="c1"># if (&quot;asset_expression&quot; in kwargs) and (&quot;rescale&quot; not in kwargs):</span>
        <span class="c1">#     stats = stac_stats(</span>
        <span class="c1">#         collection=collection,</span>
        <span class="c1">#         item=item,</span>
        <span class="c1">#         expression=kwargs[&quot;asset_expression&quot;],</span>
        <span class="c1">#         titiler_endpoint=titiler_endpoint,</span>
        <span class="c1">#     )</span>
        <span class="c1">#     kwargs[</span>
        <span class="c1">#         &quot;rescale&quot;</span>
        <span class="c1">#     ] = f&quot;{stats[0][&#39;percentile_2&#39;]},{stats[0][&#39;percentile_98&#39;]}&quot;</span>

        <span class="k">if</span> <span class="p">(</span>
            <span class="p">(</span><span class="n">assets</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span>
            <span class="ow">and</span> <span class="p">(</span><span class="s2">&quot;asset_expression&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">)</span>
            <span class="ow">and</span> <span class="p">(</span><span class="s2">&quot;expression&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">)</span>
            <span class="ow">and</span> <span class="p">(</span><span class="s2">&quot;rescale&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">)</span>
        <span class="p">):</span>
            <span class="n">stats</span> <span class="o">=</span> <span class="n">stac_stats</span><span class="p">(</span>
                <span class="n">collection</span><span class="o">=</span><span class="n">collection</span><span class="p">,</span>
                <span class="n">item</span><span class="o">=</span><span class="n">item</span><span class="p">,</span>
                <span class="n">assets</span><span class="o">=</span><span class="n">assets</span><span class="p">,</span>
                <span class="n">titiler_endpoint</span><span class="o">=</span><span class="n">titiler_endpoint</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="s2">&quot;detail&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">stats</span><span class="p">:</span>

                <span class="k">try</span><span class="p">:</span>
                    <span class="n">percentile_2</span> <span class="o">=</span> <span class="nb">min</span><span class="p">([</span><span class="n">stats</span><span class="p">[</span><span class="n">s</span><span class="p">][</span><span class="s2">&quot;percentile_2&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">stats</span><span class="p">])</span>
                    <span class="n">percentile_98</span> <span class="o">=</span> <span class="nb">max</span><span class="p">([</span><span class="n">stats</span><span class="p">[</span><span class="n">s</span><span class="p">][</span><span class="s2">&quot;percentile_98&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">stats</span><span class="p">])</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="n">percentile_2</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span>
                        <span class="p">[</span>
                            <span class="n">stats</span><span class="p">[</span><span class="n">s</span><span class="p">][</span><span class="nb">list</span><span class="p">(</span><span class="n">stats</span><span class="p">[</span><span class="n">s</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">())[</span><span class="mi">0</span><span class="p">]][</span><span class="s2">&quot;percentile_2&quot;</span><span class="p">]</span>
                            <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">stats</span>
                        <span class="p">]</span>
                    <span class="p">)</span>
                    <span class="n">percentile_98</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span>
                        <span class="p">[</span>
                            <span class="n">stats</span><span class="p">[</span><span class="n">s</span><span class="p">][</span><span class="nb">list</span><span class="p">(</span><span class="n">stats</span><span class="p">[</span><span class="n">s</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">())[</span><span class="mi">0</span><span class="p">]][</span><span class="s2">&quot;percentile_98&quot;</span><span class="p">]</span>
                            <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">stats</span>
                        <span class="p">]</span>
                    <span class="p">)</span>
                <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;rescale&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">percentile_2</span><span class="si">}</span><span class="s2">,</span><span class="si">{</span><span class="n">percentile_98</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">stats</span><span class="p">[</span><span class="s2">&quot;detail&quot;</span><span class="p">])</span>  <span class="c1"># When operation times out.</span>

    <span class="k">else</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">bands</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">bands</span> <span class="o">=</span> <span class="n">bands</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">assets</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">assets</span> <span class="o">=</span> <span class="n">assets</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">assets</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="p">(</span><span class="n">bands</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">):</span>
            <span class="n">assets</span> <span class="o">=</span> <span class="n">bands</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;asset_bidx&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">bands</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;assets&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">assets</span>

    <span class="n">TileMatrixSetId</span> <span class="o">=</span> <span class="s2">&quot;WebMercatorQuad&quot;</span>
    <span class="k">if</span> <span class="s2">&quot;TileMatrixSetId&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="n">TileMatrixSetId</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;TileMatrixSetId&quot;</span><span class="p">]</span>
        <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;TileMatrixSetId&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">titiler_endpoint</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">titiler_endpoint</span><span class="si">}</span><span class="s2">/stac/</span><span class="si">{</span><span class="n">TileMatrixSetId</span><span class="si">}</span><span class="s2">/tilejson.json&quot;</span><span class="p">,</span>
            <span class="n">params</span><span class="o">=</span><span class="n">kwargs</span><span class="p">,</span>
            <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span>
        <span class="p">)</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
            <span class="n">titiler_endpoint</span><span class="o">.</span><span class="n">url_for_stac_item</span><span class="p">(),</span> <span class="n">params</span><span class="o">=</span><span class="n">kwargs</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span>
        <span class="p">)</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>

    <span class="k">return</span> <span class="n">r</span><span class="p">[</span><span class="s2">&quot;tiles&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.str_to_num" class="doc doc-heading">
<code class="highlight language-python"><span class="n">str_to_num</span><span class="p">(</span><span class="n">in_str</span><span class="p">)</span></code>


<a href="#geemap.common.str_to_num" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Converts a string to an ee.Number.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>in_str</code></td>
        <td><code>str</code></td>
        <td><p>The string to convert to a number.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>object</code></td>
      <td><p>ee.Number</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">str_to_num</span><span class="p">(</span><span class="n">in_str</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Converts a string to an ee.Number.</span>

<span class="sd">    Args:</span>
<span class="sd">        in_str (str): The string to convert to a number.</span>

<span class="sd">    Returns:</span>
<span class="sd">        object: ee.Number</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">ee</span><span class="o">.</span><span class="n">Number</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.summarize_by_group" class="doc doc-heading">
<code class="highlight language-python"><span class="n">summarize_by_group</span><span class="p">(</span><span class="n">collection</span><span class="p">,</span> <span class="n">column</span><span class="p">,</span> <span class="n">group</span><span class="p">,</span> <span class="n">group_name</span><span class="p">,</span> <span class="n">stats_type</span><span class="p">,</span> <span class="n">return_dict</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>


<a href="#geemap.common.summarize_by_group" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Calculates summary statistics by group.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>collection</code></td>
        <td><code>object</code></td>
        <td><p>The input feature collection</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>column</code></td>
        <td><code>str</code></td>
        <td><p>The value column to calculate summary statistics.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>group</code></td>
        <td><code>str</code></td>
        <td><p>The name of the group column.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>group_name</code></td>
        <td><code>str</code></td>
        <td><p>The new group name to use.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>stats_type</code></td>
        <td><code>str</code></td>
        <td><p>The type of summary statistics.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>return_dict</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to return the result as a dictionary.</p></td>
        <td><code>True</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>object</code></td>
      <td><p>ee.Dictionary or ee.List</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">summarize_by_group</span><span class="p">(</span>
    <span class="n">collection</span><span class="p">,</span> <span class="n">column</span><span class="p">,</span> <span class="n">group</span><span class="p">,</span> <span class="n">group_name</span><span class="p">,</span> <span class="n">stats_type</span><span class="p">,</span> <span class="n">return_dict</span><span class="o">=</span><span class="kc">True</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Calculates summary statistics by group.</span>

<span class="sd">    Args:</span>
<span class="sd">        collection (object): The input feature collection</span>
<span class="sd">        column (str): The value column to calculate summary statistics.</span>
<span class="sd">        group (str): The name of the group column.</span>
<span class="sd">        group_name (str): The new group name to use.</span>
<span class="sd">        stats_type (str): The type of summary statistics.</span>
<span class="sd">        return_dict (bool): Whether to return the result as a dictionary.</span>

<span class="sd">    Returns:</span>
<span class="sd">        object: ee.Dictionary or ee.List</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">stats_type</span> <span class="o">=</span> <span class="n">stats_type</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
    <span class="n">allowed_stats</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;min&quot;</span><span class="p">,</span> <span class="s2">&quot;max&quot;</span><span class="p">,</span> <span class="s2">&quot;mean&quot;</span><span class="p">,</span> <span class="s2">&quot;median&quot;</span><span class="p">,</span> <span class="s2">&quot;sum&quot;</span><span class="p">,</span> <span class="s2">&quot;stdDev&quot;</span><span class="p">,</span> <span class="s2">&quot;variance&quot;</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">stats_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">allowed_stats</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span>
            <span class="s2">&quot;The stats type must be one of the following: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="s2">&quot;,&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">allowed_stats</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="k">return</span>

    <span class="n">stats_dict</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;min&quot;</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span>
        <span class="s2">&quot;max&quot;</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">max</span><span class="p">(),</span>
        <span class="s2">&quot;mean&quot;</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">mean</span><span class="p">(),</span>
        <span class="s2">&quot;median&quot;</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">median</span><span class="p">(),</span>
        <span class="s2">&quot;sum&quot;</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">sum</span><span class="p">(),</span>
        <span class="s2">&quot;stdDev&quot;</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">stdDev</span><span class="p">(),</span>
        <span class="s2">&quot;variance&quot;</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">variance</span><span class="p">(),</span>
    <span class="p">}</span>

    <span class="n">selectors</span> <span class="o">=</span> <span class="p">[</span><span class="n">column</span><span class="p">,</span> <span class="n">group</span><span class="p">]</span>
    <span class="n">stats</span> <span class="o">=</span> <span class="n">collection</span><span class="o">.</span><span class="n">reduceColumns</span><span class="p">(</span>
        <span class="o">**</span><span class="p">{</span>
            <span class="s2">&quot;selectors&quot;</span><span class="p">:</span> <span class="n">selectors</span><span class="p">,</span>
            <span class="s2">&quot;reducer&quot;</span><span class="p">:</span> <span class="n">stats_dict</span><span class="p">[</span><span class="n">stats_type</span><span class="p">]</span><span class="o">.</span><span class="n">group</span><span class="p">(</span>
                <span class="o">**</span><span class="p">{</span><span class="s2">&quot;groupField&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;groupName&quot;</span><span class="p">:</span> <span class="n">group_name</span><span class="p">}</span>
            <span class="p">),</span>
        <span class="p">}</span>
    <span class="p">)</span>
    <span class="n">results</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">List</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">Dictionary</span><span class="p">(</span><span class="n">stats</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;groups&quot;</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">return_dict</span><span class="p">:</span>
        <span class="n">keys</span> <span class="o">=</span> <span class="n">results</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">k</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Dictionary</span><span class="p">(</span><span class="n">k</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">group_name</span><span class="p">))</span>
        <span class="n">values</span> <span class="o">=</span> <span class="n">results</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Dictionary</span><span class="p">(</span><span class="n">v</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">stats_type</span><span class="p">))</span>
        <span class="n">results</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Dictionary</span><span class="o">.</span><span class="n">fromLists</span><span class="p">(</span><span class="n">keys</span><span class="p">,</span> <span class="n">values</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">results</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.summary_stats" class="doc doc-heading">
<code class="highlight language-python"><span class="n">summary_stats</span><span class="p">(</span><span class="n">collection</span><span class="p">,</span> <span class="n">column</span><span class="p">)</span></code>


<a href="#geemap.common.summary_stats" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Aggregates over a given property of the objects in a collection, calculating the sum, min, max, mean,
sample standard deviation, sample variance, total standard deviation and total variance of the selected property.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>collection</code></td>
        <td><code>FeatureCollection</code></td>
        <td><p>The input feature collection to calculate summary statistics.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>column</code></td>
        <td><code>str</code></td>
        <td><p>The name of the column to calculate summary statistics.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>dict</code></td>
      <td><p>The dictionary containing information about the summary statistics.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">summary_stats</span><span class="p">(</span><span class="n">collection</span><span class="p">,</span> <span class="n">column</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Aggregates over a given property of the objects in a collection, calculating the sum, min, max, mean,</span>
<span class="sd">    sample standard deviation, sample variance, total standard deviation and total variance of the selected property.</span>

<span class="sd">    Args:</span>
<span class="sd">        collection (FeatureCollection): The input feature collection to calculate summary statistics.</span>
<span class="sd">        column (str): The name of the column to calculate summary statistics.</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict: The dictionary containing information about the summary statistics.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">stats</span> <span class="o">=</span> <span class="n">collection</span><span class="o">.</span><span class="n">aggregate_stats</span><span class="p">(</span><span class="n">column</span><span class="p">)</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()</span>
    <span class="k">return</span> <span class="nb">eval</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">stats</span><span class="p">))</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.system_fonts" class="doc doc-heading">
<code class="highlight language-python"><span class="n">system_fonts</span><span class="p">(</span><span class="n">show_full_path</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>


<a href="#geemap.common.system_fonts" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Gets a list of system fonts</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code># Common font locations:
# Linux: /usr/share/fonts/TTF/
# Windows: C:/Windows/Fonts
# macOS:  System &gt; Library &gt; Fonts
</code></pre></div></td></tr></table></div>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>show_full_path</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to show the full path of each system font. Defaults to False.</p></td>
        <td><code>False</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>list</code></td>
      <td><p>A list of system fonts.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">system_fonts</span><span class="p">(</span><span class="n">show_full_path</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Gets a list of system fonts</span>

<span class="sd">        # Common font locations:</span>
<span class="sd">        # Linux: /usr/share/fonts/TTF/</span>
<span class="sd">        # Windows: C:/Windows/Fonts</span>
<span class="sd">        # macOS:  System &gt; Library &gt; Fonts</span>

<span class="sd">    Args:</span>
<span class="sd">        show_full_path (bool, optional): Whether to show the full path of each system font. Defaults to False.</span>

<span class="sd">    Returns:</span>
<span class="sd">        list: A list of system fonts.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="kn">import</span> <span class="nn">matplotlib.font_manager</span>

        <span class="n">font_list</span> <span class="o">=</span> <span class="n">matplotlib</span><span class="o">.</span><span class="n">font_manager</span><span class="o">.</span><span class="n">findSystemFonts</span><span class="p">(</span>
            <span class="n">fontpaths</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">fontext</span><span class="o">=</span><span class="s2">&quot;ttf&quot;</span>
        <span class="p">)</span>
        <span class="n">font_list</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>

        <span class="n">font_names</span> <span class="o">=</span> <span class="p">[</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">f</span><span class="p">)</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">font_list</span><span class="p">]</span>
        <span class="n">font_names</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">show_full_path</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">font_list</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">font_names</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.temp_file_path" class="doc doc-heading">
<code class="highlight language-python"><span class="n">temp_file_path</span><span class="p">(</span><span class="n">extension</span><span class="p">)</span></code>


<a href="#geemap.common.temp_file_path" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Returns a temporary file path.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>extension</code></td>
        <td><code>str</code></td>
        <td><p>The file extension.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>str</code></td>
      <td><p>The temporary file path.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">temp_file_path</span><span class="p">(</span><span class="n">extension</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Returns a temporary file path.</span>

<span class="sd">    Args:</span>
<span class="sd">        extension (str): The file extension.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: The temporary file path.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="kn">import</span> <span class="nn">tempfile</span>
    <span class="kn">import</span> <span class="nn">uuid</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">extension</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">):</span>
        <span class="n">extension</span> <span class="o">=</span> <span class="s2">&quot;.&quot;</span> <span class="o">+</span> <span class="n">extension</span>
    <span class="n">file_id</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">uuid</span><span class="o">.</span><span class="n">uuid4</span><span class="p">())</span>
    <span class="n">file_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">tempfile</span><span class="o">.</span><span class="n">gettempdir</span><span class="p">(),</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">file_id</span><span class="si">}{</span><span class="n">extension</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">file_path</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.to_hex_colors" class="doc doc-heading">
<code class="highlight language-python"><span class="n">to_hex_colors</span><span class="p">(</span><span class="n">colors</span><span class="p">)</span></code>


<a href="#geemap.common.to_hex_colors" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Convert a GEE color palette into hexadecimal color codes. can handle mixin formats</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>colors</code></td>
        <td><code>list</code></td>
        <td><p>A list of hex color codes.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>list</code></td>
      <td><p>A list of hex color codes prefixed with #.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">to_hex_colors</span><span class="p">(</span><span class="n">colors</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Convert a GEE color palette into hexadecimal color codes. can handle mixin formats</span>

<span class="sd">    Args:</span>
<span class="sd">        colors (list): A list of hex color codes.</span>

<span class="sd">    Returns:</span>
<span class="sd">        list: A list of hex color codes prefixed with #.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">return</span> <span class="p">[</span><span class="n">check_color</span><span class="p">(</span><span class="n">c</span><span class="p">)</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">colors</span><span class="p">]</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.update_package" class="doc doc-heading">
<code class="highlight language-python"><span class="n">update_package</span><span class="p">()</span></code>


<a href="#geemap.common.update_package" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Updates the geemap package from the geemap GitHub repository without the need to use pip or conda.
In this way, I don't have to keep updating pypi and conda-forge with every minor update of the package.</p>

        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">update_package</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Updates the geemap package from the geemap GitHub repository without the need to use pip or conda.</span>
<span class="sd">    In this way, I don&#39;t have to keep updating pypi and conda-forge with every minor update of the package.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">download_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="s2">&quot;~&quot;</span><span class="p">),</span> <span class="s2">&quot;Downloads&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">download_dir</span><span class="p">):</span>
            <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">download_dir</span><span class="p">)</span>
        <span class="n">clone_repo</span><span class="p">(</span><span class="n">out_dir</span><span class="o">=</span><span class="n">download_dir</span><span class="p">)</span>

        <span class="n">pkg_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">download_dir</span><span class="p">,</span> <span class="s2">&quot;geemap-master&quot;</span><span class="p">)</span>
        <span class="n">work_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span>
        <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="n">pkg_dir</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">shutil</span><span class="o">.</span><span class="n">which</span><span class="p">(</span><span class="s2">&quot;pip&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">cmd</span> <span class="o">=</span> <span class="s2">&quot;pip3 install .&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">cmd</span> <span class="o">=</span> <span class="s2">&quot;pip install .&quot;</span>

        <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="n">cmd</span><span class="p">)</span>
        <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="n">work_dir</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span>
            <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Please comment out &#39;geemap.update_package()&#39; and restart the kernel to take effect:</span><span class="se">\n</span><span class="s2">Jupyter menu -&gt; Kernel -&gt; Restart &amp; Clear Output&quot;</span>
        <span class="p">)</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.upload_to_imgur" class="doc doc-heading">
<code class="highlight language-python"><span class="n">upload_to_imgur</span><span class="p">(</span><span class="n">in_gif</span><span class="p">)</span></code>


<a href="#geemap.common.upload_to_imgur" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Uploads an image to imgur.com</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>in_gif</code></td>
        <td><code>str</code></td>
        <td><p>The file path to the image.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">upload_to_imgur</span><span class="p">(</span><span class="n">in_gif</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Uploads an image to imgur.com</span>

<span class="sd">    Args:</span>
<span class="sd">        in_gif (str): The file path to the image.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">subprocess</span>

    <span class="n">pkg_name</span> <span class="o">=</span> <span class="s2">&quot;imgur-uploader&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">is_tool</span><span class="p">(</span><span class="n">pkg_name</span><span class="p">):</span>
        <span class="n">check_install</span><span class="p">(</span><span class="n">pkg_name</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">IMGUR_API_ID</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;IMGUR_API_ID&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="n">IMGUR_API_SECRET</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;IMGUR_API_SECRET&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="n">credentials_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
            <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="s2">&quot;~&quot;</span><span class="p">),</span> <span class="s2">&quot;.config/imgur_uploader/uploader.cfg&quot;</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="p">(</span>
            <span class="p">(</span><span class="n">IMGUR_API_ID</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">IMGUR_API_SECRET</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span>
        <span class="p">)</span> <span class="ow">or</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">credentials_path</span><span class="p">):</span>

            <span class="n">proc</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">Popen</span><span class="p">([</span><span class="s2">&quot;imgur-uploader&quot;</span><span class="p">,</span> <span class="n">in_gif</span><span class="p">],</span> <span class="n">stdout</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">):</span>
                <span class="n">line</span> <span class="o">=</span> <span class="n">proc</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">))</span>
            <span class="c1"># while True:</span>
            <span class="c1">#     line = proc.stdout.readline()</span>
            <span class="c1">#     if not line:</span>
            <span class="c1">#         break</span>
            <span class="c1">#     print(line.rstrip().decode(&quot;utf-8&quot;))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span>
                <span class="s2">&quot;Imgur API credentials could not be found. Please check https://pypi.org/project/imgur-uploader/ for instructions on how to get Imgur API credentials&quot;</span>
            <span class="p">)</span>
            <span class="k">return</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.use_mkdocs" class="doc doc-heading">
<code class="highlight language-python"><span class="n">use_mkdocs</span><span class="p">()</span></code>


<a href="#geemap.common.use_mkdocs" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Test if the current notebook is running in mkdocs.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>bool</code></td>
      <td><p>True if the notebook is running in mkdocs.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">use_mkdocs</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Test if the current notebook is running in mkdocs.</span>

<span class="sd">    Returns:</span>
<span class="sd">        bool: True if the notebook is running in mkdocs.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;USE_MKDOCS&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">True</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.vec_area" class="doc doc-heading">
<code class="highlight language-python"><span class="n">vec_area</span><span class="p">(</span><span class="n">fc</span><span class="p">)</span></code>


<a href="#geemap.common.vec_area" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Calculate the area (m2) of each each feature in a feature collection.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>fc</code></td>
        <td><code>object</code></td>
        <td><p>The feature collection to compute the area.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>object</code></td>
      <td><p>ee.FeatureCollection</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">vec_area</span><span class="p">(</span><span class="n">fc</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Calculate the area (m2) of each each feature in a feature collection.</span>

<span class="sd">    Args:</span>
<span class="sd">        fc (object): The feature collection to compute the area.</span>

<span class="sd">    Returns:</span>
<span class="sd">        object: ee.FeatureCollection</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">fc</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">f</span><span class="p">:</span> <span class="n">f</span><span class="o">.</span><span class="n">set</span><span class="p">({</span><span class="s2">&quot;area_m2&quot;</span><span class="p">:</span> <span class="n">f</span><span class="o">.</span><span class="n">area</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">round</span><span class="p">()}))</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.vec_area_ha" class="doc doc-heading">
<code class="highlight language-python"><span class="n">vec_area_ha</span><span class="p">(</span><span class="n">fc</span><span class="p">)</span></code>


<a href="#geemap.common.vec_area_ha" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Calculate the area (hectare) of each each feature in a feature collection.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>fc</code></td>
        <td><code>object</code></td>
        <td><p>The feature collection to compute the area.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>object</code></td>
      <td><p>ee.FeatureCollection</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">vec_area_ha</span><span class="p">(</span><span class="n">fc</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Calculate the area (hectare) of each each feature in a feature collection.</span>

<span class="sd">    Args:</span>
<span class="sd">        fc (object): The feature collection to compute the area.</span>

<span class="sd">    Returns:</span>
<span class="sd">        object: ee.FeatureCollection</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">fc</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">f</span><span class="p">:</span> <span class="n">f</span><span class="o">.</span><span class="n">set</span><span class="p">({</span><span class="s2">&quot;area_ha&quot;</span><span class="p">:</span> <span class="n">f</span><span class="o">.</span><span class="n">area</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">divide</span><span class="p">(</span><span class="mf">1e4</span><span class="p">)</span><span class="o">.</span><span class="n">round</span><span class="p">()}))</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.vec_area_km2" class="doc doc-heading">
<code class="highlight language-python"><span class="n">vec_area_km2</span><span class="p">(</span><span class="n">fc</span><span class="p">)</span></code>


<a href="#geemap.common.vec_area_km2" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Calculate the area (km2) of each each feature in a feature collection.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>fc</code></td>
        <td><code>object</code></td>
        <td><p>The feature collection to compute the area.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>object</code></td>
      <td><p>ee.FeatureCollection</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">vec_area_km2</span><span class="p">(</span><span class="n">fc</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Calculate the area (km2) of each each feature in a feature collection.</span>

<span class="sd">    Args:</span>
<span class="sd">        fc (object): The feature collection to compute the area.</span>

<span class="sd">    Returns:</span>
<span class="sd">        object: ee.FeatureCollection</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">fc</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">f</span><span class="p">:</span> <span class="n">f</span><span class="o">.</span><span class="n">set</span><span class="p">({</span><span class="s2">&quot;area_km2&quot;</span><span class="p">:</span> <span class="n">f</span><span class="o">.</span><span class="n">area</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">divide</span><span class="p">(</span><span class="mf">1e6</span><span class="p">)</span><span class="o">.</span><span class="n">round</span><span class="p">()}))</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.vec_area_mi2" class="doc doc-heading">
<code class="highlight language-python"><span class="n">vec_area_mi2</span><span class="p">(</span><span class="n">fc</span><span class="p">)</span></code>


<a href="#geemap.common.vec_area_mi2" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Calculate the area (square mile) of each each feature in a feature collection.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>fc</code></td>
        <td><code>object</code></td>
        <td><p>The feature collection to compute the area.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>object</code></td>
      <td><p>ee.FeatureCollection</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">vec_area_mi2</span><span class="p">(</span><span class="n">fc</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Calculate the area (square mile) of each each feature in a feature collection.</span>

<span class="sd">    Args:</span>
<span class="sd">        fc (object): The feature collection to compute the area.</span>

<span class="sd">    Returns:</span>
<span class="sd">        object: ee.FeatureCollection</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">fc</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">f</span><span class="p">:</span> <span class="n">f</span><span class="o">.</span><span class="n">set</span><span class="p">({</span><span class="s2">&quot;area_mi2&quot;</span><span class="p">:</span> <span class="n">f</span><span class="o">.</span><span class="n">area</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">divide</span><span class="p">(</span><span class="mf">2.59e6</span><span class="p">)</span><span class="o">.</span><span class="n">round</span><span class="p">()}))</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.vector_centroids" class="doc doc-heading">
<code class="highlight language-python"><span class="n">vector_centroids</span><span class="p">(</span><span class="n">ee_object</span><span class="p">)</span></code>


<a href="#geemap.common.vector_centroids" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Returns the centroids of an ee.FeatureCollection.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>ee_object</code></td>
        <td><code>ee.FeatureCollection</code></td>
        <td><p>The ee.FeatureCollection to get the centroids of.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>TypeError</code></td>
        <td><p>If the ee_object is not an ee.FeatureCollection.</p></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>ee.FeatureCollection</code></td>
      <td><p>The centroids of the ee_object.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">vector_centroids</span><span class="p">(</span><span class="n">ee_object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Returns the centroids of an ee.FeatureCollection.</span>

<span class="sd">    Args:</span>
<span class="sd">        ee_object (ee.FeatureCollection): The ee.FeatureCollection to get the centroids of.</span>

<span class="sd">    Raises:</span>
<span class="sd">        TypeError: If the ee_object is not an ee.FeatureCollection.</span>

<span class="sd">    Returns:</span>
<span class="sd">        ee.FeatureCollection: The centroids of the ee_object.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;The input must be an Earth Engine FeatureCollection.&quot;</span><span class="p">)</span>

    <span class="n">centroids</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">map</span><span class="p">(</span>
        <span class="k">lambda</span> <span class="n">f</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Feature</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">geometry</span><span class="p">()</span><span class="o">.</span><span class="n">centroid</span><span class="p">(</span><span class="mf">0.001</span><span class="p">),</span> <span class="n">f</span><span class="o">.</span><span class="n">toDictionary</span><span class="p">())</span>
    <span class="p">)</span>

    <span class="n">centroids</span> <span class="o">=</span> <span class="n">centroids</span><span class="o">.</span><span class="n">map</span><span class="p">(</span>
        <span class="k">lambda</span> <span class="n">f</span><span class="p">:</span> <span class="n">f</span><span class="o">.</span><span class="n">set</span><span class="p">(</span>
            <span class="p">{</span>
                <span class="s2">&quot;longitude&quot;</span><span class="p">:</span> <span class="n">f</span><span class="o">.</span><span class="n">geometry</span><span class="p">()</span><span class="o">.</span><span class="n">coordinates</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
                <span class="s2">&quot;latitude&quot;</span><span class="p">:</span> <span class="n">f</span><span class="o">.</span><span class="n">geometry</span><span class="p">()</span><span class="o">.</span><span class="n">coordinates</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span>
            <span class="p">}</span>
        <span class="p">)</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="n">centroids</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.vector_styling" class="doc doc-heading">
<code class="highlight language-python"><span class="n">vector_styling</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">column</span><span class="p">,</span> <span class="n">palette</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;000000&#39;</span><span class="p">,</span> <span class="n">colorOpacity</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">pointSize</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">pointShape</span><span class="o">=</span><span class="s1">&#39;circle&#39;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">lineType</span><span class="o">=</span><span class="s1">&#39;solid&#39;</span><span class="p">,</span> <span class="n">fillColorOpacity</span><span class="o">=</span><span class="mf">0.66</span><span class="p">)</span></code>


<a href="#geemap.common.vector_styling" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Add a new property to each feature containing a stylying dictionary.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>ee_object</code></td>
        <td><code>object</code></td>
        <td><p>An ee.FeatureCollection.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>column</code></td>
        <td><code>str</code></td>
        <td><p>The column name to use for styling.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>palette</code></td>
        <td><code>list | dict</code></td>
        <td><p>The palette (e.g., list of colors or a dict containing label and color pairs) to use for styling.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>color</code></td>
        <td><code>str</code></td>
        <td><p>A default color (CSS 3.0 color value e.g. 'FF0000' or 'red') to use for drawing the features. Defaults to "black".</p></td>
        <td><code>&#39;000000&#39;</code></td>
      </tr>
      <tr>
        <td><code>colorOpacity</code></td>
        <td><code>float</code></td>
        <td><p>Opacity between 0-1 of the features. Defaults to 1</p></td>
        <td><code>1.0</code></td>
      </tr>
      <tr>
        <td><code>pointSize</code></td>
        <td><code>int</code></td>
        <td><p>The default size in pixels of the point markers. Defaults to 3.</p></td>
        <td><code>3</code></td>
      </tr>
      <tr>
        <td><code>pointShape</code></td>
        <td><code>str</code></td>
        <td><p>The default shape of the marker to draw at each point location. One of: circle, square, diamond, cross, plus, pentagram, hexagram, triangle, triangle_up, triangle_down, triangle_left, triangle_right, pentagon, hexagon, star5, star6. This argument also supports the following Matlab marker abbreviations: o, s, d, x, +, p, h, ^, v, &lt;, &gt;. Defaults to "circle".</p></td>
        <td><code>&#39;circle&#39;</code></td>
      </tr>
      <tr>
        <td><code>width</code></td>
        <td><code>int</code></td>
        <td><p>The default line width for lines and outlines for polygons and point shapes. Defaults to 1.</p></td>
        <td><code>1</code></td>
      </tr>
      <tr>
        <td><code>lineType</code></td>
        <td><code>str</code></td>
        <td><p>The default line style for lines and outlines of polygons and point shapes. Defaults to 'solid'. One of: solid, dotted, dashed. Defaults to "solid".</p></td>
        <td><code>&#39;solid&#39;</code></td>
      </tr>
      <tr>
        <td><code>fillColorOpacity</code></td>
        <td><code>float</code></td>
        <td><p>Opacity between 0-1 of the fill. Defaults to 0.66. Color of the fill is based on the column name or index in the palette.</p></td>
        <td><code>0.66</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>ValueError</code></td>
        <td><p>The provided column name is invalid.</p></td>
      </tr>
      <tr>
        <td><code>TypeError</code></td>
        <td><p>The provided palette is invalid.</p></td>
      </tr>
      <tr>
        <td><code>TypeError</code></td>
        <td><p>The provided ee_object is not an ee.FeatureCollection.</p></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>object</code></td>
      <td><p>An ee.FeatureCollection containing the styling attribute.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">vector_styling</span><span class="p">(</span>
    <span class="n">ee_object</span><span class="p">,</span>
    <span class="n">column</span><span class="p">,</span>
    <span class="n">palette</span><span class="p">,</span>
    <span class="n">color</span><span class="o">=</span><span class="s2">&quot;000000&quot;</span><span class="p">,</span>
    <span class="n">colorOpacity</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
    <span class="n">pointSize</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
    <span class="n">pointShape</span><span class="o">=</span><span class="s2">&quot;circle&quot;</span><span class="p">,</span>
    <span class="n">width</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
    <span class="n">lineType</span><span class="o">=</span><span class="s2">&quot;solid&quot;</span><span class="p">,</span>
    <span class="n">fillColorOpacity</span><span class="o">=</span><span class="mf">0.66</span><span class="p">,</span>
<span class="p">):</span>

    <span class="sd">&quot;&quot;&quot;Add a new property to each feature containing a stylying dictionary.</span>

<span class="sd">    Args:</span>
<span class="sd">        ee_object (object): An ee.FeatureCollection.</span>
<span class="sd">        column (str): The column name to use for styling.</span>
<span class="sd">        palette (list | dict): The palette (e.g., list of colors or a dict containing label and color pairs) to use for styling.</span>
<span class="sd">        color (str, optional): A default color (CSS 3.0 color value e.g. &#39;FF0000&#39; or &#39;red&#39;) to use for drawing the features. Defaults to &quot;black&quot;.</span>
<span class="sd">        colorOpacity (float, optional): Opacity between 0-1 of the features. Defaults to 1</span>
<span class="sd">        pointSize (int, optional): The default size in pixels of the point markers. Defaults to 3.</span>
<span class="sd">        pointShape (str, optional): The default shape of the marker to draw at each point location. One of: circle, square, diamond, cross, plus, pentagram, hexagram, triangle, triangle_up, triangle_down, triangle_left, triangle_right, pentagon, hexagon, star5, star6. This argument also supports the following Matlab marker abbreviations: o, s, d, x, +, p, h, ^, v, &lt;, &gt;. Defaults to &quot;circle&quot;.</span>
<span class="sd">        width (int, optional): The default line width for lines and outlines for polygons and point shapes. Defaults to 1.</span>
<span class="sd">        lineType (str, optional): The default line style for lines and outlines of polygons and point shapes. Defaults to &#39;solid&#39;. One of: solid, dotted, dashed. Defaults to &quot;solid&quot;.</span>
<span class="sd">        fillColorOpacity (float, optional): Opacity between 0-1 of the fill. Defaults to 0.66. Color of the fill is based on the column name or index in the palette.</span>
<span class="sd">    Raises:</span>
<span class="sd">        ValueError: The provided column name is invalid.</span>
<span class="sd">        TypeError: The provided palette is invalid.</span>
<span class="sd">        TypeError: The provided ee_object is not an ee.FeatureCollection.</span>

<span class="sd">    Returns:</span>
<span class="sd">        object: An ee.FeatureCollection containing the styling attribute.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span> <span class="nn">box</span> <span class="kn">import</span> <span class="n">Box</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">):</span>

        <span class="n">prop_names</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Feature</span><span class="p">(</span><span class="n">ee_object</span><span class="o">.</span><span class="n">first</span><span class="p">())</span><span class="o">.</span><span class="n">propertyNames</span><span class="p">()</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()</span>
        <span class="n">arr</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">aggregate_array</span><span class="p">(</span><span class="n">column</span><span class="p">)</span><span class="o">.</span><span class="n">distinct</span><span class="p">()</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">column</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">prop_names</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;The column name must of one of </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">prop_names</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">palette</span><span class="p">,</span> <span class="n">Box</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">palette</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">palette</span><span class="p">[</span><span class="s2">&quot;default&quot;</span><span class="p">])</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The provided palette is invalid.&quot;</span><span class="p">)</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">palette</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">):</span>
            <span class="n">palette</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">palette</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">palette</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="n">values</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">arr</span><span class="o">.</span><span class="n">getInfo</span><span class="p">())</span>
            <span class="n">labels</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">palette</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">all</span><span class="p">(</span><span class="n">elem</span> <span class="ow">in</span> <span class="n">values</span> <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="n">labels</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;The keys of the palette must contain the following elements: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">values</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">colors</span> <span class="o">=</span> <span class="p">[</span><span class="n">palette</span><span class="p">[</span><span class="n">value</span><span class="p">]</span> <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">values</span><span class="p">]</span>
                <span class="n">palette</span> <span class="o">=</span> <span class="n">colors</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">palette</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;The palette must be a list.&quot;</span><span class="p">)</span>

        <span class="n">colors</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">List</span><span class="p">(</span>
            <span class="p">[</span>
                <span class="n">color</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="nb">hex</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">fillColorOpacity</span> <span class="o">*</span> <span class="mi">255</span><span class="p">)))[</span><span class="mi">2</span><span class="p">:]</span><span class="o">.</span><span class="n">zfill</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">color</span> <span class="ow">in</span> <span class="n">palette</span>
            <span class="p">]</span>
        <span class="p">)</span>
        <span class="n">fc</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">f</span><span class="p">:</span> <span class="n">f</span><span class="o">.</span><span class="n">set</span><span class="p">({</span><span class="s2">&quot;styleIndex&quot;</span><span class="p">:</span> <span class="n">arr</span><span class="o">.</span><span class="n">indexOf</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">column</span><span class="p">))}))</span>
        <span class="n">step</span> <span class="o">=</span> <span class="n">arr</span><span class="o">.</span><span class="n">size</span><span class="p">()</span><span class="o">.</span><span class="n">divide</span><span class="p">(</span><span class="n">colors</span><span class="o">.</span><span class="n">size</span><span class="p">())</span><span class="o">.</span><span class="n">ceil</span><span class="p">()</span>
        <span class="n">fc</span> <span class="o">=</span> <span class="n">fc</span><span class="o">.</span><span class="n">map</span><span class="p">(</span>
            <span class="k">lambda</span> <span class="n">f</span><span class="p">:</span> <span class="n">f</span><span class="o">.</span><span class="n">set</span><span class="p">(</span>
                <span class="p">{</span>
                    <span class="s2">&quot;style&quot;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="s2">&quot;color&quot;</span><span class="p">:</span> <span class="n">color</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="nb">hex</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">colorOpacity</span> <span class="o">*</span> <span class="mi">255</span><span class="p">)))[</span><span class="mi">2</span><span class="p">:]</span><span class="o">.</span><span class="n">zfill</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span>
                        <span class="s2">&quot;pointSize&quot;</span><span class="p">:</span> <span class="n">pointSize</span><span class="p">,</span>
                        <span class="s2">&quot;pointShape&quot;</span><span class="p">:</span> <span class="n">pointShape</span><span class="p">,</span>
                        <span class="s2">&quot;width&quot;</span><span class="p">:</span> <span class="n">width</span><span class="p">,</span>
                        <span class="s2">&quot;lineType&quot;</span><span class="p">:</span> <span class="n">lineType</span><span class="p">,</span>
                        <span class="s2">&quot;fillColor&quot;</span><span class="p">:</span> <span class="n">colors</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                            <span class="n">ee</span><span class="o">.</span><span class="n">Number</span><span class="p">(</span>
                                <span class="n">ee</span><span class="o">.</span><span class="n">Number</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;styleIndex&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">divide</span><span class="p">(</span><span class="n">step</span><span class="p">)</span>
                            <span class="p">)</span><span class="o">.</span><span class="n">floor</span><span class="p">()</span>
                        <span class="p">),</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">)</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="n">fc</span>

    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;The ee_object must be an ee.FeatureCollection.&quot;</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.vector_to_ee" class="doc doc-heading">
<code class="highlight language-python"><span class="n">vector_to_ee</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">bbox</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">rows</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">geodesic</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.common.vector_to_ee" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Converts any geopandas-supported vector dataset to ee.FeatureCollection.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>filename</code></td>
        <td><code>str</code></td>
        <td><p>Either the absolute or relative path to the file or URL to be opened, or any object with a read() method (such as an open file or StringIO).</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>bbox</code></td>
        <td><code>tuple | GeoDataFrame or GeoSeries | shapely Geometry</code></td>
        <td><p>Filter features by given bounding box, GeoSeries, GeoDataFrame or a shapely geometry. CRS mis-matches are resolved if given a GeoSeries or GeoDataFrame. Cannot be used with mask. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>mask</code></td>
        <td><code>dict | GeoDataFrame or GeoSeries | shapely Geometry</code></td>
        <td><p>Filter for features that intersect with the given dict-like geojson geometry, GeoSeries, GeoDataFrame or shapely geometry. CRS mis-matches are resolved if given a GeoSeries or GeoDataFrame. Cannot be used with bbox. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>rows</code></td>
        <td><code>int or slice</code></td>
        <td><p>Load in specific rows by passing an integer (first n rows) or a slice() object.. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>geodesic</code></td>
        <td><code>bool</code></td>
        <td><p>Whether line segments should be interpreted as spherical geodesics. If false, indicates that line segments should be interpreted as planar lines in the specified CRS. If absent, defaults to true if the CRS is geographic (including the default EPSG:4326), or to false if the CRS is projected.</p></td>
        <td><code>True</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>ee.FeatureCollection</code></td>
      <td><p>Earth Engine FeatureCollection.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">vector_to_ee</span><span class="p">(</span>
    <span class="n">filename</span><span class="p">,</span>
    <span class="n">bbox</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">mask</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">rows</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">geodesic</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Converts any geopandas-supported vector dataset to ee.FeatureCollection.</span>

<span class="sd">    Args:</span>
<span class="sd">        filename (str): Either the absolute or relative path to the file or URL to be opened, or any object with a read() method (such as an open file or StringIO).</span>
<span class="sd">        bbox (tuple | GeoDataFrame or GeoSeries | shapely Geometry, optional): Filter features by given bounding box, GeoSeries, GeoDataFrame or a shapely geometry. CRS mis-matches are resolved if given a GeoSeries or GeoDataFrame. Cannot be used with mask. Defaults to None.</span>
<span class="sd">        mask (dict | GeoDataFrame or GeoSeries | shapely Geometry, optional): Filter for features that intersect with the given dict-like geojson geometry, GeoSeries, GeoDataFrame or shapely geometry. CRS mis-matches are resolved if given a GeoSeries or GeoDataFrame. Cannot be used with bbox. Defaults to None.</span>
<span class="sd">        rows (int or slice, optional): Load in specific rows by passing an integer (first n rows) or a slice() object.. Defaults to None.</span>
<span class="sd">        geodesic (bool, optional): Whether line segments should be interpreted as spherical geodesics. If false, indicates that line segments should be interpreted as planar lines in the specified CRS. If absent, defaults to true if the CRS is geographic (including the default EPSG:4326), or to false if the CRS is projected.</span>

<span class="sd">    Returns:</span>
<span class="sd">        ee.FeatureCollection: Earth Engine FeatureCollection.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">geojson</span> <span class="o">=</span> <span class="n">vector_to_geojson</span><span class="p">(</span>
        <span class="n">filename</span><span class="p">,</span> <span class="n">bbox</span><span class="o">=</span><span class="n">bbox</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="n">mask</span><span class="p">,</span> <span class="n">rows</span><span class="o">=</span><span class="n">rows</span><span class="p">,</span> <span class="n">epsg</span><span class="o">=</span><span class="s2">&quot;4326&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="n">geojson_to_ee</span><span class="p">(</span><span class="n">geojson</span><span class="p">,</span> <span class="n">geodesic</span><span class="o">=</span><span class="n">geodesic</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.vector_to_geojson" class="doc doc-heading">
<code class="highlight language-python"><span class="n">vector_to_geojson</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">out_geojson</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">bbox</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">rows</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">epsg</span><span class="o">=</span><span class="s1">&#39;4326&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.common.vector_to_geojson" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Converts any geopandas-supported vector dataset to GeoJSON.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>filename</code></td>
        <td><code>str</code></td>
        <td><p>Either the absolute or relative path to the file or URL to be opened, or any object with a read() method (such as an open file or StringIO).</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>out_geojson</code></td>
        <td><code>str</code></td>
        <td><p>The file path to the output GeoJSON. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>bbox</code></td>
        <td><code>tuple | GeoDataFrame or GeoSeries | shapely Geometry</code></td>
        <td><p>Filter features by given bounding box, GeoSeries, GeoDataFrame or a shapely geometry. CRS mis-matches are resolved if given a GeoSeries or GeoDataFrame. Cannot be used with mask. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>mask</code></td>
        <td><code>dict | GeoDataFrame or GeoSeries | shapely Geometry</code></td>
        <td><p>Filter for features that intersect with the given dict-like geojson geometry, GeoSeries, GeoDataFrame or shapely geometry. CRS mis-matches are resolved if given a GeoSeries or GeoDataFrame. Cannot be used with bbox. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>rows</code></td>
        <td><code>int or slice</code></td>
        <td><p>Load in specific rows by passing an integer (first n rows) or a slice() object.. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>epsg</code></td>
        <td><code>str</code></td>
        <td><p>The EPSG number to convert to. Defaults to "4326".</p></td>
        <td><code>&#39;4326&#39;</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>ValueError</code></td>
        <td><p>When the output file path is invalid.</p></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>dict</code></td>
      <td><p>A dictionary containing the GeoJSON.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">vector_to_geojson</span><span class="p">(</span>
    <span class="n">filename</span><span class="p">,</span> <span class="n">out_geojson</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">bbox</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">rows</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">epsg</span><span class="o">=</span><span class="s2">&quot;4326&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Converts any geopandas-supported vector dataset to GeoJSON.</span>

<span class="sd">    Args:</span>
<span class="sd">        filename (str): Either the absolute or relative path to the file or URL to be opened, or any object with a read() method (such as an open file or StringIO).</span>
<span class="sd">        out_geojson (str, optional): The file path to the output GeoJSON. Defaults to None.</span>
<span class="sd">        bbox (tuple | GeoDataFrame or GeoSeries | shapely Geometry, optional): Filter features by given bounding box, GeoSeries, GeoDataFrame or a shapely geometry. CRS mis-matches are resolved if given a GeoSeries or GeoDataFrame. Cannot be used with mask. Defaults to None.</span>
<span class="sd">        mask (dict | GeoDataFrame or GeoSeries | shapely Geometry, optional): Filter for features that intersect with the given dict-like geojson geometry, GeoSeries, GeoDataFrame or shapely geometry. CRS mis-matches are resolved if given a GeoSeries or GeoDataFrame. Cannot be used with bbox. Defaults to None.</span>
<span class="sd">        rows (int or slice, optional): Load in specific rows by passing an integer (first n rows) or a slice() object.. Defaults to None.</span>
<span class="sd">        epsg (str, optional): The EPSG number to convert to. Defaults to &quot;4326&quot;.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: When the output file path is invalid.</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict: A dictionary containing the GeoJSON.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s2">&quot;ignore&quot;</span><span class="p">)</span>
    <span class="n">check_package</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;geopandas&quot;</span><span class="p">,</span> <span class="n">URL</span><span class="o">=</span><span class="s2">&quot;https://geopandas.org&quot;</span><span class="p">)</span>
    <span class="kn">import</span> <span class="nn">geopandas</span> <span class="k">as</span> <span class="nn">gpd</span>
    <span class="kn">import</span> <span class="nn">fiona</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">filename</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;http&quot;</span><span class="p">):</span>
        <span class="n">filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">filename</span> <span class="o">=</span> <span class="n">download_file</span><span class="p">(</span><span class="n">github_raw_url</span><span class="p">(</span><span class="n">filename</span><span class="p">))</span>
    <span class="n">ext</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">filename</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">ext</span> <span class="o">==</span> <span class="s2">&quot;.kml&quot;</span><span class="p">:</span>
        <span class="n">fiona</span><span class="o">.</span><span class="n">drvsupport</span><span class="o">.</span><span class="n">supported_drivers</span><span class="p">[</span><span class="s2">&quot;KML&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;rw&quot;</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span>
            <span class="n">filename</span><span class="p">,</span> <span class="n">bbox</span><span class="o">=</span><span class="n">bbox</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="n">mask</span><span class="p">,</span> <span class="n">rows</span><span class="o">=</span><span class="n">rows</span><span class="p">,</span> <span class="n">driver</span><span class="o">=</span><span class="s2">&quot;KML&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">bbox</span><span class="o">=</span><span class="n">bbox</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="n">mask</span><span class="p">,</span> <span class="n">rows</span><span class="o">=</span><span class="n">rows</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="n">gdf</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">to_crs</span><span class="p">(</span><span class="n">epsg</span><span class="o">=</span><span class="n">epsg</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">out_geojson</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">out_geojson</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.geojson&quot;</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The output file must have a geojson file extension.&quot;</span><span class="p">)</span>

        <span class="n">out_geojson</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">out_geojson</span><span class="p">)</span>
        <span class="n">out_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">out_geojson</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">out_dir</span><span class="p">):</span>
            <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">out_dir</span><span class="p">)</span>

        <span class="n">gdf</span><span class="o">.</span><span class="n">to_file</span><span class="p">(</span><span class="n">out_geojson</span><span class="p">,</span> <span class="n">driver</span><span class="o">=</span><span class="s2">&quot;GeoJSON&quot;</span><span class="p">)</span>

    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">gdf</span><span class="o">.</span><span class="n">__geo_interface__</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.view_lidar" class="doc doc-heading">
<code class="highlight language-python"><span class="n">view_lidar</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;terrain&#39;</span><span class="p">,</span> <span class="n">backend</span><span class="o">=</span><span class="s1">&#39;pyvista&#39;</span><span class="p">,</span> <span class="n">background</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.common.view_lidar" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>View LiDAR data in 3D.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>filename</code></td>
        <td><code>str</code></td>
        <td><p>The filepath to the LiDAR data.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>cmap</code></td>
        <td><code>str</code></td>
        <td><p>The colormap to use. Defaults to "terrain". cmap currently does not work for the open3d backend.</p></td>
        <td><code>&#39;terrain&#39;</code></td>
      </tr>
      <tr>
        <td><code>backend</code></td>
        <td><code>str</code></td>
        <td><p>The plotting backend to use, can be pyvista, ipygany, panel, and open3d. Defaults to "pyvista".</p></td>
        <td><code>&#39;pyvista&#39;</code></td>
      </tr>
      <tr>
        <td><code>background</code></td>
        <td><code>str</code></td>
        <td><p>The background color to use. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>FileNotFoundError</code></td>
        <td><p>If the file does not exist.</p></td>
      </tr>
      <tr>
        <td><code>ValueError</code></td>
        <td><p>If the backend is not supported.</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">view_lidar</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s2">&quot;terrain&quot;</span><span class="p">,</span> <span class="n">backend</span><span class="o">=</span><span class="s2">&quot;pyvista&quot;</span><span class="p">,</span> <span class="n">background</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;View LiDAR data in 3D.</span>

<span class="sd">    Args:</span>
<span class="sd">        filename (str): The filepath to the LiDAR data.</span>
<span class="sd">        cmap (str, optional): The colormap to use. Defaults to &quot;terrain&quot;. cmap currently does not work for the open3d backend.</span>
<span class="sd">        backend (str, optional): The plotting backend to use, can be pyvista, ipygany, panel, and open3d. Defaults to &quot;pyvista&quot;.</span>
<span class="sd">        background (str, optional): The background color to use. Defaults to None.</span>

<span class="sd">    Raises:</span>
<span class="sd">        FileNotFoundError: If the file does not exist.</span>
<span class="sd">        ValueError: If the backend is not supported.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">in_colab_shell</span><span class="p">():</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The view_lidar() function is not supported in Colab.&quot;</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s2">&quot;ignore&quot;</span><span class="p">)</span>
    <span class="n">filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">filename</span><span class="si">}</span><span class="s2"> does not exist.&quot;</span><span class="p">)</span>

    <span class="n">backend</span> <span class="o">=</span> <span class="n">backend</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">backend</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;pyvista&quot;</span><span class="p">,</span> <span class="s2">&quot;ipygany&quot;</span><span class="p">,</span> <span class="s2">&quot;panel&quot;</span><span class="p">]:</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="kn">import</span> <span class="nn">pyntcloud</span>
        <span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span>
                <span class="s2">&quot;The pyvista and pyntcloud packages are required for this function. Use pip install geemap[lidar] to install them.&quot;</span>
            <span class="p">)</span>
            <span class="k">return</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">backend</span> <span class="o">==</span> <span class="s2">&quot;pyvista&quot;</span><span class="p">:</span>
                <span class="n">backend</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">if</span> <span class="n">backend</span> <span class="o">==</span> <span class="s2">&quot;ipygany&quot;</span><span class="p">:</span>
                <span class="n">cmap</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">pyntcloud</span><span class="o">.</span><span class="n">PyntCloud</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
            <span class="n">mesh</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">to_instance</span><span class="p">(</span><span class="s2">&quot;pyvista&quot;</span><span class="p">,</span> <span class="n">mesh</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
            <span class="n">mesh</span> <span class="o">=</span> <span class="n">mesh</span><span class="o">.</span><span class="n">elevation</span><span class="p">()</span>
            <span class="n">mesh</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
                <span class="n">scalars</span><span class="o">=</span><span class="s2">&quot;Elevation&quot;</span><span class="p">,</span>
                <span class="n">cmap</span><span class="o">=</span><span class="n">cmap</span><span class="p">,</span>
                <span class="n">jupyter_backend</span><span class="o">=</span><span class="n">backend</span><span class="p">,</span>
                <span class="n">background</span><span class="o">=</span><span class="n">background</span><span class="p">,</span>
                <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Something went wrong.&quot;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
            <span class="k">return</span>

    <span class="k">elif</span> <span class="n">backend</span> <span class="o">==</span> <span class="s2">&quot;open3d&quot;</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="kn">import</span> <span class="nn">laspy</span>
            <span class="kn">import</span> <span class="nn">open3d</span> <span class="k">as</span> <span class="nn">o3d</span>
            <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
        <span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span>
                <span class="s2">&quot;The laspy and open3d packages are required for this function. Use pip install laspy open3d to install them.&quot;</span>
            <span class="p">)</span>
            <span class="k">return</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">las</span> <span class="o">=</span> <span class="n">laspy</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
            <span class="n">point_data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">stack</span><span class="p">([</span><span class="n">las</span><span class="o">.</span><span class="n">X</span><span class="p">,</span> <span class="n">las</span><span class="o">.</span><span class="n">Y</span><span class="p">,</span> <span class="n">las</span><span class="o">.</span><span class="n">Z</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">transpose</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
            <span class="n">geom</span> <span class="o">=</span> <span class="n">o3d</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">PointCloud</span><span class="p">()</span>
            <span class="n">geom</span><span class="o">.</span><span class="n">points</span> <span class="o">=</span> <span class="n">o3d</span><span class="o">.</span><span class="n">utility</span><span class="o">.</span><span class="n">Vector3dVector</span><span class="p">(</span><span class="n">point_data</span><span class="p">)</span>
            <span class="c1"># geom.colors =  o3d.utility.Vector3dVector(colors)  # need to add colors. A list in the form of [[r,g,b], [r,g,b]] with value range 0-1. https://github.com/isl-org/Open3D/issues/614</span>
            <span class="n">o3d</span><span class="o">.</span><span class="n">visualization</span><span class="o">.</span><span class="n">draw_geometries</span><span class="p">([</span><span class="n">geom</span><span class="p">],</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Something went wrong.&quot;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
            <span class="k">return</span>

    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">backend</span><span class="si">}</span><span class="s2"> is not a valid backend.&quot;</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.vis_to_qml" class="doc doc-heading">
<code class="highlight language-python"><span class="n">vis_to_qml</span><span class="p">(</span><span class="n">ee_class_table</span><span class="p">,</span> <span class="n">out_qml</span><span class="p">)</span></code>


<a href="#geemap.common.vis_to_qml" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Create a QGIS Layer Style (.qml) based on an Earth Engine class table from the Earth Engine Data Catalog page
such as https://developers.google.com/earth-engine/datasets/catalog/MODIS_051_MCD12Q1</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>ee_class_table</code></td>
        <td><code>str</code></td>
        <td><p>An Earth Engine class table with triple quotes.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>out_qml</code></td>
        <td><code>str</code></td>
        <td><p>File path to the output QGIS Layer Style (.qml).</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">vis_to_qml</span><span class="p">(</span><span class="n">ee_class_table</span><span class="p">,</span> <span class="n">out_qml</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Create a QGIS Layer Style (.qml) based on an Earth Engine class table from the Earth Engine Data Catalog page</span>
<span class="sd">    such as https://developers.google.com/earth-engine/datasets/catalog/MODIS_051_MCD12Q1</span>

<span class="sd">    Args:</span>
<span class="sd">        ee_class_table (str): An Earth Engine class table with triple quotes.</span>
<span class="sd">        out_qml (str): File path to the output QGIS Layer Style (.qml).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">pkg_resources</span>

    <span class="n">pkg_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">pkg_resources</span><span class="o">.</span><span class="n">resource_filename</span><span class="p">(</span><span class="s2">&quot;geemap&quot;</span><span class="p">,</span> <span class="s2">&quot;geemap.py&quot;</span><span class="p">))</span>
    <span class="n">data_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">pkg_dir</span><span class="p">,</span> <span class="s2">&quot;data&quot;</span><span class="p">)</span>
    <span class="n">template_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">data_dir</span><span class="p">,</span> <span class="s2">&quot;template&quot;</span><span class="p">)</span>
    <span class="n">qml_template</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">template_dir</span><span class="p">,</span> <span class="s2">&quot;NLCD.qml&quot;</span><span class="p">)</span>

    <span class="n">out_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">out_qml</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">out_dir</span><span class="p">):</span>
        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">out_dir</span><span class="p">)</span>

    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">qml_template</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">lines</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">readlines</span><span class="p">()</span>
        <span class="n">header</span> <span class="o">=</span> <span class="n">lines</span><span class="p">[:</span><span class="mi">31</span><span class="p">]</span>
        <span class="n">footer</span> <span class="o">=</span> <span class="n">lines</span><span class="p">[</span><span class="mi">51</span><span class="p">:]</span>

    <span class="n">entries</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">ee_class_table</span> <span class="o">=</span> <span class="n">ee_class_table</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="n">lines</span> <span class="o">=</span> <span class="n">ee_class_table</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)[</span><span class="mi">1</span><span class="p">:]</span>

        <span class="k">if</span> <span class="n">lines</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;Value</span><span class="se">\t</span><span class="s2">Color</span><span class="se">\t</span><span class="s2">Description&quot;</span><span class="p">:</span>
            <span class="n">lines</span> <span class="o">=</span> <span class="n">lines</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>

        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">lines</span><span class="p">:</span>
            <span class="n">items</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">items</span> <span class="o">=</span> <span class="p">[</span><span class="n">item</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">items</span><span class="p">]</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">items</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">color</span> <span class="o">=</span> <span class="n">items</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">label</span> <span class="o">=</span> <span class="n">items</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
            <span class="n">entry</span> <span class="o">=</span> <span class="s1">&#39;        &lt;paletteEntry alpha=&quot;255&quot; color=&quot;#</span><span class="si">{}</span><span class="s1">&quot; value=&quot;</span><span class="si">{}</span><span class="s1">&quot; label=&quot;</span><span class="si">{}</span><span class="s1">&quot;/&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="n">color</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">label</span>
            <span class="p">)</span>
            <span class="n">entries</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">entry</span><span class="p">)</span>

        <span class="n">out_lines</span> <span class="o">=</span> <span class="n">header</span> <span class="o">+</span> <span class="n">entries</span> <span class="o">+</span> <span class="n">footer</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">out_qml</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">f</span><span class="o">.</span><span class="n">writelines</span><span class="p">(</span><span class="n">out_lines</span><span class="p">)</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.write_lidar" class="doc doc-heading">
<code class="highlight language-python"><span class="n">write_lidar</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">destination</span><span class="p">,</span> <span class="n">do_compress</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">laz_backend</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


<a href="#geemap.common.write_lidar" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Writes to a stream or file.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>source</code></td>
        <td><code>str | laspy.lasdatas.base.LasBase</code></td>
        <td><p>The source data to be written.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>destination</code></td>
        <td><code>str</code></td>
        <td><p>The destination filepath.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>do_compress</code></td>
        <td><code>bool</code></td>
        <td><p>Flags to indicate if you want to compress the data. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>laz_backend</code></td>
        <td><code>str</code></td>
        <td><p>The laz backend to use. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">write_lidar</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">destination</span><span class="p">,</span> <span class="n">do_compress</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">laz_backend</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Writes to a stream or file.</span>

<span class="sd">    Args:</span>
<span class="sd">        source (str | laspy.lasdatas.base.LasBase): The source data to be written.</span>
<span class="sd">        destination (str): The destination filepath.</span>
<span class="sd">        do_compress (bool, optional): Flags to indicate if you want to compress the data. Defaults to None.</span>
<span class="sd">        laz_backend (str, optional): The laz backend to use. Defaults to None.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="kn">import</span> <span class="nn">laspy</span>
    <span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span>
            <span class="s2">&quot;The laspy package is required for this function. Use `pip install laspy[lazrs,laszip]` to install it.&quot;</span>
        <span class="p">)</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">source</span> <span class="o">=</span> <span class="n">read_lidar</span><span class="p">(</span><span class="n">source</span><span class="p">)</span>

    <span class="n">source</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">destination</span><span class="p">,</span> <span class="n">do_compress</span><span class="o">=</span><span class="n">do_compress</span><span class="p">,</span> <span class="n">laz_backend</span><span class="o">=</span><span class="n">laz_backend</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.xy_to_points" class="doc doc-heading">
<code class="highlight language-python"><span class="n">xy_to_points</span><span class="p">(</span><span class="n">in_csv</span><span class="p">,</span> <span class="n">latitude</span><span class="o">=</span><span class="s1">&#39;latitude&#39;</span><span class="p">,</span> <span class="n">longitude</span><span class="o">=</span><span class="s1">&#39;longitude&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span></code>


<a href="#geemap.common.xy_to_points" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Converts a csv containing points (latitude and longitude) into an ee.FeatureCollection.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>in_csv</code></td>
        <td><code>str</code></td>
        <td><p>File path or HTTP URL to the input csv file. For example, https://raw.githubusercontent.com/giswqs/data/main/world/world_cities.csv</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>latitude</code></td>
        <td><code>str</code></td>
        <td><p>Column name for the latitude column. Defaults to 'latitude'.</p></td>
        <td><code>&#39;latitude&#39;</code></td>
      </tr>
      <tr>
        <td><code>longitude</code></td>
        <td><code>str</code></td>
        <td><p>Column name for the longitude column. Defaults to 'longitude'.</p></td>
        <td><code>&#39;longitude&#39;</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>ee.FeatureCollection</code></td>
      <td><p>The ee.FeatureCollection containing the points converted from the input csv.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">xy_to_points</span><span class="p">(</span><span class="n">in_csv</span><span class="p">,</span> <span class="n">latitude</span><span class="o">=</span><span class="s2">&quot;latitude&quot;</span><span class="p">,</span> <span class="n">longitude</span><span class="o">=</span><span class="s2">&quot;longitude&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Converts a csv containing points (latitude and longitude) into an ee.FeatureCollection.</span>

<span class="sd">    Args:</span>
<span class="sd">        in_csv (str): File path or HTTP URL to the input csv file. For example, https://raw.githubusercontent.com/giswqs/data/main/world/world_cities.csv</span>
<span class="sd">        latitude (str, optional): Column name for the latitude column. Defaults to &#39;latitude&#39;.</span>
<span class="sd">        longitude (str, optional): Column name for the longitude column. Defaults to &#39;longitude&#39;.</span>

<span class="sd">    Returns:</span>
<span class="sd">        ee.FeatureCollection: The ee.FeatureCollection containing the points converted from the input csv.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">geojson</span> <span class="o">=</span> <span class="n">csv_to_geojson</span><span class="p">(</span><span class="n">in_csv</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">latitude</span><span class="p">,</span> <span class="n">longitude</span><span class="p">,</span> <span class="n">encoding</span><span class="p">)</span>
    <span class="n">fc</span> <span class="o">=</span> <span class="n">geojson_to_ee</span><span class="p">(</span><span class="n">geojson</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">fc</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.zonal_statistics" class="doc doc-heading">
<code class="highlight language-python"><span class="n">zonal_statistics</span><span class="p">(</span><span class="n">in_value_raster</span><span class="p">,</span> <span class="n">in_zone_vector</span><span class="p">,</span> <span class="n">out_file_path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">statistics_type</span><span class="o">=</span><span class="s1">&#39;MEAN&#39;</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">crs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">tile_scale</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">return_fc</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="n">proxies</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.common.zonal_statistics" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Summarizes the values of a raster within the zones of another dataset and exports the results as a csv, shp, json, kml, or kmz.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>in_value_raster</code></td>
        <td><code>object</code></td>
        <td><p>An ee.Image or ee.ImageCollection that contains the values on which to calculate a statistic.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>in_zone_vector</code></td>
        <td><code>object</code></td>
        <td><p>An ee.FeatureCollection that defines the zones.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>out_file_path</code></td>
        <td><code>str</code></td>
        <td><p>Output file path that will contain the summary of the values in each zone. The file type can be: csv, shp, json, kml, kmz</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>statistics_type</code></td>
        <td><code>str</code></td>
        <td><p>Statistic type to be calculated. Defaults to 'MEAN'. For 'HIST', you can provide three parameters: max_buckets, min_bucket_width, and max_raw. For 'FIXED_HIST', you must provide three parameters: hist_min, hist_max, and hist_steps.</p></td>
        <td><code>&#39;MEAN&#39;</code></td>
      </tr>
      <tr>
        <td><code>scale</code></td>
        <td><code>float</code></td>
        <td><p>A nominal scale in meters of the projection to work in. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>crs</code></td>
        <td><code>str</code></td>
        <td><p>The projection to work in. If unspecified, the projection of the image's first band is used. If specified in addition to scale, rescaled to the specified scale. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>tile_scale</code></td>
        <td><code>float</code></td>
        <td><p>A scaling factor used to reduce aggregation tile size; using a larger tileScale (e.g. 2 or 4) may enable computations that run out of memory with the default. Defaults to 1.0.</p></td>
        <td><code>1.0</code></td>
      </tr>
      <tr>
        <td><code>verbose</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to print descriptive text when the programming is running. Default to True.</p></td>
        <td><code>True</code></td>
      </tr>
      <tr>
        <td><code>return_fc</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to return the results as an ee.FeatureCollection. Defaults to False.</p></td>
        <td><code>False</code></td>
      </tr>
      <tr>
        <td><code>timeout</code></td>
        <td><code>int</code></td>
        <td><p>Timeout in seconds. Default to 300.</p></td>
        <td><code>300</code></td>
      </tr>
      <tr>
        <td><code>proxies</code></td>
        <td><code>dict</code></td>
        <td><p>A dictionary of proxy servers to use for the request. Default to None.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">zonal_stats</span><span class="p">(</span>
    <span class="n">in_value_raster</span><span class="p">,</span>
    <span class="n">in_zone_vector</span><span class="p">,</span>
    <span class="n">out_file_path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">statistics_type</span><span class="o">=</span><span class="s2">&quot;MEAN&quot;</span><span class="p">,</span>
    <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">crs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">tile_scale</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
    <span class="n">return_fc</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">timeout</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span>
    <span class="n">proxies</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Summarizes the values of a raster within the zones of another dataset and exports the results as a csv, shp, json, kml, or kmz.</span>

<span class="sd">    Args:</span>
<span class="sd">        in_value_raster (object): An ee.Image or ee.ImageCollection that contains the values on which to calculate a statistic.</span>
<span class="sd">        in_zone_vector (object): An ee.FeatureCollection that defines the zones.</span>
<span class="sd">        out_file_path (str): Output file path that will contain the summary of the values in each zone. The file type can be: csv, shp, json, kml, kmz</span>
<span class="sd">        statistics_type (str, optional): Statistic type to be calculated. Defaults to &#39;MEAN&#39;. For &#39;HIST&#39;, you can provide three parameters: max_buckets, min_bucket_width, and max_raw. For &#39;FIXED_HIST&#39;, you must provide three parameters: hist_min, hist_max, and hist_steps.</span>
<span class="sd">        scale (float, optional): A nominal scale in meters of the projection to work in. Defaults to None.</span>
<span class="sd">        crs (str, optional): The projection to work in. If unspecified, the projection of the image&#39;s first band is used. If specified in addition to scale, rescaled to the specified scale. Defaults to None.</span>
<span class="sd">        tile_scale (float, optional): A scaling factor used to reduce aggregation tile size; using a larger tileScale (e.g. 2 or 4) may enable computations that run out of memory with the default. Defaults to 1.0.</span>
<span class="sd">        verbose (bool, optional): Whether to print descriptive text when the programming is running. Default to True.</span>
<span class="sd">        return_fc (bool, optional): Whether to return the results as an ee.FeatureCollection. Defaults to False.</span>
<span class="sd">        timeout (int, optional): Timeout in seconds. Default to 300.</span>
<span class="sd">        proxies (dict, optional): A dictionary of proxy servers to use for the request. Default to None.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">in_value_raster</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">):</span>
        <span class="n">in_value_raster</span> <span class="o">=</span> <span class="n">in_value_raster</span><span class="o">.</span><span class="n">toBands</span><span class="p">()</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">in_value_raster</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The input raster must be an ee.Image.&quot;</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">in_zone_vector</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The input zone data must be an ee.FeatureCollection.&quot;</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="n">out_file_path</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">out_file_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">(),</span> <span class="s2">&quot;zonal_stats.csv&quot;</span><span class="p">)</span>

    <span class="n">allowed_formats</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;csv&quot;</span><span class="p">,</span> <span class="s2">&quot;geojson&quot;</span><span class="p">,</span> <span class="s2">&quot;kml&quot;</span><span class="p">,</span> <span class="s2">&quot;kmz&quot;</span><span class="p">,</span> <span class="s2">&quot;shp&quot;</span><span class="p">]</span>
    <span class="n">filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">out_file_path</span><span class="p">)</span>
    <span class="n">basename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
    <span class="c1"># name = os.path.splitext(basename)[0]</span>
    <span class="n">filetype</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">basename</span><span class="p">)[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">filetype</span> <span class="ow">in</span> <span class="n">allowed_formats</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span>
            <span class="s2">&quot;The file type must be one of the following: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">allowed_formats</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="k">return</span>

    <span class="c1"># Parameters for histogram</span>
    <span class="c1"># The maximum number of buckets to use when building a histogram; will be rounded up to a power of 2.</span>
    <span class="n">max_buckets</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="c1"># The minimum histogram bucket width, or null to allow any power of 2.</span>
    <span class="n">min_bucket_width</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="c1"># The number of values to accumulate before building the initial histogram.</span>
    <span class="n">max_raw</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">hist_min</span> <span class="o">=</span> <span class="mf">1.0</span>  <span class="c1"># The lower (inclusive) bound of the first bucket.</span>
    <span class="n">hist_max</span> <span class="o">=</span> <span class="mf">100.0</span>  <span class="c1"># The upper (exclusive) bound of the last bucket.</span>
    <span class="n">hist_steps</span> <span class="o">=</span> <span class="mi">10</span>  <span class="c1"># The number of buckets to use.</span>

    <span class="k">if</span> <span class="s2">&quot;max_buckets&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="n">max_buckets</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;max_buckets&quot;</span><span class="p">]</span>
    <span class="k">if</span> <span class="s2">&quot;min_bucket_width&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="n">min_bucket_width</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;min_bucket&quot;</span><span class="p">]</span>
    <span class="k">if</span> <span class="s2">&quot;max_raw&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="n">max_raw</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;max_raw&quot;</span><span class="p">]</span>

    <span class="k">if</span> <span class="p">(</span>
        <span class="n">statistics_type</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;FIXED_HIST&quot;</span>
        <span class="ow">and</span> <span class="p">(</span><span class="s2">&quot;hist_min&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
        <span class="ow">and</span> <span class="p">(</span><span class="s2">&quot;hist_max&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
        <span class="ow">and</span> <span class="p">(</span><span class="s2">&quot;hist_steps&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
    <span class="p">):</span>
        <span class="n">hist_min</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;hist_min&quot;</span><span class="p">]</span>
        <span class="n">hist_max</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;hist_max&quot;</span><span class="p">]</span>
        <span class="n">hist_steps</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;hist_steps&quot;</span><span class="p">]</span>
    <span class="k">elif</span> <span class="n">statistics_type</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;FIXED_HIST&quot;</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span>
            <span class="s2">&quot;To use fixedHistogram, please provide these three parameters: hist_min, hist_max, and hist_steps.&quot;</span>
        <span class="p">)</span>
        <span class="k">return</span>

    <span class="n">allowed_statistics</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;COUNT&quot;</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">count</span><span class="p">(),</span>
        <span class="s2">&quot;MEAN&quot;</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">mean</span><span class="p">(),</span>
        <span class="s2">&quot;MEAN_UNWEIGHTED&quot;</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="o">.</span><span class="n">unweighted</span><span class="p">(),</span>
        <span class="s2">&quot;MAXIMUM&quot;</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">max</span><span class="p">(),</span>
        <span class="s2">&quot;MEDIAN&quot;</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">median</span><span class="p">(),</span>
        <span class="s2">&quot;MINIMUM&quot;</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span>
        <span class="s2">&quot;MODE&quot;</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">mode</span><span class="p">(),</span>
        <span class="s2">&quot;STD&quot;</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">stdDev</span><span class="p">(),</span>
        <span class="s2">&quot;MIN_MAX&quot;</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">minMax</span><span class="p">(),</span>
        <span class="s2">&quot;SUM&quot;</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">sum</span><span class="p">(),</span>
        <span class="s2">&quot;VARIANCE&quot;</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">variance</span><span class="p">(),</span>
        <span class="s2">&quot;HIST&quot;</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">histogram</span><span class="p">(</span>
            <span class="n">maxBuckets</span><span class="o">=</span><span class="n">max_buckets</span><span class="p">,</span> <span class="n">minBucketWidth</span><span class="o">=</span><span class="n">min_bucket_width</span><span class="p">,</span> <span class="n">maxRaw</span><span class="o">=</span><span class="n">max_raw</span>
        <span class="p">),</span>
        <span class="s2">&quot;FIXED_HIST&quot;</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">fixedHistogram</span><span class="p">(</span><span class="n">hist_min</span><span class="p">,</span> <span class="n">hist_max</span><span class="p">,</span> <span class="n">hist_steps</span><span class="p">),</span>
        <span class="s2">&quot;COMBINED_COUNT_MEAN&quot;</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">count</span><span class="p">()</span><span class="o">.</span><span class="n">combine</span><span class="p">(</span>
            <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">mean</span><span class="p">(),</span> <span class="n">sharedInputs</span><span class="o">=</span><span class="kc">True</span>
        <span class="p">),</span>
        <span class="s2">&quot;COMBINED_COUNT_MEAN_UNWEIGHTED&quot;</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">count</span><span class="p">()</span><span class="o">.</span><span class="n">combine</span><span class="p">(</span>
            <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="o">.</span><span class="n">unweighted</span><span class="p">(),</span> <span class="n">sharedInputs</span><span class="o">=</span><span class="kc">True</span>
        <span class="p">),</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">statistics_type</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="ow">in</span> <span class="n">allowed_statistics</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
        <span class="nb">print</span><span class="p">(</span>
            <span class="s2">&quot;The statistics type must be one of the following: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">allowed_statistics</span><span class="o">.</span><span class="n">keys</span><span class="p">()))</span>
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="n">scale</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">scale</span> <span class="o">=</span> <span class="n">in_value_raster</span><span class="o">.</span><span class="n">projection</span><span class="p">()</span><span class="o">.</span><span class="n">nominalScale</span><span class="p">()</span><span class="o">.</span><span class="n">multiply</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">verbose</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Computing statistics ...&quot;</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">in_value_raster</span><span class="o">.</span><span class="n">reduceRegions</span><span class="p">(</span>
            <span class="n">collection</span><span class="o">=</span><span class="n">in_zone_vector</span><span class="p">,</span>
            <span class="n">reducer</span><span class="o">=</span><span class="n">allowed_statistics</span><span class="p">[</span><span class="n">statistics_type</span><span class="p">],</span>
            <span class="n">scale</span><span class="o">=</span><span class="n">scale</span><span class="p">,</span>
            <span class="n">crs</span><span class="o">=</span><span class="n">crs</span><span class="p">,</span>
            <span class="n">tileScale</span><span class="o">=</span><span class="n">tile_scale</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">return_fc</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">ee_export_vector</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span> <span class="n">proxies</span><span class="o">=</span><span class="n">proxies</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.zonal_statistics_by_group" class="doc doc-heading">
<code class="highlight language-python"><span class="n">zonal_statistics_by_group</span><span class="p">(</span><span class="n">in_value_raster</span><span class="p">,</span> <span class="n">in_zone_vector</span><span class="p">,</span> <span class="n">out_file_path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">statistics_type</span><span class="o">=</span><span class="s1">&#39;SUM&#39;</span><span class="p">,</span> <span class="n">decimal_places</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">denominator</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">crs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">tile_scale</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">return_fc</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="n">proxies</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.common.zonal_statistics_by_group" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Summarizes the area or percentage of a raster by group within the zones of another dataset and exports the results as a csv, shp, json, kml, or kmz.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>in_value_raster</code></td>
        <td><code>object</code></td>
        <td><p>An integer Image that contains the values on which to calculate area/percentage.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>in_zone_vector</code></td>
        <td><code>object</code></td>
        <td><p>An ee.FeatureCollection that defines the zones.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>out_file_path</code></td>
        <td><code>str</code></td>
        <td><p>Output file path that will contain the summary of the values in each zone. The file type can be: csv, shp, json, kml, kmz</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>statistics_type</code></td>
        <td><code>str</code></td>
        <td><p>Can be either 'SUM' or 'PERCENTAGE' . Defaults to 'SUM'.</p></td>
        <td><code>&#39;SUM&#39;</code></td>
      </tr>
      <tr>
        <td><code>decimal_places</code></td>
        <td><code>int</code></td>
        <td><p>The number of decimal places to use. Defaults to 0.</p></td>
        <td><code>0</code></td>
      </tr>
      <tr>
        <td><code>denominator</code></td>
        <td><code>float</code></td>
        <td><p>To convert area units (e.g., from square meters to square kilometers). Defaults to 1.0.</p></td>
        <td><code>1.0</code></td>
      </tr>
      <tr>
        <td><code>scale</code></td>
        <td><code>float</code></td>
        <td><p>A nominal scale in meters of the projection to work in. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>crs</code></td>
        <td><code>str</code></td>
        <td><p>The projection to work in. If unspecified, the projection of the image's first band is used. If specified in addition to scale, rescaled to the specified scale. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>tile_scale</code></td>
        <td><code>float</code></td>
        <td><p>A scaling factor used to reduce aggregation tile size; using a larger tileScale (e.g. 2 or 4) may enable computations that run out of memory with the default. Defaults to 1.0.</p></td>
        <td><code>1.0</code></td>
      </tr>
      <tr>
        <td><code>verbose</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to print descriptive text when the programming is running. Default to True.</p></td>
        <td><code>True</code></td>
      </tr>
      <tr>
        <td><code>return_fc</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to return the results as an ee.FeatureCollection. Defaults to False.</p></td>
        <td><code>False</code></td>
      </tr>
      <tr>
        <td><code>timeout</code></td>
        <td><code>int</code></td>
        <td><p>Timeout in seconds. Defaults to 300.</p></td>
        <td><code>300</code></td>
      </tr>
      <tr>
        <td><code>proxies</code></td>
        <td><code>dict</code></td>
        <td><p>A dictionary of proxies to use. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">zonal_stats_by_group</span><span class="p">(</span>
    <span class="n">in_value_raster</span><span class="p">,</span>
    <span class="n">in_zone_vector</span><span class="p">,</span>
    <span class="n">out_file_path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">statistics_type</span><span class="o">=</span><span class="s2">&quot;SUM&quot;</span><span class="p">,</span>
    <span class="n">decimal_places</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
    <span class="n">denominator</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
    <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">crs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">tile_scale</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
    <span class="n">return_fc</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">timeout</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span>
    <span class="n">proxies</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Summarizes the area or percentage of a raster by group within the zones of another dataset and exports the results as a csv, shp, json, kml, or kmz.</span>

<span class="sd">    Args:</span>
<span class="sd">        in_value_raster (object): An integer Image that contains the values on which to calculate area/percentage.</span>
<span class="sd">        in_zone_vector (object): An ee.FeatureCollection that defines the zones.</span>
<span class="sd">        out_file_path (str): Output file path that will contain the summary of the values in each zone. The file type can be: csv, shp, json, kml, kmz</span>
<span class="sd">        statistics_type (str, optional): Can be either &#39;SUM&#39; or &#39;PERCENTAGE&#39; . Defaults to &#39;SUM&#39;.</span>
<span class="sd">        decimal_places (int, optional): The number of decimal places to use. Defaults to 0.</span>
<span class="sd">        denominator (float, optional): To convert area units (e.g., from square meters to square kilometers). Defaults to 1.0.</span>
<span class="sd">        scale (float, optional): A nominal scale in meters of the projection to work in. Defaults to None.</span>
<span class="sd">        crs (str, optional): The projection to work in. If unspecified, the projection of the image&#39;s first band is used. If specified in addition to scale, rescaled to the specified scale. Defaults to None.</span>
<span class="sd">        tile_scale (float, optional): A scaling factor used to reduce aggregation tile size; using a larger tileScale (e.g. 2 or 4) may enable computations that run out of memory with the default. Defaults to 1.0.</span>
<span class="sd">        verbose (bool, optional): Whether to print descriptive text when the programming is running. Default to True.</span>
<span class="sd">        return_fc (bool, optional): Whether to return the results as an ee.FeatureCollection. Defaults to False.</span>
<span class="sd">        timeout (int, optional): Timeout in seconds. Defaults to 300.</span>
<span class="sd">        proxies (dict, optional): A dictionary of proxies to use. Defaults to None.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">in_value_raster</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">):</span>
        <span class="n">in_value_raster</span> <span class="o">=</span> <span class="n">in_value_raster</span><span class="o">.</span><span class="n">toBands</span><span class="p">()</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">in_value_raster</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The input raster must be an ee.Image.&quot;</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="n">out_file_path</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">out_file_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">(),</span> <span class="s2">&quot;zonal_stats_by_group.csv&quot;</span><span class="p">)</span>

    <span class="n">band_count</span> <span class="o">=</span> <span class="n">in_value_raster</span><span class="o">.</span><span class="n">bandNames</span><span class="p">()</span><span class="o">.</span><span class="n">size</span><span class="p">()</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()</span>

    <span class="n">band_name</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="k">if</span> <span class="n">band_count</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">band_name</span> <span class="o">=</span> <span class="n">in_value_raster</span><span class="o">.</span><span class="n">bandNames</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The input image can only have one band.&quot;</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="n">band_types</span> <span class="o">=</span> <span class="n">in_value_raster</span><span class="o">.</span><span class="n">bandTypes</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">band_name</span><span class="p">)</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()</span>
    <span class="n">band_type</span> <span class="o">=</span> <span class="n">band_types</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;precision&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">band_type</span> <span class="o">!=</span> <span class="s2">&quot;int&quot;</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The input image band must be integer type.&quot;</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">in_zone_vector</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The input zone data must be an ee.FeatureCollection.&quot;</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="n">allowed_formats</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;csv&quot;</span><span class="p">,</span> <span class="s2">&quot;geojson&quot;</span><span class="p">,</span> <span class="s2">&quot;kml&quot;</span><span class="p">,</span> <span class="s2">&quot;kmz&quot;</span><span class="p">,</span> <span class="s2">&quot;shp&quot;</span><span class="p">]</span>
    <span class="n">filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">out_file_path</span><span class="p">)</span>
    <span class="n">basename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
    <span class="c1"># name = os.path.splitext(basename)[0]</span>
    <span class="n">filetype</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">basename</span><span class="p">)[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">:]</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">filetype</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="n">allowed_formats</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span>
            <span class="s2">&quot;The file type must be one of the following: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">allowed_formats</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="k">return</span>

    <span class="n">out_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">out_dir</span><span class="p">):</span>
        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">out_dir</span><span class="p">)</span>

    <span class="n">allowed_statistics</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;SUM&quot;</span><span class="p">,</span> <span class="s2">&quot;PERCENTAGE&quot;</span><span class="p">]</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">statistics_type</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="ow">in</span> <span class="n">allowed_statistics</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span>
            <span class="s2">&quot;The statistics type can only be one of </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">allowed_statistics</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="n">scale</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">scale</span> <span class="o">=</span> <span class="n">in_value_raster</span><span class="o">.</span><span class="n">projection</span><span class="p">()</span><span class="o">.</span><span class="n">nominalScale</span><span class="p">()</span><span class="o">.</span><span class="n">multiply</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>

        <span class="k">if</span> <span class="n">verbose</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Computing ... &quot;</span><span class="p">)</span>
        <span class="n">geometry</span> <span class="o">=</span> <span class="n">in_zone_vector</span><span class="o">.</span><span class="n">geometry</span><span class="p">()</span>

        <span class="n">hist</span> <span class="o">=</span> <span class="n">in_value_raster</span><span class="o">.</span><span class="n">reduceRegion</span><span class="p">(</span>
            <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">frequencyHistogram</span><span class="p">(),</span>
            <span class="n">geometry</span><span class="o">=</span><span class="n">geometry</span><span class="p">,</span>
            <span class="n">bestEffort</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">scale</span><span class="o">=</span><span class="n">scale</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">class_values</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">ee</span><span class="o">.</span><span class="n">Dictionary</span><span class="p">(</span><span class="n">hist</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">band_name</span><span class="p">))</span>
            <span class="o">.</span><span class="n">keys</span><span class="p">()</span>
            <span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Number</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">v</span><span class="p">))</span>
            <span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="p">)</span>

        <span class="n">class_names</span> <span class="o">=</span> <span class="n">class_values</span><span class="o">.</span><span class="n">map</span><span class="p">(</span>
            <span class="k">lambda</span> <span class="n">c</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="s2">&quot;Class_&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">cat</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">Number</span><span class="p">(</span><span class="n">c</span><span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">())</span>
        <span class="p">)</span>

        <span class="c1"># class_count = class_values.size().getInfo()</span>
        <span class="n">dataset</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="o">.</span><span class="n">pixelArea</span><span class="p">()</span><span class="o">.</span><span class="n">divide</span><span class="p">(</span><span class="n">denominator</span><span class="p">)</span><span class="o">.</span><span class="n">addBands</span><span class="p">(</span><span class="n">in_value_raster</span><span class="p">)</span>

        <span class="n">init_result</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">reduceRegions</span><span class="p">(</span>
            <span class="o">**</span><span class="p">{</span>
                <span class="s2">&quot;collection&quot;</span><span class="p">:</span> <span class="n">in_zone_vector</span><span class="p">,</span>
                <span class="s2">&quot;reducer&quot;</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">group</span><span class="p">(</span>
                    <span class="o">**</span><span class="p">{</span>
                        <span class="s2">&quot;groupField&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                        <span class="s2">&quot;groupName&quot;</span><span class="p">:</span> <span class="s2">&quot;group&quot;</span><span class="p">,</span>
                    <span class="p">}</span>
                <span class="p">),</span>
                <span class="s2">&quot;scale&quot;</span><span class="p">:</span> <span class="n">scale</span><span class="p">,</span>
            <span class="p">}</span>
        <span class="p">)</span>

        <span class="c1"># def build_dict(input_list):</span>

        <span class="c1">#     decimal_format = &#39;%.{}f&#39;.format(decimal_places)</span>
        <span class="c1">#     in_dict = input_list.map(lambda x: ee.Dictionary().set(ee.String(&#39;Class_&#39;).cat(</span>
        <span class="c1">#         ee.Number(ee.Dictionary(x).get(&#39;group&#39;)).format()), ee.Number.parse(ee.Number(ee.Dictionary(x).get(&#39;sum&#39;)).format(decimal_format))))</span>
        <span class="c1">#     return in_dict</span>

        <span class="k">def</span> <span class="nf">get_keys</span><span class="p">(</span><span class="n">input_list</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">input_list</span><span class="o">.</span><span class="n">map</span><span class="p">(</span>
                <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="s2">&quot;Class_&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">cat</span><span class="p">(</span>
                    <span class="n">ee</span><span class="o">.</span><span class="n">Number</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">Dictionary</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;group&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">format</span><span class="p">()</span>
                <span class="p">)</span>
            <span class="p">)</span>

        <span class="k">def</span> <span class="nf">get_values</span><span class="p">(</span><span class="n">input_list</span><span class="p">):</span>
            <span class="n">decimal_format</span> <span class="o">=</span> <span class="s2">&quot;%.</span><span class="si">{}</span><span class="s2">f&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">decimal_places</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">input_list</span><span class="o">.</span><span class="n">map</span><span class="p">(</span>
                <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Number</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span>
                    <span class="n">ee</span><span class="o">.</span><span class="n">Number</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">Dictionary</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;sum&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">decimal_format</span><span class="p">)</span>
                <span class="p">)</span>
            <span class="p">)</span>

        <span class="k">def</span> <span class="nf">set_attribute</span><span class="p">(</span><span class="n">f</span><span class="p">):</span>
            <span class="n">groups</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">List</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;groups&quot;</span><span class="p">))</span>
            <span class="n">keys</span> <span class="o">=</span> <span class="n">get_keys</span><span class="p">(</span><span class="n">groups</span><span class="p">)</span>
            <span class="n">values</span> <span class="o">=</span> <span class="n">get_values</span><span class="p">(</span><span class="n">groups</span><span class="p">)</span>
            <span class="n">total_area</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">List</span><span class="p">(</span><span class="n">values</span><span class="p">)</span><span class="o">.</span><span class="n">reduce</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">sum</span><span class="p">())</span>

            <span class="k">def</span> <span class="nf">get_class_values</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
                <span class="n">cls_value</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Algorithms</span><span class="o">.</span><span class="n">If</span><span class="p">(</span>
                    <span class="n">keys</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="n">values</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">keys</span><span class="o">.</span><span class="n">indexOf</span><span class="p">(</span><span class="n">x</span><span class="p">)),</span> <span class="mi">0</span>
                <span class="p">)</span>
                <span class="n">cls_value</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Algorithms</span><span class="o">.</span><span class="n">If</span><span class="p">(</span>
                    <span class="n">ee</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="n">statistics_type</span><span class="p">)</span><span class="o">.</span><span class="n">compareTo</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="s2">&quot;SUM&quot;</span><span class="p">)),</span>
                    <span class="n">ee</span><span class="o">.</span><span class="n">Number</span><span class="p">(</span><span class="n">cls_value</span><span class="p">)</span><span class="o">.</span><span class="n">divide</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">Number</span><span class="p">(</span><span class="n">total_area</span><span class="p">)),</span>
                    <span class="n">cls_value</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="k">return</span> <span class="n">cls_value</span>

            <span class="n">full_values</span> <span class="o">=</span> <span class="n">class_names</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">get_class_values</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
            <span class="n">attr_dict</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Dictionary</span><span class="o">.</span><span class="n">fromLists</span><span class="p">(</span><span class="n">class_names</span><span class="p">,</span> <span class="n">full_values</span><span class="p">)</span>
            <span class="n">attr_dict</span> <span class="o">=</span> <span class="n">attr_dict</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;Class_sum&quot;</span><span class="p">,</span> <span class="n">total_area</span><span class="p">)</span>

            <span class="k">return</span> <span class="n">f</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">attr_dict</span><span class="p">)</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;groups&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

        <span class="n">final_result</span> <span class="o">=</span> <span class="n">init_result</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">set_attribute</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">return_fc</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">final_result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">ee_export_vector</span><span class="p">(</span><span class="n">final_result</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span> <span class="n">proxies</span><span class="o">=</span><span class="n">proxies</span><span class="p">)</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.zonal_stats" class="doc doc-heading">
<code class="highlight language-python"><span class="n">zonal_stats</span><span class="p">(</span><span class="n">in_value_raster</span><span class="p">,</span> <span class="n">in_zone_vector</span><span class="p">,</span> <span class="n">out_file_path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">statistics_type</span><span class="o">=</span><span class="s1">&#39;MEAN&#39;</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">crs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">tile_scale</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">return_fc</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="n">proxies</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.common.zonal_stats" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Summarizes the values of a raster within the zones of another dataset and exports the results as a csv, shp, json, kml, or kmz.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>in_value_raster</code></td>
        <td><code>object</code></td>
        <td><p>An ee.Image or ee.ImageCollection that contains the values on which to calculate a statistic.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>in_zone_vector</code></td>
        <td><code>object</code></td>
        <td><p>An ee.FeatureCollection that defines the zones.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>out_file_path</code></td>
        <td><code>str</code></td>
        <td><p>Output file path that will contain the summary of the values in each zone. The file type can be: csv, shp, json, kml, kmz</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>statistics_type</code></td>
        <td><code>str</code></td>
        <td><p>Statistic type to be calculated. Defaults to 'MEAN'. For 'HIST', you can provide three parameters: max_buckets, min_bucket_width, and max_raw. For 'FIXED_HIST', you must provide three parameters: hist_min, hist_max, and hist_steps.</p></td>
        <td><code>&#39;MEAN&#39;</code></td>
      </tr>
      <tr>
        <td><code>scale</code></td>
        <td><code>float</code></td>
        <td><p>A nominal scale in meters of the projection to work in. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>crs</code></td>
        <td><code>str</code></td>
        <td><p>The projection to work in. If unspecified, the projection of the image's first band is used. If specified in addition to scale, rescaled to the specified scale. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>tile_scale</code></td>
        <td><code>float</code></td>
        <td><p>A scaling factor used to reduce aggregation tile size; using a larger tileScale (e.g. 2 or 4) may enable computations that run out of memory with the default. Defaults to 1.0.</p></td>
        <td><code>1.0</code></td>
      </tr>
      <tr>
        <td><code>verbose</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to print descriptive text when the programming is running. Default to True.</p></td>
        <td><code>True</code></td>
      </tr>
      <tr>
        <td><code>return_fc</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to return the results as an ee.FeatureCollection. Defaults to False.</p></td>
        <td><code>False</code></td>
      </tr>
      <tr>
        <td><code>timeout</code></td>
        <td><code>int</code></td>
        <td><p>Timeout in seconds. Default to 300.</p></td>
        <td><code>300</code></td>
      </tr>
      <tr>
        <td><code>proxies</code></td>
        <td><code>dict</code></td>
        <td><p>A dictionary of proxy servers to use for the request. Default to None.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">zonal_stats</span><span class="p">(</span>
    <span class="n">in_value_raster</span><span class="p">,</span>
    <span class="n">in_zone_vector</span><span class="p">,</span>
    <span class="n">out_file_path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">statistics_type</span><span class="o">=</span><span class="s2">&quot;MEAN&quot;</span><span class="p">,</span>
    <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">crs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">tile_scale</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
    <span class="n">return_fc</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">timeout</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span>
    <span class="n">proxies</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Summarizes the values of a raster within the zones of another dataset and exports the results as a csv, shp, json, kml, or kmz.</span>

<span class="sd">    Args:</span>
<span class="sd">        in_value_raster (object): An ee.Image or ee.ImageCollection that contains the values on which to calculate a statistic.</span>
<span class="sd">        in_zone_vector (object): An ee.FeatureCollection that defines the zones.</span>
<span class="sd">        out_file_path (str): Output file path that will contain the summary of the values in each zone. The file type can be: csv, shp, json, kml, kmz</span>
<span class="sd">        statistics_type (str, optional): Statistic type to be calculated. Defaults to &#39;MEAN&#39;. For &#39;HIST&#39;, you can provide three parameters: max_buckets, min_bucket_width, and max_raw. For &#39;FIXED_HIST&#39;, you must provide three parameters: hist_min, hist_max, and hist_steps.</span>
<span class="sd">        scale (float, optional): A nominal scale in meters of the projection to work in. Defaults to None.</span>
<span class="sd">        crs (str, optional): The projection to work in. If unspecified, the projection of the image&#39;s first band is used. If specified in addition to scale, rescaled to the specified scale. Defaults to None.</span>
<span class="sd">        tile_scale (float, optional): A scaling factor used to reduce aggregation tile size; using a larger tileScale (e.g. 2 or 4) may enable computations that run out of memory with the default. Defaults to 1.0.</span>
<span class="sd">        verbose (bool, optional): Whether to print descriptive text when the programming is running. Default to True.</span>
<span class="sd">        return_fc (bool, optional): Whether to return the results as an ee.FeatureCollection. Defaults to False.</span>
<span class="sd">        timeout (int, optional): Timeout in seconds. Default to 300.</span>
<span class="sd">        proxies (dict, optional): A dictionary of proxy servers to use for the request. Default to None.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">in_value_raster</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">):</span>
        <span class="n">in_value_raster</span> <span class="o">=</span> <span class="n">in_value_raster</span><span class="o">.</span><span class="n">toBands</span><span class="p">()</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">in_value_raster</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The input raster must be an ee.Image.&quot;</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">in_zone_vector</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The input zone data must be an ee.FeatureCollection.&quot;</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="n">out_file_path</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">out_file_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">(),</span> <span class="s2">&quot;zonal_stats.csv&quot;</span><span class="p">)</span>

    <span class="n">allowed_formats</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;csv&quot;</span><span class="p">,</span> <span class="s2">&quot;geojson&quot;</span><span class="p">,</span> <span class="s2">&quot;kml&quot;</span><span class="p">,</span> <span class="s2">&quot;kmz&quot;</span><span class="p">,</span> <span class="s2">&quot;shp&quot;</span><span class="p">]</span>
    <span class="n">filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">out_file_path</span><span class="p">)</span>
    <span class="n">basename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
    <span class="c1"># name = os.path.splitext(basename)[0]</span>
    <span class="n">filetype</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">basename</span><span class="p">)[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">filetype</span> <span class="ow">in</span> <span class="n">allowed_formats</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span>
            <span class="s2">&quot;The file type must be one of the following: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">allowed_formats</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="k">return</span>

    <span class="c1"># Parameters for histogram</span>
    <span class="c1"># The maximum number of buckets to use when building a histogram; will be rounded up to a power of 2.</span>
    <span class="n">max_buckets</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="c1"># The minimum histogram bucket width, or null to allow any power of 2.</span>
    <span class="n">min_bucket_width</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="c1"># The number of values to accumulate before building the initial histogram.</span>
    <span class="n">max_raw</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">hist_min</span> <span class="o">=</span> <span class="mf">1.0</span>  <span class="c1"># The lower (inclusive) bound of the first bucket.</span>
    <span class="n">hist_max</span> <span class="o">=</span> <span class="mf">100.0</span>  <span class="c1"># The upper (exclusive) bound of the last bucket.</span>
    <span class="n">hist_steps</span> <span class="o">=</span> <span class="mi">10</span>  <span class="c1"># The number of buckets to use.</span>

    <span class="k">if</span> <span class="s2">&quot;max_buckets&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="n">max_buckets</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;max_buckets&quot;</span><span class="p">]</span>
    <span class="k">if</span> <span class="s2">&quot;min_bucket_width&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="n">min_bucket_width</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;min_bucket&quot;</span><span class="p">]</span>
    <span class="k">if</span> <span class="s2">&quot;max_raw&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="n">max_raw</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;max_raw&quot;</span><span class="p">]</span>

    <span class="k">if</span> <span class="p">(</span>
        <span class="n">statistics_type</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;FIXED_HIST&quot;</span>
        <span class="ow">and</span> <span class="p">(</span><span class="s2">&quot;hist_min&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
        <span class="ow">and</span> <span class="p">(</span><span class="s2">&quot;hist_max&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
        <span class="ow">and</span> <span class="p">(</span><span class="s2">&quot;hist_steps&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
    <span class="p">):</span>
        <span class="n">hist_min</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;hist_min&quot;</span><span class="p">]</span>
        <span class="n">hist_max</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;hist_max&quot;</span><span class="p">]</span>
        <span class="n">hist_steps</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;hist_steps&quot;</span><span class="p">]</span>
    <span class="k">elif</span> <span class="n">statistics_type</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;FIXED_HIST&quot;</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span>
            <span class="s2">&quot;To use fixedHistogram, please provide these three parameters: hist_min, hist_max, and hist_steps.&quot;</span>
        <span class="p">)</span>
        <span class="k">return</span>

    <span class="n">allowed_statistics</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;COUNT&quot;</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">count</span><span class="p">(),</span>
        <span class="s2">&quot;MEAN&quot;</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">mean</span><span class="p">(),</span>
        <span class="s2">&quot;MEAN_UNWEIGHTED&quot;</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="o">.</span><span class="n">unweighted</span><span class="p">(),</span>
        <span class="s2">&quot;MAXIMUM&quot;</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">max</span><span class="p">(),</span>
        <span class="s2">&quot;MEDIAN&quot;</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">median</span><span class="p">(),</span>
        <span class="s2">&quot;MINIMUM&quot;</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span>
        <span class="s2">&quot;MODE&quot;</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">mode</span><span class="p">(),</span>
        <span class="s2">&quot;STD&quot;</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">stdDev</span><span class="p">(),</span>
        <span class="s2">&quot;MIN_MAX&quot;</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">minMax</span><span class="p">(),</span>
        <span class="s2">&quot;SUM&quot;</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">sum</span><span class="p">(),</span>
        <span class="s2">&quot;VARIANCE&quot;</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">variance</span><span class="p">(),</span>
        <span class="s2">&quot;HIST&quot;</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">histogram</span><span class="p">(</span>
            <span class="n">maxBuckets</span><span class="o">=</span><span class="n">max_buckets</span><span class="p">,</span> <span class="n">minBucketWidth</span><span class="o">=</span><span class="n">min_bucket_width</span><span class="p">,</span> <span class="n">maxRaw</span><span class="o">=</span><span class="n">max_raw</span>
        <span class="p">),</span>
        <span class="s2">&quot;FIXED_HIST&quot;</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">fixedHistogram</span><span class="p">(</span><span class="n">hist_min</span><span class="p">,</span> <span class="n">hist_max</span><span class="p">,</span> <span class="n">hist_steps</span><span class="p">),</span>
        <span class="s2">&quot;COMBINED_COUNT_MEAN&quot;</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">count</span><span class="p">()</span><span class="o">.</span><span class="n">combine</span><span class="p">(</span>
            <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">mean</span><span class="p">(),</span> <span class="n">sharedInputs</span><span class="o">=</span><span class="kc">True</span>
        <span class="p">),</span>
        <span class="s2">&quot;COMBINED_COUNT_MEAN_UNWEIGHTED&quot;</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">count</span><span class="p">()</span><span class="o">.</span><span class="n">combine</span><span class="p">(</span>
            <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="o">.</span><span class="n">unweighted</span><span class="p">(),</span> <span class="n">sharedInputs</span><span class="o">=</span><span class="kc">True</span>
        <span class="p">),</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">statistics_type</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="ow">in</span> <span class="n">allowed_statistics</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
        <span class="nb">print</span><span class="p">(</span>
            <span class="s2">&quot;The statistics type must be one of the following: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">allowed_statistics</span><span class="o">.</span><span class="n">keys</span><span class="p">()))</span>
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="n">scale</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">scale</span> <span class="o">=</span> <span class="n">in_value_raster</span><span class="o">.</span><span class="n">projection</span><span class="p">()</span><span class="o">.</span><span class="n">nominalScale</span><span class="p">()</span><span class="o">.</span><span class="n">multiply</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">verbose</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Computing statistics ...&quot;</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">in_value_raster</span><span class="o">.</span><span class="n">reduceRegions</span><span class="p">(</span>
            <span class="n">collection</span><span class="o">=</span><span class="n">in_zone_vector</span><span class="p">,</span>
            <span class="n">reducer</span><span class="o">=</span><span class="n">allowed_statistics</span><span class="p">[</span><span class="n">statistics_type</span><span class="p">],</span>
            <span class="n">scale</span><span class="o">=</span><span class="n">scale</span><span class="p">,</span>
            <span class="n">crs</span><span class="o">=</span><span class="n">crs</span><span class="p">,</span>
            <span class="n">tileScale</span><span class="o">=</span><span class="n">tile_scale</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">return_fc</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">ee_export_vector</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span> <span class="n">proxies</span><span class="o">=</span><span class="n">proxies</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.common.zonal_stats_by_group" class="doc doc-heading">
<code class="highlight language-python"><span class="n">zonal_stats_by_group</span><span class="p">(</span><span class="n">in_value_raster</span><span class="p">,</span> <span class="n">in_zone_vector</span><span class="p">,</span> <span class="n">out_file_path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">statistics_type</span><span class="o">=</span><span class="s1">&#39;SUM&#39;</span><span class="p">,</span> <span class="n">decimal_places</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">denominator</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">crs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">tile_scale</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">return_fc</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="n">proxies</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.common.zonal_stats_by_group" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Summarizes the area or percentage of a raster by group within the zones of another dataset and exports the results as a csv, shp, json, kml, or kmz.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>in_value_raster</code></td>
        <td><code>object</code></td>
        <td><p>An integer Image that contains the values on which to calculate area/percentage.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>in_zone_vector</code></td>
        <td><code>object</code></td>
        <td><p>An ee.FeatureCollection that defines the zones.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>out_file_path</code></td>
        <td><code>str</code></td>
        <td><p>Output file path that will contain the summary of the values in each zone. The file type can be: csv, shp, json, kml, kmz</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>statistics_type</code></td>
        <td><code>str</code></td>
        <td><p>Can be either 'SUM' or 'PERCENTAGE' . Defaults to 'SUM'.</p></td>
        <td><code>&#39;SUM&#39;</code></td>
      </tr>
      <tr>
        <td><code>decimal_places</code></td>
        <td><code>int</code></td>
        <td><p>The number of decimal places to use. Defaults to 0.</p></td>
        <td><code>0</code></td>
      </tr>
      <tr>
        <td><code>denominator</code></td>
        <td><code>float</code></td>
        <td><p>To convert area units (e.g., from square meters to square kilometers). Defaults to 1.0.</p></td>
        <td><code>1.0</code></td>
      </tr>
      <tr>
        <td><code>scale</code></td>
        <td><code>float</code></td>
        <td><p>A nominal scale in meters of the projection to work in. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>crs</code></td>
        <td><code>str</code></td>
        <td><p>The projection to work in. If unspecified, the projection of the image's first band is used. If specified in addition to scale, rescaled to the specified scale. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>tile_scale</code></td>
        <td><code>float</code></td>
        <td><p>A scaling factor used to reduce aggregation tile size; using a larger tileScale (e.g. 2 or 4) may enable computations that run out of memory with the default. Defaults to 1.0.</p></td>
        <td><code>1.0</code></td>
      </tr>
      <tr>
        <td><code>verbose</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to print descriptive text when the programming is running. Default to True.</p></td>
        <td><code>True</code></td>
      </tr>
      <tr>
        <td><code>return_fc</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to return the results as an ee.FeatureCollection. Defaults to False.</p></td>
        <td><code>False</code></td>
      </tr>
      <tr>
        <td><code>timeout</code></td>
        <td><code>int</code></td>
        <td><p>Timeout in seconds. Defaults to 300.</p></td>
        <td><code>300</code></td>
      </tr>
      <tr>
        <td><code>proxies</code></td>
        <td><code>dict</code></td>
        <td><p>A dictionary of proxies to use. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/common.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">zonal_stats_by_group</span><span class="p">(</span>
    <span class="n">in_value_raster</span><span class="p">,</span>
    <span class="n">in_zone_vector</span><span class="p">,</span>
    <span class="n">out_file_path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">statistics_type</span><span class="o">=</span><span class="s2">&quot;SUM&quot;</span><span class="p">,</span>
    <span class="n">decimal_places</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
    <span class="n">denominator</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
    <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">crs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">tile_scale</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
    <span class="n">return_fc</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">timeout</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span>
    <span class="n">proxies</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Summarizes the area or percentage of a raster by group within the zones of another dataset and exports the results as a csv, shp, json, kml, or kmz.</span>

<span class="sd">    Args:</span>
<span class="sd">        in_value_raster (object): An integer Image that contains the values on which to calculate area/percentage.</span>
<span class="sd">        in_zone_vector (object): An ee.FeatureCollection that defines the zones.</span>
<span class="sd">        out_file_path (str): Output file path that will contain the summary of the values in each zone. The file type can be: csv, shp, json, kml, kmz</span>
<span class="sd">        statistics_type (str, optional): Can be either &#39;SUM&#39; or &#39;PERCENTAGE&#39; . Defaults to &#39;SUM&#39;.</span>
<span class="sd">        decimal_places (int, optional): The number of decimal places to use. Defaults to 0.</span>
<span class="sd">        denominator (float, optional): To convert area units (e.g., from square meters to square kilometers). Defaults to 1.0.</span>
<span class="sd">        scale (float, optional): A nominal scale in meters of the projection to work in. Defaults to None.</span>
<span class="sd">        crs (str, optional): The projection to work in. If unspecified, the projection of the image&#39;s first band is used. If specified in addition to scale, rescaled to the specified scale. Defaults to None.</span>
<span class="sd">        tile_scale (float, optional): A scaling factor used to reduce aggregation tile size; using a larger tileScale (e.g. 2 or 4) may enable computations that run out of memory with the default. Defaults to 1.0.</span>
<span class="sd">        verbose (bool, optional): Whether to print descriptive text when the programming is running. Default to True.</span>
<span class="sd">        return_fc (bool, optional): Whether to return the results as an ee.FeatureCollection. Defaults to False.</span>
<span class="sd">        timeout (int, optional): Timeout in seconds. Defaults to 300.</span>
<span class="sd">        proxies (dict, optional): A dictionary of proxies to use. Defaults to None.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">in_value_raster</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">):</span>
        <span class="n">in_value_raster</span> <span class="o">=</span> <span class="n">in_value_raster</span><span class="o">.</span><span class="n">toBands</span><span class="p">()</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">in_value_raster</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The input raster must be an ee.Image.&quot;</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="n">out_file_path</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">out_file_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">(),</span> <span class="s2">&quot;zonal_stats_by_group.csv&quot;</span><span class="p">)</span>

    <span class="n">band_count</span> <span class="o">=</span> <span class="n">in_value_raster</span><span class="o">.</span><span class="n">bandNames</span><span class="p">()</span><span class="o">.</span><span class="n">size</span><span class="p">()</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()</span>

    <span class="n">band_name</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="k">if</span> <span class="n">band_count</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">band_name</span> <span class="o">=</span> <span class="n">in_value_raster</span><span class="o">.</span><span class="n">bandNames</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The input image can only have one band.&quot;</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="n">band_types</span> <span class="o">=</span> <span class="n">in_value_raster</span><span class="o">.</span><span class="n">bandTypes</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">band_name</span><span class="p">)</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()</span>
    <span class="n">band_type</span> <span class="o">=</span> <span class="n">band_types</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;precision&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">band_type</span> <span class="o">!=</span> <span class="s2">&quot;int&quot;</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The input image band must be integer type.&quot;</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">in_zone_vector</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The input zone data must be an ee.FeatureCollection.&quot;</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="n">allowed_formats</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;csv&quot;</span><span class="p">,</span> <span class="s2">&quot;geojson&quot;</span><span class="p">,</span> <span class="s2">&quot;kml&quot;</span><span class="p">,</span> <span class="s2">&quot;kmz&quot;</span><span class="p">,</span> <span class="s2">&quot;shp&quot;</span><span class="p">]</span>
    <span class="n">filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">out_file_path</span><span class="p">)</span>
    <span class="n">basename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
    <span class="c1"># name = os.path.splitext(basename)[0]</span>
    <span class="n">filetype</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">basename</span><span class="p">)[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">:]</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">filetype</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="n">allowed_formats</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span>
            <span class="s2">&quot;The file type must be one of the following: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">allowed_formats</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="k">return</span>

    <span class="n">out_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">out_dir</span><span class="p">):</span>
        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">out_dir</span><span class="p">)</span>

    <span class="n">allowed_statistics</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;SUM&quot;</span><span class="p">,</span> <span class="s2">&quot;PERCENTAGE&quot;</span><span class="p">]</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">statistics_type</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="ow">in</span> <span class="n">allowed_statistics</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span>
            <span class="s2">&quot;The statistics type can only be one of </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">allowed_statistics</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="n">scale</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">scale</span> <span class="o">=</span> <span class="n">in_value_raster</span><span class="o">.</span><span class="n">projection</span><span class="p">()</span><span class="o">.</span><span class="n">nominalScale</span><span class="p">()</span><span class="o">.</span><span class="n">multiply</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>

        <span class="k">if</span> <span class="n">verbose</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Computing ... &quot;</span><span class="p">)</span>
        <span class="n">geometry</span> <span class="o">=</span> <span class="n">in_zone_vector</span><span class="o">.</span><span class="n">geometry</span><span class="p">()</span>

        <span class="n">hist</span> <span class="o">=</span> <span class="n">in_value_raster</span><span class="o">.</span><span class="n">reduceRegion</span><span class="p">(</span>
            <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">frequencyHistogram</span><span class="p">(),</span>
            <span class="n">geometry</span><span class="o">=</span><span class="n">geometry</span><span class="p">,</span>
            <span class="n">bestEffort</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">scale</span><span class="o">=</span><span class="n">scale</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">class_values</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">ee</span><span class="o">.</span><span class="n">Dictionary</span><span class="p">(</span><span class="n">hist</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">band_name</span><span class="p">))</span>
            <span class="o">.</span><span class="n">keys</span><span class="p">()</span>
            <span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Number</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">v</span><span class="p">))</span>
            <span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="p">)</span>

        <span class="n">class_names</span> <span class="o">=</span> <span class="n">class_values</span><span class="o">.</span><span class="n">map</span><span class="p">(</span>
            <span class="k">lambda</span> <span class="n">c</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="s2">&quot;Class_&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">cat</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">Number</span><span class="p">(</span><span class="n">c</span><span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">())</span>
        <span class="p">)</span>

        <span class="c1"># class_count = class_values.size().getInfo()</span>
        <span class="n">dataset</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="o">.</span><span class="n">pixelArea</span><span class="p">()</span><span class="o">.</span><span class="n">divide</span><span class="p">(</span><span class="n">denominator</span><span class="p">)</span><span class="o">.</span><span class="n">addBands</span><span class="p">(</span><span class="n">in_value_raster</span><span class="p">)</span>

        <span class="n">init_result</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">reduceRegions</span><span class="p">(</span>
            <span class="o">**</span><span class="p">{</span>
                <span class="s2">&quot;collection&quot;</span><span class="p">:</span> <span class="n">in_zone_vector</span><span class="p">,</span>
                <span class="s2">&quot;reducer&quot;</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">group</span><span class="p">(</span>
                    <span class="o">**</span><span class="p">{</span>
                        <span class="s2">&quot;groupField&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                        <span class="s2">&quot;groupName&quot;</span><span class="p">:</span> <span class="s2">&quot;group&quot;</span><span class="p">,</span>
                    <span class="p">}</span>
                <span class="p">),</span>
                <span class="s2">&quot;scale&quot;</span><span class="p">:</span> <span class="n">scale</span><span class="p">,</span>
            <span class="p">}</span>
        <span class="p">)</span>

        <span class="c1"># def build_dict(input_list):</span>

        <span class="c1">#     decimal_format = &#39;%.{}f&#39;.format(decimal_places)</span>
        <span class="c1">#     in_dict = input_list.map(lambda x: ee.Dictionary().set(ee.String(&#39;Class_&#39;).cat(</span>
        <span class="c1">#         ee.Number(ee.Dictionary(x).get(&#39;group&#39;)).format()), ee.Number.parse(ee.Number(ee.Dictionary(x).get(&#39;sum&#39;)).format(decimal_format))))</span>
        <span class="c1">#     return in_dict</span>

        <span class="k">def</span> <span class="nf">get_keys</span><span class="p">(</span><span class="n">input_list</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">input_list</span><span class="o">.</span><span class="n">map</span><span class="p">(</span>
                <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="s2">&quot;Class_&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">cat</span><span class="p">(</span>
                    <span class="n">ee</span><span class="o">.</span><span class="n">Number</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">Dictionary</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;group&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">format</span><span class="p">()</span>
                <span class="p">)</span>
            <span class="p">)</span>

        <span class="k">def</span> <span class="nf">get_values</span><span class="p">(</span><span class="n">input_list</span><span class="p">):</span>
            <span class="n">decimal_format</span> <span class="o">=</span> <span class="s2">&quot;%.</span><span class="si">{}</span><span class="s2">f&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">decimal_places</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">input_list</span><span class="o">.</span><span class="n">map</span><span class="p">(</span>
                <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Number</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span>
                    <span class="n">ee</span><span class="o">.</span><span class="n">Number</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">Dictionary</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;sum&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">decimal_format</span><span class="p">)</span>
                <span class="p">)</span>
            <span class="p">)</span>

        <span class="k">def</span> <span class="nf">set_attribute</span><span class="p">(</span><span class="n">f</span><span class="p">):</span>
            <span class="n">groups</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">List</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;groups&quot;</span><span class="p">))</span>
            <span class="n">keys</span> <span class="o">=</span> <span class="n">get_keys</span><span class="p">(</span><span class="n">groups</span><span class="p">)</span>
            <span class="n">values</span> <span class="o">=</span> <span class="n">get_values</span><span class="p">(</span><span class="n">groups</span><span class="p">)</span>
            <span class="n">total_area</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">List</span><span class="p">(</span><span class="n">values</span><span class="p">)</span><span class="o">.</span><span class="n">reduce</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">sum</span><span class="p">())</span>

            <span class="k">def</span> <span class="nf">get_class_values</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
                <span class="n">cls_value</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Algorithms</span><span class="o">.</span><span class="n">If</span><span class="p">(</span>
                    <span class="n">keys</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="n">values</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">keys</span><span class="o">.</span><span class="n">indexOf</span><span class="p">(</span><span class="n">x</span><span class="p">)),</span> <span class="mi">0</span>
                <span class="p">)</span>
                <span class="n">cls_value</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Algorithms</span><span class="o">.</span><span class="n">If</span><span class="p">(</span>
                    <span class="n">ee</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="n">statistics_type</span><span class="p">)</span><span class="o">.</span><span class="n">compareTo</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="s2">&quot;SUM&quot;</span><span class="p">)),</span>
                    <span class="n">ee</span><span class="o">.</span><span class="n">Number</span><span class="p">(</span><span class="n">cls_value</span><span class="p">)</span><span class="o">.</span><span class="n">divide</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">Number</span><span class="p">(</span><span class="n">total_area</span><span class="p">)),</span>
                    <span class="n">cls_value</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="k">return</span> <span class="n">cls_value</span>

            <span class="n">full_values</span> <span class="o">=</span> <span class="n">class_names</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">get_class_values</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
            <span class="n">attr_dict</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Dictionary</span><span class="o">.</span><span class="n">fromLists</span><span class="p">(</span><span class="n">class_names</span><span class="p">,</span> <span class="n">full_values</span><span class="p">)</span>
            <span class="n">attr_dict</span> <span class="o">=</span> <span class="n">attr_dict</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;Class_sum&quot;</span><span class="p">,</span> <span class="n">total_area</span><span class="p">)</span>

            <span class="k">return</span> <span class="n">f</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">attr_dict</span><span class="p">)</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;groups&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

        <span class="n">final_result</span> <span class="o">=</span> <span class="n">init_result</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">set_attribute</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">return_fc</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">final_result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">ee_export_vector</span><span class="p">(</span><span class="n">final_result</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span> <span class="n">proxies</span><span class="o">=</span><span class="n">proxies</span><span class="p">)</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>






  </div>

    </div>

  </div>

  <hr>
<div class="md-source-file">
  <small>
    
      Last update:
      <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago"><span class="timeago" datetime="2020-11-01T20:25:43+00:00" locale="en"></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date">2020-11-01</span>
      
        <br>
        Created:
        <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago"><span class="timeago" datetime="2020-11-01T20:25:43+00:00" locale="en"></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date">2020-11-01</span>
      
    
  </small>
</div>


  




                

              </article>
            </div>
          
          
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            Back to top
          </a>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../colormaps/" class="md-footer__link md-footer__link--prev" aria-label="Previous: colormaps module" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              colormaps module
            </div>
          </div>
        </a>
      
      
        
        <a href="../conversion/" class="md-footer__link md-footer__link--next" aria-label="Next: conversion module" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              conversion module
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2022 - 2023 Qiusheng Wu
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
      
      
    
    <a href="https://github.com/giswqs" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
    
    
      
      
    
    <a href="https://medium.com/@giswqs" target="_blank" rel="noopener" title="medium.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M180.5 74.262C80.813 74.262 0 155.633 0 256s80.819 181.738 180.5 181.738S361 356.373 361 256 280.191 74.262 180.5 74.262Zm288.25 10.646c-49.845 0-90.245 76.619-90.245 171.095s40.406 171.1 90.251 171.1 90.251-76.619 90.251-171.1H559c0-94.503-40.4-171.095-90.248-171.095Zm139.506 17.821c-17.526 0-31.735 68.628-31.735 153.274s14.2 153.274 31.735 153.274S640 340.631 640 256c0-84.649-14.215-153.271-31.742-153.271Z"/></svg>
    </a>
  
    
    
      
      
    
    <a href="https://twitter.com/giswqs" target="_blank" rel="noopener" title="twitter.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
    </a>
  
    
    
      
      
    
    <a href="https://www.linkedin.com/in/qiushengwu" target="_blank" rel="noopener" title="www.linkedin.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg>
    </a>
  
    
    
      
      
    
    <a href="https://youtube.com/@giswqs" target="_blank" rel="noopener" title="youtube.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.instant", "navigation.tracking", "navigation.top", "search.highlight", "search.share"], "search": "../assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.5a2dcb6a.min.js"></script>
      
        <script src="../js/timeago.min.js"></script>
      
        <script src="../js/timeago_mkdocs_material.js"></script>
      
    
    
  </body>
</html>